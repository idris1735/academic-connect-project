"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@daily-co";
exports.ids = ["vendor-chunks/@daily-co"];
exports.modules = {

/***/ "(ssr)/./node_modules/@daily-co/daily-js/dist/daily-esm.js":
/*!***********************************************************!*\
  !*** ./node_modules/@daily-co/daily-js/dist/daily-esm.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DAILY_ACCESS_LEVEL_FULL: () => (/* binding */ hi),\n/* harmony export */   DAILY_ACCESS_LEVEL_LOBBY: () => (/* binding */ fi),\n/* harmony export */   DAILY_ACCESS_LEVEL_NONE: () => (/* binding */ vi),\n/* harmony export */   DAILY_ACCESS_UNKNOWN: () => (/* binding */ pi),\n/* harmony export */   DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE: () => (/* binding */ Ai),\n/* harmony export */   DAILY_CAMERA_ERROR_CAM_IN_USE: () => (/* binding */ Pi),\n/* harmony export */   DAILY_CAMERA_ERROR_CONSTRAINTS: () => (/* binding */ Ii),\n/* harmony export */   DAILY_CAMERA_ERROR_MIC_IN_USE: () => (/* binding */ Oi),\n/* harmony export */   DAILY_CAMERA_ERROR_NOT_FOUND: () => (/* binding */ Li),\n/* harmony export */   DAILY_CAMERA_ERROR_PERMISSIONS: () => (/* binding */ ji),\n/* harmony export */   DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES: () => (/* binding */ xi),\n/* harmony export */   DAILY_CAMERA_ERROR_UNKNOWN: () => (/* binding */ Di),\n/* harmony export */   DAILY_EVENT_ACCESS_STATE_UPDATED: () => (/* binding */ Yi),\n/* harmony export */   DAILY_EVENT_ACTIVE_SPEAKER_CHANGE: () => (/* binding */ Mo),\n/* harmony export */   DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE: () => (/* binding */ Co),\n/* harmony export */   DAILY_EVENT_APP_MSG: () => (/* binding */ mo),\n/* harmony export */   DAILY_EVENT_CAMERA_ERROR: () => (/* binding */ $i),\n/* harmony export */   DAILY_EVENT_CPU_LOAD_CHANGE: () => (/* binding */ Po),\n/* harmony export */   DAILY_EVENT_ERROR: () => (/* binding */ Uo),\n/* harmony export */   DAILY_EVENT_EXIT_FULLSCREEN: () => (/* binding */ jo),\n/* harmony export */   DAILY_EVENT_FACE_COUNTS_UPDATED: () => (/* binding */ Oo),\n/* harmony export */   DAILY_EVENT_FULLSCREEN: () => (/* binding */ Ao),\n/* harmony export */   DAILY_EVENT_IFRAME_LAUNCH_CONFIG: () => (/* binding */ Ri),\n/* harmony export */   DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG: () => (/* binding */ Ni),\n/* harmony export */   DAILY_EVENT_INPUT_SETTINGS_UPDATED: () => (/* binding */ Fo),\n/* harmony export */   DAILY_EVENT_JOINED_MEETING: () => (/* binding */ Wi),\n/* harmony export */   DAILY_EVENT_JOINING_MEETING: () => (/* binding */ qi),\n/* harmony export */   DAILY_EVENT_LANG_UPDATED: () => (/* binding */ No),\n/* harmony export */   DAILY_EVENT_LEFT_MEETING: () => (/* binding */ zi),\n/* harmony export */   DAILY_EVENT_LIVE_STREAMING_ERROR: () => (/* binding */ Do),\n/* harmony export */   DAILY_EVENT_LIVE_STREAMING_STARTED: () => (/* binding */ xo),\n/* harmony export */   DAILY_EVENT_LIVE_STREAMING_STOPPED: () => (/* binding */ Io),\n/* harmony export */   DAILY_EVENT_LIVE_STREAMING_UPDATED: () => (/* binding */ Lo),\n/* harmony export */   DAILY_EVENT_LOADED: () => (/* binding */ Vi),\n/* harmony export */   DAILY_EVENT_LOADING: () => (/* binding */ Bi),\n/* harmony export */   DAILY_EVENT_LOAD_ATTEMPT_FAILED: () => (/* binding */ Ui),\n/* harmony export */   DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED: () => (/* binding */ ko),\n/* harmony export */   DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED: () => (/* binding */ wo),\n/* harmony export */   DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED: () => (/* binding */ So),\n/* harmony export */   DAILY_EVENT_MEETING_SESSION_DATA_ERROR: () => (/* binding */ eo),\n/* harmony export */   DAILY_EVENT_MEETING_SESSION_STATE_UPDATED: () => (/* binding */ Zi),\n/* harmony export */   DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED: () => (/* binding */ Xi),\n/* harmony export */   DAILY_EVENT_NETWORK_CONNECTION: () => (/* binding */ To),\n/* harmony export */   DAILY_EVENT_NETWORK_QUALITY_CHANGE: () => (/* binding */ Eo),\n/* harmony export */   DAILY_EVENT_NONFATAL_ERROR: () => (/* binding */ Bo),\n/* harmony export */   DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED: () => (/* binding */ Ki),\n/* harmony export */   DAILY_EVENT_PARTICIPANT_JOINED: () => (/* binding */ Hi),\n/* harmony export */   DAILY_EVENT_PARTICIPANT_LEFT: () => (/* binding */ Qi),\n/* harmony export */   DAILY_EVENT_PARTICIPANT_UPDATED: () => (/* binding */ Gi),\n/* harmony export */   DAILY_EVENT_RECEIVE_SETTINGS_UPDATED: () => (/* binding */ Ro),\n/* harmony export */   DAILY_EVENT_RECORDING_DATA: () => (/* binding */ vo),\n/* harmony export */   DAILY_EVENT_RECORDING_ERROR: () => (/* binding */ ho),\n/* harmony export */   DAILY_EVENT_RECORDING_STARTED: () => (/* binding */ lo),\n/* harmony export */   DAILY_EVENT_RECORDING_STATS: () => (/* binding */ po),\n/* harmony export */   DAILY_EVENT_RECORDING_STOPPED: () => (/* binding */ uo),\n/* harmony export */   DAILY_EVENT_RECORDING_UPLOAD_COMPLETED: () => (/* binding */ fo),\n/* harmony export */   DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED: () => (/* binding */ yo),\n/* harmony export */   DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED: () => (/* binding */ bo),\n/* harmony export */   DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED: () => (/* binding */ _o),\n/* harmony export */   DAILY_EVENT_STARTED_CAMERA: () => (/* binding */ Ji),\n/* harmony export */   DAILY_EVENT_THEME_UPDATED: () => (/* binding */ Fi),\n/* harmony export */   DAILY_EVENT_TRACK_STARTED: () => (/* binding */ io),\n/* harmony export */   DAILY_EVENT_TRACK_STOPPED: () => (/* binding */ oo),\n/* harmony export */   DAILY_EVENT_TRANSCRIPTION_ERROR: () => (/* binding */ co),\n/* harmony export */   DAILY_EVENT_TRANSCRIPTION_MSG: () => (/* binding */ go),\n/* harmony export */   DAILY_EVENT_TRANSCRIPTION_STARTED: () => (/* binding */ ao),\n/* harmony export */   DAILY_EVENT_TRANSCRIPTION_STOPPED: () => (/* binding */ so),\n/* harmony export */   DAILY_EVENT_WAITING_PARTICIPANT_ADDED: () => (/* binding */ to),\n/* harmony export */   DAILY_EVENT_WAITING_PARTICIPANT_REMOVED: () => (/* binding */ ro),\n/* harmony export */   DAILY_EVENT_WAITING_PARTICIPANT_UPDATED: () => (/* binding */ no),\n/* harmony export */   DAILY_FATAL_ERROR_CONNECTION: () => (/* binding */ Ti),\n/* harmony export */   DAILY_FATAL_ERROR_EJECTED: () => (/* binding */ yi),\n/* harmony export */   DAILY_FATAL_ERROR_EOL: () => (/* binding */ Ci),\n/* harmony export */   DAILY_FATAL_ERROR_EXP_ROOM: () => (/* binding */ wi),\n/* harmony export */   DAILY_FATAL_ERROR_EXP_TOKEN: () => (/* binding */ Si),\n/* harmony export */   DAILY_FATAL_ERROR_MEETING_FULL: () => (/* binding */ Mi),\n/* harmony export */   DAILY_FATAL_ERROR_NBF_ROOM: () => (/* binding */ _i),\n/* harmony export */   DAILY_FATAL_ERROR_NBF_TOKEN: () => (/* binding */ bi),\n/* harmony export */   DAILY_FATAL_ERROR_NOT_ALLOWED: () => (/* binding */ Ei),\n/* harmony export */   DAILY_FATAL_ERROR_NO_ROOM: () => (/* binding */ ki),\n/* harmony export */   DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY: () => (/* binding */ gi),\n/* harmony export */   DAILY_RECEIVE_SETTINGS_BASE_KEY: () => (/* binding */ mi),\n/* harmony export */   DAILY_STATE_ERROR: () => (/* binding */ oi),\n/* harmony export */   DAILY_STATE_JOINED: () => (/* binding */ ri),\n/* harmony export */   DAILY_STATE_JOINING: () => (/* binding */ ni),\n/* harmony export */   DAILY_STATE_LEFT: () => (/* binding */ ii),\n/* harmony export */   DAILY_STATE_NEW: () => (/* binding */ Zr),\n/* harmony export */   DAILY_TRACK_STATE_BLOCKED: () => (/* binding */ ai),\n/* harmony export */   DAILY_TRACK_STATE_INTERRUPTED: () => (/* binding */ ui),\n/* harmony export */   DAILY_TRACK_STATE_LOADING: () => (/* binding */ li),\n/* harmony export */   DAILY_TRACK_STATE_OFF: () => (/* binding */ si),\n/* harmony export */   DAILY_TRACK_STATE_PLAYABLE: () => (/* binding */ di),\n/* harmony export */   DAILY_TRACK_STATE_SENDABLE: () => (/* binding */ ci),\n/* harmony export */   \"default\": () => (/* binding */ js)\n/* harmony export */ });\nfunction e(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function t(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function n(e){return n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n(e)}function r(e){var t=function(e,t){if(\"object\"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||\"default\");if(\"object\"!==n(i))return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===n(t)?t:String(t)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function a(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&s(e,t)}function l(e,t){if(t&&(\"object\"===n(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return a(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,\"next\",e)}function s(e){p(o,r,i,a,s,\"throw\",e)}a(void 0)}))}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}var m,g={},y={get exports(){return g},set exports(e){g=e}},_=\"object\"==typeof Reflect?Reflect:null,b=_&&\"function\"==typeof _.apply?_.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};m=_&&\"function\"==typeof _.ownKeys?_.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var w=Number.isNaN||function(e){return e!=e};function S(){S.init.call(this)}y.exports=S,g.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){\"function\"==typeof e.removeListener&&e.removeListener(\"error\",i),n([].slice.call(arguments))}x(e,t,o,{once:!0}),\"error\"!==t&&function(e,t,n){\"function\"==typeof e.on&&x(e,\"error\",t,n)}(e,i,{once:!0})}))},S.EventEmitter=S,S.prototype._events=void 0,S.prototype._eventsCount=0,S.prototype._maxListeners=void 0;var k=10;function M(e){if(\"function\"!=typeof e)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof e)}function C(e){return void 0===e._maxListeners?S.defaultMaxListeners:e._maxListeners}function E(e,t,n,r){var i,o,a,s;if(M(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit(\"newListener\",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if(\"function\"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=C(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error(\"Possible EventEmitter memory leak detected. \"+a.length+\" \"+String(t)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");c.name=\"MaxListenersExceededWarning\",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function T(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=T.bind(r);return i.listener=n,r.wrapFn=i,i}function O(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:\"function\"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):j(i,i.length)}function A(e){var t=this._events;if(void 0!==t){var n=t[e];if(\"function\"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function j(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function x(e,t,n,r){if(\"function\"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if(\"function\"!=typeof e.addEventListener)throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(S,\"defaultMaxListeners\",{enumerable:!0,get:function(){return k},set:function(e){if(\"number\"!=typeof e||e<0||w(e))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+e+\".\");k=e}}),S.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},S.prototype.setMaxListeners=function(e){if(\"number\"!=typeof e||e<0||w(e))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+e+\".\");return this._maxListeners=e,this},S.prototype.getMaxListeners=function(){return C(this)},S.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=\"error\"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error(\"Unhandled error.\"+(o?\" (\"+o.message+\")\":\"\"));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if(\"function\"==typeof s)b(s,this,t);else{var c=s.length,l=j(s,c);for(n=0;n<c;++n)b(l[n],this,t)}return!0},S.prototype.addListener=function(e,t){return E(this,e,t,!1)},S.prototype.on=S.prototype.addListener,S.prototype.prependListener=function(e,t){return E(this,e,t,!0)},S.prototype.once=function(e,t){return M(t),this.on(e,P(this,e,t)),this},S.prototype.prependOnceListener=function(e,t){return M(t),this.prependListener(e,P(this,e,t)),this},S.prototype.removeListener=function(e,t){var n,r,i,o,a;if(M(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit(\"removeListener\",e,n.listener||t));else if(\"function\"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit(\"removeListener\",e,a||t)}return this},S.prototype.off=S.prototype.removeListener,S.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)\"removeListener\"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},S.prototype.listeners=function(e){return O(this,e,!0)},S.prototype.rawListeners=function(e){return O(this,e,!1)},S.listenerCount=function(e,t){return\"function\"==typeof e.listenerCount?e.listenerCount(t):A.call(e,t)},S.prototype.listenerCount=A,S.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]};var L=Object.prototype.hasOwnProperty;function I(e,t,n){for(n of e.keys())if(D(n,t))return n}function D(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&D(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&\"object\"==typeof i&&!(i=I(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&\"object\"==typeof i&&!(i=I(t,i)))return!1;if(!D(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||\"object\"==typeof e){for(n in r=0,e){if(L.call(e,n)&&++r&&!L.call(t,n))return!1;if(!(n in t)||!D(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}const N={\"Amazon Silk\":\"amazon_silk\",\"Android Browser\":\"android\",Bada:\"bada\",BlackBerry:\"blackberry\",Chrome:\"chrome\",Chromium:\"chromium\",Electron:\"electron\",Epiphany:\"epiphany\",Firefox:\"firefox\",Focus:\"focus\",Generic:\"generic\",\"Google Search\":\"google_search\",Googlebot:\"googlebot\",\"Internet Explorer\":\"ie\",\"K-Meleon\":\"k_meleon\",Maxthon:\"maxthon\",\"Microsoft Edge\":\"edge\",\"MZ Browser\":\"mz\",\"NAVER Whale Browser\":\"naver\",Opera:\"opera\",\"Opera Coast\":\"opera_coast\",PhantomJS:\"phantomjs\",Puffin:\"puffin\",QupZilla:\"qupzilla\",QQ:\"qq\",QQLite:\"qqlite\",Safari:\"safari\",Sailfish:\"sailfish\",\"Samsung Internet for Android\":\"samsung_internet\",SeaMonkey:\"seamonkey\",Sleipnir:\"sleipnir\",Swing:\"swing\",Tizen:\"tizen\",\"UC Browser\":\"uc\",Vivaldi:\"vivaldi\",\"WebOS Browser\":\"webos\",WeChat:\"wechat\",\"Yandex Browser\":\"yandex\",Roku:\"roku\"},R={amazon_silk:\"Amazon Silk\",android:\"Android Browser\",bada:\"Bada\",blackberry:\"BlackBerry\",chrome:\"Chrome\",chromium:\"Chromium\",electron:\"Electron\",epiphany:\"Epiphany\",firefox:\"Firefox\",focus:\"Focus\",generic:\"Generic\",googlebot:\"Googlebot\",google_search:\"Google Search\",ie:\"Internet Explorer\",k_meleon:\"K-Meleon\",maxthon:\"Maxthon\",edge:\"Microsoft Edge\",mz:\"MZ Browser\",naver:\"NAVER Whale Browser\",opera:\"Opera\",opera_coast:\"Opera Coast\",phantomjs:\"PhantomJS\",puffin:\"Puffin\",qupzilla:\"QupZilla\",qq:\"QQ Browser\",qqlite:\"QQ Browser Lite\",safari:\"Safari\",sailfish:\"Sailfish\",samsung_internet:\"Samsung Internet for Android\",seamonkey:\"SeaMonkey\",sleipnir:\"Sleipnir\",swing:\"Swing\",tizen:\"Tizen\",uc:\"UC Browser\",vivaldi:\"Vivaldi\",webos:\"WebOS Browser\",wechat:\"WeChat\",yandex:\"Yandex Browser\"},F={tablet:\"tablet\",mobile:\"mobile\",desktop:\"desktop\",tv:\"tv\"},B={WindowsPhone:\"Windows Phone\",Windows:\"Windows\",MacOS:\"macOS\",iOS:\"iOS\",Android:\"Android\",WebOS:\"WebOS\",BlackBerry:\"BlackBerry\",Bada:\"Bada\",Tizen:\"Tizen\",Linux:\"Linux\",ChromeOS:\"Chrome OS\",PlayStation4:\"PlayStation 4\",Roku:\"Roku\"},U={EdgeHTML:\"EdgeHTML\",Blink:\"Blink\",Trident:\"Trident\",Presto:\"Presto\",Gecko:\"Gecko\",WebKit:\"WebKit\"};class V{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||\"\"}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||\"\"}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case\"NT\":return\"NT\";case\"XP\":case\"NT 5.1\":return\"XP\";case\"NT 5.0\":return\"2000\";case\"NT 5.2\":return\"2003\";case\"NT 6.0\":return\"Vista\";case\"NT 6.1\":return\"7\";case\"NT 6.2\":return\"8\";case\"NT 6.3\":return\"8.1\";case\"NT 10.0\":return\"10\";default:return}}static getMacOSVersionName(e){const t=e.split(\".\").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),10===t[0])switch(t[1]){case 5:return\"Leopard\";case 6:return\"Snow Leopard\";case 7:return\"Lion\";case 8:return\"Mountain Lion\";case 9:return\"Mavericks\";case 10:return\"Yosemite\";case 11:return\"El Capitan\";case 12:return\"Sierra\";case 13:return\"High Sierra\";case 14:return\"Mojave\";case 15:return\"Catalina\";default:return}}static getAndroidVersionName(e){const t=e.split(\".\").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?\"Cupcake\":1===t[0]&&t[1]>=6?\"Donut\":2===t[0]&&t[1]<2?\"Eclair\":2===t[0]&&2===t[1]?\"Froyo\":2===t[0]&&t[1]>2?\"Gingerbread\":3===t[0]?\"Honeycomb\":4===t[0]&&t[1]<1?\"Ice Cream Sandwich\":4===t[0]&&t[1]<4?\"Jelly Bean\":4===t[0]&&t[1]>=4?\"KitKat\":5===t[0]?\"Lollipop\":6===t[0]?\"Marshmallow\":7===t[0]?\"Nougat\":8===t[0]?\"Oreo\":9===t[0]?\"Pie\":void 0}static getVersionPrecision(e){return e.split(\".\").length}static compareVersions(e,t,n=!1){const r=V.getVersionPrecision(e),i=V.getVersionPrecision(t);let o=Math.max(r,i),a=0;const s=V.map([e,t],(e=>{const t=o-V.getVersionPrecision(e),n=e+new Array(t+1).join(\".0\");return V.map(n.split(\".\"),(e=>new Array(20-e.length).join(\"0\")+e)).reverse()}));for(n&&(a=o-Math.min(r,i)),o-=1;o>=a;){if(s[0][o]>s[1][o])return 1;if(s[0][o]===s[1][o]){if(o===a)return 0;o-=1}else if(s[0][o]<s[1][o])return-1}}static map(e,t){const n=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){const r=e[n];if(t(r,n))return r}}static assign(e,...t){const n=e;let r,i;if(Object.assign)return Object.assign(e,...t);for(r=0,i=t.length;r<i;r+=1){const e=t[r];if(\"object\"==typeof e&&null!==e){Object.keys(e).forEach((t=>{n[t]=e[t]}))}}return e}static getBrowserAlias(e){return N[e]}static getBrowserTypeByAlias(e){return R[e]||\"\"}}const J=/version\\/(\\d+(\\.?_?\\d+)+)/i,$=[{test:[/googlebot/i],describe(e){const t={name:\"Googlebot\"},n=V.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:\"Opera\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\\/|opios/i],describe(e){const t={name:\"Opera\"},n=V.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:\"Samsung Internet for Android\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:\"NAVER Whale Browser\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:\"MZ Browser\"},n=V.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:\"Focus\"},n=V.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:\"Swing\"},n=V.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:\"Opera Coast\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\\/\\d+(?:.?_?\\d+)+/i],describe(e){const t={name:\"Opera Touch\"},n=V.getFirstMatch(/(?:opt)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:\"Yandex Browser\"},n=V.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:\"UC Browser\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:\"Maxthon\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:\"Epiphany\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:\"Puffin\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:\"Sleipnir\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:\"K-Meleon\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:\"WeChat\"},n=V.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?\"QQ Browser Lite\":\"QQ Browser\"},n=V.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:\"Internet Explorer\"},n=V.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\\sedg\\//i],describe(e){const t={name:\"Microsoft Edge\"},n=V.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:\"Microsoft Edge\"},n=V.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:\"Vivaldi\"},n=V.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:\"SeaMonkey\"},n=V.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:\"Sailfish\"},n=V.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:\"Amazon Silk\"},n=V.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:\"PhantomJS\"},n=V.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:\"SlimerJS\"},n=V.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe(e){const t={name:\"BlackBerry\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:\"WebOS Browser\"},n=V.getFirstMatch(J,e)||V.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:\"Bada\"},n=V.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:\"Tizen\"},n=V.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:\"QupZilla\"},n=V.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:\"Firefox\"},n=V.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:\"Electron\"},n=V.getFirstMatch(/(?:electron)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:\"Miui\"},n=V.getFirstMatch(/(?:MiuiBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:\"Chromium\"},n=V.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:\"Chrome\"},n=V.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:\"Google Search\"},n=V.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:\"Android Browser\"},n=V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:\"PlayStation 4\"},n=V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:\"Safari\"},n=V.getFirstMatch(J,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=-1!==e.search(\"\\\\(\")?/^(.*)\\/(.*)[ \\t]\\((.*)/:/^(.*)\\/(.*) /;return{name:V.getFirstMatch(t,e),version:V.getSecondMatch(t,e)}}}];var q=[{test:[/Roku\\/DVP/],describe(e){const t=V.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i,e);return{name:B.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=V.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i,e);return{name:B.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=V.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i,e),n=V.getWindowsVersionName(t);return{name:B.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\\//],describe(e){const t={name:B.iOS},n=V.getSecondMatch(/(Version\\/)(\\d[\\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=V.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i,e).replace(/[_\\s]/g,\".\"),n=V.getMacOSVersionName(t),r={name:B.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=V.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i,e).replace(/[_\\s]/g,\".\");return{name:B.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=V.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i,e),n=V.getAndroidVersionName(t),r={name:B.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=V.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i,e),n={name:B.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe(e){const t=V.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i,e)||V.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i,e)||V.getFirstMatch(/\\bbb(\\d+)/i,e);return{name:B.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=V.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i,e);return{name:B.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=V.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:B.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:B.Linux})},{test:[/CrOS/],describe:()=>({name:B.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=V.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:B.PlayStation4,version:t}}}],W=[{test:[/googlebot/i],describe:()=>({type:\"bot\",vendor:\"Google\"})},{test:[/huawei/i],describe(e){const t=V.getFirstMatch(/(can-l01)/i,e)&&\"Nova\",n={type:F.mobile,vendor:\"Huawei\"};return t&&(n.model=t),n}},{test:[/nexus\\s*(?:7|8|9|10).*/i],describe:()=>({type:F.tablet,vendor:\"Nexus\"})},{test:[/ipad/i],describe:()=>({type:F.tablet,vendor:\"Apple\",model:\"iPad\"})},{test:[/Macintosh(.*?) FxiOS(.*?)\\//],describe:()=>({type:F.tablet,vendor:\"Apple\",model:\"iPad\"})},{test:[/kftt build/i],describe:()=>({type:F.tablet,vendor:\"Amazon\",model:\"Kindle Fire HD 7\"})},{test:[/silk/i],describe:()=>({type:F.tablet,vendor:\"Amazon\"})},{test:[/tablet(?! pc)/i],describe:()=>({type:F.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=V.getFirstMatch(/(ipod|iphone)/i,e);return{type:F.mobile,vendor:\"Apple\",model:t}}},{test:[/nexus\\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:F.mobile,vendor:\"Nexus\"})},{test:[/[^-]mobi/i],describe:()=>({type:F.mobile})},{test:e=>\"blackberry\"===e.getBrowserName(!0),describe:()=>({type:F.mobile,vendor:\"BlackBerry\"})},{test:e=>\"bada\"===e.getBrowserName(!0),describe:()=>({type:F.mobile})},{test:e=>\"windows phone\"===e.getBrowserName(),describe:()=>({type:F.mobile,vendor:\"Microsoft\"})},{test(e){const t=Number(String(e.getOSVersion()).split(\".\")[0]);return\"android\"===e.getOSName(!0)&&t>=3},describe:()=>({type:F.tablet})},{test:e=>\"android\"===e.getOSName(!0),describe:()=>({type:F.mobile})},{test:e=>\"macos\"===e.getOSName(!0),describe:()=>({type:F.desktop,vendor:\"Apple\"})},{test:e=>\"windows\"===e.getOSName(!0),describe:()=>({type:F.desktop})},{test:e=>\"linux\"===e.getOSName(!0),describe:()=>({type:F.desktop})},{test:e=>\"playstation 4\"===e.getOSName(!0),describe:()=>({type:F.tv})},{test:e=>\"roku\"===e.getOSName(!0),describe:()=>({type:F.tv})}],z=[{test:e=>\"microsoft edge\"===e.getBrowserName(!0),describe(e){if(/\\sedg\\//i.test(e))return{name:U.Blink};const t=V.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i,e);return{name:U.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:U.Trident},n=V.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:U.Presto},n=V.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:U.Gecko},n=V.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\\/537\\.36/i],describe:()=>({name:U.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:U.WebKit},n=V.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}}];class H{constructor(e,t=!1){if(null==e||\"\"===e)throw new Error(\"UserAgent parameter can't be empty\");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=V.find($,(e=>{if(\"function\"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error(\"Browser's test function is not valid\")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||\"\":this.getBrowser().name||\"\"}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=V.find(q,(e=>{if(\"function\"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error(\"Browser's test function is not valid\")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||\"\":t||\"\"}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||\"\":t||\"\"}parsePlatform(){this.parsedResult.platform={};const e=V.find(W,(e=>{if(\"function\"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error(\"Browser's test function is not valid\")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||\"\":this.getEngine().name||\"\"}parseEngine(){this.parsedResult.engine={};const e=V.find(z,(e=>{if(\"function\"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error(\"Browser's test function is not valid\")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return V.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const r={};let i=0;if(Object.keys(e).forEach((o=>{const a=e[o];\"string\"==typeof a?(r[o]=a,i+=1):\"object\"==typeof a&&(t[o]=a,n+=1)})),n>0){const e=Object.keys(t),n=V.find(e,(e=>this.isOS(e)));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}const r=V.find(e,(e=>this.isPlatform(e)));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}}if(i>0){const e=Object.keys(r),t=V.find(e,(e=>this.isBrowser(e,!0)));if(void 0!==t)return this.compareVersion(r[t])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const i=V.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n}compareVersion(e){let t=[0],n=e,r=!1;const i=this.getBrowserVersion();if(\"string\"==typeof i)return\">\"===e[0]||\"<\"===e[0]?(n=e.substr(1),\"=\"===e[1]?(r=!0,n=e.substr(2)):t=[],\">\"===e[0]?t.push(1):t.push(-1)):\"=\"===e[0]?n=e.substr(1):\"~\"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(V.compareVersions(i,n,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((e=>this.is(e)))}}\n/*!\n * Bowser - a browser detector\n * https://github.com/lancedikson/bowser\n * MIT License | (c) Dustin Diaz 2012-2015\n * MIT License | (c) Denis Demchenko 2015-2019\n */class G{static getParser(e,t=!1){if(\"string\"!=typeof e)throw new Error(\"UserAgent should be a string\");return new H(e,t)}static parse(e){return new H(e).getResult()}static get BROWSER_MAP(){return R}static get ENGINE_MAP(){return U}static get OS_MAP(){return B}static get PLATFORMS_MAP(){return F}}function Q(){return Date.now()+Math.random().toString()}function K(){throw new Error(\"Method must be implemented in subclass\")}function Y(e,t){return null!=t&&t.proxyUrl?t.proxyUrl+(\"/\"===t.proxyUrl.slice(-1)?\"\":\"/\")+e.substring(8):e}function X(e){return null!=e&&e.callObjectBundleUrlOverride?e.callObjectBundleUrlOverride:Y(\"https://c.daily.co/call-machine/versioned/\".concat(\"0.74.0\",\"/static/call-machine-object-bundle.js\"),e)}function Z(e){try{new URL(e)}catch(e){return!1}return!0}const ee=Object.prototype.toString;function te(e){switch(ee.call(e)){case\"[object Error]\":case\"[object Exception]\":case\"[object DOMException]\":return!0;default:return de(e,Error)}}function ne(e,t){return ee.call(e)===`[object ${t}]`}function re(e){return ne(e,\"ErrorEvent\")}function ie(e){return ne(e,\"DOMError\")}function oe(e){return ne(e,\"String\")}function ae(e){return\"object\"==typeof e&&null!==e&&\"__sentry_template_string__\"in e&&\"__sentry_template_values__\"in e}function se(e){return null===e||ae(e)||\"object\"!=typeof e&&\"function\"!=typeof e}function ce(e){return ne(e,\"Object\")}function le(e){return\"undefined\"!=typeof Event&&de(e,Event)}function ue(e){return Boolean(e&&e.then&&\"function\"==typeof e.then)}function de(e,t){try{return e instanceof t}catch(e){return!1}}function pe(e){return!(\"object\"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function he(e,t=0){return\"string\"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function fe(e,t){if(!Array.isArray(e))return\"\";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{pe(r)?n.push(\"[VueViewModel]\"):n.push(String(r))}catch(e){n.push(\"[value cannot be serialized]\")}}return n.join(t)}function ve(e,t,n=!1){return!!oe(e)&&(ne(t,\"RegExp\")?t.test(e):!!oe(t)&&(n?e===t:e.includes(t)))}function me(e,t=[],n=!1){return t.some((t=>ve(e,t,n)))}function ge(e,t,n=250,r,i,o,a){if(!(o.exception&&o.exception.values&&a&&de(a.originalException,Error)))return;const s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,l;s&&(o.exception.values=(c=ye(e,t,i,a.originalException,r,o.exception.values,s,0),l=n,c.map((e=>(e.value&&(e.value=he(e.value,l)),e)))))}function ye(e,t,n,r,i,o,a,s){if(o.length>=n+1)return o;let c=[...o];if(de(r[i],Error)){_e(a,s);const o=e(t,r[i]),l=c.length;be(o,i,l,s),c=ye(e,t,n,r[i],i,[o,...c],o,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,o)=>{if(de(r,Error)){_e(a,s);const l=e(t,r),u=c.length;be(l,`errors[${o}]`,u,s),c=ye(e,t,n,r,i,[l,...c],l,u)}})),c}function _e(e,t){e.mechanism=e.mechanism||{type:\"generic\",handled:!0},e.mechanism={...e.mechanism,...\"AggregateError\"===e.type&&{is_exception_group:!0},exception_id:t}}function be(e,t,n,r){e.mechanism=e.mechanism||{type:\"generic\",handled:!0},e.mechanism={...e.mechanism,type:\"chained\",source:t,exception_id:n,parent_id:r}}function we(e){return void 0===e?void 0:e>=400&&e<500?\"warning\":e>=500?\"error\":void 0}const Se=\"8.33.1\",ke=globalThis;function Me(e,t,n){const r=n||ke,i=r.__SENTRY__=r.__SENTRY__||{},o=i[Se]=i[Se]||{};return o[e]||(o[e]=t())}const Ce=ke;function Ee(e,t={}){if(!e)return\"<unknown>\";try{let n=e;const r=5,i=[];let o=0,a=0;const s=\" > \",c=s.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&o++<r&&(l=Te(n,u),!(\"html\"===l||o>1&&a+i.length*c+l.length>=d));)i.push(l),a+=l.length,n=n.parentNode;return i.reverse().join(s)}catch(e){return\"<unknown>\"}}function Te(e,t){const n=e,r=[];if(!n||!n.tagName)return\"\";if(Ce.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(i&&i.length)i.forEach((e=>{r.push(`[${e[0]}=\"${e[1]}\"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&oe(e)){const t=e.split(/\\s+/);for(const e of t)r.push(`.${e}`)}}const o=[\"aria-label\",\"type\",\"name\",\"title\",\"alt\"];for(const e of o){const t=n.getAttribute(e);t&&r.push(`[${e}=\"${t}\"]`)}return r.join(\"\")}const Pe=\"undefined\"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Oe=[\"debug\",\"info\",\"warn\",\"error\",\"log\",\"assert\",\"trace\"],Ae={};function je(e){if(!(\"console\"in ke))return e();const t=ke.console,n={},r=Object.keys(Ae);r.forEach((e=>{const r=Ae[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const xe=Me(\"logger\",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Pe?Oe.forEach((n=>{t[n]=(...t)=>{e&&je((()=>{ke.console[n](`Sentry Logger [${n}]:`,...t)}))}})):Oe.forEach((e=>{t[e]=()=>{}})),t})),Le=/^(?:(\\w+):)\\/\\/(?:(\\w+)(?::(\\w+)?)?@)([\\w.-]+)(?::(\\d+))?\\/(.+)/;function Ie(e,t=!1){const{host:n,path:r,pass:i,port:o,projectId:a,protocol:s,publicKey:c}=e;return`${s}://${c}${t&&i?`:${i}`:\"\"}@${n}${o?`:${o}`:\"\"}/${r?`${r}/`:r}${a}`}function De(e){return{protocol:e.protocol,publicKey:e.publicKey||\"\",pass:e.pass||\"\",host:e.host,port:e.port||\"\",path:e.path||\"\",projectId:e.projectId}}function Ne(e){const t=\"string\"==typeof e?function(e){const t=Le.exec(e);if(!t)return void je((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,i=\"\",o=\"\",a=\"\",s=\"\"]=t.slice(1);let c=\"\",l=s;const u=l.split(\"/\");if(u.length>1&&(c=u.slice(0,-1).join(\"/\"),l=u.pop()),l){const e=l.match(/^\\d+/);e&&(l=e[0])}return De({host:o,pass:i,path:c,projectId:l,port:a,protocol:n,publicKey:r})}(e):De(e);if(t&&function(e){if(!Pe)return!0;const{port:t,projectId:n,protocol:r}=e;return!([\"protocol\",\"publicKey\",\"host\",\"projectId\"].find((t=>!e[t]&&(xe.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\\d+$/)?function(e){return\"http\"===e||\"https\"===e}(r)?t&&isNaN(parseInt(t,10))&&(xe.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(xe.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(xe.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class Re extends Error{constructor(e,t=\"warn\"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Fe(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);\"function\"==typeof i&&Ue(i,r),e[t]=i}function Be(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){Pe&&xe.log(`Failed to add non-enumerable property \"${t}\" to object`,e)}}function Ue(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Be(e,\"__sentry_original__\",t)}catch(e){}}function Ve(e){return e.__sentry_original__}function Je(e){if(te(e))return{message:e.message,name:e.name,stack:e.stack,...qe(e)};if(le(e)){const t={type:e.type,target:$e(e.target),currentTarget:$e(e.currentTarget),...qe(e)};return\"undefined\"!=typeof CustomEvent&&de(e,CustomEvent)&&(t.detail=e.detail),t}return e}function $e(e){try{return t=e,\"undefined\"!=typeof Element&&de(t,Element)?Ee(e):Object.prototype.toString.call(e)}catch(e){return\"<unknown>\"}var t}function qe(e){if(\"object\"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function We(e){return ze(e,new Map)}function ze(e,t){if(function(e){if(!ce(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||\"Object\"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.getOwnPropertyNames(e))void 0!==e[n]&&(r[n]=ze(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(ze(e,t))})),r}return e}const He=\"?\",Ge=/\\(error: (.*)\\)/,Qe=/captureMessage|captureException/;function Ke(e){return e[e.length-1]||{}}const Ye=\"<anonymous>\";function Xe(e){try{return e&&\"function\"==typeof e&&e.name||Ye}catch(e){return Ye}}function Ze(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}}const et={},tt={};function nt(e,t){et[e]=et[e]||[],et[e].push(t)}function rt(e,t){tt[e]||(t(),tt[e]=!0)}function it(e,t){const n=e&&et[e];if(n)for(const r of n)try{r(t)}catch(t){Pe&&xe.error(`Error while triggering instrumentation handler.\\nType: ${e}\\nName: ${Xe(r)}\\nError:`,t)}}function ot(){\"console\"in ke&&Oe.forEach((function(e){e in ke.console&&Fe(ke.console,e,(function(t){return Ae[e]=t,function(...t){it(\"console\",{args:t,level:e});const n=Ae[e];n&&n.apply(ke.console,t)}}))}))}const at=ke;function st(e){return e&&/^function\\s+\\w+\\(\\)\\s+\\{\\s+\\[native code\\]\\s+\\}$/.test(e.toString())}function ct(){if(\"string\"==typeof EdgeRuntime)return!0;if(!function(){if(!(\"fetch\"in at))return!1;try{return new Headers,new Request(\"http://www.example.com\"),new Response,!0}catch(e){return!1}}())return!1;if(st(at.fetch))return!0;let e=!1;const t=at.document;if(t&&\"function\"==typeof t.createElement)try{const n=t.createElement(\"iframe\");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=st(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){Pe&&xe.warn(\"Could not create sandbox iframe for pure fetch check, bailing to window.fetch: \",e)}return e}function lt(){return Date.now()/1e3}const ut=function(){const{performance:e}=ke;if(!e||!e.now)return lt;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}();function dt(e,t){const n=\"fetch\";nt(n,e),rt(n,(()=>function(e,t=!1){if(t&&!ct())return;Fe(ke,\"fetch\",(function(t){return function(...n){const{method:r,url:i}=function(e){if(0===e.length)return{method:\"GET\",url:\"\"};if(2===e.length){const[t,n]=e;return{url:ht(t),method:pt(n,\"method\")?String(n.method).toUpperCase():\"GET\"}}const t=e[0];return{url:ht(t),method:pt(t,\"method\")?String(t.method).toUpperCase():\"GET\"}}(n),o={args:n,fetchData:{method:r,url:i},startTimestamp:1e3*ut()};e||it(\"fetch\",{...o});const a=(new Error).stack;return t.apply(ke,n).then((async t=>(e?e(t):it(\"fetch\",{...o,endTimestamp:1e3*ut(),response:t}),t)),(e=>{throw it(\"fetch\",{...o,endTimestamp:1e3*ut(),error:e}),te(e)&&void 0===e.stack&&(e.stack=a,Be(e,\"framesToPop\",1)),e}))}}))}(void 0,t)))}function pt(e,t){return!!e&&\"object\"==typeof e&&!!e[t]}function ht(e){return\"string\"==typeof e?e:e?pt(e,\"url\")?e.url:e.toString?e.toString():\"\":\"\"}(()=>{const{performance:e}=ke;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=i<t,a=e.timing&&e.timing.navigationStart,s=\"number\"==typeof a?Math.abs(a+n-r):t;(o||s<t)&&(i<=s&&e.timeOrigin)})();let ft=null;function vt(){ft=ke.onerror,ke.onerror=function(e,t,n,r,i){return it(\"error\",{column:r,error:i,line:n,msg:e,url:t}),!(!ft||ft.__SENTRY_LOADER__)&&ft.apply(this,arguments)},ke.onerror.__SENTRY_INSTRUMENTED__=!0}let mt=null;function gt(){mt=ke.onunhandledrejection,ke.onunhandledrejection=function(e){return it(\"unhandledrejection\",e),!(mt&&!mt.__SENTRY_LOADER__)||mt.apply(this,arguments)},ke.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function yt(){const e=ke,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,\"\");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function _t(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function bt(e){const{message:t,event_id:n}=e;if(t)return t;const r=_t(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||\"<unknown>\":n||\"<unknown>\"}function wt(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||\"\"),o.type||(o.type=n||\"Error\")}function St(e,t){const n=_t(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:\"generic\",handled:!0,...r,...t},t&&\"data\"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function kt(e){if(e&&e.__sentry_captured__)return!0;try{Be(e,\"__sentry_captured__\",!0)}catch(e){}return!1}function Mt(e,t=100,n=1/0){try{return Et(\"\",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ct(e,t=3,n=102400){const r=Mt(e,t);return i=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>n?Ct(e,t-1,n):r;var i}function Et(e,t,n=1/0,r=1/0,i=function(){const e=\"function\"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[o,a]=i;if(null==t||[\"boolean\",\"string\"].includes(typeof t)||\"number\"==typeof t&&Number.isFinite(t))return t;const s=function(e,t){try{if(\"domain\"===e&&t&&\"object\"==typeof t&&t._events)return\"[Domain]\";if(\"domainEmitter\"===e)return\"[DomainEmitter]\";if(\"undefined\"!=typeof global&&t===global)return\"[Global]\";if(\"undefined\"!=typeof window&&t===window)return\"[Window]\";if(\"undefined\"!=typeof document&&t===document)return\"[Document]\";if(pe(t))return\"[VueViewModel]\";if(ce(n=t)&&\"nativeEvent\"in n&&\"preventDefault\"in n&&\"stopPropagation\"in n)return\"[SyntheticEvent]\";if(\"number\"==typeof t&&!Number.isFinite(t))return`[${t}]`;if(\"function\"==typeof t)return`[Function: ${Xe(t)}]`;if(\"symbol\"==typeof t)return`[${String(t)}]`;if(\"bigint\"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:\"null prototype\"}(t);return/^HTML(\\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!s.startsWith(\"[object \"))return s;if(t.__sentry_skip_normalization__)return t;const c=\"number\"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return s.replace(\"object \",\"\");if(o(t))return\"[Circular ~]\";const l=t;if(l&&\"function\"==typeof l.toJSON)try{return Et(\"\",l.toJSON(),c-1,r,i)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=Je(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]=\"[MaxProperties ~]\";break}const t=p[e];u[e]=Et(e,t,c-1,r,i),d++}return a(t),u}var Tt;function Pt(e){return new At((t=>{t(e)}))}function Ot(e){return new At(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]=\"PENDING\";e[e.RESOLVED=1]=\"RESOLVED\";e[e.REJECTED=2]=\"REJECTED\"}(Tt||(Tt={}));class At{constructor(e){At.prototype.__init.call(this),At.prototype.__init2.call(this),At.prototype.__init3.call(this),At.prototype.__init4.call(this),this._state=Tt.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new At(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new At(((t,n)=>{let r,i;return this.then((t=>{i=!1,r=t,e&&e()}),(t=>{i=!0,r=t,e&&e()})).then((()=>{i?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Tt.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Tt.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Tt.PENDING&&(ue(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Tt.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Tt.RESOLVED&&e[1](this._value),this._state===Tt.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function jt(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Ot(new Re(\"Not adding Promise because buffer limit was reached.\"));const i=r();return-1===t.indexOf(i)&&t.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(e){return new At(((n,r)=>{let i=t.length;if(!i)return n(!0);const o=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Pt(e).then((()=>{--i||(clearTimeout(o),n(!0))}),r)}))}))}}}function xt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||\"\",r=t[8]||\"\";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Lt=[\"fatal\",\"error\",\"warning\",\"log\",\"info\",\"debug\"];function It(e){return\"warn\"===e?\"warning\":Lt.includes(e)?e:\"log\"}const Dt=/^sentry-/;function Nt(e){const t=function(e){if(!e||!oe(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=Rt(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return Rt(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Dt)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Rt(e){return e.split(\",\").map((e=>e.split(\"=\").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}function Ft(e,t=[]){return[e,t]}function Bt(e,t){const[n,r]=e;return[n,[...r,t]]}function Ut(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Vt(e){return ke.__SENTRY__&&ke.__SENTRY__.encodePolyfill?ke.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}function Jt(e){const[t,n]=e;let r=JSON.stringify(t);function i(e){\"string\"==typeof r?r=\"string\"==typeof e?r+e:[Vt(r),e]:r.push(\"string\"==typeof e?Vt(e):e)}for(const e of n){const[t,n]=e;if(i(`\\n${JSON.stringify(t)}\\n`),\"string\"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Mt(n))}i(e)}}return\"string\"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}function $t(e){const t=\"string\"==typeof e.data?Vt(e.data):e.data;return[We({type:\"attachment\",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const qt={session:\"session\",sessions:\"session\",attachment:\"attachment\",transaction:\"transaction\",event:\"error\",client_report:\"internal\",user_report:\"default\",profile:\"profile\",profile_chunk:\"profile\",replay_event:\"replay\",replay_recording:\"replay\",check_in:\"monitor\",feedback:\"feedback\",span:\"span\",statsd:\"metric_bucket\"};function Wt(e){return qt[e]}function zt(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Ht(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},o=n&&n[\"x-sentry-rate-limits\"],a=n&&n[\"retry-after\"];if(o)for(const e of o.trim().split(\",\")){const[t,n,,,o]=e.split(\":\",5),a=parseInt(t,10),s=1e3*(isNaN(a)?60:a);if(n)for(const e of n.split(\";\"))\"metric_bucket\"===e&&o&&!o.split(\";\").includes(\"custom\")||(i[e]=r+s);else i.all=r+s}else a?i.all=r+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(a,r):429===t&&(i.all=r+6e4);return i}function Gt(){return{traceId:yt(),spanId:yt().substring(16)}}const Qt=ke;const Kt=\"undefined\"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Yt(){return Xt(ke),ke}function Xt(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Se,t[Se]=t[Se]||{}}function Zt(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ut(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:yt()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),\"number\"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(\"number\"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),\"number\"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}const en=\"_sentrySpan\";function tn(e,t){t?Be(e,en,t):delete e[en]}function nn(e){return e[en]}class rn{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Gt()}clone(){const e=new rn;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,tn(e,nn(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Zt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t=\"function\"==typeof e?e(this):e,[n,r]=t instanceof on?[t.getScopeData(),t.getRequestSession()]:ce(t)?[e,e.requestSession]:[],{tags:i,extra:o,user:a,contexts:s,level:c,fingerprint:l=[],propagationContext:u}=n||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...s},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),l.length&&(this._fingerprint=l),u&&(this._propagationContext=u),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,tn(this,void 0),this._attachments=[],this._propagationContext=Gt(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n=\"number\"==typeof t?t:100;if(n<=0)return this;const r={timestamp:lt(),...e},i=this._breadcrumbs;return i.push(r),this._breadcrumbs=i.length>n?i.slice(-n):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:nn(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:yt();if(!this._client)return xe.warn(\"No client configured on scope - will not capture exception!\"),n;const r=new Error(\"Sentry syntheticException\");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:yt();if(!this._client)return xe.warn(\"No client configured on scope - will not capture message!\"),r;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:yt();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(xe.warn(\"No client configured on scope - will not capture event!\"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const on=rn;class an{constructor(e,t){let n,r;n=e||new on,r=t||new on,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return ue(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function sn(){const e=Xt(Yt());return e.stack=e.stack||new an(Me(\"defaultCurrentScope\",(()=>new on)),Me(\"defaultIsolationScope\",(()=>new on)))}function cn(e){return sn().withScope(e)}function ln(e,t){const n=sn();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function un(e){return sn().withScope((()=>e(sn().getIsolationScope())))}function dn(e){const t=Xt(e);return t.acs?t.acs:{withIsolationScope:un,withScope:cn,withSetScope:ln,withSetIsolationScope:(e,t)=>un(t),getCurrentScope:()=>sn().getScope(),getIsolationScope:()=>sn().getIsolationScope()}}function pn(){return dn(Yt()).getCurrentScope()}function hn(){return dn(Yt()).getIsolationScope()}function fn(){return pn().getClient()}function vn(e){const t=e._sentryMetrics;if(!t)return;const n={};for(const[,[e,r]]of t){(n[e]||(n[e]=[])).push(We(r))}return n}function mn(e){const{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:r}=_n(e);return We({parent_span_id:r,span_id:t,trace_id:n})}function gn(e){return\"number\"==typeof e?yn(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?yn(e.getTime()):ut()}function yn(e){return e>9999999999?e/1e3:e}function _n(e){if(function(e){return\"function\"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:i,name:o,endTime:a,parentSpanId:s,status:c}=e;return We({span_id:t,trace_id:n,data:r,description:o,parent_span_id:s,start_timestamp:gn(i),timestamp:gn(a)||void 0,status:bn(c),op:r[\"sentry.op\"],origin:r[\"sentry.origin\"],_metrics_summary:vn(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function bn(e){if(e&&0!==e.code)return 1===e.code?\"ok\":e.message||\"unknown_error\"}function wn(e){return e._sentryRootSpan||e}const Sn=\"production\";function kn(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},i=We({environment:n.environment||Sn,release:n.release,public_key:r,trace_id:e});return t.emit(\"createDsc\",i),i}function Mn(e){const t=fn();if(!t)return{};const n=kn(_n(e).trace_id||\"\",t),r=wn(e),i=r._frozenDsc;if(i)return i;const o=r.spanContext().traceState,a=o&&o.get(\"sentry.dsc\"),s=a&&Nt(a);if(s)return s;const c=_n(r),l=c.data||{},u=l[\"sentry.sample_rate\"];null!=u&&(n.sample_rate=`${u}`);const d=l[\"sentry.source\"],p=c.description;return\"url\"!==d&&p&&(n.transaction=p),function(e){if(\"boolean\"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=fn(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||\"tracesSampleRate\"in n||\"tracesSampler\"in n)}()&&(n.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return 1===t}(r))),t.emit(\"createDsc\",n,r),n}function Cn(e,t,n,r){const i=zt(n),o=e.type&&\"replay_event\"!==e.type?e.type:\"event\";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const a=function(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ie(r)},...i&&{trace:We({...i})}}}(e,i,r,t);delete e.sdkProcessingMetadata;return Ft(a,[[{type:o},e]])}function En(e,t,n,r=0){return new At(((i,o)=>{const a=e[r];if(null===t||\"function\"!=typeof a)i(t);else{const s=a({...t},n);Kt&&a.id&&null===s&&xe.log(`Event processor \"${a.id}\" dropped event`),ue(s)?s.then((t=>En(e,t,n,r+1).then(i))).then(null,o):En(e,s,n,r+1).then(i).then(null,o)}}))}function Tn(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:n,tags:r,user:i,contexts:o,level:a,transactionName:s}=t,c=We(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=We(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=We(i);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=We(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});a&&(e.level=a);s&&\"transaction\"!==e.type&&(e.transaction=s)}(e,t),r&&function(e,t){e.contexts={trace:mn(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Mn(t),...e.sdkProcessingMetadata};const n=wn(t),r=_n(n).description;r&&!e.transaction&&\"transaction\"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?function(e){return Array.isArray(e)?e:[e]}(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function Pn(e,t){const{extra:n,tags:r,user:i,contexts:o,level:a,sdkProcessingMetadata:s,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:f}=t;On(e,\"extra\",n),On(e,\"tags\",r),On(e,\"user\",i),On(e,\"contexts\",o),On(e,\"sdkProcessingMetadata\",s),a&&(e.level=a),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function On(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function An(e,t,n,r,i,o){const{normalizeDepth:a=3,normalizeMaxBreadth:s=1e3}=e,c={...t,event_id:t.event_id||n.event_id||yt(),timestamp:t.timestamp||lt()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:i,maxValueLength:o=250}=t;\"environment\"in e||(e.environment=\"environment\"in t?n:Sn);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==i&&(e.dist=i);e.message&&(e.message=he(e.message,o));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=he(a.value,o));const s=e.request;s&&s.url&&(s.url=he(s.url,o))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),i&&i.emit(\"applyFrameMetadata\",t),void 0===t.type&&function(e,t){const n=ke._sentryDebugIds;if(!n)return;let r;const i=jn.get(t);i?r=i:(r=new Map,jn.set(t,r));const o=Object.entries(n).reduce(((e,[n,i])=>{let o;const a=r.get(n);a?o=a:(o=t(n),r.set(n,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=i;break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new on;return n.update(t),n}(r,n.captureContext);n.mechanism&&St(c,n.mechanism);const d=i?i.getEventProcessors():[],p=Me(\"globalScope\",(()=>new on)).getScopeData();if(o){Pn(p,o.getScopeData())}if(u){Pn(p,u.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),Tn(c,p);return En([...d,...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:\"sourcemap\",code_file:e,debug_id:t})}))}(e),\"number\"==typeof a&&a>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Mt(e.data,t,n)}})))},...e.user&&{user:Mt(e.user,t,n)},...e.contexts&&{contexts:Mt(e.contexts,t,n)},...e.extra&&{extra:Mt(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Mt(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:Mt(e.data,t,n)}}))));return r}(e,a,s):e)))}const jn=new WeakMap;function xn(e){if(e)return function(e){return e instanceof on||\"function\"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Ln.includes(e)))}(e)?{captureContext:e}:e}const Ln=[\"user\",\"level\",\"extra\",\"contexts\",\"tags\",\"fingerprint\",\"requestSession\",\"propagationContext\"];function In(e,t){return pn().captureEvent(e,t)}function Dn(e,t){return n={sentry_key:e.publicKey,sentry_version:\"7\",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join(\"&\");var n}const Nn=[];function Rn(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Fn(e,t,n){if(n[t.name])Kt&&xe.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Nn.indexOf(t.name)&&\"function\"==typeof t.setupOnce&&(t.setupOnce(),Nn.push(t.name)),t.setup&&\"function\"==typeof t.setup&&t.setup(e),\"function\"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on(\"preprocessEvent\",((t,r)=>n(t,r,e)))}if(\"function\"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}Kt&&xe.log(`Integration installed: ${t.name}`)}}const Bn=\"Not capturing exception because it's already been captured.\";class Un{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Ne(e.dsn):Kt&&xe.warn(\"No DSN provided, client will not send events.\"),this._dsn){const i=(t=this._dsn,n=e.tunnel,r=e._metadata?e._metadata.sdk:void 0,n||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:\"\",n=e.port?`:${e.port}`:\"\";return`${t}//${e.host}${n}${e.path?`/${e.path}`:\"\"}/api/`}(e)}${e.projectId}/envelope/`}(t)}?${Dn(t,r)}`);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:i})}var t,n,r}captureException(e,t,n){const r=yt();if(kt(e))return Kt&&xe.log(Bn),r;const i={event_id:r,...t};return this._process(this.eventFromException(e,i).then((e=>this._captureEvent(e,i,n)))),i.event_id}captureMessage(e,t,n,r){const i={event_id:yt(),...n},o=ae(e)?e:String(e),a=se(e)?this.eventFromMessage(o,t,i):this.eventFromException(e,i);return this._process(a.then((e=>this._captureEvent(e,i,r)))),i.event_id}captureEvent(e,t,n){const r=yt();if(t&&t.originalException&&kt(t.originalException))return Kt&&xe.log(Bn),r;const i={event_id:r,...t},o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,i,o||n)),i.event_id}captureSession(e){\"string\"!=typeof e.release?Kt&&xe.warn(\"Discarded session because of missing or non-string release\"):(this.sendSession(e),Zt(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit(\"flush\"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Pt(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit(\"close\"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith(\"Spotlight\"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];Fn(this,e,this._integrations),t||Rn(this,[e])}sendEvent(e,t={}){this.emit(\"beforeSendEvent\",e,t);let n=Cn(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Bt(n,$t(e));const r=this.sendEnvelope(n);r&&r.then((t=>this.emit(\"afterSendEvent\",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const i=zt(n);return Ft({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:Ie(t)}},[\"aggregates\"in e?[{type:\"sessions\"},e]:[{type:\"session\"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r=\"number\"==typeof n?n:1,i=`${e}:${t}`;Kt&&xe.log(`Recording outcome: \"${i}\"${r>1?` (${r} times)`:\"\"}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit(\"beforeEnvelope\",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(Kt&&xe.error(\"Error while sending event:\",e),e))):(Kt&&xe.error(\"Transport disabled\"),Pt({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&Fn(e,t,n)})),n}(this,e),Rn(this,e)}_updateSessionFromEvent(e,t){let n=!1,r=!1;const i=t.exception&&t.exception.values;if(i){r=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const o=\"ok\"===e.status;(o&&0===e.errors||o&&n)&&(Zt(e,{...n&&{status:\"crashed\"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new At((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=hn()){const i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit(\"preprocessEvent\",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),An(i,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:n,spanId:r,parentSpanId:i,dsc:o}=t;e.contexts={trace:We({trace_id:n,span_id:r,parent_span_id:i}),...e.contexts};const a=o||kn(n,this);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Kt){const t=e;\"log\"===t.logLevel?xe.log(t.message):xe.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:i}=r,o=Jn(e),a=Vn(e),s=e.type||\"error\",c=`before send for type \\`${s}\\``,l=void 0===i?void 0:function(e){if(\"boolean\"==typeof e)return Number(e);const t=\"string\"==typeof e?parseFloat(e):e;if(!(\"number\"!=typeof t||isNaN(t)||t<0||t>1))return t;Kt&&xe.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}(i);if(a&&\"number\"==typeof l&&Math.random()>l)return this.recordDroppedEvent(\"sample_rate\",\"error\",e),Ot(new Re(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,\"log\"));const u=\"replay_event\"===s?\"replay\":s,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then((n=>{if(null===n)throw this.recordDroppedEvent(\"event_processor\",u,e),new Re(\"An event processor returned `null`, will not send event.\",\"log\");if(t.data&&!0===t.data.__sentry__)return n;const i=function(e,t,n,r){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:a}=t;if(Vn(n)&&i)return i(n,r);if(Jn(n)){if(n.spans&&a){const t=[];for(const r of n.spans){const n=a(r);n?t.push(n):e.recordDroppedEvent(\"before_send\",\"span\")}n.spans=t}if(o){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(n,r)}}return n}(this,r,n,t);return function(e,t){const n=`${t} must return \\`null\\` or a valid event.`;if(ue(e))return e.then((e=>{if(!ce(e)&&null!==e)throw new Re(n);return e}),(e=>{throw new Re(`${t} rejected with ${e}`)}));if(!ce(e)&&null!==e)throw new Re(n);return e}(i,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent(\"before_send\",u,e),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent(\"before_send\",\"span\",t)}throw new Re(`${c} returned \\`null\\`, will not send event.`,\"log\")}const i=n&&n.getSession();if(!o&&i&&this._updateSessionFromEvent(i,r),o){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent(\"before_send\",\"span\",e)}const a=r.transaction_info;if(o&&a&&r.transaction!==e.transaction){const e=\"custom\";r.transaction_info={...a,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof Re)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Re(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(\":\");return{reason:n,category:r,quantity:t}}))}_flushOutcomes(){Kt&&xe.log(\"Flushing outcomes...\");const e=this._clearOutcomes();if(0===e.length)return void(Kt&&xe.log(\"No outcomes to send\"));if(!this._dsn)return void(Kt&&xe.log(\"No dsn provided, will not send outcomes\"));Kt&&xe.log(\"Sending outcomes:\",e);const t=(n=e,Ft((r=this._options.tunnel&&Ie(this._dsn))?{dsn:r}:{},[[{type:\"client_report\"},{timestamp:i||lt(),discarded_events:n}]]));var n,r,i;this.sendEnvelope(t)}}function Vn(e){return void 0===e.type}function Jn(e){return\"transaction\"===e.type}function $n(e,t,n=jt(e.bufferSize||64)){let r={};return{send:function(i){const o=[];if(Ut(i,((t,n)=>{const i=Wt(n);if(function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,i)){const r=qn(t,n);e.recordDroppedEvent(\"ratelimit_backoff\",i,r)}else o.push(t)})),0===o.length)return Pt({});const a=Ft(i[0],o),s=t=>{Ut(a,((n,r)=>{const i=qn(n,r);e.recordDroppedEvent(t,Wt(r),i)}))};return n.add((()=>t({body:Jt(a)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Kt&&xe.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=Ht(r,e),e)),(e=>{throw s(\"network_error\"),e})))).then((e=>e),(e=>{if(e instanceof Re)return Kt&&xe.error(\"Skipped sending event because buffer is full.\"),s(\"queue_overflow\"),Pt({});throw e}))},flush:e=>n.drain(e)}}function qn(e,t){if(\"event\"===t||\"transaction\"===t)return Array.isArray(e)?e[1]:void 0}const Wn=100;function zn(e,t){const n=fn(),r=hn();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Wn}=n.getOptions();if(o<=0)return;const a={timestamp:lt(),...e},s=i?je((()=>i(a,t))):a;null!==s&&(n.emit&&n.emit(\"beforeAddBreadcrumb\",s,t),r.addBreadcrumb(s,o))}let Hn;const Gn=new WeakMap,Qn=()=>({name:\"FunctionToString\",setupOnce(){Hn=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Ve(this),n=Gn.has(fn())&&void 0!==t?t:this;return Hn.apply(n,e)}}catch(e){}},setup(e){Gn.set(e,!0)}}),Kn=[/^Script error\\.?$/,/^Javascript error: Script error\\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,\"undefined is not an object (evaluating 'a.L')\",'can\\'t redefine non-configurable property \"solana\"',\"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)\",\"Can't find variable: _AutofillCallbackHandler\"],Yn=(e={})=>({name:\"InboundFilters\",processEvent(t,n,r){const i=r.getOptions(),o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Kn],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i);return function(e,t){if(t.ignoreInternal&&function(e){try{return\"SentryError\"===e.exception.values[0].type}catch(e){}return!1}(e))return Kt&&xe.warn(`Event dropped due to being internal Sentry Error.\\nEvent: ${bt(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));return t}(e).some((e=>me(e,t)))}(e,t.ignoreErrors))return Kt&&xe.warn(`Event dropped due to being matched by \\`ignoreErrors\\` option.\\nEvent: ${bt(e)}`),!0;if(function(e){if(e.type)return!1;if(!e.exception||!e.exception.values||0===e.exception.values.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&\"Error\"!==e.type||e.value))}(e))return Kt&&xe.warn(`Event dropped due to not having an error message, error type or stacktrace.\\nEvent: ${bt(e)}`),!0;if(function(e,t){if(\"transaction\"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&me(n,t)}(e,t.ignoreTransactions))return Kt&&xe.warn(`Event dropped due to being matched by \\`ignoreTransactions\\` option.\\nEvent: ${bt(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Xn(e);return!!n&&me(n,t)}(e,t.denyUrls))return Kt&&xe.warn(`Event dropped due to being matched by \\`denyUrls\\` option.\\nEvent: ${bt(e)}.\\nUrl: ${Xn(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Xn(e);return!n||me(n,t)}(e,t.allowUrls))return Kt&&xe.warn(`Event dropped due to not being matched by \\`allowUrls\\` option.\\nEvent: ${bt(e)}.\\nUrl: ${Xn(e)}`),!0;return!1}(t,o)?null:t}});function Xn(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&\"<anonymous>\"!==n.filename&&\"[native code]\"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Kt&&xe.error(`Cannot extract url for event ${bt(e)}`),null}}const Zn=()=>{let e;return{name:\"Dedupe\",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!tr(e,t))return!1;if(!er(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=nr(t),r=nr(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!tr(e,t))return!1;if(!er(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Kt&&xe.warn(\"Event dropped due to being a duplicate of previously captured event.\"),null}catch(e){}return e=t}}};function er(e,t){let n=Ze(e),r=Ze(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function tr(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join(\"\")!==r.join(\"\"))}catch(e){return!1}}function nr(e){return e.exception&&e.exception.values&&e.exception.values[0]}const rr=ke;let ir=0;function or(){return ir>0}function ar(e,t={},n){if(\"function\"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return\"function\"==typeof t?t:e;if(Ve(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&\"function\"==typeof n&&n.apply(this,arguments);const i=r.map((e=>ar(e,t)));return e.apply(this,i)}catch(e){throw ir++,setTimeout((()=>{ir--})),function(...e){const t=dn(Yt());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}t.withScope(e[0])}((n=>{var i,o;n.addEventProcessor((e=>(t.mechanism&&(wt(e,void 0,void 0),St(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),i=e,pn().captureException(i,xn(o))})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}Ue(r,e),Be(e,\"__sentry_wrapped__\",r);try{Object.getOwnPropertyDescriptor(r,\"name\").configurable&&Object.defineProperty(r,\"name\",{get:()=>e.name})}catch(e){}return r}const sr=\"undefined\"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function cr(e,t){const n=dr(e,t),r={type:t&&t.name,value:hr(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&\"\"===r.value&&(r.value=\"Unrecoverable error caught\"),r}function lr(e,t,n,r){const i=fn(),o=i&&i.getOptions().normalizeDepth,a=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),s={__serialized__:Ct(t,o)};if(a)return{exception:{values:[cr(e,a)]},extra:s};const c={exception:{values:[{type:le(t)?t.constructor.name:r?\"UnhandledRejection\":\"Error\",value:mr(t,{isUnhandledRejection:r})}]},extra:s};if(n){const t=dr(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function ur(e,t){return{exception:{values:[cr(e,t)]}}}function dr(e,t){const n=t.stacktrace||t.stack||\"\",r=function(e){if(e&&pr.test(e.message))return 1;return 0}(t),i=function(e){if(\"number\"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,i)}catch(e){}return[]}const pr=/Minified React error #\\d+;/i;function hr(e){const t=e&&e.message;return t?t.error&&\"string\"==typeof t.error.message?t.error.message:t:\"No error message\"}function fr(e,t,n,r,i){let o;if(re(t)&&t.error){return ur(e,t.error)}if(ie(t)||ne(t,\"DOMException\")){const i=t;if(\"stack\"in t)o=ur(e,t);else{const t=i.name||(ie(i)?\"DOMError\":\"DOMException\"),a=i.message?`${t}: ${i.message}`:t;o=vr(e,a,n,r),wt(o,a)}return\"code\"in i&&(o.tags={...o.tags,\"DOMException.code\":`${i.code}`}),o}if(te(t))return ur(e,t);if(ce(t)||le(t)){return o=lr(e,t,n,i),St(o,{synthetic:!0}),o}return o=vr(e,t,n,r),wt(o,`${t}`,void 0),St(o,{synthetic:!0}),o}function vr(e,t,n,r){const i={};if(r&&n){const r=dr(e,n);r.length&&(i.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(ae(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i}function mr(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Je(e));n.sort();const r=n[0];if(!r)return\"[object has no keys]\";if(r.length>=t)return he(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(\", \");if(!(r.length>t))return e===n.length?r:he(r,t)}return\"\"}(e),r=t?\"promise rejection\":\"exception\";if(re(e))return`Event \\`ErrorEvent\\` captured as ${r} with message \\`${e.message}\\``;if(le(e)){return`Event \\`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}class gr extends Un{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};!function(e,t,n=[t],r=\"npm\"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:Se}))),version:Se}),e._metadata=i}(t,\"browser\",[\"browser\"],rr.SENTRY_SDK_SOURCE||\"npm\"),super(t),t.sendClientReports&&rr.document&&rr.document.addEventListener(\"visibilitychange\",(()=>{\"hidden\"===rr.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,r){const i=fr(e,t,n&&n.syntheticException||void 0,r);return St(i),i.level=\"error\",n&&n.event_id&&(i.event_id=n.event_id),Pt(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t=\"info\",n){return function(e,t,n=\"info\",r,i){const o=vr(e,t,r&&r.syntheticException||void 0,i);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),Pt(o)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(sr&&xe.warn(\"SDK not enabled, will not capture user feedback.\"));const t=function(e,{metadata:t,tunnel:n,dsn:r}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Ie(r)}},o=function(e){return[{type:\"user_report\"},e]}(e);return Ft(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||\"javascript\",super._prepareEvent(e,t,n)}}const yr=\"undefined\"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,_r=ke;let br,wr,Sr,kr;function Mr(){if(!_r.document)return;const e=it.bind(null,\"dom\"),t=Cr(e,!0);_r.document.addEventListener(\"click\",t,!1),_r.document.addEventListener(\"keypress\",t,!1),[\"EventTarget\",\"Node\"].forEach((t=>{const n=_r[t]&&_r[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty(\"addEventListener\")&&(Fe(n,\"addEventListener\",(function(t){return function(n,r,i){if(\"click\"===n||\"keypress\"==n)try{const r=this,o=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},a=o[n]=o[n]||{refCount:0};if(!a.handler){const r=Cr(e);a.handler=r,t.call(this,n,r,i)}a.refCount++}catch(e){}return t.call(this,n,r,i)}})),Fe(n,\"removeEventListener\",(function(e){return function(t,n,r){if(\"click\"===t||\"keypress\"==t)try{const n=this,i=n.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function Cr(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return\"keypress\"===e&&(!t||!t.tagName||\"INPUT\"!==t.tagName&&\"TEXTAREA\"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;Be(n,\"_sentryCaptured\",!0),r&&!r._sentryId&&Be(r,\"_sentryId\",yt());const i=\"keypress\"===n.type?\"input\":n.type;if(!function(e){if(e.type!==wr)return!1;try{if(!e.target||e.target._sentryId!==Sr)return!1}catch(e){}return!0}(n)){e({event:n,name:i,global:t}),wr=n.type,Sr=r?r._sentryId:void 0}clearTimeout(br),br=_r.setTimeout((()=>{Sr=void 0,wr=void 0}),1e3)}}function Er(){if(!function(){const e=Qt.chrome,t=e&&e.app&&e.app.runtime,n=\"history\"in Qt&&!!Qt.history.pushState&&!!Qt.history.replaceState;return!t&&n}())return;const e=_r.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=kr,t=String(n);kr=t;it(\"history\",{from:e,to:t})}return e.apply(this,t)}}_r.onpopstate=function(...t){const n=_r.location.href,r=kr;kr=n;if(it(\"history\",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},Fe(_r.history,\"pushState\",t),Fe(_r.history,\"replaceState\",t)}const Tr={};function Pr(e){Tr[e]=void 0}const Or=\"__sentry_xhr_v3__\";function Ar(){if(!_r.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=1e3*ut(),i=oe(n[0])?n[0].toUpperCase():void 0,o=function(e){if(oe(e))return e;try{return e.toString()}catch(e){}return}(n[1]);if(!i||!o)return e.apply(t,n);t[Or]={method:i,url:o,request_headers:{}},\"POST\"===i&&o.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[Or];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}it(\"xhr\",{endTimestamp:1e3*ut(),startTimestamp:r,xhr:t})}};return\"onreadystatechange\"in t&&\"function\"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(a(),e.apply(t,n))}):t.addEventListener(\"readystatechange\",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,i]=n,o=t[Or];return o&&oe(r)&&oe(i)&&(o.request_headers[r.toLowerCase()]=i),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[Or];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return it(\"xhr\",{startTimestamp:1e3*ut(),xhr:t}),e.apply(t,n)}})}function jr(e,t=function(e){const t=Tr[e];if(t)return t;let n=_r[e];if(st(n))return Tr[e]=n.bind(_r);const r=_r.document;if(r&&\"function\"==typeof r.createElement)try{const t=r.createElement(\"iframe\");t.hidden=!0,r.head.appendChild(t);const i=t.contentWindow;i&&i[e]&&(n=i[e]),r.head.removeChild(t)}catch(t){yr&&xe.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?Tr[e]=n.bind(_r):n}(\"fetch\")){let n=0,r=0;return $n(e,(function(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:\"POST\",referrerPolicy:\"origin\",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Pr(\"fetch\"),Ot(\"No fetch implementation available\");try{return t(e.url,a).then((e=>(n-=o,r--,{statusCode:e.status,headers:{\"x-sentry-rate-limits\":e.headers.get(\"X-Sentry-Rate-Limits\"),\"retry-after\":e.headers.get(\"Retry-After\")}})))}catch(e){return Pr(\"fetch\"),n-=o,r--,Ot(e)}}))}function xr(e,t,n,r){const i={filename:e,function:\"<anonymous>\"===t?He:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}const Lr=/^\\s*at (\\S+?)(?::(\\d+))(?::(\\d+))\\s*$/i,Ir=/^\\s*at (?:(.+?\\)(?: \\[.+\\])?|.*?) ?\\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,Dr=/\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/,Nr=/^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:[-a-z]+)?:\\/.*?|\\[native code\\]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i,Rr=/(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i,Fr=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,r=0)=>{const i=[],o=e.split(\"\\n\");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const a=Ge.test(n)?n.replace(Ge,\"$1\"):n;if(!a.match(/\\S*Error: /)){for(const e of t){const t=e(a);if(t){i.push(t);break}}if(i.length>=50+r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(Ke(t).function||\"\")&&t.pop();t.reverse(),Qe.test(Ke(t).function||\"\")&&(t.pop(),Qe.test(Ke(t).function||\"\")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||Ke(t).filename,function:e.function||He})))}(i.slice(r))}}(...[[30,e=>{const t=Lr.exec(e);if(t){const[,e,n,r]=t;return xr(e,He,+n,+r)}const n=Ir.exec(e);if(n){if(n[2]&&0===n[2].indexOf(\"eval\")){const e=Dr.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=Br(n[1]||He,n[2]);return xr(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,e=>{const t=Nr.exec(e);if(t){if(t[3]&&t[3].indexOf(\" > eval\")>-1){const e=Rr.exec(t[3]);e&&(t[1]=t[1]||\"eval\",t[3]=e[1],t[4]=e[2],t[5]=\"\")}let e=t[3],n=t[1]||He;return[n,e]=Br(n,e),xr(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]]),Br=(e,t)=>{const n=-1!==e.indexOf(\"safari-extension\"),r=-1!==e.indexOf(\"safari-web-extension\");return n||r?[-1!==e.indexOf(\"@\")?e.split(\"@\")[0]:He,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Ur=1024,Vr=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:\"Breadcrumbs\",setup(e){var n;t.console&&function(e){const t=\"console\";nt(t,e),rt(t,ot)}(function(e){return function(t){if(fn()!==e)return;const n={category:\"console\",data:{arguments:t.args,logger:\"console\"},level:It(t.level),message:fe(t.args,\" \")};if(\"assert\"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${fe(t.args.slice(1),\" \")||\"console.assert\"}`,n.data.arguments=t.args.slice(1)}zn(n,{input:t.args,level:t.level})}}(e)),t.dom&&(n=function(e,t){return function(n){if(fn()!==e)return;let r,i,o=\"object\"==typeof t?t.serializeAttribute:void 0,a=\"object\"==typeof t&&\"number\"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>Ur&&(sr&&xe.warn(`\\`dom.maxStringLength\\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=Ur),\"string\"==typeof o&&(o=[o]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Ee(t,{keyAttrs:o,maxStringLength:a}),i=function(e){if(!Ce.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(t)}catch(e){r=\"<unknown>\"}if(0===r.length)return;const s={category:`ui.${n.name}`,message:r};i&&(s.data={\"ui.component_name\":i}),zn(s,{event:n.event,name:n.name,global:n.global})}}(e,t.dom),nt(\"dom\",n),rt(\"dom\",Mr)),t.xhr&&function(e){nt(\"xhr\",e),rt(\"xhr\",Ar)}(function(e){return function(t){if(fn()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,i=t.xhr[Or];if(!n||!r||!i)return;const{method:o,url:a,status_code:s,body:c}=i,l={method:o,url:a,status_code:s},u={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r};zn({category:\"xhr\",data:l,type:\"http\",level:we(s)},u)}}(e)),t.fetch&&dt(function(e){return function(t){if(fn()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||\"POST\"!==t.fetchData.method))if(t.error){zn({category:\"fetch\",data:t.fetchData,level:\"error\",type:\"http\"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response,i={...t.fetchData,status_code:e&&e.status},o={input:t.args,response:e,startTimestamp:n,endTimestamp:r};zn({category:\"fetch\",data:i,type:\"http\",level:we(i.status_code)},o)}}}(e)),t.history&&function(e){const t=\"history\";nt(t,e),rt(t,Er)}(function(e){return function(t){if(fn()!==e)return;let n=t.from,r=t.to;const i=xt(rr.location.href);let o=n?xt(n):void 0;const a=xt(r);o&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),zn({category:\"navigation\",data:{from:n,to:r}})}}(e)),t.sentry&&e.on(\"beforeSendEvent\",function(e){return function(t){fn()===e&&zn({category:\"sentry.\"+(\"transaction\"===t.type?\"transaction\":\"event\"),event_id:t.event_id,level:t.level,message:bt(t)},{event:t})}}(e))}}};const Jr=[\"EventTarget\",\"Window\",\"Node\",\"ApplicationCache\",\"AudioTrackList\",\"BroadcastChannel\",\"ChannelMergerNode\",\"CryptoOperation\",\"EventSource\",\"FileReader\",\"HTMLUnknownElement\",\"IDBDatabase\",\"IDBRequest\",\"IDBTransaction\",\"KeyOperation\",\"MediaController\",\"MessagePort\",\"ModalWindow\",\"Notification\",\"SVGElementInstance\",\"Screen\",\"SharedWorker\",\"TextTrack\",\"TextTrackCue\",\"TextTrackList\",\"WebSocket\",\"WebSocketWorker\",\"Worker\",\"XMLHttpRequest\",\"XMLHttpRequestEventTarget\",\"XMLHttpRequestUpload\"],$r=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:\"BrowserApiErrors\",setupOnce(){t.setTimeout&&Fe(rr,\"setTimeout\",qr),t.setInterval&&Fe(rr,\"setInterval\",qr),t.requestAnimationFrame&&Fe(rr,\"requestAnimationFrame\",Wr),t.XMLHttpRequest&&\"XMLHttpRequest\"in rr&&Fe(XMLHttpRequest.prototype,\"send\",zr);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Jr).forEach(Hr)}}}};function qr(e){return function(...t){const n=t[0];return t[0]=ar(n,{mechanism:{data:{function:Xe(e)},handled:!1,type:\"instrument\"}}),e.apply(this,t)}}function Wr(e){return function(t){return e.apply(this,[ar(t,{mechanism:{data:{function:\"requestAnimationFrame\",handler:Xe(e)},handled:!1,type:\"instrument\"}})])}}function zr(e){return function(...t){const n=this;return[\"onload\",\"onerror\",\"onprogress\",\"onreadystatechange\"].forEach((e=>{e in n&&\"function\"==typeof n[e]&&Fe(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Xe(t)},handled:!1,type:\"instrument\"}},r=Ve(t);return r&&(n.mechanism.data.handler=Xe(r)),ar(t,n)}))})),e.apply(this,t)}}function Hr(e){const t=rr,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty(\"addEventListener\")&&(Fe(n,\"addEventListener\",(function(t){return function(n,r,i){try{\"function\"==typeof r.handleEvent&&(r.handleEvent=ar(r.handleEvent,{mechanism:{data:{function:\"handleEvent\",handler:Xe(r),target:e},handled:!1,type:\"instrument\"}}))}catch(e){}return t.apply(this,[n,ar(r,{mechanism:{data:{function:\"addEventListener\",handler:Xe(r),target:e},handled:!1,type:\"instrument\"}}),i])}})),Fe(n,\"removeEventListener\",(function(e){return function(t,n,r){const i=n;try{const n=i&&i.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,i,r)}})))}const Gr=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:\"GlobalHandlers\",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){!function(e){const t=\"error\";nt(t,e),rt(t,vt)}((t=>{const{stackParser:n,attachStacktrace:r}=Kr();if(fn()!==e||or())return;const{msg:i,url:o,line:a,column:s,error:c}=t,l=function(e,t,n,r){const i=e.exception=e.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},s=a.stacktrace=a.stacktrace||{},c=s.frames=s.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=oe(t)&&t.length>0?t:function(){try{return Ce.document.location.href}catch(e){return\"\"}}();0===c.length&&c.push({colno:l,filename:d,function:He,in_app:!0,lineno:u});return e}(fr(n,c||i,void 0,r,!1),o,a,s);l.level=\"error\",In(l,{originalException:c,mechanism:{handled:!1,type:\"onerror\"}})}))}(e),Qr(\"onerror\")),t.onunhandledrejection&&(!function(e){!function(e){const t=\"unhandledrejection\";nt(t,e),rt(t,gt)}((t=>{const{stackParser:n,attachStacktrace:r}=Kr();if(fn()!==e||or())return;const i=function(e){if(se(e))return e;try{if(\"reason\"in e)return e.reason;if(\"detail\"in e&&\"reason\"in e.detail)return e.detail.reason}catch(e){}return e}(t),o=se(i)?{exception:{values:[{type:\"UnhandledRejection\",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:fr(n,i,void 0,r,!0);o.level=\"error\",In(o,{originalException:i,mechanism:{handled:!1,type:\"onunhandledrejection\"}})}))}(e),Qr(\"onunhandledrejection\"))}}};function Qr(e){sr&&xe.log(`Global Handler attached: ${e}`)}function Kr(){const e=fn();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Yr=()=>({name:\"HttpContext\",preprocessEvent(e){if(!rr.navigator&&!rr.location&&!rr.document)return;const t=e.request&&e.request.url||rr.location&&rr.location.href,{referrer:n}=rr.document||{},{userAgent:r}=rr.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{\"User-Agent\":r}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),Xr=(e={})=>{const t=e.limit||5,n=e.key||\"cause\";return{name:\"LinkedErrors\",preprocessEvent(e,r,i){const o=i.getOptions();ge(cr,o.stackParser,o.maxValueLength,n,t,e,r)}}};var Zr=\"new\",ei=\"loading\",ti=\"loaded\",ni=\"joining-meeting\",ri=\"joined-meeting\",ii=\"left-meeting\",oi=\"error\",ai=\"blocked\",si=\"off\",ci=\"sendable\",li=\"loading\",ui=\"interrupted\",di=\"playable\",pi=\"unknown\",hi=\"full\",fi=\"lobby\",vi=\"none\",mi=\"base\",gi=\"*\",yi=\"ejected\",_i=\"nbf-room\",bi=\"nbf-token\",wi=\"exp-room\",Si=\"exp-token\",ki=\"no-room\",Mi=\"meeting-full\",Ci=\"end-of-life\",Ei=\"not-allowed\",Ti=\"connection-error\",Pi=\"cam-in-use\",Oi=\"mic-in-use\",Ai=\"cam-mic-in-use\",ji=\"permissions\",xi=\"undefined-mediadevices\",Li=\"not-found\",Ii=\"constraints\",Di=\"unknown\",Ni=\"iframe-ready-for-launch-config\",Ri=\"iframe-launch-config\",Fi=\"theme-updated\",Bi=\"loading\",Ui=\"load-attempt-failed\",Vi=\"loaded\",Ji=\"started-camera\",$i=\"camera-error\",qi=\"joining-meeting\",Wi=\"joined-meeting\",zi=\"left-meeting\",Hi=\"participant-joined\",Gi=\"participant-updated\",Qi=\"participant-left\",Ki=\"participant-counts-updated\",Yi=\"access-state-updated\",Xi=\"meeting-session-summary-updated\",Zi=\"meeting-session-state-updated\",eo=\"meeting-session-data-error\",to=\"waiting-participant-added\",no=\"waiting-participant-updated\",ro=\"waiting-participant-removed\",io=\"track-started\",oo=\"track-stopped\",ao=\"transcription-started\",so=\"transcription-stopped\",co=\"transcription-error\",lo=\"recording-started\",uo=\"recording-stopped\",po=\"recording-stats\",ho=\"recording-error\",fo=\"recording-upload-completed\",vo=\"recording-data\",mo=\"app-message\",go=\"transcription-message\",yo=\"remote-media-player-started\",_o=\"remote-media-player-updated\",bo=\"remote-media-player-stopped\",wo=\"local-screen-share-started\",So=\"local-screen-share-stopped\",ko=\"local-screen-share-canceled\",Mo=\"active-speaker-change\",Co=\"active-speaker-mode-change\",Eo=\"network-quality-change\",To=\"network-connection\",Po=\"cpu-load-change\",Oo=\"face-counts-updated\",Ao=\"fullscreen\",jo=\"exited-fullscreen\",xo=\"live-streaming-started\",Lo=\"live-streaming-updated\",Io=\"live-streaming-stopped\",Do=\"live-streaming-error\",No=\"lang-updated\",Ro=\"receive-settings-updated\",Fo=\"input-settings-updated\",Bo=\"nonfatal-error\",Uo=\"error\",Vo=4096,Jo=102400,$o=\"iframe-call-message\",qo=\"local-screen-start\",Wo=\"daily-method-update-live-streaming-endpoints\",zo=\"transmit-log\",Ho=\"daily-custom-track\",Go={NONE:\"none\",BGBLUR:\"background-blur\",BGIMAGE:\"background-image\",FACE_DETECTION:\"face-detection\"},Qo={NONE:\"none\",NOISE_CANCELLATION:\"noise-cancellation\"},Ko={PLAY:\"play\",PAUSE:\"pause\"},Yo=[\"jpg\",\"png\",\"jpeg\"],Xo=\"add-endpoints\",Zo=\"remove-endpoints\",ea=\"sip-call-transfer\";function ta(){return!na()&&\"undefined\"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:\"\"}function na(){return\"undefined\"!=typeof navigator&&navigator.product&&\"ReactNative\"===navigator.product}function ra(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function ia(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(e,t){if(!e||!t)return!0;switch(e){case\"Chrome\":return t.major>=75;case\"Safari\":return RTCRtpTransceiver.prototype.hasOwnProperty(\"currentDirection\")&&!(13===t.major&&0===t.minor&&0===t.point);case\"Firefox\":return t.major>=67}return!0}(pa(),ha())||na())}function oa(){if(na())return!1;if(!document)return!1;var e=document.createElement(\"iframe\");return!!e.requestFullscreen||!!e.webkitRequestFullscreen}var aa=function(){try{var e=document.createElement(\"canvas\"),t=null!=e.getContext(\"webgl2\");return e.remove(),t}catch(e){return!1}}();function sa(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!na()&&(!!aa&&(e?function(){if(da())return!1;return[\"Chrome\",\"Firefox\"].includes(pa())}():function(){if(da())return!1;var e=pa();if(\"Safari\"===e){var t=ga();if(t.major<15||15===t.major&&t.minor<4)return!1}if(\"Chrome\"===e){return fa().major>=77}if(\"Firefox\"===e){return ya().major>=97}return[\"Chrome\",\"Firefox\",\"Safari\"].includes(e)}()))}function ca(){if(na())return!1;if(ua())return!1;if(\"undefined\"==typeof AudioWorkletNode)return!1;switch(pa()){case\"Chrome\":case\"Firefox\":return!0;case\"Safari\":var e=ha();return e.major>17||17===e.major&&e.minor>=4}return!1}function la(){return ra()&&!function(){var e,t=pa();if(!ta())return!0;switch(t){case\"Chrome\":return(e=fa()).major&&e.major>0&&e.major<75;case\"Firefox\":return(e=ya()).major<91;case\"Safari\":return(e=ga()).major<13||13===e.major&&e.minor<1;default:return!0}}()}function ua(){return ta().match(/Linux; Android/)}function da(){var e,t,n=ta(),r=n.match(/Mac/)&&(!na()&&\"undefined\"!=typeof window&&null!==(e=window)&&void 0!==e&&null!==(t=e.navigator)&&void 0!==t&&t.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(n.match(/Mobi/)||n.match(/Android/)||r)||(!!ta().match(/DailyAnd\\//)||void 0)}function pa(){if(\"undefined\"!=typeof window){var e=ta();return va()?\"Safari\":e.indexOf(\"Edge\")>-1?\"Edge\":e.match(/Chrome\\//)?\"Chrome\":e.indexOf(\"Safari\")>-1||ma()?\"Safari\":e.indexOf(\"Firefox\")>-1?\"Firefox\":e.indexOf(\"MSIE\")>-1||e.indexOf(\".NET\")>-1?\"IE\":\"Unknown Browser\"}}function ha(){switch(pa()){case\"Chrome\":return fa();case\"Safari\":return ga();case\"Firefox\":return ya();case\"Edge\":return function(){var e=0,t=0;if(\"undefined\"!=typeof window){var n=ta().match(/Edge\\/(\\d+).(\\d+)/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2])}catch(e){}}return{major:e,minor:t}}()}}function fa(){var e=0,t=0,n=0,r=0,i=!1;if(\"undefined\"!=typeof window){var o=ta(),a=o.match(/Chrome\\/(\\d+).(\\d+).(\\d+).(\\d+)/);if(a)try{e=parseInt(a[1]),t=parseInt(a[2]),n=parseInt(a[3]),r=parseInt(a[4]),i=o.indexOf(\"OPR/\")>-1}catch(e){}}return{major:e,minor:t,build:n,patch:r,opera:i}}function va(){return!!ta().match(/iPad|iPhone|iPod/i)&&ra()}function ma(){return ta().indexOf(\"AppleWebKit/605.1.15\")>-1}function ga(){var e=0,t=0,n=0;if(\"undefined\"!=typeof window){var r=ta().match(/Version\\/(\\d+).(\\d+)(.(\\d+))?/);if(r)try{e=parseInt(r[1]),t=parseInt(r[2]),n=parseInt(r[4])}catch(e){}else(va()||ma())&&(e=14,t=0,n=3)}return{major:e,minor:t,point:n}}function ya(){var e=0,t=0;if(\"undefined\"!=typeof window){var n=ta().match(/Firefox\\/(\\d+).(\\d+)/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2])}catch(e){}}return{major:e,minor:t}}var _a=function(){function e(){t(this,e)}return o(e,[{key:\"addListenerForMessagesFromCallMachine\",value:function(e,t,n){K()}},{key:\"addListenerForMessagesFromDailyJs\",value:function(e,t,n){K()}},{key:\"sendMessageToCallMachine\",value:function(e,t,n,r){K()}},{key:\"sendMessageToDailyJs\",value:function(e,t){K()}},{key:\"removeListener\",value:function(e){K()}}]),e}();function ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sa(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}var ka=function(){c(n,_a);var e=Sa(n);function n(){var r;return t(this,n),(r=e.call(this))._wrappedListeners={},r._messageCallbacks={},r}return o(n,[{key:\"addListenerForMessagesFromCallMachine\",value:function(e,t,n){var r=this,i=function(i){if(i.data&&\"iframe-call-message\"===i.data.what&&(!i.data.callClientId||i.data.callClientId===t)&&(!i.data.from||\"module\"!==i.data.from)){var o=wa({},i.data);if(delete o.from,o.callbackStamp&&r._messageCallbacks[o.callbackStamp]){var a=o.callbackStamp;r._messageCallbacks[a].call(n,o),delete r._messageCallbacks[a]}delete o.what,delete o.callbackStamp,e.call(n,o)}};this._wrappedListeners[e]=i,window.addEventListener(\"message\",i)}},{key:\"addListenerForMessagesFromDailyJs\",value:function(e,t,n){var r=function(r){var i;if(!(!r.data||r.data.what!==$o||!r.data.action||r.data.from&&\"module\"!==r.data.from||r.data.callClientId&&t&&r.data.callClientId!==t||null!=r&&null!==(i=r.data)&&void 0!==i&&i.callFrameId)){var o=r.data;e.call(n,o)}};this._wrappedListeners[e]=r,window.addEventListener(\"message\",r)}},{key:\"sendMessageToCallMachine\",value:function(e,t,n,r){if(!n)throw new Error(\"undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?\");var i=wa({},e);if(i.what=$o,i.from=\"module\",i.callClientId=n,t){var o=Q();this._messageCallbacks[o]=t,i.callbackStamp=o}var a=r?r.contentWindow:window,s=this._callMachineTargetOrigin(r);s&&a.postMessage(i,s)}},{key:\"sendMessageToDailyJs\",value:function(e,t){e.what=$o,e.callClientId=t,e.from=\"embedded\",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:\"removeListener\",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener(\"message\",t),delete this._wrappedListeners[e])}},{key:\"forwardPackagedMessageToCallMachine\",value:function(e,t,n){var r=wa({},e);r.callClientId=n;var i=t?t.contentWindow:window,o=this._callMachineTargetOrigin(t);o&&i.postMessage(r,o)}},{key:\"addListenerForPackagedMessagesFromCallMachine\",value:function(e,t){var n=function(n){if(n.data&&\"iframe-call-message\"===n.data.what&&(!n.data.callClientId||n.data.callClientId===t)&&(!n.data.from||\"module\"!==n.data.from)){var r=n.data;e(r)}};return this._wrappedListeners[e]=n,window.addEventListener(\"message\",n),e}},{key:\"removeListenerForPackagedMessagesFromCallMachine\",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener(\"message\",t),delete this._wrappedListeners[e])}},{key:\"_callMachineTargetOrigin\",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:\"_targetOriginFromWindowLocation\",value:function(){return\"file:\"===window.location.protocol?\"*\":window.location.origin}}]),n}();function Ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}var Ea=function(){c(n,_a);var e=Ca(n);function n(){var r;return t(this,n),r=e.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new g.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new g.EventEmitter,r._wrappedListeners={},r._messageCallbacks={},r}return o(n,[{key:\"addListenerForMessagesFromCallMachine\",value:function(e,t,n){this._addListener(e,global.callMachineToDailyJsEmitter,t,n,\"received call machine message\")}},{key:\"addListenerForMessagesFromDailyJs\",value:function(e,t,n){this._addListener(e,global.dailyJsToCallMachineEmitter,t,n,\"received daily-js message\")}},{key:\"sendMessageToCallMachine\",value:function(e,t,n){this._sendMessage(e,global.dailyJsToCallMachineEmitter,n,t,\"sending message to call machine\")}},{key:\"sendMessageToDailyJs\",value:function(e,t){this._sendMessage(e,global.callMachineToDailyJsEmitter,t,null,\"sending message to daily-js\")}},{key:\"removeListener\",value:function(e){var t=this._wrappedListeners[e];t&&(global.callMachineToDailyJsEmitter.removeListener(\"message\",t),global.dailyJsToCallMachineEmitter.removeListener(\"message\",t),delete this._wrappedListeners[e])}},{key:\"_addListener\",value:function(e,t,n,r,i){var o=this,a=function(t){if(t.callClientId===n){if(t.callbackStamp&&o._messageCallbacks[t.callbackStamp]){var i=t.callbackStamp;o._messageCallbacks[i].call(r,t),delete o._messageCallbacks[i]}e.call(r,t)}};this._wrappedListeners[e]=a,t.addListener(\"message\",a)}},{key:\"_sendMessage\",value:function(e,t,n,r,i){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ma(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);if(o.callClientId=n,r){var a=Q();this._messageCallbacks[a]=r,o.callbackStamp=a}t.emit(\"message\",o)}}]),n}(),Ta=\"replace\",Pa=\"shallow-merge\",Oa=[Ta,Pa];var Aa=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.data,i=n.mergeStrategy,o=void 0===i?Ta:i;t(this,e),e._validateMergeStrategy(o),e._validateData(r,o),this.mergeStrategy=o,this.data=r}return o(e,[{key:\"isNoOp\",value:function(){return e.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:\"isNoOpUpdate\",value:function(e,t){return 0===Object.keys(e).length&&t===Pa}},{key:\"_validateMergeStrategy\",value:function(e){if(!Oa.includes(e))throw Error(\"Unrecognized mergeStrategy provided. Options are: [\".concat(Oa,\"]\"))}},{key:\"_validateData\",value:function(e,t){if(!function(e){if(null==e||\"object\"!==n(e))return!1;var t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}(e))throw Error(\"Meeting session data must be a plain (map-like) object\");var r;try{if(r=JSON.stringify(e),t===Ta){var i=JSON.parse(r);D(i,e)||console.warn(\"The meeting session data provided will be modified when serialized.\",i,e)}else if(t===Pa)for(var o in e)if(Object.hasOwnProperty.call(e,o)&&void 0!==e[o]){var a=JSON.parse(JSON.stringify(e[o]));D(e[o],a)||console.warn(\"At least one key in the meeting session data provided will be modified when serialized.\",a,e[o])}}catch(e){throw Error(\"Meeting session data must be serializable to JSON: \".concat(e))}if(r.length>Jo)throw Error(\"Meeting session data is too large (\".concat(r.length,\" characters). Maximum size suppported is \").concat(Jo,\".\"))}}]),e}();function ja(e,t,n){return ja=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i},ja.apply(null,arguments)}function xa(e){var t=\"function\"==typeof Map?new Map:void 0;return xa=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ja(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)},xa(e)}function La(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function Ia(e){var t,n=null===(t=window._daily)||void 0===t?void 0:t.pendings;if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}var Da=function(){function e(n){t(this,e),this._currentLoad=null,this._callClientId=n}return o(e,[{key:\"load\",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void r(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new Na(n,(function(){r(!1)}),(function(e,n){n||Ia(t._callClientId),i(e,n)})),this._currentLoad.start()}},{key:\"cancel\",value:function(){this._currentLoad&&this._currentLoad.cancel(),Ia(this._callClientId)}},{key:\"loaded\",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),e}(),Na=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;t(this,e),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=n,this._successCallback=r,this._failureCallback=i}return o(e,[{key:\"start\",value:function(){var e=this;if(!this._currentAttempt){this._currentAttempt=new Ba(this._dailyConfig,this._successCallback,(function t(n){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(n,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout((function(){e._currentAttempt.cancelled||(e._currentAttempt=new Ba(e._dailyConfig,e._successCallback,t),e._currentAttempt.start())}),3e3))})),this._currentAttempt.start()}}},{key:\"cancel\",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:\"cancelled\",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:\"succeeded\",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),e}(),Ra=function(){c(n,xa(Error));var e=La(n);function n(){return t(this,n),e.apply(this,arguments)}return o(n)}(),Fa=2e4,Ba=function(){function e(n,r,i){t(this,e),this._loadAttemptImpl=na()||!n.avoidEval?new Ua(n,r,i):new Va(n,r,i)}var n;return o(e,[{key:\"start\",value:(n=h((function*(){return this._loadAttemptImpl.start()})),function(){return n.apply(this,arguments)})},{key:\"cancel\",value:function(){this._loadAttemptImpl.cancel()}},{key:\"cancelled\",get:function(){return this._loadAttemptImpl.cancelled}},{key:\"succeeded\",get:function(){return this._loadAttemptImpl.succeeded}}]),e}(),Ua=function(){function e(n,r,i){t(this,e),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=\"undefined\"!=typeof iOSCallObjectBundleCache&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=n,this._successCallback=r,this._failureCallback=i}var n,r,i,a;return o(e,[{key:\"start\",value:(a=h((function*(){var e=X(this._dailyConfig);!(yield this._tryLoadFromIOSCache(e))&&this._loadFromNetwork(e)})),function(){return a.apply(this,arguments)})},{key:\"cancel\",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:\"_tryLoadFromIOSCache\",value:(i=h((function*(e){if(!this._iosCache)return!1;try{var t=yield this._iosCache.get(e);return!!this.cancelled||!!t&&(t.code?(Function('\"use strict\";'+t.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=t.refetchHeaders,!1))}catch(e){return!1}})),function(e){return i.apply(this,arguments)})},{key:\"_loadFromNetwork\",value:(r=h((function*(e){var t=this;this._networkTimeout=setTimeout((function(){t._networkTimedOut=!0,t._failureCallback({msg:\"Timed out (>\".concat(Fa,\" ms) when loading call object bundle \").concat(e),type:\"timeout\"})}),Fa);try{var n=this._refetchHeaders?{headers:this._refetchHeaders}:{},r=yield fetch(e,n);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new Ra;var i=yield this._getBundleCodeFromResponse(e,r);if(this.cancelled)throw new Ra;Function('\"use strict\";'+i)(),this._iosCache&&this._iosCache.set(e,i,r.headers),this.succeeded=!0,this._successCallback()}catch(t){if(clearTimeout(this._networkTimeout),t instanceof Ra||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:\"Failed to load call object bundle \".concat(e,\": \").concat(t),type:t.message})}})),function(e){return r.apply(this,arguments)})},{key:\"_getBundleCodeFromResponse\",value:(n=h((function*(e,t){if(t.ok)return yield t.text();if(this._iosCache&&304===t.status)return(yield this._iosCache.renew(e,t.headers)).code;throw new Error(\"Received \".concat(t.status,\" response\"))})),function(e,t){return n.apply(this,arguments)})}]),e}(),Va=function(){function e(n,r,i){t(this,e),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=n,this._successCallback=r,this._failureCallback=i,this._attemptId=Q(),this._networkTimeout=null,this._scriptElement=null}return o(e,[{key:\"start\",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=X(this._dailyConfig);\"object\"===(\"undefined\"==typeof document?\"undefined\":n(document))?this._startLoading(e):this._failureCallback({msg:\"Call object bundle must be loaded in a DOM/web context\",type:\"missing context\"})}},{key:\"cancel\",value:function(){this._stopLoading(),this.cancelled=!0}},{key:\"_startLoading\",value:function(e){var t=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout((function(){t._stopLoading(),t._failureCallback({msg:\"Timed out (>\".concat(Fa,\" ms) when loading call object bundle \").concat(e),type:\"timeout\"})}),Fa);var n=document.getElementsByTagName(\"head\")[0],r=document.createElement(\"script\");this._scriptElement=r,r.onload=function(){t._stopLoading(),t.succeeded=!0,t._successCallback()},r.onerror=function(e){t._stopLoading(),t._failureCallback({msg:\"Failed to load call object bundle \".concat(e.target.src),type:e.message})},r.src=e,n.appendChild(r)}},{key:\"_stopLoading\",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:\"_signUpForCallMachineLoadWaitlist\",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:\"_withdrawFromCallMachineLoadWaitlist\",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),e}(),Ja=function(e,t,n){return!0===Wa(e.local,t,n)},$a=function(e,t,n){return e.local.streams&&e.local.streams[t]&&e.local.streams[t].stream&&e.local.streams[t].stream[\"get\".concat(\"video\"===n?\"Video\":\"Audio\",\"Tracks\")]()[0]},qa=function(e,t,n,r){var i=za(e,t,n,r);return i&&i.pendingTrack},Wa=function(e,t,n){if(!e)return!1;var r=function(e){switch(e){case\"avatar\":return!0;case\"staged\":return e;default:return!!e}},i=e.public.subscribedTracks;return i&&i[t]?-1===[\"cam-audio\",\"cam-video\",\"screen-video\",\"screen-audio\",\"rmpAudio\",\"rmpVideo\"].indexOf(n)&&i[t].custom?[!0,\"staged\"].includes(i[t].custom)?r(i[t].custom):r(i[t].custom[n]):r(i[t][n]):!i||r(i.ALL)},za=function(e,t,n,r){var i=Object.values(e.streams||{}).filter((function(e){return e.participantId===t&&e.type===n&&e.pendingTrack&&e.pendingTrack.kind===r})).sort((function(e,t){return new Date(t.starttime)-new Date(e.starttime)}));return i&&i[0]},Ha=function(e,t){var n=e.local.public.customTracks;if(n&&n[t])return n[t].track};function Ga(e,t){for(var n=t.getState(),r=0,i=[\"cam\",\"screen\"];r<i.length;r++)for(var o=i[r],a=0,s=[\"video\",\"audio\"];a<s.length;a++){var c=s[a],l=\"cam\"===o?c:\"screen\".concat(c.charAt(0).toUpperCase()+c.slice(1)),u=e.tracks[l];if(u){var d=e.local?$a(n,o,c):qa(n,e.session_id,o,c);\"playable\"===u.state&&(u.track=d),u.persistentTrack=d}}}function Qa(e,t){try{var n=t.getState();for(var r in e.tracks)if(!Ka(r)){var i=e.tracks[r].kind;if(i){var o=e.tracks[r];if(o){var a=e.local?Ha(n,r):qa(n,e.session_id,r,i);\"playable\"===o.state&&(e.tracks[r].track=a),o.persistentTrack=a}}else console.error(\"unknown type for custom track\")}}catch(e){console.error(e)}}function Ka(e){return[\"video\",\"audio\",\"screenVideo\",\"screenAudio\"].includes(e)}function Ya(e,t,n){var r=n.getState();if(e.local){if(e.audio)try{e.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],e.audioTrack||(e.audio=!1)}catch(e){}if(e.video)try{e.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],e.videoTrack||(e.video=!1)}catch(e){}if(e.screen)try{e.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],e.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(e){}}else{var i=!0;try{var o=r.participants[e.session_id];o&&o.public&&o.public.rtcType&&\"peer-to-peer\"===o.public.rtcType.impl&&o.private&&![\"connected\",\"completed\"].includes(o.private.peeringState)&&(i=!1)}catch(e){console.error(e)}if(!i)return e.audio=!1,e.audioTrack=!1,e.video=!1,e.videoTrack=!1,e.screen=!1,void(e.screenTrack=!1);try{r.streams;if(e.audio&&Ja(r,e.session_id,\"cam-audio\")){var a=qa(r,e.session_id,\"cam\",\"audio\");a&&(t&&t.audioTrack&&t.audioTrack.id===a.id?e.audioTrack=a:a.muted||(e.audioTrack=a)),e.audioTrack||(e.audio=!1)}if(e.video&&Ja(r,e.session_id,\"cam-video\")){var s=qa(r,e.session_id,\"cam\",\"video\");s&&(t&&t.videoTrack&&t.videoTrack.id===s.id?e.videoTrack=s:s.muted||(e.videoTrack=s)),e.videoTrack||(e.video=!1)}if(e.screen&&Ja(r,e.session_id,\"screen-audio\")){var c=qa(r,e.session_id,\"screen\",\"audio\");c&&(t&&t.screenAudioTrack&&t.screenAudioTrack.id===c.id?e.screenAudioTrack=c:c.muted||(e.screenAudioTrack=c))}if(e.screen&&Ja(r,e.session_id,\"screen-video\")){var l=qa(r,e.session_id,\"screen\",\"video\");l&&(t&&t.screenVideoTrack&&t.screenVideoTrack.id===l.id?e.screenVideoTrack=l:l.muted||(e.screenVideoTrack=l))}e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(e){console.error(\"unexpected error matching up tracks\",e)}}}function Xa(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if(\"string\"==typeof e)return Za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Za(e,t)}(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var es=new Map,ts=null;function ns(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if(\"string\"==typeof e)return rs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rs(e,t)}(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var is=new Map,os=null;function as(e){cs()?function(e){es.has(e)||(es.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(t){es.has(e)&&(es.get(e).lastDevicesString=JSON.stringify(t),ts||(ts=function(){var e=h((function*(){var e,t=yield navigator.mediaDevices.enumerateDevices(),n=Xa(es.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value,i=JSON.stringify(t);i!==es.get(r).lastDevicesString&&(es.get(r).lastDevicesString=i,r(t))}}catch(e){n.e(e)}finally{n.f()}}));return function(){return e.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener(\"devicechange\",ts)))})).catch((function(){})))}(e):function(e){is.has(e)||(is.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(t){is.has(e)&&(is.get(e).lastDevicesString=JSON.stringify(t),os||(os=setInterval(h((function*(){var e,t=yield navigator.mediaDevices.enumerateDevices(),n=ns(is.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value,i=JSON.stringify(t);i!==is.get(r).lastDevicesString&&(is.get(r).lastDevicesString=i,r(t))}}catch(e){n.e(e)}finally{n.f()}})),3e3)))})))}(e)}function ss(e){cs()?function(e){es.has(e)&&(es.delete(e),0===es.size&&ts&&(navigator.mediaDevices.removeEventListener(\"devicechange\",ts),ts=null))}(e):function(e){is.has(e)&&(is.delete(e),0===is.size&&os&&(clearInterval(os),os=null))}(e)}function cs(){return na()||void 0!==navigator.mediaDevices.ondevicechange}var ls=new Set;function us(e,t){var n=t.isLocalScreenVideo;return e&&\"live\"===e.readyState&&!function(e,t){return(!t.isLocalScreenVideo||\"Chrome\"!==pa())&&e.muted&&!ls.has(e.id)}(e,{isLocalScreenVideo:n})}var ds=[\"result\"],ps=[\"preserveIframe\"];function hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vs(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function ms(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if(\"string\"==typeof e)return gs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gs(e,t)}(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function gs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ys={};var _s=\"video\",bs=\"voice\",ws=na()?{data:{}}:{data:{},topology:\"none\"},Ss={present:0,hidden:0},ks={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Ms=Object.keys(ks),Cs=[\"state\",\"volume\",\"simulcastEncodings\"],Es={androidInCallNotification:{title:\"string\",subtitle:\"string\",iconName:\"string\",disableForCustomOverride:\"boolean\"},disableAutoDeviceManagement:{audio:\"boolean\",video:\"boolean\"}},Ts={id:{iconPath:\"string\",iconPathDarkMode:\"string\",label:\"string\",tooltip:\"string\",visualState:\"'default' | 'sidebar-open' | 'active'\"}},Ps={id:{allow:\"string\",controlledBy:\"'*' | 'owners' | string[]\",csp:\"string\",iconURL:\"string\",label:\"string\",loading:\"'eager' | 'lazy'\",location:\"'main' | 'sidebar'\",name:\"string\",referrerPolicy:\"string\",sandbox:\"string\",src:\"string\",srcdoc:\"string\",shared:\"string[] | 'owners' | boolean\"}},Os={customIntegrations:{validate:Ks,help:Gs()},customTrayButtons:{validate:Qs,help:\"customTrayButtons should be a dictionary of the type \".concat(JSON.stringify(Ts))},url:{validate:function(e){return\"string\"==typeof e},help:\"url should be a string\"},baseUrl:{validate:function(e){return\"string\"==typeof e},help:\"baseUrl should be a string\"},token:{validate:function(e){return\"string\"==typeof e},help:\"token should be a string\",queryString:\"t\"},dailyConfig:{validate:function(e,t){try{return t.validateDailyConfig(e),!0}catch(e){console.error(\"Failed to validate dailyConfig\",e)}return!1},help:\"Unsupported dailyConfig. Check error logs for detailed info.\"},reactNativeConfig:{validate:function(e){return Ys(e,Es)},help:\"reactNativeConfig should look like \".concat(JSON.stringify(Es),\", all fields optional\")},lang:{validate:function(e){return[\"da\",\"de\",\"en-us\",\"en\",\"es\",\"fi\",\"fr\",\"it\",\"jp\",\"ka\",\"nl\",\"no\",\"pl\",\"pt\",\"pt-BR\",\"ru\",\"sv\",\"tr\",\"user\"].includes(e)},help:\"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user\"},userName:!0,userData:{validate:function(e){try{return Js(e),!0}catch(e){return console.error(e),!1}},help:\"invalid userData type provided\"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(e,t){return e instanceof MediaStreamTrack&&(t._sharedTracks.videoDeviceId=e),t._preloadCache.videoDeviceId=e,!0}},audioSource:{validate:function(e,t){return e instanceof MediaStreamTrack&&(t._sharedTracks.audioDeviceId=e),t._preloadCache.audioDeviceId=e,!0}},subscribeToTracksAutomatically:{validate:function(e,t){return t._preloadCache.subscribeToTracksAutomatically=e,!0}},theme:{validate:function(e){var t=[\"accent\",\"accentText\",\"background\",\"backgroundAccent\",\"baseText\",\"border\",\"mainAreaBg\",\"mainAreaBgAccent\",\"mainAreaText\",\"supportiveText\"],r=function(e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(!t.includes(i))return console.error('unsupported color \"'.concat(i,'\". Valid colors: ').concat(t.join(\", \"))),!1;if(!e[i].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error(\"\".concat(i,' theme color should be provided in valid hex color format. Received: \"').concat(e[i],'\"')),!1}return!0};return\"object\"===n(e)&&(\"light\"in e&&\"dark\"in e||\"colors\"in e)?\"light\"in e&&\"dark\"in e?\"colors\"in e.light?\"colors\"in e.dark?r(e.light.colors)&&r(e.dark.colors):(console.error('Dark theme is missing \"colors\" property.',e),!1):(console.error('Light theme is missing \"colors\" property.',e),!1):r(e.colors):(console.error('Theme must contain either both \"light\" and \"dark\" properties, or \"colors\".',e),!1)},help:\"unsupported theme configuration. Check error logs for detailed info.\"},layoutConfig:{validate:function(e){if(\"grid\"in e){var t=e.grid;if(\"maxTilesPerPage\"in t){if(!Number.isInteger(t.maxTilesPerPage))return console.error(\"grid.maxTilesPerPage should be an integer. You passed \".concat(t.maxTilesPerPage,\".\")),!1;if(t.maxTilesPerPage>49)return console.error(\"grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case.\"),!1}if(\"minTilesPerPage\"in t){if(!Number.isInteger(t.minTilesPerPage))return console.error(\"grid.minTilesPerPage should be an integer. You passed \".concat(t.minTilesPerPage,\".\")),!1;if(t.minTilesPerPage<1)return console.error(\"grid.minTilesPerPage can't be lower than 1.\"),!1;if(\"maxTilesPerPage\"in t&&t.minTilesPerPage>t.maxTilesPerPage)return console.error(\"grid.minTilesPerPage can't be higher than grid.maxTilesPerPage.\"),!1}}return!0},help:\"unsupported layoutConfig. Check error logs for detailed info.\"},receiveSettings:{validate:function(e){return $s(e,{allowAllParticipantsKey:!1})},help:Hs({allowAllParticipantsKey:!1})},sendSettings:{validate:function(e,t){return!!function(e,t){try{return t.validateUpdateSendSettings(e),!0}catch(e){return console.error(\"Failed to validate send settings\",e),!1}}(e,t)&&(t._preloadCache.sendSettings=e,!0)},help:\"Invalid sendSettings provided. Check error logs for detailed info.\"},inputSettings:{validate:function(e,t){var n;return!!qs(e)&&(t._preloadCache.inputSettings||(t._preloadCache.inputSettings={}),Ws(e,null===(n=t.properties)||void 0===n?void 0:n.dailyConfig),e.audio&&(t._preloadCache.inputSettings.audio=e.audio),e.video&&(t._preloadCache.inputSettings.video=e.video),!0)},help:zs()},layout:{validate:function(e){return\"custom-v1\"===e||\"browser\"===e||\"none\"===e},help:'layout may only be set to \"custom-v1\"',queryString:\"layout\"},emb:{queryString:\"emb\"},embHref:{queryString:\"embHref\"},dailyJsVersion:{queryString:\"dailyJsVersion\"},proxy:{queryString:\"proxy\"},strictMode:!0,allowMultipleCallInstances:!0},As={styles:{validate:function(e){for(var t in e)if(\"cam\"!==t&&\"screen\"!==t)return!1;if(e.cam)for(var n in e.cam)if(\"div\"!==n&&\"video\"!==n)return!1;if(e.screen)for(var r in e.screen)if(\"div\"!==r&&\"video\"!==r)return!1;return!0},help:\"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }\"},setSubscribedTracks:{validate:function(e,t){if(t._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,\"staged\"];if(n.includes(e)||!na()&&\"avatar\"===e)return!0;var r=[\"audio\",\"video\",\"screenAudio\",\"screenVideo\",\"rmpAudio\",\"rmpVideo\"];return function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var o in t)if(\"custom\"===o){if(!n.includes(t[o])&&!e(t[o],!0))return!1}else{var a=!i&&!r.includes(o),s=!n.includes(t[o]);if(a||s)return!1}return!0}(e)},help:\"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: \"+\"true\".concat(na()?\"\":\" | 'avatar'\",\" | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }\")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(e){return!1===e},help:\"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares\"},eject:!0,updatePermissions:{validate:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=v(n[t],2),i=r[0],o=r[1];switch(i){case\"hasPresence\":if(\"boolean\"!=typeof o)return!1;break;case\"canSend\":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var a,s=[\"video\",\"audio\",\"screenVideo\",\"screenAudio\",\"customVideo\",\"customAudio\"],c=ms(o);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(!s.includes(l))return!1}}catch(e){c.e(e)}finally{c.f()}}else if(\"boolean\"!=typeof o)return!1;(o instanceof Array||Array.isArray(o))&&(e.canSend=new Set(o));break;case\"canAdmin\":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var u,d=[\"participants\",\"streaming\",\"transcription\"],p=ms(o);try{for(p.s();!(u=p.n()).done;){var h=u.value;if(!d.includes(h))return!1}}catch(e){p.e(e)}finally{p.f()}}else if(\"boolean\"!=typeof o)return!1;(o instanceof Array||Array.isArray(o))&&(e.canAdmin=new Set(o));break;default:return!1}}return!0},help:\"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription).\"}};Promise.any||(Promise.any=function(){var e=h((function*(e){return new Promise((function(t,n){var r=[];e.forEach((function(i){return Promise.resolve(i).then((function(e){t(e)})).catch((function(t){r.push(t),r.length===e.length&&n(r)}))}))}))}));return function(t){return e.apply(this,arguments)}}());var js=function(){c(ee,g);var r,i,s,l,u,p,f,m,y,_,b,w,S,k,M,C,E,T,P,O,A,j,x,L,I,N,R,F,B,U,V,J,$,q,W,z,H,K,Z=vs(ee);function ee(e){var n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,ee),d(a(r=Z.call(this)),\"startListeningForDeviceChanges\",(function(){as(r.handleDeviceChange)})),d(a(r),\"stopListeningForDeviceChanges\",(function(){ss(r.handleDeviceChange)})),d(a(r),\"handleDeviceChange\",(function(e){e=e.map((function(e){return JSON.parse(JSON.stringify(e))})),r.emitDailyJSEvent({action:\"available-devices-updated\",availableDevices:e})})),d(a(r),\"handleNativeAppStateChange\",function(){var e=h((function*(e){if(\"destroyed\"===e)return console.warn(\"App has been destroyed before leaving the meeting. Cleaning up all the resources!\"),void(yield r.destroy());var t=\"active\"===e;r.disableReactNativeAutoDeviceManagement(\"video\")||(t?r.camUnmutedBeforeLosingNativeActiveState&&r.setLocalVideo(!0):(r.camUnmutedBeforeLosingNativeActiveState=r.localVideo(),r.camUnmutedBeforeLosingNativeActiveState&&r.setLocalVideo(!1)))}));return function(t){return e.apply(this,arguments)}}()),d(a(r),\"handleNativeAudioFocusChange\",(function(e){r.disableReactNativeAutoDeviceManagement(\"audio\")||(r._hasNativeAudioFocus=e,r.toggleParticipantAudioBasedOnNativeAudioFocus(),r._hasNativeAudioFocus?r.micUnmutedBeforeLosingNativeAudioFocus&&r.setLocalAudio(!0):(r.micUnmutedBeforeLosingNativeAudioFocus=r.localAudio(),r.setLocalAudio(!1)))})),d(a(r),\"handleNativeSystemScreenCaptureStop\",(function(){r.stopScreenShare()})),r.strictMode=void 0===o.strictMode||o.strictMode,r.allowMultipleCallInstances=null!==(n=o.allowMultipleCallInstances)&&void 0!==n&&n,Object.keys(ys).length&&(r._logDuplicateInstanceAttempt(),!r.allowMultipleCallInstances)){if(r.strictMode)throw new Error(\"Duplicate DailyIframe instances are not allowed\");console.warn(\"Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`\")}if(window._daily||(window._daily={pendings:[],instances:{}}),r.callClientId=Q(),i=a(r),ys[i.callClientId]=i,window._daily.instances[r.callClientId]={},r._sharedTracks={},window._daily.instances[r.callClientId].tracks=r._sharedTracks,o.dailyJsVersion=ee.version(),r._iframe=e,r._callObjectMode=\"none\"===o.layout&&!r._iframe,r._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},void 0!==o.showLocalVideo?r._callObjectMode?console.error(\"showLocalVideo is not available in call object mode\"):r._showLocalVideo=!!o.showLocalVideo:r._showLocalVideo=!0,void 0!==o.showParticipantsBar?r._callObjectMode?console.error(\"showParticipantsBar is not available in call object mode\"):r._showParticipantsBar=!!o.showParticipantsBar:r._showParticipantsBar=!0,void 0!==o.customIntegrations?r._callObjectMode?console.error(\"customIntegrations is not available in call object mode\"):r._customIntegrations=o.customIntegrations:r._customIntegrations={},void 0!==o.customTrayButtons?r._callObjectMode?console.error(\"customTrayButtons is not available in call object mode\"):r._customTrayButtons=o.customTrayButtons:r._customTrayButtons={},void 0!==o.activeSpeakerMode?r._callObjectMode?console.error(\"activeSpeakerMode is not available in call object mode\"):r._activeSpeakerMode=!!o.activeSpeakerMode:r._activeSpeakerMode=!1,o.receiveSettings?r._callObjectMode?r._receiveSettings=o.receiveSettings:console.error(\"receiveSettings is only available in call object mode\"):r._receiveSettings={},r.validateProperties(o),r.properties=fs({},o),r._preloadCache.inputSettings||(r._preloadCache.inputSettings={}),o.inputSettings&&o.inputSettings.audio&&(r._preloadCache.inputSettings.audio=o.inputSettings.audio),o.inputSettings&&o.inputSettings.video&&(r._preloadCache.inputSettings.video=o.inputSettings.video),r._callObjectLoader=r._callObjectMode?new Da(r.callClientId):null,r._callState=Zr,r._isPreparingToJoin=!1,r._accessState={access:pi},r._meetingSessionSummary={},r._finalSummaryOfPrevSession={},r._meetingSessionState=tc(ws,r._callObjectMode),r._nativeInCallAudioMode=_s,r._participants={},r._isScreenSharing=!1,r._participantCounts=Ss,r._rmpPlayerState={},r._waitingParticipants={},r._network={threshold:\"good\",quality:100},r._activeSpeaker={},r._localAudioLevel=0,r._isLocalAudioLevelObserverRunning=!1,r._remoteParticipantsAudioLevel={},r._isRemoteParticipantsAudioLevelObserverRunning=!1,r._maxAppMessageSize=Vo,r._messageChannel=na()?new Ea:new ka,r._iframe&&(r._iframe.requestFullscreen?r._iframe.addEventListener(\"fullscreenchange\",(function(){document.fullscreenElement===r._iframe?(r.emitDailyJSEvent({action:Ao}),r.sendMessageToCallMachine({action:Ao})):(r.emitDailyJSEvent({action:jo}),r.sendMessageToCallMachine({action:jo}))})):r._iframe.webkitRequestFullscreen&&r._iframe.addEventListener(\"webkitfullscreenchange\",(function(){document.webkitFullscreenElement===r._iframe?(r.emitDailyJSEvent({action:Ao}),r.sendMessageToCallMachine({action:Ao})):(r.emitDailyJSEvent({action:jo}),r.sendMessageToCallMachine({action:jo}))}))),na()){var s=r.nativeUtils();s.addAudioFocusChangeListener&&s.removeAudioFocusChangeListener&&s.addAppStateChangeListener&&s.removeAppStateChangeListener&&s.addSystemScreenCaptureStopListener&&s.removeSystemScreenCaptureStopListener||console.warn(\"expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native\"),r._hasNativeAudioFocus=!0,s.addAudioFocusChangeListener(r.handleNativeAudioFocusChange),s.addAppStateChangeListener(r.handleNativeAppStateChange),s.addSystemScreenCaptureStopListener(r.handleNativeSystemScreenCaptureStop)}return r._callObjectMode&&r.startListeningForDeviceChanges(),r._messageChannel.addListenerForMessagesFromCallMachine(r.handleMessageFromCallMachine,r.callClientId,a(r)),r}return o(ee,[{key:\"destroy\",value:(K=h((function*(){var e,t;try{yield this.leave()}catch(e){}var n=this._iframe;if(n){var r=n.parentElement;r&&r.removeChild(n)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),na()){var i=this.nativeUtils();i.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),i.removeAppStateChangeListener(this.handleNativeAppStateChange),i.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:\"call-instance-destroyed\"}),delete ys[this.callClientId],(null===(e=window)||void 0===e||null===(t=e._daily)||void 0===t?void 0:t.instances)&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)})),function(){return K.apply(this,arguments)})},{key:\"isDestroyed\",value:function(){return!!this._destroyed}},{key:\"loadCss\",value:function(e){var t=e.bodyClass,n=e.cssFile,r=e.cssText;return Us(),this.sendMessageToCallMachine({action:\"load-css\",cssFile:this.absoluteUrl(n),bodyClass:t,cssText:r}),this}},{key:\"iframe\",value:function(){return Us(),this._iframe}},{key:\"meetingState\",value:function(){return this._callState}},{key:\"accessState\",value:function(){return Fs(this._callObjectMode,\"accessState()\"),this._accessState}},{key:\"participants\",value:function(){return this._participants}},{key:\"participantCounts\",value:function(){return this._participantCounts}},{key:\"waitingParticipants\",value:function(){return Fs(this._callObjectMode,\"waitingParticipants()\"),this._waitingParticipants}},{key:\"validateParticipantProperties\",value:function(e,t){for(var n in t){if(!As[n])throw new Error(\"unrecognized updateParticipant property \".concat(n));if(As[n].validate&&!As[n].validate(t[n],this,this._participants[e]))throw new Error(As[n].help)}}},{key:\"updateParticipant\",value:function(e,t){return this._participants.local&&this._participants.local.session_id===e&&(e=\"local\"),e&&t&&(this.validateParticipantProperties(e,t),this.sendMessageToCallMachine({action:\"update-participant\",id:e,properties:t})),this}},{key:\"updateParticipants\",value:function(e){var t=this._participants.local&&this._participants.local.session_id;for(var n in e)n===t&&(n=\"local\"),n&&e[n]&&this.validateParticipantProperties(n,e[n]);return this.sendMessageToCallMachine({action:\"update-participants\",participants:e}),this}},{key:\"updateWaitingParticipant\",value:(H=h((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Fs(this._callObjectMode,\"updateWaitingParticipant()\"),Ls(this._callState,\"updateWaitingParticipant()\"),\"string\"!=typeof t||\"object\"!==n(r))throw new Error(\"updateWaitingParticipant() must take an id string and a updates object\");return new Promise((function(n,i){e.sendMessageToCallMachine({action:\"daily-method-update-waiting-participant\",id:t,updates:r},(function(e){e.error&&i(e.error),e.id||i(new Error(\"unknown error in updateWaitingParticipant()\")),n({id:e.id})}))}))})),function(){return H.apply(this,arguments)})},{key:\"updateWaitingParticipants\",value:(z=h((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Fs(this._callObjectMode,\"updateWaitingParticipants()\"),Ls(this._callState,\"updateWaitingParticipants()\"),\"object\"!==n(t))throw new Error(\"updateWaitingParticipants() must take a mapping between ids and update objects\");return new Promise((function(n,r){e.sendMessageToCallMachine({action:\"daily-method-update-waiting-participants\",updatesById:t},(function(e){e.error&&r(e.error),e.ids||r(new Error(\"unknown error in updateWaitingParticipants()\")),n({ids:e.ids})}))}))})),function(){return z.apply(this,arguments)})},{key:\"requestAccess\",value:(W=h((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.access,r=void 0===n?{level:hi}:n,i=t.name,o=void 0===i?\"\":i;return Fs(this._callObjectMode,\"requestAccess()\"),Ls(this._callState,\"requestAccess()\"),new Promise((function(t,n){e.sendMessageToCallMachine({action:\"daily-method-request-access\",access:r,name:o},(function(e){e.error&&n(e.error),e.access||n(new Error(\"unknown error in requestAccess()\")),t({access:e.access,granted:e.granted})}))}))})),function(){return W.apply(this,arguments)})},{key:\"localAudio\",value:function(){return this._participants.local?![\"blocked\",\"off\"].includes(this._participants.local.tracks.audio.state):null}},{key:\"localVideo\",value:function(){return this._participants.local?![\"blocked\",\"off\"].includes(this._participants.local.tracks.video.state):null}},{key:\"setLocalAudio\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return\"forceDiscardTrack\"in t&&(na()?(console.warn(\"forceDiscardTrack option not supported in React Native; ignoring\"),t={}):e&&(console.warn(\"forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring\"),t={})),this.sendMessageToCallMachine({action:\"local-audio\",state:e,options:t}),this}},{key:\"localScreenAudio\",value:function(){return this._participants.local?![\"blocked\",\"off\"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:\"localScreenVideo\",value:function(){return this._participants.local?![\"blocked\",\"off\"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:\"updateScreenShare\",value:function(e){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:\"local-screen-update\",options:e}),this;console.warn(\"There is no screen share in progress. Try calling startScreenShare first.\")}},{key:\"setLocalVideo\",value:function(e){return this.sendMessageToCallMachine({action:\"local-video\",state:e}),this}},{key:\"getReceiveSettings\",value:(q=h((function*(e){var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).showInheritedValues,i=void 0!==r&&r;if(Fs(this._callObjectMode,\"getReceiveSettings()\"),!this._callMachineInitialized)return this._receiveSettings;switch(n(e)){case\"string\":return new Promise((function(n){t.sendMessageToCallMachine({action:\"get-single-participant-receive-settings\",id:e,showInheritedValues:i},(function(e){n(e.receiveSettings)}))}));case\"undefined\":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or \"base\"), or there should be no arguments')}})),function(e){return q.apply(this,arguments)})},{key:\"updateReceiveSettings\",value:($=h((function*(e){var t=this;if(Fs(this._callObjectMode,\"updateReceiveSettings()\"),!$s(e,{allowAllParticipantsKey:!0}))throw new Error(Hs({allowAllParticipantsKey:!0}));return Ls(this._callState,\"updateReceiveSettings()\",\"To specify receive settings earlier, use the receiveSettings config property.\"),new Promise((function(n){t.sendMessageToCallMachine({action:\"update-receive-settings\",receiveSettings:e},(function(e){n({receiveSettings:e.receiveSettings})}))}))})),function(e){return $.apply(this,arguments)})},{key:\"_prepInputSettingsToPresentToUser\",value:function(e){var t,n,r,i,o,a,s,c;if(e){var l={},u=\"none\"===(null===(t=e.audio)||void 0===t||null===(n=t.processor)||void 0===n?void 0:n.type)&&(null===(r=e.audio)||void 0===r||null===(i=r.processor)||void 0===i?void 0:i._isDefaultWhenNone);if(e.audio&&!u){var d=fs({},e.audio.processor);delete d._isDefaultWhenNone,l.audio=fs(fs({},e.audio),{},{processor:d})}var p=\"none\"===(null===(o=e.video)||void 0===o||null===(a=o.processor)||void 0===a?void 0:a.type)&&(null===(s=e.video)||void 0===s||null===(c=s.processor)||void 0===c?void 0:c._isDefaultWhenNone);if(e.video&&!p){var h=fs({},e.video.processor);delete h._isDefaultWhenNone,l.video=fs(fs({},e.video),{},{processor:h})}return l}}},{key:\"getInputSettings\",value:function(){var e=this;return Us(),new Promise((function(t){t(e._getInputSettings())}))}},{key:\"_getInputSettings\",value:function(){var e,t,n,r,i,o,a,s,c={processor:{type:\"none\",_isDefaultWhenNone:!0}};this._inputSettings?(e=(null===(n=this._inputSettings)||void 0===n?void 0:n.video)||c,t=(null===(r=this._inputSettings)||void 0===r?void 0:r.audio)||c):(e=(null===(i=this._preloadCache)||void 0===i||null===(o=i.inputSettings)||void 0===o?void 0:o.video)||c,t=(null===(a=this._preloadCache)||void 0===a||null===(s=a.inputSettings)||void 0===s?void 0:s.audio)||c);var l={audio:t,video:e};return this._prepInputSettingsToPresentToUser(l)}},{key:\"updateInputSettings\",value:(J=h((function*(e){var t=this;return Us(),qs(e)?(e&&(this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),Ws(e,this.properties.dailyConfig),e.audio&&(this._preloadCache.inputSettings.audio=e.audio),e.video&&(this._preloadCache.inputSettings.video=e.video)),e.video||e.audio?this._callObjectMode&&!this._callMachineInitialized?this._getInputSettings():new Promise((function(n,r){t.sendMessageToCallMachine({action:\"update-input-settings\",inputSettings:e},(function(e){e.error?r(e.error):n({inputSettings:t._prepInputSettingsToPresentToUser(e.inputSettings)})}))})):this._getInputSettings()):(console.error(zs()),Promise.reject(zs()))})),function(e){return J.apply(this,arguments)})},{key:\"setBandwidth\",value:function(e){var t=e.kbs,n=e.trackConstraints;if(Us(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:\"set-bandwidth\",kbs:t,trackConstraints:n}),this}},{key:\"getDailyLang\",value:function(){var e=this;if(Us(),this._callMachineInitialized)return new Promise((function(t){e.sendMessageToCallMachine({action:\"get-daily-lang\"},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))}},{key:\"setDailyLang\",value:function(e){return Us(),this.sendMessageToCallMachine({action:\"set-daily-lang\",lang:e}),this}},{key:\"setProxyUrl\",value:function(e){return this.sendMessageToCallMachine({action:\"set-proxy-url\",proxyUrl:e}),this}},{key:\"setIceConfig\",value:function(e){return this.sendMessageToCallMachine({action:\"set-ice-config\",iceConfig:e}),this}},{key:\"meetingSessionSummary\",value:function(){return[ii,oi].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:\"getMeetingSession\",value:(V=h((function*(){var e=this;return console.warn(\"getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately\"),Ls(this._callState,\"getMeetingSession()\"),new Promise((function(t){e.sendMessageToCallMachine({action:\"get-meeting-session\"},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))})),function(){return V.apply(this,arguments)})},{key:\"meetingSessionState\",value:function(){return Ls(this._callState,\"meetingSessionState\"),this._meetingSessionState}},{key:\"setMeetingSessionData\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"replace\";Fs(this._callObjectMode,\"setMeetingSessionData()\"),Ls(this._callState,\"setMeetingSessionData\");try{!function(e,t){new Aa({data:e,mergeStrategy:t})}(e,t)}catch(e){throw console.error(e),e}try{this.sendMessageToCallMachine({action:\"set-session-data\",data:e,mergeStrategy:t})}catch(e){throw new Error(\"Error setting meeting session data: \".concat(e))}}},{key:\"setUserName\",value:function(e,t){var n=this;return this.properties.userName=e,new Promise((function(r){n.sendMessageToCallMachine({action:\"set-user-name\",name:null!=e?e:\"\",thisMeetingOnly:na()||!!t&&!!t.thisMeetingOnly},(function(e){delete e.action,delete e.callbackStamp,r(e)}))}))}},{key:\"setUserData\",value:(U=h((function*(e){var t=this;try{Js(e)}catch(e){throw console.error(e),e}if(this.properties.userData=e,this._callMachineInitialized)return new Promise((function(n){try{t.sendMessageToCallMachine({action:\"set-user-data\",userData:e},(function(e){delete e.action,delete e.callbackStamp,n(e)}))}catch(e){throw new Error(\"Error setting user data: \".concat(e))}}))})),function(e){return U.apply(this,arguments)})},{key:\"validateAudioLevelInterval\",value:function(e){if(e&&(e<100||\"number\"!=typeof e))throw new Error(\"The interval must be a number greater than or equal to 100 milliseconds.\")}},{key:\"startLocalAudioLevelObserver\",value:function(e){var t=this;if(\"undefined\"==typeof AudioWorkletNode&&!na())throw new Error(\"startLocalAudioLevelObserver() is not supported on this browser\");if(this.validateAudioLevelInterval(e),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise((function(n,r){t.sendMessageToCallMachine({action:\"start-local-audio-level-observer\",interval:e},(function(e){t._isLocalAudioLevelObserverRunning=!e.error,e.error?r({error:e.error}):n()}))}));this._preloadCache.localAudioLevelObserver={enabled:!0,interval:e}}},{key:\"isLocalAudioLevelObserverRunning\",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:\"stopLocalAudioLevelObserver\",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:\"stop-local-audio-level-observer\"})}},{key:\"startRemoteParticipantsAudioLevelObserver\",value:function(e){var t=this;if(this.validateAudioLevelInterval(e),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise((function(n,r){t.sendMessageToCallMachine({action:\"start-remote-participants-audio-level-observer\",interval:e},(function(e){t._isRemoteParticipantsAudioLevelObserverRunning=!e.error,e.error?r({error:e.error}):n()}))}));this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:e}}},{key:\"isRemoteParticipantsAudioLevelObserverRunning\",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:\"stopRemoteParticipantsAudioLevelObserver\",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:\"stop-remote-participants-audio-level-observer\"})}},{key:\"startCamera\",value:(B=h((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Fs(this._callObjectMode,\"startCamera()\"),Ds(this._callState,this._isPreparingToJoin,\"startCamera()\",\"Did you mean to use setLocalAudio() and/or setLocalVideo() instead?\"),this.needsLoad())try{yield this.load(t)}catch(e){return Promise.reject(e)}else{if(this._didPreAuth){if(t.url&&t.url!==this.properties.url)return console.error(\"url in startCamera() is different than the one used in preAuth()\"),Promise.reject();if(t.token&&t.token!==this.properties.token)return console.error(\"token in startCamera() is different than the one used in preAuth()\"),Promise.reject()}this.validateProperties(t),this.properties=fs(fs({},this.properties),t)}return new Promise((function(t){e.sendMessageToCallMachine({action:\"start-camera\",properties:xs(e.properties,e.callClientId),preloadCache:xs(e._preloadCache,e.callClientId)},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))})),function(){return B.apply(this,arguments)})},{key:\"validateCustomTrack\",value:function(e,t,n){if(n&&n.length>50)throw new Error(\"Custom track `trackName` must not be more than 50 characters\");if(t&&\"music\"!==t&&\"speech\"!==t&&!(t instanceof Object))throw new Error(\"Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`\");if(!!n&&[\"cam-audio\",\"cam-video\",\"screen-video\",\"screen-audio\",\"rmpAudio\",\"rmpVideo\",\"customVideoDefaults\"].includes(n))throw new Error(\"Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo\");if(!(e instanceof MediaStreamTrack))throw new Error(\"Custom tracks provided must be instances of MediaStreamTrack\")}},{key:\"startCustomTrack\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{track:track,mode:mode,trackName:trackName};return Us(),Ls(this._callState,\"startCustomTrack()\"),this.validateCustomTrack(t.track,t.mode,t.trackName),new Promise((function(n,r){e._sharedTracks.customTrack=t.track,t.track=Ho,e.sendMessageToCallMachine({action:\"start-custom-track\",properties:t},(function(e){e.error?r({error:e.error}):n(e.mediaTag)}))}))}},{key:\"stopCustomTrack\",value:function(e){var t=this;return Us(),Ls(this._callState,\"stopCustomTrack()\"),new Promise((function(n){t.sendMessageToCallMachine({action:\"stop-custom-track\",mediaTag:e},(function(e){n(e.mediaTag)}))}))}},{key:\"setCamera\",value:function(e){var t=this;return Vs(),Ns(this._callMachineInitialized,\"setCamera()\"),new Promise((function(n){t.sendMessageToCallMachine({action:\"set-camera\",cameraDeviceId:e},(function(e){n({device:e.device})}))}))}},{key:\"setAudioDevice\",value:(F=h((function*(e){return Vs(),this.nativeUtils().setAudioDevice(e),{deviceId:yield this.nativeUtils().getAudioDevice()}})),function(e){return F.apply(this,arguments)})},{key:\"cycleCamera\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){e.sendMessageToCallMachine({action:\"cycle-camera\",properties:t},(function(e){n({device:e.device})}))}))}},{key:\"cycleMic\",value:function(){var e=this;return Us(),new Promise((function(t){e.sendMessageToCallMachine({action:\"cycle-mic\"},(function(e){t({device:e.device})}))}))}},{key:\"getCameraFacingMode\",value:function(){var e=this;return Vs(),new Promise((function(t){e.sendMessageToCallMachine({action:\"get-camera-facing-mode\"},(function(e){t(e.facingMode)}))}))}},{key:\"setInputDevicesAsync\",value:(R=h((function*(e){var t=this,n=e.audioDeviceId,r=e.videoDeviceId,i=e.audioSource,o=e.videoSource;return Us(),void 0!==i&&(n=i),void 0!==o&&(r=o),n&&(this._preloadCache.audioDeviceId=n,this._sharedTracks.audioDeviceId=n),r&&(this._preloadCache.videoDeviceId=r,this._sharedTracks.videoDeviceId=r),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(n instanceof MediaStreamTrack&&(n=Ho),r instanceof MediaStreamTrack&&(r=Ho),new Promise((function(e){t.sendMessageToCallMachine({action:\"set-input-devices\",audioDeviceId:n,videoDeviceId:r},(function(n){delete n.action,delete n.callbackStamp,n.returnPreloadCache?e({camera:{deviceId:t._preloadCache.videoDeviceId},mic:{deviceId:t._preloadCache.audioDeviceId},speaker:{deviceId:t._preloadCache.outputDeviceId}}):e(n)}))})))})),function(e){return R.apply(this,arguments)})},{key:\"setOutputDeviceAsync\",value:(N=h((function*(e){var t=this,n=e.outputDeviceId;return Us(),n&&(this._preloadCache.outputDeviceId=n),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise((function(e){t.sendMessageToCallMachine({action:\"set-output-device\",outputDeviceId:n},(function(n){delete n.action,delete n.callbackStamp,n.returnPreloadCache?e({camera:{deviceId:t._preloadCache.videoDeviceId},mic:{deviceId:t._preloadCache.audioDeviceId},speaker:{deviceId:t._preloadCache.outputDeviceId}}):e(n)}))}))})),function(e){return N.apply(this,arguments)})},{key:\"getInputDevices\",value:(I=h((function*(){var e=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise((function(t){e.sendMessageToCallMachine({action:\"get-input-devices\"},(function(n){delete n.action,delete n.callbackStamp,n.returnPreloadCache?t({camera:{deviceId:e._preloadCache.videoDeviceId},mic:{deviceId:e._preloadCache.audioDeviceId},speaker:{deviceId:e._preloadCache.outputDeviceId}}):t(n)}))}))})),function(){return I.apply(this,arguments)})},{key:\"nativeInCallAudioMode\",value:function(){return Vs(),this._nativeInCallAudioMode}},{key:\"setNativeInCallAudioMode\",value:function(e){if(Vs(),[_s,bs].includes(e)){if(e!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=e,!this.disableReactNativeAutoDeviceManagement(\"audio\")&&Is(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error(\"invalid in-call audio mode specified: \",e)}},{key:\"preAuth\",value:(L=h((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Fs(this._callObjectMode,\"preAuth()\"),Ds(this._callState,this._isPreparingToJoin,\"preAuth()\"),this.needsLoad()&&(yield this.load(t)),!t.url)throw new Error(\"preAuth() requires at least a url to be provided\");return this.validateProperties(t),this.properties=fs(fs({},this.properties),t),new Promise((function(t,n){e.sendMessageToCallMachine({action:\"daily-method-preauth\",properties:xs(e.properties,e.callClientId),preloadCache:xs(e._preloadCache,e.callClientId)},(function(r){return r.error?n(r.error):r.access?(e._didPreAuth=!0,void t({access:r.access})):n(new Error(\"unknown error in preAuth()\"))}))}))})),function(){return L.apply(this,arguments)})},{key:\"load\",value:(x=h((function*(e){var t=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error(\"Use after destroy\");if(e&&(this.validateProperties(e),this.properties=fs(fs({},this.properties),e)),!this._callObjectMode&&!this.properties.url)throw new Error(\"can't load iframe meeting because url property isn't set\");return this._updateCallState(ei),this.emitDailyJSEvent({action:Bi}),this._callObjectMode?new Promise((function(e,n){t._callObjectLoader.cancel();var r=Date.now();t._callObjectLoader.load(t.properties.dailyConfig,(function(n){t._bundleLoadTime=n?\"no-op\":Date.now()-r,t._updateCallState(ti),n&&t.emitDailyJSEvent({action:Vi}),e()}),(function(e,r){if(t.emitDailyJSEvent({action:Ui}),!r){t._updateCallState(oi),t.resetMeetingDependentVars();var i={action:Uo,errorMsg:e.msg,error:{type:\"connection-error\",msg:\"Failed to load call object bundle.\",details:{on:\"load\",sourceError:e,bundleUrl:X(t.properties.dailyConfig)}}};t._maybeSendToSentry(i),t.emitDailyJSEvent(i),n(e.msg)}}))})):(this._iframe.src=Y(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise((function(e,n){t._loadedCallback=function(r){t._callState!==oi?(t._updateCallState(ti),(t.properties.cssFile||t.properties.cssText)&&t.loadCss(t.properties),e()):n(r)}})))}})),function(e){return x.apply(this,arguments)})},{key:\"join\",value:(j=h((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var n=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(t)}catch(e){return this.updateIsPreparingToJoin(!1),Promise.reject(e)}}else{if(n=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(t.url&&t.url!==this.properties.url)return console.error(\"url in join() is different than the one used in preAuth()\"),this.updateIsPreparingToJoin(!1),Promise.reject();if(t.token&&t.token!==this.properties.token)return console.error(\"token in join() is different than the one used in preAuth()\"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(t.url&&!this._callObjectMode&&t.url&&t.url!==this.properties.url)return console.error(\"url in join() is different than the one used in load() (\".concat(this.properties.url,\" -> \").concat(t.url,\")\")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(t),this.properties=fs(fs({},this.properties),t)}return void 0!==t.showLocalVideo&&(this._callObjectMode?console.error(\"showLocalVideo is not available in callObject mode\"):this._showLocalVideo=!!t.showLocalVideo),void 0!==t.showParticipantsBar&&(this._callObjectMode?console.error(\"showParticipantsBar is not available in callObject mode\"):this._showParticipantsBar=!!t.showParticipantsBar),this._callState===ri||this._callState===ni?(console.warn(\"already joined meeting, call leave() before joining again\"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(ni,!1),this.emitDailyJSEvent({action:qi}),this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),t.inputSettings&&t.inputSettings.audio&&(this._preloadCache.inputSettings.audio=t.inputSettings.audio),t.inputSettings&&t.inputSettings.video&&(this._preloadCache.inputSettings.video=t.inputSettings.video),this.sendMessageToCallMachine({action:\"join-meeting\",properties:xs(this.properties,this.callClientId),preloadCache:xs(this._preloadCache,this.callClientId)}),new Promise((function(t,r){e._joinedCallback=function(i,o){if(e._callState!==oi){if(e._updateCallState(ri),i)for(var a in i){if(e._callObjectMode){var s=e._callMachine().store;Ga(i[a],s),Qa(i[a],s),Ya(i[a],e._participants[a],s)}e._participants[a]=fs({},i[a]),e.toggleParticipantAudioBasedOnNativeAudioFocus()}n&&e.loadCss(e.properties),t(i)}else r(o)}})))})),function(){return j.apply(this,arguments)})},{key:\"leave\",value:(A=h((function*(){var e=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise((function(t){e._callState===ii||e._callState===oi?t():e._callObjectLoader&&!e._callObjectLoader.loaded?(e._callObjectLoader.cancel(),e._updateCallState(ii),e.resetMeetingDependentVars(),e.emitDailyJSEvent({action:ii}),t()):(e._resolveLeave=t,e.sendMessageToCallMachine({action:\"leave-meeting\"}))}))})),function(){return A.apply(this,arguments)})},{key:\"startScreenShare\",value:(O=h((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ns(this._callMachineInitialized,\"startScreenShare()\"),t.screenVideoSendSettings&&this._validateVideoSendSettings(\"screenVideo\",t.screenVideoSendSettings),t.mediaStream&&(this._sharedTracks.screenMediaStream=t.mediaStream,t.mediaStream=Ho),\"undefined\"!=typeof DailyNativeUtils&&void 0!==DailyNativeUtils.isIOS&&DailyNativeUtils.isIOS){var n=this.nativeUtils();if(yield n.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:Bo,type:\"screen-share-error\",errorMsg:\"Could not start the screen sharing. The screen is already been captured!\"});n.setSystemScreenCaptureStartCallback((function(){n.setSystemScreenCaptureStartCallback(null),e.sendMessageToCallMachine({action:qo,captureOptions:t})})),n.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:qo,captureOptions:t})})),function(){return O.apply(this,arguments)})},{key:\"stopScreenShare\",value:function(){Ns(this._callMachineInitialized,\"stopScreenShare()\"),this.sendMessageToCallMachine({action:\"local-screen-stop\"})}},{key:\"startRecording\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;if(t&&\"cloud\"!==t&&\"raw-tracks\"!==t&&\"local\"!==t)throw new Error(\"invalid type: \".concat(t,\", allowed values 'cloud', 'raw-tracks', or 'local'\"));this.sendMessageToCallMachine(fs({action:\"local-recording-start\"},e))}},{key:\"updateRecording\",value:function(e){var t=e.layout,n=void 0===t?{preset:\"default\"}:t,r=e.instanceId;this.sendMessageToCallMachine({action:\"daily-method-update-recording\",layout:n,instanceId:r})}},{key:\"stopRecording\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(fs({action:\"local-recording-stop\"},e))}},{key:\"startLiveStreaming\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(fs({action:\"daily-method-start-live-streaming\"},e))}},{key:\"updateLiveStreaming\",value:function(e){var t=e.layout,n=void 0===t?{preset:\"default\"}:t,r=e.instanceId;this.sendMessageToCallMachine({action:\"daily-method-update-live-streaming\",layout:n,instanceId:r})}},{key:\"addLiveStreamingEndpoints\",value:function(e){var t=e.endpoints,n=e.instanceId;this.sendMessageToCallMachine({action:Wo,endpointsOp:Xo,endpoints:t,instanceId:n})}},{key:\"removeLiveStreamingEndpoints\",value:function(e){var t=e.endpoints,n=e.instanceId;this.sendMessageToCallMachine({action:Wo,endpointsOp:Zo,endpoints:t,instanceId:n})}},{key:\"stopLiveStreaming\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(fs({action:\"daily-method-stop-live-streaming\"},e))}},{key:\"validateDailyConfig\",value:function(e){e.camSimulcastEncodings&&(console.warn(\"camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings.\"),this.validateSimulcastEncodings(e.camSimulcastEncodings)),e.screenSimulcastEncodings&&console.warn(\"screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings.\"),ua()&&e.noAutoDefaultDeviceChange&&console.warn(\"noAutoDefaultDeviceChange is not supported on Android, and will be ignored.\")}},{key:\"validateSimulcastEncodings\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if(!(e instanceof Array||Array.isArray(e)))throw new Error(\"encodings must be an Array\");if(!ec(e.length,1,3))throw new Error(\"encodings must be an Array with between 1 to \".concat(3,\" layers\"));for(var r=0;r<e.length;r++){var i=e[r];for(var o in this._validateEncodingLayerHasValidProperties(i),i)if(Ms.includes(o)){if(\"number\"!=typeof i[o])throw new Error(\"\".concat(o,\" must be a number\"));if(t){var a=t[o],s=a.min,c=a.max;if(!ec(i[o],s,c))throw new Error(\"\".concat(o,\" value not in range. valid range: \").concat(s,\" to \").concat(c))}}else if(![\"active\",\"scalabilityMode\"].includes(o))throw new Error(\"Invalid key \".concat(o,\", valid keys are:\")+Object.values(Ms));if(n&&!i.hasOwnProperty(\"maxBitrate\"))throw new Error(\"maxBitrate is not specified\")}}}},{key:\"startRemoteMediaPlayer\",value:(P=h((function*(e){var t=this,n=e.url,r=e.settings,i=void 0===r?{state:Ko.PLAY}:r;try{!function(e){if(\"string\"!=typeof e)throw new Error('url parameter must be \"string\" type')}(n),Zs(i),function(e){for(var t in e)if(!Cs.includes(t))throw new Error(\"Invalid key \".concat(t,\", valid keys are: \").concat(Cs));e.simulcastEncodings&&this.validateSimulcastEncodings(e.simulcastEncodings,ks,!0)}(i)}catch(e){throw console.error(\"invalid argument Error: \".concat(e)),console.error('startRemoteMediaPlayer arguments must be of the form:\\n  { url: \"playback url\",\\n  settings?:\\n  {state: \"play\"|\"pause\", simulcastEncodings?: [{}] } }'),e}return new Promise((function(e,r){t.sendMessageToCallMachine({action:\"daily-method-start-remote-media-player\",url:n,settings:i},(function(t){t.error?r({error:t.error,errorMsg:t.errorMsg}):e({session_id:t.session_id,remoteMediaPlayerState:{state:t.state,settings:t.settings}})}))}))})),function(e){return P.apply(this,arguments)})},{key:\"stopRemoteMediaPlayer\",value:(T=h((function*(e){var t=this;if(\"string\"!=typeof e)throw new Error(\" remotePlayerID must be of type string\");return new Promise((function(n,r){t.sendMessageToCallMachine({action:\"daily-method-stop-remote-media-player\",session_id:e},(function(e){e.error?r({error:e.error,errorMsg:e.errorMsg}):n()}))}))})),function(e){return T.apply(this,arguments)})},{key:\"updateRemoteMediaPlayer\",value:(E=h((function*(e){var t=this,n=e.session_id,r=e.settings;try{Zs(r)}catch(e){throw console.error(\"invalid argument Error: \".concat(e)),console.error('updateRemoteMediaPlayer arguments must be of the form:\\n  session_id: \"participant session\",\\n  { settings?: {state: \"play\"|\"pause\"} }'),e}return new Promise((function(e,i){t.sendMessageToCallMachine({action:\"daily-method-update-remote-media-player\",session_id:n,settings:r},(function(t){t.error?i({error:t.error,errorMsg:t.errorMsg}):e({session_id:t.session_id,remoteMediaPlayerState:{state:t.state,settings:t.settings}})}))}))})),function(e){return E.apply(this,arguments)})},{key:\"startTranscription\",value:function(e){Ls(this._callState,\"startTranscription()\"),this.sendMessageToCallMachine(fs({action:\"daily-method-start-transcription\"},e))}},{key:\"updateTranscription\",value:function(e){if(Ls(this._callState,\"updateTranscription()\"),!e)throw new Error(\"updateTranscription Error: options is mandatory\");if(\"object\"!==n(e))throw new Error(\"updateTranscription Error: options must be object type\");if(e.participants&&!Array.isArray(e.participants))throw new Error(\"updateTranscription Error: participants must be an array\");this.sendMessageToCallMachine(fs({action:\"daily-method-update-transcription\"},e))}},{key:\"stopTranscription\",value:function(e){if(Ls(this._callState,\"stopTranscription()\"),e&&\"object\"!==n(e))throw new Error(\"stopTranscription Error: options must be object type\");if(e&&!e.instanceId)throw new Error('\"instanceId\" not provided');this.sendMessageToCallMachine(fs({action:\"daily-method-stop-transcription\"},e))}},{key:\"startDialOut\",value:(C=h((function*(e){var t=this;Ls(this._callState,\"startDialOut()\");var n=function(e){if(e){if(!Array.isArray(e))throw new Error(\"Error starting dial out: audio codec must be an array\");if(e.length<=0)throw new Error(\"Error starting dial out: audio codec array specified but empty\");e.forEach((function(e){if(\"string\"!=typeof e)throw new Error(\"Error starting dial out: audio codec must be a string\");if(\"OPUS\"!==e&&\"PCMU\"!==e&&\"PCMA\"!==e&&\"G722\"!==e)throw new Error(\"Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722\")}))}};if(!e.sipUri&&!e.phoneNumber)throw new Error(\"Error starting dial out: either a sip uri or phone number must be provided\");if(e.sipUri&&e.phoneNumber)throw new Error(\"Error starting dial out: only one of sip uri or phone number must be provided\");if(e.sipUri){if(\"string\"!=typeof e.sipUri)throw new Error(\"Error starting dial out: sipUri must be a string\");if(!e.sipUri.startsWith(\"sip:\"))throw new Error(\"Error starting dial out: Invalid SIP URI, must start with 'sip:'\");if(e.video&&\"boolean\"!=typeof e.video)throw new Error(\"Error starting dial out: video must be a boolean value\");!function(e){if(e&&(n(e.audio),e.video)){if(!Array.isArray(e.video))throw new Error(\"Error starting dial out: video codec must be an array\");if(e.video.length<=0)throw new Error(\"Error starting dial out: video codec array specified but empty\");e.video.forEach((function(e){if(\"string\"!=typeof e)throw new Error(\"Error starting dial out: video codec must be a string\");if(\"H264\"!==e&&\"VP8\"!==e)throw new Error(\"Error starting dial out: video codec must be H264 or VP8\")}))}}(e.codecs)}if(e.phoneNumber){if(\"string\"!=typeof e.phoneNumber)throw new Error(\"Error starting dial out: phoneNumber must be a string\");if(!/^\\+\\d{1,}$/.test(e.phoneNumber))throw new Error(\"Error starting dial out: Invalid phone number, must be valid phone number as per E.164\");e.codecs&&n(e.codecs.audio)}if(e.callerId){if(\"string\"!=typeof e.callerId)throw new Error(\"Error starting dial out: callerId must be a string\");if(e.sipUri)throw new Error(\"Error starting dial out: callerId not allowed with sipUri\")}if(e.displayName){if(\"string\"!=typeof e.displayName)throw new Error(\"Error starting dial out: displayName must be a string\");if(e.displayName.length>=200)throw new Error(\"Error starting dial out: displayName length must be less than 200\")}if(e.userId){if(\"string\"!=typeof e.userId)throw new Error(\"Error starting dial out: userId must be a string\");if(e.userId.length>36)throw new Error(\"Error starting dial out: userId length must be less than or equal to 36\")}return new Promise((function(n,r){t.sendMessageToCallMachine(fs({action:\"dialout-start\"},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return C.apply(this,arguments)})},{key:\"stopDialOut\",value:function(e){var t=this;return Ls(this._callState,\"stopDialOut()\"),new Promise((function(n,r){t.sendMessageToCallMachine(fs({action:\"dialout-stop\"},e),(function(e){e.error?r(e.error):n(e)}))}))}},{key:\"sipCallTransfer\",value:(M=h((function*(e){var t=this;if(Ls(this._callState,\"sipCallTransfer()\"),!e)throw new Error(\"sipCallTransfer() requires a sessionId and toEndPoint\");return e.useSipRefer=!1,Xs(e,\"sipCallTransfer\"),new Promise((function(n,r){t.sendMessageToCallMachine(fs({action:ea},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return M.apply(this,arguments)})},{key:\"sipRefer\",value:(k=h((function*(e){var t=this;if(Ls(this._callState,\"sipRefer()\"),!e)throw new Error(\"sessionId and toEndPoint are mandatory parameter\");return e.useSipRefer=!0,Xs(e,\"sipRefer\"),new Promise((function(n,r){t.sendMessageToCallMachine(fs({action:ea},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return k.apply(this,arguments)})},{key:\"sendDTMF\",value:(S=h((function*(e){var t=this;return Ls(this._callState,\"sendDTMF()\"),function(e){var t=e.sessionId,n=e.tones;if(!t||!n)throw new Error(\"sessionId and tones are mandatory parameter\");if(\"string\"!=typeof t||\"string\"!=typeof n)throw new Error(\"sessionId and tones should be of string type\");if(n.length>20)throw new Error(\"tones string must be upto 20 characters\");var r=/[^0-9A-D*#]/g,i=n.match(r);if(i&&i[0])throw new Error(\"\".concat(i[0],\" is not valid DTMF tone\"))}(e),new Promise((function(n,r){t.sendMessageToCallMachine(fs({action:\"send-dtmf\"},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return S.apply(this,arguments)})},{key:\"getNetworkStats\",value:function(){var e=this;if(this._callState!==ri){return{stats:{latest:{}}}}return new Promise((function(t){e.sendMessageToCallMachine({action:\"get-calc-stats\"},(function(n){t(fs({stats:n.stats},e._network))}))}))}},{key:\"testWebsocketConnectivity\",value:(w=h((function*(){var e=this;if(Rs(this._testCallInProgress,\"testWebsocketConnectivity()\"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}return new Promise((function(t,n){e.sendMessageToCallMachine({action:\"test-websocket-connectivity\"},(function(e){e.error?n(e.error):t(e.results)}))}))})),function(){return w.apply(this,arguments)})},{key:\"abortTestWebsocketConnectivity\",value:function(){this.sendMessageToCallMachine({action:\"abort-test-websocket-connectivity\"})}},{key:\"_validateVideoTrackForNetworkTests\",value:function(e){return e?e instanceof MediaStreamTrack?!!us(e,{isLocalScreenVideo:!1})||(console.error(\"Video track is not playable. This test needs a live video track.\"),!1):(console.error(\"Video track needs to be of type `MediaStreamTrack`.\"),!1):(console.error(\"Missing video track. You must provide a video track in order to run this test.\"),!1)}},{key:\"testCallQuality\",value:(b=h((function*(){var t=this;Us(),Fs(this._callObjectMode,\"testCallQuality()\"),Ns(this._callMachineInitialized,\"testCallQuality()\",null,!0),Ds(this._callState,this._isPreparingToJoin,\"testCallQuality()\");var n=this._testCallAlreadyInProgress,r=function(e){n||(t._testCallInProgress=e)};if(r(!0),this.needsLoad())try{var i=this._callState;yield this.load(),this._callState=i}catch(e){return r(!1),Promise.reject(e)}return new Promise((function(n){t.sendMessageToCallMachine({action:\"test-call-quality\",dailyJsVersion:t.properties.dailyJsVersion},(function(i){var o=i.results,a=o.result,s=e(o,ds);if(\"failed\"===a){var c,l=fs({},s);null!==(c=s.error)&&void 0!==c&&c.details?(s.error.details=JSON.parse(s.error.details),l.error=fs(fs({},l.error),{},{details:fs({},l.error.details)}),l.error.details.duringTest=\"testCallQuality\"):(l.error=l.error?fs({},l.error):{},l.error.details={duringTest:\"testCallQuality\"}),t._maybeSendToSentry(l)}r(!1),n(fs({result:a},s))}))}))})),function(){return b.apply(this,arguments)})},{key:\"stopTestCallQuality\",value:function(){this.sendMessageToCallMachine({action:\"stop-test-call-quality\"})}},{key:\"testConnectionQuality\",value:(_=h((function*(e){var t;na()?(console.warn(\"testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead\"),t=yield this.testPeerToPeerCallQuality(e)):(console.warn(\"testConnectionQuality() is deprecated: use testCallQuality() instead\"),t=yield this.testCallQuality());var n={result:t.result,secondsElapsed:t.secondsElapsed};return t.data&&(n.data={maxRTT:t.data.maxRoundTripTime,packetLoss:t.data.avgRecvPacketLoss}),n})),function(e){return _.apply(this,arguments)})},{key:\"testPeerToPeerCallQuality\",value:(y=h((function*(e){var t=this;if(Rs(this._testCallInProgress,\"testPeerToPeerCallQuality()\"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}var n=e.videoTrack,r=e.duration;if(!this._validateVideoTrackForNetworkTests(n))throw new Error(\"Video track error\");return this._sharedTracks.videoTrackForConnectionQualityTest=n,new Promise((function(e,n){t.sendMessageToCallMachine({action:\"test-p2p-call-quality\",duration:r},(function(t){t.error?n(t.error):e(t.results)}))}))})),function(e){return y.apply(this,arguments)})},{key:\"stopTestConnectionQuality\",value:function(){na()?(console.warn(\"stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead\"),this.stopTestPeerToPeerCallQuality()):(console.warn(\"stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead\"),this.stopTestCallQuality())}},{key:\"stopTestPeerToPeerCallQuality\",value:function(){this.sendMessageToCallMachine({action:\"stop-test-p2p-call-quality\"})}},{key:\"testNetworkConnectivity\",value:(m=h((function*(e){var t=this;if(Rs(this._testCallInProgress,\"testNetworkConnectivity()\"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}if(!this._validateVideoTrackForNetworkTests(e))throw new Error(\"Video track error\");return this._sharedTracks.videoTrackForNetworkConnectivityTest=e,new Promise((function(e,n){t.sendMessageToCallMachine({action:\"test-network-connectivity\"},(function(t){t.error?n(t.error):e(t.results)}))}))})),function(e){return m.apply(this,arguments)})},{key:\"abortTestNetworkConnectivity\",value:function(){this.sendMessageToCallMachine({action:\"abort-test-network-connectivity\"})}},{key:\"getCpuLoadStats\",value:function(){var e=this;return new Promise((function(t){if(e._callState===ri){e.sendMessageToCallMachine({action:\"get-cpu-load-stats\"},(function(e){t(e.cpuStats)}))}else t({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})}))}},{key:\"_validateEncodingLayerHasValidProperties\",value:function(e){var t;if(!((null===(t=Object.keys(e))||void 0===t?void 0:t.length)>0))throw new Error(\"Empty encoding is not allowed. At least one of these valid keys should be specified:\"+Object.values(Ms))}},{key:\"_validateVideoSendSettings\",value:function(e,t){var r=\"screenVideo\"===e?[\"default-screen-video\",\"detail-optimized\",\"motion-optimized\",\"motion-and-detail-balanced\"]:[\"default-video\",\"bandwidth-optimized\",\"bandwidth-and-quality-balanced\",\"quality-optimized\",\"adaptive-2-layers\",\"adaptive-3-layers\"],i=\"Video send settings should be either an object or one of the supported presets: \".concat(r.join());if(\"string\"==typeof t){if(!r.includes(t))throw new Error(i)}else{if(\"object\"!==n(t))throw new Error(i);if(!t.maxQuality&&!t.encodings&&void 0===t.allowAdaptiveLayers)throw new Error(\"Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute\");if(t.maxQuality&&-1===[\"low\",\"medium\",\"high\"].indexOf(t.maxQuality))throw new Error(\"maxQuality must be either low, medium or high\");if(t.encodings){var o=!1;switch(Object.keys(t.encodings).length){case 1:o=!t.encodings.low;break;case 2:o=!t.encodings.low||!t.encodings.medium;break;case 3:o=!t.encodings.low||!t.encodings.medium||!t.encodings.high;break;default:o=!0}if(o)throw new Error(\"Encodings must be defined as: low, low and medium, or low, medium and high.\");t.encodings.low&&this._validateEncodingLayerHasValidProperties(t.encodings.low),t.encodings.medium&&this._validateEncodingLayerHasValidProperties(t.encodings.medium),t.encodings.high&&this._validateEncodingLayerHasValidProperties(t.encodings.high)}}}},{key:\"validateUpdateSendSettings\",value:function(e){var t=this;if(!e||0===Object.keys(e).length)throw new Error(\"Send settings must contain at least information for one track!\");Object.entries(e).forEach((function(e){var n=v(e,2),r=n[0],i=n[1];t._validateVideoSendSettings(r,i)}))}},{key:\"updateSendSettings\",value:function(e){var t=this;return this.validateUpdateSendSettings(e),this.needsLoad()?(this._preloadCache.sendSettings=e,{sendSettings:this._preloadCache.sendSettings}):new Promise((function(n,r){t.sendMessageToCallMachine({action:\"update-send-settings\",sendSettings:e},(function(e){e.error?r(e.error):n(e.sendSettings)}))}))}},{key:\"getSendSettings\",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:\"getLocalAudioLevel\",value:function(){return this._localAudioLevel}},{key:\"getRemoteParticipantsAudioLevel\",value:function(){return this._remoteParticipantsAudioLevel}},{key:\"getActiveSpeaker\",value:function(){return Us(),this._activeSpeaker}},{key:\"setActiveSpeakerMode\",value:function(e){return Us(),this.sendMessageToCallMachine({action:\"set-active-speaker-mode\",enabled:e}),this}},{key:\"activeSpeakerMode\",value:function(){return Us(),this._activeSpeakerMode}},{key:\"subscribeToTracksAutomatically\",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:\"setSubscribeToTracksAutomatically\",value:function(e){return Ls(this._callState,\"setSubscribeToTracksAutomatically()\",\"Use the subscribeToTracksAutomatically configuration property.\"),this._preloadCache.subscribeToTracksAutomatically=e,this.sendMessageToCallMachine({action:\"daily-method-subscribe-to-tracks-automatically\",enabled:e}),this}},{key:\"enumerateDevices\",value:(f=h((function*(){var e=this;if(this._callObjectMode){var t=yield navigator.mediaDevices.enumerateDevices();return\"Firefox\"===pa()&&ha().major>115&&ha().major<123&&(t=t.filter((function(e){return\"audiooutput\"!==e.kind}))),{devices:t.map((function(e){var t=JSON.parse(JSON.stringify(e));if(!na()&&\"videoinput\"===e.kind&&e.getCapabilities){var n,r=e.getCapabilities();t.facing=(null==r||null===(n=r.facingMode)||void 0===n?void 0:n.length)>=1?r.facingMode[0]:void 0}return t}))}}return new Promise((function(t){e.sendMessageToCallMachine({action:\"enumerate-devices\"},(function(e){t({devices:e.devices})}))}))})),function(){return f.apply(this,arguments)})},{key:\"sendAppMessage\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"*\";if(Ls(this._callState,\"sendAppMessage()\"),JSON.stringify(e).length>this._maxAppMessageSize)throw new Error(\"Message data too large. Max size is \"+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:\"app-msg\",data:e,to:t}),this}},{key:\"addFakeParticipant\",value:function(e){return Us(),Ls(this._callState,\"addFakeParticipant()\"),this.sendMessageToCallMachine(fs({action:\"add-fake-participant\"},e)),this}},{key:\"setShowNamesMode\",value:function(e){return Bs(this._callObjectMode,\"setShowNamesMode()\"),Us(),e&&\"always\"!==e&&\"never\"!==e?(console.error('setShowNamesMode argument should be \"always\", \"never\", or false'),this):(this.sendMessageToCallMachine({action:\"set-show-names\",mode:e}),this)}},{key:\"setShowLocalVideo\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Bs(this._callObjectMode,\"setShowLocalVideo()\"),Us(),Ls(this._callState,\"setShowLocalVideo()\"),\"boolean\"!=typeof e?(console.error(\"setShowLocalVideo only accepts a boolean value\"),this):(this.sendMessageToCallMachine({action:\"set-show-local-video\",show:e}),this._showLocalVideo=e,this)}},{key:\"showLocalVideo\",value:function(){return Bs(this._callObjectMode,\"showLocalVideo()\"),Us(),this._showLocalVideo}},{key:\"setShowParticipantsBar\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Bs(this._callObjectMode,\"setShowParticipantsBar()\"),Us(),Ls(this._callState,\"setShowParticipantsBar()\"),\"boolean\"!=typeof e?(console.error(\"setShowParticipantsBar only accepts a boolean value\"),this):(this.sendMessageToCallMachine({action:\"set-show-participants-bar\",show:e}),this._showParticipantsBar=e,this)}},{key:\"showParticipantsBar\",value:function(){return Bs(this._callObjectMode,\"showParticipantsBar()\"),Us(),this._showParticipantsBar}},{key:\"customIntegrations\",value:function(){return Us(),Bs(this._callObjectMode,\"customIntegrations()\"),this._customIntegrations}},{key:\"setCustomIntegrations\",value:function(e){return Us(),Bs(this._callObjectMode,\"setCustomIntegrations()\"),Ls(this._callState,\"setCustomIntegrations()\"),Ks(e)?(this.sendMessageToCallMachine({action:\"set-custom-integrations\",integrations:e}),this._customIntegrations=e,this):this}},{key:\"startCustomIntegrations\",value:function(e){var t=this;if(Us(),Bs(this._callObjectMode,\"startCustomIntegrations()\"),Ls(this._callState,\"startCustomIntegrations()\"),Array.isArray(e)&&e.some((function(e){return\"string\"!=typeof e}))||!Array.isArray(e)&&\"string\"!=typeof e)return console.error(\"startCustomIntegrations() only accepts string | string[]\"),this;var n=\"string\"==typeof e?[e]:e,r=n.filter((function(e){return!(e in t._customIntegrations)}));return r.length?(console.error(\"Can't find custom integration(s): \\\"\".concat(r.join(\", \"),'\"')),this):(this.sendMessageToCallMachine({action:\"start-custom-integrations\",ids:n}),this)}},{key:\"stopCustomIntegrations\",value:function(e){var t=this;if(Us(),Bs(this._callObjectMode,\"stopCustomIntegrations()\"),Ls(this._callState,\"stopCustomIntegrations()\"),Array.isArray(e)&&e.some((function(e){return\"string\"!=typeof e}))||!Array.isArray(e)&&\"string\"!=typeof e)return console.error(\"stopCustomIntegrations() only accepts string | string[]\"),this;var n=\"string\"==typeof e?[e]:e,r=n.filter((function(e){return!(e in t._customIntegrations)}));return r.length?(console.error(\"Can't find custom integration(s): \\\"\".concat(r.join(\", \"),'\"')),this):(this.sendMessageToCallMachine({action:\"stop-custom-integrations\",ids:n}),this)}},{key:\"customTrayButtons\",value:function(){return Bs(this._callObjectMode,\"customTrayButtons()\"),Us(),this._customTrayButtons}},{key:\"updateCustomTrayButtons\",value:function(e){return Bs(this._callObjectMode,\"updateCustomTrayButtons()\"),Us(),Ls(this._callState,\"updateCustomTrayButtons()\"),Qs(e)?(this.sendMessageToCallMachine({action:\"update-custom-tray-buttons\",btns:e}),this._customTrayButtons=e,this):(console.error(\"updateCustomTrayButtons only accepts a dictionary of the type \".concat(JSON.stringify(Ts))),this)}},{key:\"theme\",value:function(){return Bs(this._callObjectMode,\"theme()\"),this.properties.theme}},{key:\"setTheme\",value:function(e){var t=this;return Bs(this._callObjectMode,\"setTheme()\"),new Promise((function(n,r){try{t.validateProperties({theme:e}),t.properties.theme=fs({},e),t.sendMessageToCallMachine({action:\"set-theme\",theme:t.properties.theme});try{t.emitDailyJSEvent({action:Fi,theme:t.properties.theme})}catch(e){console.log(\"could not emit 'theme-updated'\",e)}n(t.properties.theme)}catch(e){r(e)}}))}},{key:\"requestFullscreen\",value:(p=h((function*(){if(Us(),this._iframe&&!document.fullscreenElement&&oa())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(e){console.log(\"could not make video call fullscreen\",e)}})),function(){return p.apply(this,arguments)})},{key:\"exitFullscreen\",value:function(){Us(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:\"getSidebarView\",value:(u=h((function*(){var e=this;return this._callObjectMode?(console.error(\"getSidebarView is not available in callObject mode\"),Promise.resolve(null)):new Promise((function(t){e.sendMessageToCallMachine({action:\"get-sidebar-view\"},(function(e){t(e.view)}))}))})),function(){return u.apply(this,arguments)})},{key:\"setSidebarView\",value:function(e){return this._callObjectMode?(console.error(\"setSidebarView is not available in callObject mode\"),this):(this.sendMessageToCallMachine({action:\"set-sidebar-view\",view:e}),this)}},{key:\"room\",value:(l=h((function*(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeRoomConfigDefaults,n=void 0===t||t;return this._accessState.access===pi||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise((function(t){e.sendMessageToCallMachine({action:\"lib-room-info\",includeRoomConfigDefaults:n},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))})),function(){return l.apply(this,arguments)})},{key:\"geo\",value:(s=h((function*(){try{var e=yield fetch(\"https://gs.daily.co/_ks_/x-swsl/:\");return{current:(yield e.json()).geo}}catch(e){return console.error(\"geo lookup failed\",e),{current:\"\"}}})),function(){return s.apply(this,arguments)})},{key:\"setNetworkTopology\",value:(i=h((function*(e){var t=this;return Us(),Ls(this._callState,\"setNetworkTopology()\"),new Promise((function(n,r){t.sendMessageToCallMachine({action:\"set-network-topology\",opts:e},(function(e){e.error?r({error:e.error}):n({workerId:e.workerId})}))}))})),function(e){return i.apply(this,arguments)})},{key:\"getNetworkTopology\",value:(r=h((function*(){var e=this;return new Promise((function(t,n){e.needsLoad()&&t({topology:\"none\"}),e.sendMessageToCallMachine({action:\"get-network-topology\"},(function(e){e.error?n({error:e.error}):t({topology:e.topology})}))}))})),function(){return r.apply(this,arguments)})},{key:\"setPlayNewParticipantSound\",value:function(e){if(Us(),\"number\"!=typeof e&&!0!==e&&!1!==e)throw new Error(\"argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is \".concat(e));this.sendMessageToCallMachine({action:\"daily-method-set-play-ding\",arg:e})}},{key:\"on\",value:function(e,t){return g.prototype.on.call(this,e,t)}},{key:\"once\",value:function(e,t){return g.prototype.once.call(this,e,t)}},{key:\"off\",value:function(e,t){return g.prototype.off.call(this,e,t)}},{key:\"validateProperties\",value:function(e){for(var t in e){if(!Os[t])throw new Error(\"unrecognized property '\".concat(t,\"'\"));if(Os[t].validate&&!Os[t].validate(e[t],this))throw new Error(\"property '\".concat(t,\"': \").concat(Os[t].help))}}},{key:\"assembleMeetingUrl\",value:function(){var e,t,n=fs(fs({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:null!==(e=this.properties.dailyConfig)&&void 0!==e&&e.proxyUrl?encodeURIComponent(null===(t=this.properties.dailyConfig)||void 0===t?void 0:t.proxyUrl):void 0}),r=n.url.match(/\\?/)?\"&\":\"?\";return n.url+r+Object.keys(Os).filter((function(e){return Os[e].queryString&&void 0!==n[e]})).map((function(e){return\"\".concat(Os[e].queryString,\"=\").concat(n[e])})).join(\"&\")}},{key:\"needsLoad\",value:function(){return[Zr,ei,ii,oi].includes(this._callState)}},{key:\"sendMessageToCallMachine\",value:function(e,t){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error(\"Use after destroy\");this._messageChannel.sendMessageToCallMachine(e,t,this.callClientId,this._iframe)}},{key:\"forwardPackagedMessageToCallMachine\",value:function(e){this._messageChannel.forwardPackagedMessageToCallMachine(e,this._iframe,this.callClientId)}},{key:\"addListenerForPackagedMessagesFromCallMachine\",value:function(e){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(e,this.callClientId)}},{key:\"removeListenerForPackagedMessagesFromCallMachine\",value:function(e){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(e)}},{key:\"handleMessageFromCallMachine\",value:function(t){switch(t.action){case Ni:this.sendMessageToCallMachine(fs({action:Ri},this.properties));break;case\"call-machine-initialized\":this._callMachineInitialized=!0;var n={action:zo,level:\"log\",code:1011,stats:{event:\"bundle load\",time:\"no-op\"===this._bundleLoadTime?0:this._bundleLoadTime,preLoaded:\"no-op\"===this._bundleLoadTime,url:X(this.properties.dailyConfig)}};this.sendMessageToCallMachine(n),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case Vi:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(t);break;case Wi:var r,i=fs({},t);delete i.internal,this._maxAppMessageSize=(null===(r=t.internal)||void 0===r?void 0:r._maxAppMessageSize)||Vo,this._joinedCallback&&(this._joinedCallback(t.participants),this._joinedCallback=null),this.emitDailyJSEvent(i);break;case Hi:case Gi:if(this._callState===ii)return;if(t.participant&&t.participant.session_id){var o=t.participant.local?\"local\":t.participant.session_id;if(this._callObjectMode){var a=this._callMachine().store;Ga(t.participant,a),Qa(t.participant,a),Ya(t.participant,this._participants[o],a)}try{this.maybeParticipantTracksStopped(this._participants[o],t.participant),this.maybeParticipantTracksStarted(this._participants[o],t.participant),this.maybeEventRecordingStopped(this._participants[o],t.participant),this.maybeEventRecordingStarted(this._participants[o],t.participant)}catch(e){console.error(\"track events error\",e)}this.compareEqualForParticipantUpdateEvent(t.participant,this._participants[o])||(this._participants[o]=fs({},t.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(t))}break;case Qi:if(t.participant&&t.participant.session_id){var s=this._participants[t.participant.session_id];s&&this.maybeParticipantTracksStopped(s,null),delete this._participants[t.participant.session_id],this.emitDailyJSEvent(t)}break;case Ki:D(this._participantCounts,t.participantCounts)||(this._participantCounts=t.participantCounts,this.emitDailyJSEvent(t));break;case Yi:var c={access:t.access};t.awaitingAccess&&(c.awaitingAccess=t.awaitingAccess),D(this._accessState,c)||(this._accessState=c,this.emitDailyJSEvent(t));break;case Xi:if(t.meetingSession){this._meetingSessionSummary=t.meetingSession,this.emitDailyJSEvent(t);var l=fs(fs({},t),{},{action:\"meeting-session-updated\"});this.emitDailyJSEvent(l)}break;case Uo:var u;this._iframe&&!t.preserveIframe&&(this._iframe.src=\"\"),this._updateCallState(oi),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(t.errorMsg),this._loadedCallback=null),t.preserveIframe;var d=e(t,ps);null!=d&&null!==(u=d.error)&&void 0!==u&&u.details&&(d.error.details=JSON.parse(d.error.details)),this._maybeSendToSentry(t),this._joinedCallback&&(this._joinedCallback(null,d),this._joinedCallback=null),this.emitDailyJSEvent(d);break;case zi:this._callState!==oi&&this._updateCallState(ii),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(t);break;case\"selected-devices-updated\":t.devices&&this.emitDailyJSEvent(t);break;case Eo:var p=t.threshold,h=t.quality;p===this._network.threshold&&h===this._network.quality||(this._network.quality=h,this._network.threshold=p,this.emitDailyJSEvent(t));break;case Po:t&&t.cpuLoadState&&this.emitDailyJSEvent(t);break;case Oo:t&&void 0!==t.faceCounts&&this.emitDailyJSEvent(t);break;case Mo:var f=t.activeSpeaker;this._activeSpeaker.peerId!==f.peerId&&(this._activeSpeaker.peerId=f.peerId,this.emitDailyJSEvent({action:t.action,activeSpeaker:this._activeSpeaker}));break;case\"show-local-video-changed\":if(this._callObjectMode)return;var v=t.show;this._showLocalVideo=v,this.emitDailyJSEvent({action:t.action,show:v});break;case Co:var m=t.enabled;this._activeSpeakerMode!==m&&(this._activeSpeakerMode=m,this.emitDailyJSEvent({action:t.action,enabled:this._activeSpeakerMode}));break;case to:case no:case ro:this._waitingParticipants=t.allWaitingParticipants,this.emitDailyJSEvent({action:t.action,participant:t.participant});break;case Ro:D(this._receiveSettings,t.receiveSettings)||(this._receiveSettings=t.receiveSettings,this.emitDailyJSEvent({action:t.action,receiveSettings:t.receiveSettings}));break;case Fo:if(!D(this._inputSettings,t.inputSettings)){var g=this._getInputSettings();this._inputSettings=t.inputSettings,this._preloadCache.inputSettings={},D(g,this._getInputSettings())||this.emitDailyJSEvent({action:t.action,inputSettings:this._getInputSettings()})}break;case\"send-settings-updated\":D(this._sendSettings,t.sendSettings)||(this._sendSettings=t.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:t.action,sendSettings:t.sendSettings}));break;case\"local-audio-level\":this._localAudioLevel=t.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(t);break;case\"remote-participants-audio-level\":this._remoteParticipantsAudioLevel=t.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(t);break;case yo:var y=t.session_id;this._rmpPlayerState[y]=t.playerState,this.emitDailyJSEvent(t);break;case bo:delete this._rmpPlayerState[t.session_id],this.emitDailyJSEvent(t);break;case _o:var _=t.session_id,b=this._rmpPlayerState[_];b&&this.compareEqualForRMPUpdateEvent(b,t.remoteMediaPlayerState)||(this._rmpPlayerState[_]=t.remoteMediaPlayerState,this.emitDailyJSEvent(t));break;case\"custom-button-click\":case\"sidebar-view-changed\":this.emitDailyJSEvent(t);break;case Zi:var w=this._meetingSessionState.topology!==(t.meetingSessionState&&t.meetingSessionState.topology);this._meetingSessionState=tc(t.meetingSessionState,this._callObjectMode),(this._callObjectMode||w)&&this.emitDailyJSEvent(t);break;case wo:this._isScreenSharing=!0,this.emitDailyJSEvent(t);break;case So:case ko:this._isScreenSharing=!1,this.emitDailyJSEvent(t);break;case lo:case uo:case po:case ho:case fo:case ao:case so:case co:case Ji:case $i:case mo:case go:case\"test-completed\":case To:case vo:case xo:case Lo:case Io:case Do:case Bo:case No:case\"dialin-ready\":case\"dialin-connected\":case\"dialin-error\":case\"dialin-stopped\":case\"dialin-warning\":case\"dialout-connected\":case\"dialout-answered\":case\"dialout-error\":case\"dialout-stopped\":case\"dialout-warning\":this.emitDailyJSEvent(t);break;case\"request-fullscreen\":this.requestFullscreen();break;case\"request-exit-fullscreen\":this.exitFullscreen()}}},{key:\"maybeEventRecordingStopped\",value:function(e,t){var n=\"record\";e&&(t.local||!1!==t[n]||e[n]===t[n]||this.emitDailyJSEvent({action:uo}))}},{key:\"maybeEventRecordingStarted\",value:function(e,t){var n=\"record\";e&&(t.local||!0!==t[n]||e[n]===t[n]||this.emitDailyJSEvent({action:lo}))}},{key:\"maybeEventTrackStopped\",value:function(e,t,n,r){e&&(\"ended\"!==e.readyState&&t&&e.id===t.id||this.emitDailyJSEvent({action:oo,track:e,participant:n,type:r}))}},{key:\"maybeEventTrackStarted\",value:function(e,t,n,r){t&&(e&&\"ended\"!==e.readyState&&t.id===e.id||this.emitDailyJSEvent({action:io,track:t,participant:n,type:r}))}},{key:\"maybeParticipantTracksStopped\",value:function(e,t){if(e)for(var n in e.tracks)this.maybeEventTrackStopped(e.tracks[n].track,t&&t.tracks[n]?t.tracks[n].track:null,t,n)}},{key:\"maybeParticipantTracksStarted\",value:function(e,t){if(t)for(var n in t.tracks)this.maybeEventTrackStarted(e&&e.tracks[n]?e.tracks[n].track:null,t.tracks[n].track,t,n)}},{key:\"compareEqualForRMPUpdateEvent\",value:function(e,t){var n,r;return e.state===t.state&&(null===(n=e.settings)||void 0===n?void 0:n.volume)===(null===(r=t.settings)||void 0===r?void 0:r.volume)}},{key:\"emitDailyJSEvent\",value:function(e){try{e.callClientId=this.callClientId,this.emit(e.action,e)}catch(t){console.log(\"could not emit\",e,t)}}},{key:\"compareEqualForParticipantUpdateEvent\",value:function(e,t){return!!D(e,t)&&((!e.videoTrack||!t.videoTrack||e.videoTrack.id===t.videoTrack.id&&e.videoTrack.muted===t.videoTrack.muted&&e.videoTrack.enabled===t.videoTrack.enabled)&&(!e.audioTrack||!t.audioTrack||e.audioTrack.id===t.audioTrack.id&&e.audioTrack.muted===t.audioTrack.muted&&e.audioTrack.enabled===t.audioTrack.enabled))}},{key:\"nativeUtils\",value:function(){return na()?\"undefined\"==typeof DailyNativeUtils?(console.warn(\"in React Native, DailyNativeUtils is expected to be available\"),null):DailyNativeUtils:null}},{key:\"updateIsPreparingToJoin\",value:function(e){this._updateCallState(this._callState,e)}},{key:\"_updateCallState\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._isPreparingToJoin;if(e!==this._callState||t!==this._isPreparingToJoin){var n=this._callState,r=this._isPreparingToJoin;this._callState=e,this._isPreparingToJoin=t;var i=this._callState===ri;this.updateShowAndroidOngoingMeetingNotification(i);var o=Is(n,r),a=Is(this._callState,this._isPreparingToJoin);o!==a&&(this.updateKeepDeviceAwake(a),this.updateDeviceAudioMode(a),this.updateNoOpRecordingEnsuringBackgroundContinuity(a))}}},{key:\"resetMeetingDependentVars\",value:function(){this._participants={},this._participantCounts=Ss,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:pi},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=tc(ws,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=Vo,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:\"updateKeepDeviceAwake\",value:function(e){na()&&this.nativeUtils().setKeepDeviceAwake(e,this.callClientId)}},{key:\"updateDeviceAudioMode\",value:function(e){if(na()&&!this.disableReactNativeAutoDeviceManagement(\"audio\")){var t=e?this._nativeInCallAudioMode:\"idle\";this.nativeUtils().setAudioMode(t)}}},{key:\"updateShowAndroidOngoingMeetingNotification\",value:function(e){if(na()&&this.nativeUtils().setShowOngoingMeetingNotification){var t,n,r,i;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var o=this.properties.reactNativeConfig.androidInCallNotification;t=o.title,n=o.subtitle,r=o.iconName,i=o.disableForCustomOverride}i&&(e=!1),this.nativeUtils().setShowOngoingMeetingNotification(e,t,n,r,this.callClientId)}}},{key:\"updateNoOpRecordingEnsuringBackgroundContinuity\",value:function(e){na()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(e)}},{key:\"toggleParticipantAudioBasedOnNativeAudioFocus\",value:function(){var e,t;if(na()){var n=null===(e=this._callMachine())||void 0===e||null===(t=e.store)||void 0===t?void 0:t.getState();for(var r in null==n?void 0:n.streams){var i=n.streams[r];i&&i.pendingTrack&&\"audio\"===i.pendingTrack.kind&&(i.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:\"disableReactNativeAutoDeviceManagement\",value:function(e){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[e]}},{key:\"absoluteUrl\",value:function(e){if(void 0!==e){var t=document.createElement(\"a\");return t.href=e,t.href}}},{key:\"sayHello\",value:function(){var e=\"hello, world.\";return console.log(e),e}},{key:\"_logUseAfterDestroy\",value:function(){var e=Object.values(ys)[0];if(this.needsLoad()){if(e&&!e.needsLoad()){var t={action:zo,level:\"error\",code:this.strictMode?9995:9997};e.sendMessageToCallMachine(t)}else if(!this.strictMode){console.error(\"You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.\")}}else{var n={action:zo,level:\"error\",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(n,null,this.callClientId,this._iframe)}}},{key:\"_logDuplicateInstanceAttempt\",value:function(){for(var e=0,t=Object.values(ys);e<t.length;e++){var n=t[e];n._callMachineInitialized?(n.sendMessageToCallMachine({action:zo,level:\"warn\",code:this.allowMultipleCallInstances?9993:9992}),n._delayDuplicateInstanceLog=!1):n._delayDuplicateInstanceLog=!0}}},{key:\"_maybeSendToSentry\",value:function(e){var t,n,r,i,o,a;if(null!==(t=e.error)&&void 0!==t&&t.type){if(![Ti,Ci,ki].includes(e.error.type))return;if(e.error.type===ki&&e.error.msg.includes(\"deleted\"))return}var s=null!==(n=this.properties)&&void 0!==n&&n.url?new URL(this.properties.url):void 0,c=\"production\";s&&s.host.includes(\".staging.daily\")&&(c=\"staging\");var l,u,d,p,h,f=[Yn(),Qn(),$r(),Vr(),Gr(),Xr(),Zn(),Yr()].filter((function(e){return![\"BrowserApiErrors\",\"Breadcrumbs\",\"GlobalHandlers\"].includes(e.name)})),v=new gr({dsn:\"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844\",transport:jr,stackParser:Fr,integrations:f,environment:c}),m=new on;if(m.setClient(v),v.init(),this.session_id&&m.setExtra(\"sessionId\",this.session_id),this.properties){var g=fs({},this.properties);g.userName=g.userName?\"[Filtered]\":void 0,g.userData=g.userData?\"[Filtered]\":void 0,g.token=g.token?\"[Filtered]\":void 0,m.setExtra(\"properties\",g)}if(s){var y=s.searchParams.get(\"domain\");if(!y){var _=s.host.match(/(.*?)\\./);y=_&&_[1]||\"\"}y&&m.setTag(\"domain\",y)}e.error&&(m.setTag(\"fatalErrorType\",e.error.type),m.setExtra(\"errorDetails\",e.error.details),(null===(l=e.error.details)||void 0===l?void 0:l.uri)&&m.setTag(\"serverAddress\",e.error.details.uri),(null===(u=e.error.details)||void 0===u?void 0:u.workerGroup)&&m.setTag(\"workerGroup\",e.error.details.workerGroup),(null===(d=e.error.details)||void 0===d?void 0:d.geoGroup)&&m.setTag(\"geoGroup\",e.error.details.geoGroup),(null===(p=e.error.details)||void 0===p?void 0:p.on)&&m.setTag(\"connectionAttempt\",e.error.details.on),null!==(h=e.error.details)&&void 0!==h&&h.bundleUrl&&(m.setTag(\"bundleUrl\",e.error.details.bundleUrl),m.setTag(\"bundleError\",e.error.details.sourceError.type)));m.setTags({callMode:this._callObjectMode?na()?\"reactNative\":null!==(r=this.properties)&&void 0!==r&&null!==(i=r.dailyConfig)&&void 0!==i&&null!==(o=i.callMode)&&void 0!==o&&o.includes(\"prebuilt\")?this.properties.dailyConfig.callMode:\"custom\":\"prebuilt-frame\",version:ee.version()});var b=(null===(a=e.error)||void 0===a?void 0:a.msg)||e.errorMsg;m.captureException(new Error(b))}},{key:\"_callMachine\",value:function(){var e,t,n;return null===(e=window._daily)||void 0===e||null===(t=e.instances)||void 0===t||null===(n=t[this.callClientId])||void 0===n?void 0:n.callMachine}}],[{key:\"supportedBrowser\",value:function(){if(na())return{supported:!0,mobile:!0,name:\"React Native\",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var e=G.getParser(ta());return{supported:!!la(),mobile:\"mobile\"===e.getPlatformType(),name:e.getBrowserName(),version:e.getBrowserVersion(),supportsFullscreen:!!oa(),supportsScreenShare:!!ia(),supportsSfu:!!la(),supportsVideoProcessing:sa(),supportsAudioProcessing:ca()}}},{key:\"version\",value:function(){return\"0.74.0\"}},{key:\"createCallObject\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.layout=\"none\",new ee(null,e)}},{key:\"wrap\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Us(),!e||!e.contentWindow||\"string\"!=typeof e.src)throw new Error(\"DailyIframe::Wrap needs an iframe-like first argument\");return t.layout||(t.customLayout?t.layout=\"custom-v1\":t.layout=\"browser\"),new ee(e,t)}},{key:\"createFrame\",value:function(e,t){var n,r;Us(),e&&t?(n=e,r=t):e&&e.append?(n=e,r={}):(n=document.body,r=e||{});var i=r.iframeStyle;i||(i=n===document.body?{position:\"fixed\",border:\"1px solid black\",backgroundColor:\"white\",width:\"375px\",height:\"450px\",right:\"1em\",bottom:\"1em\"}:{border:0,width:\"100%\",height:\"100%\"});var o=document.createElement(\"iframe\");window.navigator&&window.navigator.userAgent.match(/Chrome\\/61\\./)?o.allow=\"microphone, camera\":o.allow=\"microphone; camera; autoplay; display-capture; screen-wake-lock\",o.style.visibility=\"hidden\",n.appendChild(o),o.style.visibility=null,Object.keys(i).forEach((function(e){return o.style[e]=i[e]})),r.layout||(r.customLayout?r.layout=\"custom-v1\":r.layout=\"browser\");try{return new ee(o,r)}catch(e){throw n.removeChild(o),e}}},{key:\"createTransparentFrame\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Us();var t=document.createElement(\"iframe\");return t.allow=\"microphone; camera; autoplay\",t.style.cssText=\"\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      border: 0;\\n      pointer-events: none;\\n    \",document.body.appendChild(t),e.layout||(e.layout=\"custom-v1\"),ee.wrap(t,e)}},{key:\"getCallInstance\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?ys[e]:Object.values(ys)[0]}}]),ee}();function xs(e,t){var n={};for(var r in e)if(e[r]instanceof MediaStreamTrack)n[r]=Ho;else if(\"dailyConfig\"===r){if(e[r].modifyLocalSdpHook){var i=window._daily.instances[t].customCallbacks||{};i.modifyLocalSdpHook=e[r].modifyLocalSdpHook,window._daily.instances[t].customCallbacks=i,delete e[r].modifyLocalSdpHook}if(e[r].modifyRemoteSdpHook){var o=window._daily.instances[t].customCallbacks||{};o.modifyRemoteSdpHook=e[r].modifyRemoteSdpHook,window._daily.instances[t].customCallbacks=o,delete e[r].modifyRemoteSdpHook}n[r]=e[r]}else n[r]=e[r];return n}function Ls(e){var t=arguments.length>2?arguments[2]:void 0;if(e!==ri){var n=\"\".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",\" only supported after join.\");throw t&&(n+=\" \".concat(t)),console.error(n),new Error(n)}}function Is(e,t){return[ni,ri].includes(e)||t}function Ds(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"This daily-js method\",r=arguments.length>3?arguments[3]:void 0;if(Is(e,t)){var i=\"\".concat(n,\" not supported after joining a meeting.\");throw r&&(i+=\" \".concat(r)),console.error(i),new Error(i)}}function Ns(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",n=arguments.length>2?arguments[2]:void 0;if(!e){var r=\"\".concat(t,arguments.length>3&&void 0!==arguments[3]&&arguments[3]?\" requires preAuth() or startCamera() to initialize call state.\":\" requires preAuth(), startCamera(), or join() to initialize call state.\");throw n&&(r+=\" \".concat(n)),console.error(r),new Error(r)}}function Rs(e){if(e){var t=\"A pre-call quality test is in progress. Please try \".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",\" again once testing has completed. Use stopTestCallQuality() to end it early.\");throw console.error(t),new Error(t)}}function Fs(e){if(!e){var t=\"\".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",\" is only supported on custom callObject instances\");throw console.error(t),new Error(t)}}function Bs(e){if(e){var t=\"\".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",\" is only supported as part of Daily's Prebuilt\");throw console.error(t),new Error(t)}}function Us(){if(na())throw new Error(\"This daily-js method is not currently supported in React Native\")}function Vs(){if(!na())throw new Error(\"This daily-js method is only supported in React Native\")}function Js(e){if(void 0===e)return!0;var t;if(\"string\"==typeof e)t=e;else try{t=JSON.stringify(e),D(JSON.parse(t),e)||console.warn(\"The userData provided will be modified when serialized.\")}catch(e){throw Error(\"userData must be serializable to JSON: \".concat(e))}if(t.length>4096)throw Error(\"userData is too large (\".concat(t.length,\" characters). Maximum size suppported is \").concat(4096,\".\"));return!0}function $s(e,t){for(var n=t.allowAllParticipantsKey,r=function(e){var t=[\"local\"];return n||t.push(\"*\"),e&&!t.includes(e)},i=function(e){return!!(void 0===e.layer||Number.isInteger(e.layer)&&e.layer>=0||\"inherit\"===e.layer)},o=function(e){return!!e&&(!(e.video&&!i(e.video))&&!(e.screenVideo&&!i(e.screenVideo)))},a=0,s=Object.entries(e);a<s.length;a++){var c=v(s[a],2),l=c[0],u=c[1];if(!r(l)||!o(u))return!1}return!0}function qs(e){return\"object\"===n(e)&&(!(e.video&&(\"object\"!==n(e.video)||!function(e){var t=[\"type\",\"config\"];if(!e)return!1;if(\"object\"!==n(e))return!1;if(!function(e){if(\"string\"!=typeof e)return!1;if(!Object.values(Go).includes(e))return console.error(\"inputSettings video processor type invalid\"),!1;return!0}(e.type))return!1;if(e.config){if(\"object\"!==n(e.config))return!1;if(!function(e,t){var n=Object.keys(t);if(0===n.length)return!0;var r=\"invalid object in inputSettings -> video -> processor -> config\";switch(e){case Go.BGBLUR:return n.length>1||\"strength\"!==n[0]?(console.error(r),!1):!(\"number\"!=typeof t.strength||t.strength<=0||t.strength>1||isNaN(t.strength))||(console.error(\"\".concat(r,\"; expected: {0 < strength <= 1}, got: \").concat(t.strength)),!1);case Go.BGIMAGE:return!(void 0!==t.source&&!function(e){if(\"default\"===e.source)return e.type=\"default\",!0;if(e.source instanceof ArrayBuffer)return!0;if(Z(e.source))return e.type=\"url\",!!function(e){var t=new URL(e),n=t.pathname;if(\"data:\"===t.protocol)try{var r=n.substring(n.indexOf(\":\")+1,n.indexOf(\";\")).split(\"/\")[1];return Yo.includes(r)}catch(e){return console.error(\"failed to deduce blob content type\",e),!1}var i=n.split(\".\").at(-1).toLowerCase().trim();return Yo.includes(i)}(e.source)||(console.error(\"invalid image type; supported types: [\".concat(Yo.join(\", \"),\"]\")),!1);return t=e.source,n=Number(t),isNaN(n)||!Number.isInteger(n)||n<=0||n>10?(console.error(\"invalid image selection; must be an int, > 0, <= \".concat(10)),!1):(e.type=\"daily-preselect\",!0);var t,n}(t));default:return!0}}(e.type,e.config))return!1}return Object.keys(e).filter((function(e){return!t.includes(e)})).forEach((function(t){console.warn(\"invalid key inputSettings -> video -> processor : \".concat(t)),delete e[t]})),!0}(e.video.processor)))&&!(e.audio&&(\"object\"!==n(e.audio)||(r=e.audio.processor,i=[\"type\"],!r||\"object\"!==n(r)||(Object.keys(r).filter((function(e){return!i.includes(e)})).forEach((function(e){console.warn(\"invalid key inputSettings -> audio -> processor : \".concat(e)),delete r[e]})),t=r.type,\"string\"!=typeof t||!Object.values(Qo).includes(t)&&(console.error(\"inputSettings audio processor type invalid\"),1))))));var t,r,i}function Ws(e,t){var n,r=[];e.video&&!sa(null!==(n=null==t?void 0:t.useLegacyVideoProcessor)&&void 0!==n&&n)&&(delete e.video,r.push(\"video\")),e.audio&&!ca()&&(delete e.audio,r.push(\"audio\")),r.length>0&&console.error(\"Ignoring settings for browser- or platform-unsupported input processor(s): \".concat(r.join(\", \")))}function zs(){var e=Object.values(Go).join(\" | \"),t=Object.values(Qo).join(\" | \");return\"inputSettings must be of the form: { video?: { processor: { type: [ \".concat(e,\" ], config?: {} } }, audio?: { processor: {type: [ \").concat(t,\" ] } } }\")}function Hs(e){var t=e.allowAllParticipantsKey;return\"receiveSettings must be of the form { [<remote participant id> | \".concat(mi).concat(t?' | \"'.concat(\"*\",'\"'):\"\",\"]: \")+'{ [video: [{ layer: [<non-negative integer> | \"inherit\"] } | \"inherit\"]], [screenVideo: [{ layer: [<non-negative integer> | \"inherit\"] } | \"inherit\"]] }}}'}function Gs(){return\"customIntegrations should be an object of type \".concat(JSON.stringify(Ps),\".\")}function Qs(e){if(e&&\"object\"!==n(e)||Array.isArray(e))return console.error(\"customTrayButtons should be an Object of the type \".concat(JSON.stringify(Ts),\".\")),!1;if(e)for(var t=0,r=Object.entries(e);t<r.length;t++)for(var i=v(r[t],1)[0],o=0,a=Object.entries(e[i]);o<a.length;o++){var s=v(a[o],2),c=s[0],l=s[1],u=Ts.id[c];if(!u)return console.error(\"customTrayButton does not support key \".concat(c)),!1;switch(c){case\"iconPath\":case\"iconPathDarkMode\":if(!Z(l))return console.error(\"customTrayButton \".concat(c,\" should be a url.\")),!1;break;case\"visualState\":if(![\"default\",\"sidebar-open\",\"active\"].includes(l))return console.error(\"customTrayButton \".concat(c,\" should be \").concat(u,\". Got: \").concat(l)),!1;break;default:if(n(l)!==u)return console.error(\"customTrayButton \".concat(c,\" should be a \").concat(u,\".\")),!1}}return!0}function Ks(e){if(!e||e&&\"object\"!==n(e)||Array.isArray(e))return console.error(Gs()),!1;for(var t=function(e){return\"\".concat(e,\" should be \").concat(Ps.id[e])},r=function(e,t){return console.error(\"customIntegration \".concat(e,\": \").concat(t))},i=0,o=Object.entries(e);i<o.length;i++){var a=v(o[i],1)[0];if(!(\"label\"in e[a]))return r(a,\"label is required\"),!1;if(!(\"location\"in e[a]))return r(a,\"location is required\"),!1;if(!(\"src\"in e[a])&&!(\"srcdoc\"in e[a]))return r(a,\"src or srcdoc is required\"),!1;for(var s=0,c=Object.entries(e[a]);s<c.length;s++){var l=v(c[s],2),u=l[0],d=l[1];switch(u){case\"allow\":case\"csp\":case\"name\":case\"referrerPolicy\":case\"sandbox\":if(\"string\"!=typeof d)return r(a,t(u)),!1;break;case\"iconURL\":if(!Z(d))return r(a,\"\".concat(u,\" should be a url\")),!1;break;case\"src\":if(\"srcdoc\"in e[a])return r(a,\"cannot have both src and srcdoc\"),!1;if(!Z(d))return r(a,'src \"'.concat(d,'\" is not a valid URL')),!1;break;case\"srcdoc\":if(\"src\"in e[a])return r(a,\"cannot have both src and srcdoc\"),!1;if(\"string\"!=typeof d)return r(a,t(u)),!1;break;case\"location\":if(![\"main\",\"sidebar\"].includes(d))return r(a,t(u)),!1;break;case\"controlledBy\":if(\"*\"!==d&&\"owners\"!==d&&(!Array.isArray(d)||d.some((function(e){return\"string\"!=typeof e}))))return r(a,t(u)),!1;break;case\"shared\":if((!Array.isArray(d)||d.some((function(e){return\"string\"!=typeof e})))&&\"owners\"!==d&&\"boolean\"!=typeof d)return r(a,t(u)),!1;break;default:if(!Ps.id[u])return console.error(\"customIntegration does not support key \".concat(u)),!1}}}return!0}function Ys(e,t){if(void 0===t)return!1;switch(n(t)){case\"string\":return n(e)===t;case\"object\":if(\"object\"!==n(e))return!1;for(var r in e)if(!Ys(e[r],t[r]))return!1;return!0;default:return!1}}function Xs(e,t){var n=e.sessionId,r=e.toEndPoint,i=e.useSipRefer;if(!n||!r)throw new Error(\"\".concat(t,\"() requires a sessionId and toEndPoint\"));if(\"string\"!=typeof n||\"string\"!=typeof r)throw new Error(\"Invalid paramater: sessionId and toEndPoint must be of type string\");if(i&&!r.startsWith(\"sip:\"))throw new Error('\"toEndPoint\" must be a \"sip\" address');if(!r.startsWith(\"sip:\")&&!r.startsWith(\"+\"))throw new Error(\"toEndPoint: \".concat(r,' must starts with either \"sip:\" or \"+\"'))}function Zs(e){if(\"object\"!==n(e))throw new Error('RemoteMediaPlayerSettings: must be \"object\" type');if(e.state&&!Object.values(Ko).includes(e.state))throw new Error(\"Invalid value for RemoteMediaPlayerSettings.state, valid values are: \"+JSON.stringify(Ko));if(e.volume){if(\"number\"!=typeof e.volume)throw new Error('RemoteMediaPlayerSettings.volume: must be \"number\" type');if(e.volume<0||e.volume>2)throw new Error(\"RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0\")}}function ec(e,t,n){return!(\"number\"!=typeof e||e<t||e>n)}function tc(e,t){return e&&!t&&delete e.data,e}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRhaWx5LWNvL2RhaWx5LWpzL2Rpc3QvZGFpbHktZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxnQkFBZ0Isb0JBQW9CLHdCQUF3QixvQkFBb0IsWUFBWSxrQkFBa0IsUUFBUSxXQUFXLHdDQUF3QyxTQUFTLE1BQU0saUNBQWlDLHNDQUFzQyxRQUFRLFdBQVcseUZBQXlGLFNBQVMsZ0JBQWdCLDhFQUE4RSxjQUFjLGlGQUFpRixnQkFBZ0IsYUFBYSxvR0FBb0csTUFBTSxjQUFjLG9CQUFvQixzQ0FBc0MsNEJBQTRCLGVBQWUsNkJBQTZCLDRCQUE0QixvRUFBb0Usc0NBQXNDLGFBQWEsa0NBQWtDLGdCQUFnQixZQUFZLFdBQVcsS0FBSyxXQUFXLGtIQUFrSCxrQkFBa0IsMEVBQTBFLFlBQVksSUFBSSxjQUFjLG9HQUFvRyxTQUFTLGdCQUFnQiwwRUFBMEUsdUJBQXVCLFFBQVEsZ0JBQWdCLDRHQUE0RywwQ0FBMEMsYUFBYSxxQ0FBcUMsdUNBQXVDLFlBQVksWUFBWSxnQkFBZ0IsdURBQXVELDhGQUE4RixZQUFZLGNBQWMsd0VBQXdFLDZDQUE2QyxNQUFNLGtCQUFrQiw4Q0FBOEMsa0RBQWtELFdBQVcsMEJBQTBCLElBQUksd0JBQXdCLFNBQVMsaUJBQWlCLHlDQUF5QyxjQUFjLGtCQUFrQix1QkFBdUIsa0NBQWtDLG1CQUFtQixjQUFjLHNCQUFzQixjQUFjLHVCQUF1QixVQUFVLElBQUksZ0JBQWdCLG9DQUFvQywyQkFBMkIsSUFBSSxjQUFjLFNBQVMsZ0JBQWdCLG1CQUFtQiw2QkFBNkIsbUJBQW1CLG1GQUFtRixZQUFZLDJCQUEyQixJQUFJLCtCQUErQix3QkFBd0IsS0FBSyxVQUFVLHdEQUF3RCxPQUFPLFNBQVMsU0FBUyxRQUFRLElBQUksMkRBQTJE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QThCLFVBQVUsOEdBQThHLE1BQU0sc0VBQXNFLE1BQU0sOEVBQThFLGlFQUFpRSxNQUFNLDhFQUE4RSwwQ0FBMEMsTUFBTSxzRUFBc0UsTUFBTSxxRkFBcUYseUJBQXlCLHdCQUF3QixNQUFNLHdEQUF3RCx5QkFBeUIsMkRBQTJELE1BQU0sb0dBQW9HLFNBQVMsaUJBQWlCLHVCQUF1QixhQUFhLDZCQUE2Qix5Q0FBeUMsMENBQTBDLFNBQVMsa0JBQWtCLGlCQUFpQixpREFBaUQsaUZBQWlGLGdJQUFnSSxvRkFBb0YsZ0lBQWdJLGVBQWUsdUZBQXVGLDZKQUE2SixhQUFhLHdHQUF3RywwR0FBMEcsbUJBQW1CLHNDQUFzQyxpQkFBaUIsOEJBQTQxRyIsInNvdXJjZXMiOlsiL2hvbWUvcmd0ZWNoMDA4L2FjYWRlbWljLWNvbm5lY3QtcHJvamVjdC9ub2RlX21vZHVsZXMvQGRhaWx5LWNvL2RhaWx5LWpzL2Rpc3QvZGFpbHktZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGUoZSx0KXtpZihudWxsPT1lKXJldHVybnt9O3ZhciBuLHIsaT1mdW5jdGlvbihlLHQpe2lmKG51bGw9PWUpcmV0dXJue307dmFyIG4scixpPXt9LG89T2JqZWN0LmtleXMoZSk7Zm9yKHI9MDtyPG8ubGVuZ3RoO3IrKyluPW9bcl0sdC5pbmRleE9mKG4pPj0wfHwoaVtuXT1lW25dKTtyZXR1cm4gaX0oZSx0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO2ZvcihyPTA7cjxvLmxlbmd0aDtyKyspbj1vW3JdLHQuaW5kZXhPZihuKT49MHx8T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsbikmJihpW25dPWVbbl0pfXJldHVybiBpfWZ1bmN0aW9uIHQoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0sbihlKX1mdW5jdGlvbiByKGUpe3ZhciB0PWZ1bmN0aW9uKGUsdCl7aWYoXCJvYmplY3RcIiE9PW4oZSl8fG51bGw9PT1lKXJldHVybiBlO3ZhciByPWVbU3ltYm9sLnRvUHJpbWl0aXZlXTtpZih2b2lkIDAhPT1yKXt2YXIgaT1yLmNhbGwoZSx0fHxcImRlZmF1bHRcIik7aWYoXCJvYmplY3RcIiE9PW4oaSkpcmV0dXJuIGk7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpfXJldHVybihcInN0cmluZ1wiPT09dD9TdHJpbmc6TnVtYmVyKShlKX0oZSxcInN0cmluZ1wiKTtyZXR1cm5cInN5bWJvbFwiPT09bih0KT90OlN0cmluZyh0KX1mdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIoaS5rZXkpLGkpfX1mdW5jdGlvbiBvKGUsdCxuKXtyZXR1cm4gdCYmaShlLnByb3RvdHlwZSx0KSxuJiZpKGUsbiksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJwcm90b3R5cGVcIix7d3JpdGFibGU6ITF9KSxlfWZ1bmN0aW9uIGEoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiBzPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0scyhlLHQpfWZ1bmN0aW9uIGMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwicHJvdG90eXBlXCIse3dyaXRhYmxlOiExfSksdCYmcyhlLHQpfWZ1bmN0aW9uIGwoZSx0KXtpZih0JiYoXCJvYmplY3RcIj09PW4odCl8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHQpKXJldHVybiB0O2lmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBhKGUpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIHU9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9LHUoZSl9ZnVuY3Rpb24gZChlLHQsbil7cmV0dXJuKHQ9cih0KSlpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPW4sZX1mdW5jdGlvbiBwKGUsdCxuLHIsaSxvLGEpe3RyeXt2YXIgcz1lW29dKGEpLGM9cy52YWx1ZX1jYXRjaChlKXtyZXR1cm4gdm9pZCBuKGUpfXMuZG9uZT90KGMpOlByb21pc2UucmVzb2x2ZShjKS50aGVuKHIsaSl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocixpKXt2YXIgbz1lLmFwcGx5KHQsbik7ZnVuY3Rpb24gYShlKXtwKG8scixpLGEscyxcIm5leHRcIixlKX1mdW5jdGlvbiBzKGUpe3AobyxyLGksYSxzLFwidGhyb3dcIixlKX1hKHZvaWQgMCl9KSl9fWZ1bmN0aW9uIGYoZSx0KXsobnVsbD09dHx8dD5lLmxlbmd0aCkmJih0PWUubGVuZ3RoKTtmb3IodmFyIG49MCxyPW5ldyBBcnJheSh0KTtuPHQ7bisrKXJbbl09ZVtuXTtyZXR1cm4gcn1mdW5jdGlvbiB2KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGV9KGUpfHxmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw9PWU/bnVsbDpcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl18fGVbXCJAQGl0ZXJhdG9yXCJdO2lmKG51bGwhPW4pe3ZhciByLGksbyxhLHM9W10sYz0hMCxsPSExO3RyeXtpZihvPShuPW4uY2FsbChlKSkubmV4dCwwPT09dCl7aWYoT2JqZWN0KG4pIT09bilyZXR1cm47Yz0hMX1lbHNlIGZvcig7IShjPShyPW8uY2FsbChuKSkuZG9uZSkmJihzLnB1c2goci52YWx1ZSkscy5sZW5ndGghPT10KTtjPSEwKTt9Y2F0Y2goZSl7bD0hMCxpPWV9ZmluYWxseXt0cnl7aWYoIWMmJm51bGwhPW4ucmV0dXJuJiYoYT1uLnJldHVybigpLE9iamVjdChhKSE9PWEpKXJldHVybn1maW5hbGx5e2lmKGwpdGhyb3cgaX19cmV0dXJuIHN9fShlLHQpfHxmdW5jdGlvbihlLHQpe2lmKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBmKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVyblwiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpLFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bj9BcnJheS5mcm9tKGUpOlwiQXJndW1lbnRzXCI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT9mKGUsdCk6dm9pZCAwfX0oZSx0KXx8ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfSgpfXZhciBtLGc9e30seT17Z2V0IGV4cG9ydHMoKXtyZXR1cm4gZ30sc2V0IGV4cG9ydHMoZSl7Zz1lfX0sXz1cIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdD9SZWZsZWN0Om51bGwsYj1fJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBfLmFwcGx5P18uYXBwbHk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChlLHQsbil9O209XyYmXCJmdW5jdGlvblwiPT10eXBlb2YgXy5vd25LZXlzP18ub3duS2V5czpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP2Z1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSl9OmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKX07dmFyIHc9TnVtYmVyLmlzTmFOfHxmdW5jdGlvbihlKXtyZXR1cm4gZSE9ZX07ZnVuY3Rpb24gUygpe1MuaW5pdC5jYWxsKHRoaXMpfXkuZXhwb3J0cz1TLGcub25jZT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXtmdW5jdGlvbiBpKG4pe2UucmVtb3ZlTGlzdGVuZXIodCxvKSxyKG4pfWZ1bmN0aW9uIG8oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnJlbW92ZUxpc3RlbmVyJiZlLnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixpKSxuKFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9eChlLHQsbyx7b25jZTohMH0pLFwiZXJyb3JcIiE9PXQmJmZ1bmN0aW9uKGUsdCxuKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uJiZ4KGUsXCJlcnJvclwiLHQsbil9KGUsaSx7b25jZTohMH0pfSkpfSxTLkV2ZW50RW1pdHRlcj1TLFMucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLFMucHJvdG90eXBlLl9ldmVudHNDb3VudD0wLFMucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwO3ZhciBrPTEwO2Z1bmN0aW9uIE0oZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBlKX1mdW5jdGlvbiBDKGUpe3JldHVybiB2b2lkIDA9PT1lLl9tYXhMaXN0ZW5lcnM/Uy5kZWZhdWx0TWF4TGlzdGVuZXJzOmUuX21heExpc3RlbmVyc31mdW5jdGlvbiBFKGUsdCxuLHIpe3ZhciBpLG8sYSxzO2lmKE0obiksdm9pZCAwPT09KG89ZS5fZXZlbnRzKT8obz1lLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSxlLl9ldmVudHNDb3VudD0wKToodm9pZCAwIT09by5uZXdMaXN0ZW5lciYmKGUuZW1pdChcIm5ld0xpc3RlbmVyXCIsdCxuLmxpc3RlbmVyP24ubGlzdGVuZXI6biksbz1lLl9ldmVudHMpLGE9b1t0XSksdm9pZCAwPT09YSlhPW9bdF09biwrK2UuX2V2ZW50c0NvdW50O2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYT9hPW9bdF09cj9bbixhXTpbYSxuXTpyP2EudW5zaGlmdChuKTphLnB1c2gobiksKGk9QyhlKSk+MCYmYS5sZW5ndGg+aSYmIWEud2FybmVkKXthLndhcm5lZD0hMDt2YXIgYz1uZXcgRXJyb3IoXCJQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuIFwiK2EubGVuZ3RoK1wiIFwiK1N0cmluZyh0KStcIiBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0XCIpO2MubmFtZT1cIk1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZ1wiLGMuZW1pdHRlcj1lLGMudHlwZT10LGMuY291bnQ9YS5sZW5ndGgscz1jLGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKHMpfXJldHVybiBlfWZ1bmN0aW9uIFQoKXtpZighdGhpcy5maXJlZClyZXR1cm4gdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLHRoaXMud3JhcEZuKSx0aGlzLmZpcmVkPSEwLDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk6dGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCxhcmd1bWVudHMpfWZ1bmN0aW9uIFAoZSx0LG4pe3ZhciByPXtmaXJlZDohMSx3cmFwRm46dm9pZCAwLHRhcmdldDplLHR5cGU6dCxsaXN0ZW5lcjpufSxpPVQuYmluZChyKTtyZXR1cm4gaS5saXN0ZW5lcj1uLHIud3JhcEZuPWksaX1mdW5jdGlvbiBPKGUsdCxuKXt2YXIgcj1lLl9ldmVudHM7aWYodm9pZCAwPT09cilyZXR1cm5bXTt2YXIgaT1yW3RdO3JldHVybiB2b2lkIDA9PT1pP1tdOlwiZnVuY3Rpb25cIj09dHlwZW9mIGk/bj9baS5saXN0ZW5lcnx8aV06W2ldOm4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBBcnJheShlLmxlbmd0aCksbj0wO248dC5sZW5ndGg7KytuKXRbbl09ZVtuXS5saXN0ZW5lcnx8ZVtuXTtyZXR1cm4gdH0oaSk6aihpLGkubGVuZ3RoKX1mdW5jdGlvbiBBKGUpe3ZhciB0PXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT10KXt2YXIgbj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIDE7aWYodm9pZCAwIT09bilyZXR1cm4gbi5sZW5ndGh9cmV0dXJuIDB9ZnVuY3Rpb24gaihlLHQpe2Zvcih2YXIgbj1uZXcgQXJyYXkodCkscj0wO3I8dDsrK3IpbltyXT1lW3JdO3JldHVybiBufWZ1bmN0aW9uIHgoZSx0LG4scil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vbilyLm9uY2U/ZS5vbmNlKHQsbik6ZS5vbih0LG4pO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZS5hZGRFdmVudExpc3RlbmVyKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIGUpO2UuYWRkRXZlbnRMaXN0ZW5lcih0LChmdW5jdGlvbiBpKG8pe3Iub25jZSYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsaSksbihvKX0pKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KFMsXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGt9LHNldDpmdW5jdGlvbihlKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZTwwfHx3KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJytlK1wiLlwiKTtrPWV9fSksUy5pbml0PWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHMhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHZvaWQgMH0sUy5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPDB8fHcoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnK2UrXCIuXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9ZSx0aGlzfSxTLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gQyh0aGlzKX0sUy5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdC5wdXNoKGFyZ3VtZW50c1tuXSk7dmFyIHI9XCJlcnJvclwiPT09ZSxpPXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT1pKXI9ciYmdm9pZCAwPT09aS5lcnJvcjtlbHNlIGlmKCFyKXJldHVybiExO2lmKHIpe3ZhciBvO2lmKHQubGVuZ3RoPjAmJihvPXRbMF0pLG8gaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBvO3ZhciBhPW5ldyBFcnJvcihcIlVuaGFuZGxlZCBlcnJvci5cIisobz9cIiAoXCIrby5tZXNzYWdlK1wiKVwiOlwiXCIpKTt0aHJvdyBhLmNvbnRleHQ9byxhfXZhciBzPWlbZV07aWYodm9pZCAwPT09cylyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBzKWIocyx0aGlzLHQpO2Vsc2V7dmFyIGM9cy5sZW5ndGgsbD1qKHMsYyk7Zm9yKG49MDtuPGM7KytuKWIobFtuXSx0aGlzLHQpfXJldHVybiEwfSxTLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiBFKHRoaXMsZSx0LCExKX0sUy5wcm90b3R5cGUub249Uy5wcm90b3R5cGUuYWRkTGlzdGVuZXIsUy5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEUodGhpcyxlLHQsITApfSxTLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odCksdGhpcy5vbihlLFAodGhpcyxlLHQpKSx0aGlzfSxTLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odCksdGhpcy5wcmVwZW5kTGlzdGVuZXIoZSxQKHRoaXMsZSx0KSksdGhpc30sUy5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhO2lmKE0odCksdm9pZCAwPT09KHI9dGhpcy5fZXZlbnRzKSlyZXR1cm4gdGhpcztpZih2b2lkIDA9PT0obj1yW2VdKSlyZXR1cm4gdGhpcztpZihuPT09dHx8bi5saXN0ZW5lcj09PXQpMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTooZGVsZXRlIHJbZV0sci5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLG4ubGlzdGVuZXJ8fHQpKTtlbHNlIGlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4pe2ZvcihpPS0xLG89bi5sZW5ndGgtMTtvPj0wO28tLSlpZihuW29dPT09dHx8bltvXS5saXN0ZW5lcj09PXQpe2E9bltvXS5saXN0ZW5lcixpPW87YnJlYWt9aWYoaTwwKXJldHVybiB0aGlzOzA9PT1pP24uc2hpZnQoKTpmdW5jdGlvbihlLHQpe2Zvcig7dCsxPGUubGVuZ3RoO3QrKyllW3RdPWVbdCsxXTtlLnBvcCgpfShuLGkpLDE9PT1uLmxlbmd0aCYmKHJbZV09blswXSksdm9pZCAwIT09ci5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLGF8fHQpfXJldHVybiB0aGlzfSxTLnByb3RvdHlwZS5vZmY9Uy5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIsUy5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG4scjtpZih2b2lkIDA9PT0obj10aGlzLl9ldmVudHMpKXJldHVybiB0aGlzO2lmKHZvaWQgMD09PW4ucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wKTp2b2lkIDAhPT1uW2VdJiYoMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTpkZWxldGUgbltlXSksdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGksbz1PYmplY3Qua2V5cyhuKTtmb3Iocj0wO3I8by5sZW5ndGg7KytyKVwicmVtb3ZlTGlzdGVuZXJcIiE9PShpPW9bcl0pJiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhpKTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wLHRoaXN9aWYoXCJmdW5jdGlvblwiPT10eXBlb2YodD1uW2VdKSl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsdCk7ZWxzZSBpZih2b2lkIDAhPT10KWZvcihyPXQubGVuZ3RoLTE7cj49MDtyLS0pdGhpcy5yZW1vdmVMaXN0ZW5lcihlLHRbcl0pO3JldHVybiB0aGlzfSxTLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIE8odGhpcyxlLCEwKX0sUy5wcm90b3R5cGUucmF3TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3JldHVybiBPKHRoaXMsZSwhMSl9LFMubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlLHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUubGlzdGVuZXJDb3VudD9lLmxpc3RlbmVyQ291bnQodCk6QS5jYWxsKGUsdCl9LFMucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9QSxTLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50PjA/bSh0aGlzLl9ldmVudHMpOltdfTt2YXIgTD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIEkoZSx0LG4pe2ZvcihuIG9mIGUua2V5cygpKWlmKEQobix0KSlyZXR1cm4gbn1mdW5jdGlvbiBEKGUsdCl7dmFyIG4scixpO2lmKGU9PT10KXJldHVybiEwO2lmKGUmJnQmJihuPWUuY29uc3RydWN0b3IpPT09dC5jb25zdHJ1Y3Rvcil7aWYobj09PURhdGUpcmV0dXJuIGUuZ2V0VGltZSgpPT09dC5nZXRUaW1lKCk7aWYobj09PVJlZ0V4cClyZXR1cm4gZS50b1N0cmluZygpPT09dC50b1N0cmluZygpO2lmKG49PT1BcnJheSl7aWYoKHI9ZS5sZW5ndGgpPT09dC5sZW5ndGgpZm9yKDtyLS0mJkQoZVtyXSx0W3JdKTspO3JldHVybi0xPT09cn1pZihuPT09U2V0KXtpZihlLnNpemUhPT10LnNpemUpcmV0dXJuITE7Zm9yKHIgb2YgZSl7aWYoKGk9cikmJlwib2JqZWN0XCI9PXR5cGVvZiBpJiYhKGk9SSh0LGkpKSlyZXR1cm4hMTtpZighdC5oYXMoaSkpcmV0dXJuITF9cmV0dXJuITB9aWYobj09PU1hcCl7aWYoZS5zaXplIT09dC5zaXplKXJldHVybiExO2ZvcihyIG9mIGUpe2lmKChpPXJbMF0pJiZcIm9iamVjdFwiPT10eXBlb2YgaSYmIShpPUkodCxpKSkpcmV0dXJuITE7aWYoIUQoclsxXSx0LmdldChpKSkpcmV0dXJuITF9cmV0dXJuITB9aWYobj09PUFycmF5QnVmZmVyKWU9bmV3IFVpbnQ4QXJyYXkoZSksdD1uZXcgVWludDhBcnJheSh0KTtlbHNlIGlmKG49PT1EYXRhVmlldyl7aWYoKHI9ZS5ieXRlTGVuZ3RoKT09PXQuYnl0ZUxlbmd0aClmb3IoO3ItLSYmZS5nZXRJbnQ4KHIpPT09dC5nZXRJbnQ4KHIpOyk7cmV0dXJuLTE9PT1yfWlmKEFycmF5QnVmZmVyLmlzVmlldyhlKSl7aWYoKHI9ZS5ieXRlTGVuZ3RoKT09PXQuYnl0ZUxlbmd0aClmb3IoO3ItLSYmZVtyXT09PXRbcl07KTtyZXR1cm4tMT09PXJ9aWYoIW58fFwib2JqZWN0XCI9PXR5cGVvZiBlKXtmb3IobiBpbiByPTAsZSl7aWYoTC5jYWxsKGUsbikmJisrciYmIUwuY2FsbCh0LG4pKXJldHVybiExO2lmKCEobiBpbiB0KXx8IUQoZVtuXSx0W25dKSlyZXR1cm4hMX1yZXR1cm4gT2JqZWN0LmtleXModCkubGVuZ3RoPT09cn19cmV0dXJuIGUhPWUmJnQhPXR9Y29uc3QgTj17XCJBbWF6b24gU2lsa1wiOlwiYW1hem9uX3NpbGtcIixcIkFuZHJvaWQgQnJvd3NlclwiOlwiYW5kcm9pZFwiLEJhZGE6XCJiYWRhXCIsQmxhY2tCZXJyeTpcImJsYWNrYmVycnlcIixDaHJvbWU6XCJjaHJvbWVcIixDaHJvbWl1bTpcImNocm9taXVtXCIsRWxlY3Ryb246XCJlbGVjdHJvblwiLEVwaXBoYW55OlwiZXBpcGhhbnlcIixGaXJlZm94OlwiZmlyZWZveFwiLEZvY3VzOlwiZm9jdXNcIixHZW5lcmljOlwiZ2VuZXJpY1wiLFwiR29vZ2xlIFNlYXJjaFwiOlwiZ29vZ2xlX3NlYXJjaFwiLEdvb2dsZWJvdDpcImdvb2dsZWJvdFwiLFwiSW50ZXJuZXQgRXhwbG9yZXJcIjpcImllXCIsXCJLLU1lbGVvblwiOlwia19tZWxlb25cIixNYXh0aG9uOlwibWF4dGhvblwiLFwiTWljcm9zb2Z0IEVkZ2VcIjpcImVkZ2VcIixcIk1aIEJyb3dzZXJcIjpcIm16XCIsXCJOQVZFUiBXaGFsZSBCcm93c2VyXCI6XCJuYXZlclwiLE9wZXJhOlwib3BlcmFcIixcIk9wZXJhIENvYXN0XCI6XCJvcGVyYV9jb2FzdFwiLFBoYW50b21KUzpcInBoYW50b21qc1wiLFB1ZmZpbjpcInB1ZmZpblwiLFF1cFppbGxhOlwicXVwemlsbGFcIixRUTpcInFxXCIsUVFMaXRlOlwicXFsaXRlXCIsU2FmYXJpOlwic2FmYXJpXCIsU2FpbGZpc2g6XCJzYWlsZmlzaFwiLFwiU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZFwiOlwic2Ftc3VuZ19pbnRlcm5ldFwiLFNlYU1vbmtleTpcInNlYW1vbmtleVwiLFNsZWlwbmlyOlwic2xlaXBuaXJcIixTd2luZzpcInN3aW5nXCIsVGl6ZW46XCJ0aXplblwiLFwiVUMgQnJvd3NlclwiOlwidWNcIixWaXZhbGRpOlwidml2YWxkaVwiLFwiV2ViT1MgQnJvd3NlclwiOlwid2Vib3NcIixXZUNoYXQ6XCJ3ZWNoYXRcIixcIllhbmRleCBCcm93c2VyXCI6XCJ5YW5kZXhcIixSb2t1Olwicm9rdVwifSxSPXthbWF6b25fc2lsazpcIkFtYXpvbiBTaWxrXCIsYW5kcm9pZDpcIkFuZHJvaWQgQnJvd3NlclwiLGJhZGE6XCJCYWRhXCIsYmxhY2tiZXJyeTpcIkJsYWNrQmVycnlcIixjaHJvbWU6XCJDaHJvbWVcIixjaHJvbWl1bTpcIkNocm9taXVtXCIsZWxlY3Ryb246XCJFbGVjdHJvblwiLGVwaXBoYW55OlwiRXBpcGhhbnlcIixmaXJlZm94OlwiRmlyZWZveFwiLGZvY3VzOlwiRm9jdXNcIixnZW5lcmljOlwiR2VuZXJpY1wiLGdvb2dsZWJvdDpcIkdvb2dsZWJvdFwiLGdvb2dsZV9zZWFyY2g6XCJHb29nbGUgU2VhcmNoXCIsaWU6XCJJbnRlcm5ldCBFeHBsb3JlclwiLGtfbWVsZW9uOlwiSy1NZWxlb25cIixtYXh0aG9uOlwiTWF4dGhvblwiLGVkZ2U6XCJNaWNyb3NvZnQgRWRnZVwiLG16OlwiTVogQnJvd3NlclwiLG5hdmVyOlwiTkFWRVIgV2hhbGUgQnJvd3NlclwiLG9wZXJhOlwiT3BlcmFcIixvcGVyYV9jb2FzdDpcIk9wZXJhIENvYXN0XCIscGhhbnRvbWpzOlwiUGhhbnRvbUpTXCIscHVmZmluOlwiUHVmZmluXCIscXVwemlsbGE6XCJRdXBaaWxsYVwiLHFxOlwiUVEgQnJvd3NlclwiLHFxbGl0ZTpcIlFRIEJyb3dzZXIgTGl0ZVwiLHNhZmFyaTpcIlNhZmFyaVwiLHNhaWxmaXNoOlwiU2FpbGZpc2hcIixzYW1zdW5nX2ludGVybmV0OlwiU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZFwiLHNlYW1vbmtleTpcIlNlYU1vbmtleVwiLHNsZWlwbmlyOlwiU2xlaXBuaXJcIixzd2luZzpcIlN3aW5nXCIsdGl6ZW46XCJUaXplblwiLHVjOlwiVUMgQnJvd3NlclwiLHZpdmFsZGk6XCJWaXZhbGRpXCIsd2Vib3M6XCJXZWJPUyBCcm93c2VyXCIsd2VjaGF0OlwiV2VDaGF0XCIseWFuZGV4OlwiWWFuZGV4IEJyb3dzZXJcIn0sRj17dGFibGV0OlwidGFibGV0XCIsbW9iaWxlOlwibW9iaWxlXCIsZGVza3RvcDpcImRlc2t0b3BcIix0djpcInR2XCJ9LEI9e1dpbmRvd3NQaG9uZTpcIldpbmRvd3MgUGhvbmVcIixXaW5kb3dzOlwiV2luZG93c1wiLE1hY09TOlwibWFjT1NcIixpT1M6XCJpT1NcIixBbmRyb2lkOlwiQW5kcm9pZFwiLFdlYk9TOlwiV2ViT1NcIixCbGFja0JlcnJ5OlwiQmxhY2tCZXJyeVwiLEJhZGE6XCJCYWRhXCIsVGl6ZW46XCJUaXplblwiLExpbnV4OlwiTGludXhcIixDaHJvbWVPUzpcIkNocm9tZSBPU1wiLFBsYXlTdGF0aW9uNDpcIlBsYXlTdGF0aW9uIDRcIixSb2t1OlwiUm9rdVwifSxVPXtFZGdlSFRNTDpcIkVkZ2VIVE1MXCIsQmxpbms6XCJCbGlua1wiLFRyaWRlbnQ6XCJUcmlkZW50XCIsUHJlc3RvOlwiUHJlc3RvXCIsR2Vja286XCJHZWNrb1wiLFdlYktpdDpcIldlYktpdFwifTtjbGFzcyBWe3N0YXRpYyBnZXRGaXJzdE1hdGNoKGUsdCl7Y29uc3Qgbj10Lm1hdGNoKGUpO3JldHVybiBuJiZuLmxlbmd0aD4wJiZuWzFdfHxcIlwifXN0YXRpYyBnZXRTZWNvbmRNYXRjaChlLHQpe2NvbnN0IG49dC5tYXRjaChlKTtyZXR1cm4gbiYmbi5sZW5ndGg+MSYmblsyXXx8XCJcIn1zdGF0aWMgbWF0Y2hBbmRSZXR1cm5Db25zdChlLHQsbil7aWYoZS50ZXN0KHQpKXJldHVybiBufXN0YXRpYyBnZXRXaW5kb3dzVmVyc2lvbk5hbWUoZSl7c3dpdGNoKGUpe2Nhc2VcIk5UXCI6cmV0dXJuXCJOVFwiO2Nhc2VcIlhQXCI6Y2FzZVwiTlQgNS4xXCI6cmV0dXJuXCJYUFwiO2Nhc2VcIk5UIDUuMFwiOnJldHVyblwiMjAwMFwiO2Nhc2VcIk5UIDUuMlwiOnJldHVyblwiMjAwM1wiO2Nhc2VcIk5UIDYuMFwiOnJldHVyblwiVmlzdGFcIjtjYXNlXCJOVCA2LjFcIjpyZXR1cm5cIjdcIjtjYXNlXCJOVCA2LjJcIjpyZXR1cm5cIjhcIjtjYXNlXCJOVCA2LjNcIjpyZXR1cm5cIjguMVwiO2Nhc2VcIk5UIDEwLjBcIjpyZXR1cm5cIjEwXCI7ZGVmYXVsdDpyZXR1cm59fXN0YXRpYyBnZXRNYWNPU1ZlcnNpb25OYW1lKGUpe2NvbnN0IHQ9ZS5zcGxpdChcIi5cIikuc3BsaWNlKDAsMikubWFwKChlPT5wYXJzZUludChlLDEwKXx8MCkpO2lmKHQucHVzaCgwKSwxMD09PXRbMF0pc3dpdGNoKHRbMV0pe2Nhc2UgNTpyZXR1cm5cIkxlb3BhcmRcIjtjYXNlIDY6cmV0dXJuXCJTbm93IExlb3BhcmRcIjtjYXNlIDc6cmV0dXJuXCJMaW9uXCI7Y2FzZSA4OnJldHVyblwiTW91bnRhaW4gTGlvblwiO2Nhc2UgOTpyZXR1cm5cIk1hdmVyaWNrc1wiO2Nhc2UgMTA6cmV0dXJuXCJZb3NlbWl0ZVwiO2Nhc2UgMTE6cmV0dXJuXCJFbCBDYXBpdGFuXCI7Y2FzZSAxMjpyZXR1cm5cIlNpZXJyYVwiO2Nhc2UgMTM6cmV0dXJuXCJIaWdoIFNpZXJyYVwiO2Nhc2UgMTQ6cmV0dXJuXCJNb2phdmVcIjtjYXNlIDE1OnJldHVyblwiQ2F0YWxpbmFcIjtkZWZhdWx0OnJldHVybn19c3RhdGljIGdldEFuZHJvaWRWZXJzaW9uTmFtZShlKXtjb25zdCB0PWUuc3BsaXQoXCIuXCIpLnNwbGljZSgwLDIpLm1hcCgoZT0+cGFyc2VJbnQoZSwxMCl8fDApKTtpZih0LnB1c2goMCksISgxPT09dFswXSYmdFsxXTw1KSlyZXR1cm4gMT09PXRbMF0mJnRbMV08Nj9cIkN1cGNha2VcIjoxPT09dFswXSYmdFsxXT49Nj9cIkRvbnV0XCI6Mj09PXRbMF0mJnRbMV08Mj9cIkVjbGFpclwiOjI9PT10WzBdJiYyPT09dFsxXT9cIkZyb3lvXCI6Mj09PXRbMF0mJnRbMV0+Mj9cIkdpbmdlcmJyZWFkXCI6Mz09PXRbMF0/XCJIb25leWNvbWJcIjo0PT09dFswXSYmdFsxXTwxP1wiSWNlIENyZWFtIFNhbmR3aWNoXCI6ND09PXRbMF0mJnRbMV08ND9cIkplbGx5IEJlYW5cIjo0PT09dFswXSYmdFsxXT49ND9cIktpdEthdFwiOjU9PT10WzBdP1wiTG9sbGlwb3BcIjo2PT09dFswXT9cIk1hcnNobWFsbG93XCI6Nz09PXRbMF0/XCJOb3VnYXRcIjo4PT09dFswXT9cIk9yZW9cIjo5PT09dFswXT9cIlBpZVwiOnZvaWQgMH1zdGF0aWMgZ2V0VmVyc2lvblByZWNpc2lvbihlKXtyZXR1cm4gZS5zcGxpdChcIi5cIikubGVuZ3RofXN0YXRpYyBjb21wYXJlVmVyc2lvbnMoZSx0LG49ITEpe2NvbnN0IHI9Vi5nZXRWZXJzaW9uUHJlY2lzaW9uKGUpLGk9Vi5nZXRWZXJzaW9uUHJlY2lzaW9uKHQpO2xldCBvPU1hdGgubWF4KHIsaSksYT0wO2NvbnN0IHM9Vi5tYXAoW2UsdF0sKGU9Pntjb25zdCB0PW8tVi5nZXRWZXJzaW9uUHJlY2lzaW9uKGUpLG49ZStuZXcgQXJyYXkodCsxKS5qb2luKFwiLjBcIik7cmV0dXJuIFYubWFwKG4uc3BsaXQoXCIuXCIpLChlPT5uZXcgQXJyYXkoMjAtZS5sZW5ndGgpLmpvaW4oXCIwXCIpK2UpKS5yZXZlcnNlKCl9KSk7Zm9yKG4mJihhPW8tTWF0aC5taW4ocixpKSksby09MTtvPj1hOyl7aWYoc1swXVtvXT5zWzFdW29dKXJldHVybiAxO2lmKHNbMF1bb109PT1zWzFdW29dKXtpZihvPT09YSlyZXR1cm4gMDtvLT0xfWVsc2UgaWYoc1swXVtvXTxzWzFdW29dKXJldHVybi0xfX1zdGF0aWMgbWFwKGUsdCl7Y29uc3Qgbj1bXTtsZXQgcjtpZihBcnJheS5wcm90b3R5cGUubWFwKXJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZSx0KTtmb3Iocj0wO3I8ZS5sZW5ndGg7cis9MSluLnB1c2godChlW3JdKSk7cmV0dXJuIG59c3RhdGljIGZpbmQoZSx0KXtsZXQgbixyO2lmKEFycmF5LnByb3RvdHlwZS5maW5kKXJldHVybiBBcnJheS5wcm90b3R5cGUuZmluZC5jYWxsKGUsdCk7Zm9yKG49MCxyPWUubGVuZ3RoO248cjtuKz0xKXtjb25zdCByPWVbbl07aWYodChyLG4pKXJldHVybiByfX1zdGF0aWMgYXNzaWduKGUsLi4udCl7Y29uc3Qgbj1lO2xldCByLGk7aWYoT2JqZWN0LmFzc2lnbilyZXR1cm4gT2JqZWN0LmFzc2lnbihlLC4uLnQpO2ZvcihyPTAsaT10Lmxlbmd0aDtyPGk7cis9MSl7Y29uc3QgZT10W3JdO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgodD0+e25bdF09ZVt0XX0pKX19cmV0dXJuIGV9c3RhdGljIGdldEJyb3dzZXJBbGlhcyhlKXtyZXR1cm4gTltlXX1zdGF0aWMgZ2V0QnJvd3NlclR5cGVCeUFsaWFzKGUpe3JldHVybiBSW2VdfHxcIlwifX1jb25zdCBKPS92ZXJzaW9uXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCQ9W3t0ZXN0OlsvZ29vZ2xlYm90L2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJHb29nbGVib3RcIn0sbj1WLmdldEZpcnN0TWF0Y2goL2dvb2dsZWJvdFxcLyhcXGQrKFxcLlxcZCspKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9vcGVyYS9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiT3BlcmFcIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKXx8Vi5nZXRGaXJzdE1hdGNoKC8oPzpvcGVyYSlbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0Olsvb3ByXFwvfG9waW9zL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJPcGVyYVwifSxuPVYuZ2V0Rmlyc3RNYXRjaCgvKD86b3ByfG9waW9zKVtcXHMvXShcXFMrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9TYW1zdW5nQnJvd3Nlci9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZFwifSxuPVYuZ2V0Rmlyc3RNYXRjaChKLGUpfHxWLmdldEZpcnN0TWF0Y2goLyg/OlNhbXN1bmdCcm93c2VyKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9XaGFsZS9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiTkFWRVIgV2hhbGUgQnJvd3NlclwifSxuPVYuZ2V0Rmlyc3RNYXRjaChKLGUpfHxWLmdldEZpcnN0TWF0Y2goLyg/OndoYWxlKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL01aQnJvd3Nlci9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiTVogQnJvd3NlclwifSxuPVYuZ2V0Rmlyc3RNYXRjaCgvKD86TVpCcm93c2VyKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9mb2N1cy9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiRm9jdXNcIn0sbj1WLmdldEZpcnN0TWF0Y2goLyg/OmZvY3VzKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9zd2luZy9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiU3dpbmdcIn0sbj1WLmdldEZpcnN0TWF0Y2goLyg/OnN3aW5nKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9jb2FzdC9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiT3BlcmEgQ29hc3RcIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKXx8Vi5nZXRGaXJzdE1hdGNoKC8oPzpjb2FzdClbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0Olsvb3B0XFwvXFxkKyg/Oi4/Xz9cXGQrKSsvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIk9wZXJhIFRvdWNoXCJ9LG49Vi5nZXRGaXJzdE1hdGNoKC8oPzpvcHQpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy95YWJyb3dzZXIvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIllhbmRleCBCcm93c2VyXCJ9LG49Vi5nZXRGaXJzdE1hdGNoKC8oPzp5YWJyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy91Y2Jyb3dzZXIvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlVDIEJyb3dzZXJcIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKXx8Vi5nZXRGaXJzdE1hdGNoKC8oPzp1Y2Jyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL01heHRob258bXhpb3MvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIk1heHRob25cIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKXx8Vi5nZXRGaXJzdE1hdGNoKC8oPzpNYXh0aG9ufG14aW9zKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9lcGlwaGFueS9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiRXBpcGhhbnlcIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKXx8Vi5nZXRGaXJzdE1hdGNoKC8oPzplcGlwaGFueSlbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvcHVmZmluL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJQdWZmaW5cIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKXx8Vi5nZXRGaXJzdE1hdGNoKC8oPzpwdWZmaW4pW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3NsZWlwbmlyL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJTbGVpcG5pclwifSxuPVYuZ2V0Rmlyc3RNYXRjaChKLGUpfHxWLmdldEZpcnN0TWF0Y2goLyg/OnNsZWlwbmlyKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9rLW1lbGVvbi9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiSy1NZWxlb25cIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKXx8Vi5nZXRGaXJzdE1hdGNoKC8oPzprLW1lbGVvbilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvbWljcm9tZXNzZW5nZXIvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIldlQ2hhdFwifSxuPVYuZ2V0Rmlyc3RNYXRjaCgvKD86bWljcm9tZXNzZW5nZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9xcWJyb3dzZXIvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTovcXFicm93c2VybGl0ZS9pLnRlc3QoZSk/XCJRUSBCcm93c2VyIExpdGVcIjpcIlFRIEJyb3dzZXJcIn0sbj1WLmdldEZpcnN0TWF0Y2goLyg/OnFxYnJvd3NlcmxpdGV8cXFicm93c2VyKVsvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKXx8Vi5nZXRGaXJzdE1hdGNoKEosZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvbXNpZXx0cmlkZW50L2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJJbnRlcm5ldCBFeHBsb3JlclwifSxuPVYuZ2V0Rmlyc3RNYXRjaCgvKD86bXNpZSB8cnY6KShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9cXHNlZGdcXC8vaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIk1pY3Jvc29mdCBFZGdlXCJ9LG49Vi5nZXRGaXJzdE1hdGNoKC9cXHNlZGdcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvZWRnKFtlYV18aW9zKS9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiTWljcm9zb2Z0IEVkZ2VcIn0sbj1WLmdldFNlY29uZE1hdGNoKC9lZGcoW2VhXXxpb3MpXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3ZpdmFsZGkvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlZpdmFsZGlcIn0sbj1WLmdldEZpcnN0TWF0Y2goL3ZpdmFsZGlcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0Olsvc2VhbW9ua2V5L2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJTZWFNb25rZXlcIn0sbj1WLmdldEZpcnN0TWF0Y2goL3NlYW1vbmtleVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9zYWlsZmlzaC9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiU2FpbGZpc2hcIn0sbj1WLmdldEZpcnN0TWF0Y2goL3NhaWxmaXNoXFxzP2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0Olsvc2lsay9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiQW1hem9uIFNpbGtcIn0sbj1WLmdldEZpcnN0TWF0Y2goL3NpbGtcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvcGhhbnRvbS9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiUGhhbnRvbUpTXCJ9LG49Vi5nZXRGaXJzdE1hdGNoKC9waGFudG9tanNcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0Olsvc2xpbWVyanMvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlNsaW1lckpTXCJ9LG49Vi5nZXRGaXJzdE1hdGNoKC9zbGltZXJqc1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLC9yaW1cXHN0YWJsZXQvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIkJsYWNrQmVycnlcIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKXx8Vi5nZXRGaXJzdE1hdGNoKC9ibGFja2JlcnJ5W1xcZF0rXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbLyh3ZWJ8aHB3KVtvMF1zL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJXZWJPUyBCcm93c2VyXCJ9LG49Vi5nZXRGaXJzdE1hdGNoKEosZSl8fFYuZ2V0Rmlyc3RNYXRjaCgvdyg/OmViKT9bbzBdc2Jyb3dzZXJcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvYmFkYS9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiQmFkYVwifSxuPVYuZ2V0Rmlyc3RNYXRjaCgvZG9sZmluXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3RpemVuL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJUaXplblwifSxuPVYuZ2V0Rmlyc3RNYXRjaCgvKD86dGl6ZW5cXHM/KT9icm93c2VyXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9xdXB6aWxsYS9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiUXVwWmlsbGFcIn0sbj1WLmdldEZpcnN0TWF0Y2goLyg/OnF1cHppbGxhKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKXx8Vi5nZXRGaXJzdE1hdGNoKEosZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIkZpcmVmb3hcIn0sbj1WLmdldEZpcnN0TWF0Y2goLyg/OmZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9lbGVjdHJvbi9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiRWxlY3Ryb25cIn0sbj1WLmdldEZpcnN0TWF0Y2goLyg/OmVsZWN0cm9uKVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9NaXVpQnJvd3Nlci9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiTWl1aVwifSxuPVYuZ2V0Rmlyc3RNYXRjaCgvKD86TWl1aUJyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL2Nocm9taXVtL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJDaHJvbWl1bVwifSxuPVYuZ2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21pdW0pW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9jaHJvbWV8Y3Jpb3N8Y3Jtby9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiQ2hyb21lXCJ9LG49Vi5nZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvR1NBL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJHb29nbGUgU2VhcmNoXCJ9LG49Vi5nZXRGaXJzdE1hdGNoKC8oPzpHU0EpXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdChlKXtjb25zdCB0PSFlLnRlc3QoL2xpa2UgYW5kcm9pZC9pKSxuPWUudGVzdCgvYW5kcm9pZC9pKTtyZXR1cm4gdCYmbn0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIkFuZHJvaWQgQnJvd3NlclwifSxuPVYuZ2V0Rmlyc3RNYXRjaChKLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3BsYXlzdGF0aW9uIDQvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlBsYXlTdGF0aW9uIDRcIn0sbj1WLmdldEZpcnN0TWF0Y2goSixlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9zYWZhcml8YXBwbGV3ZWJraXQvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlNhZmFyaVwifSxuPVYuZ2V0Rmlyc3RNYXRjaChKLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbLy4qL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9LTEhPT1lLnNlYXJjaChcIlxcXFwoXCIpPy9eKC4qKVxcLyguKilbIFxcdF1cXCgoLiopLzovXiguKilcXC8oLiopIC87cmV0dXJue25hbWU6Vi5nZXRGaXJzdE1hdGNoKHQsZSksdmVyc2lvbjpWLmdldFNlY29uZE1hdGNoKHQsZSl9fX1dO3ZhciBxPVt7dGVzdDpbL1Jva3VcXC9EVlAvXSxkZXNjcmliZShlKXtjb25zdCB0PVYuZ2V0Rmlyc3RNYXRjaCgvUm9rdVxcL0RWUC0oXFxkK1xcLlxcZCspL2ksZSk7cmV0dXJue25hbWU6Qi5Sb2t1LHZlcnNpb246dH19fSx7dGVzdDpbL3dpbmRvd3MgcGhvbmUvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD1WLmdldEZpcnN0TWF0Y2goL3dpbmRvd3MgcGhvbmUgKD86b3MpP1xccz8oXFxkKyhcXC5cXGQrKSopL2ksZSk7cmV0dXJue25hbWU6Qi5XaW5kb3dzUGhvbmUsdmVyc2lvbjp0fX19LHt0ZXN0Olsvd2luZG93cyAvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD1WLmdldEZpcnN0TWF0Y2goL1dpbmRvd3MgKChOVHxYUCkoIFxcZFxcZD8uXFxkKT8pL2ksZSksbj1WLmdldFdpbmRvd3NWZXJzaW9uTmFtZSh0KTtyZXR1cm57bmFtZTpCLldpbmRvd3MsdmVyc2lvbjp0LHZlcnNpb25OYW1lOm59fX0se3Rlc3Q6Wy9NYWNpbnRvc2goLio/KSBGeGlPUyguKj8pXFwvL10sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpCLmlPU30sbj1WLmdldFNlY29uZE1hdGNoKC8oVmVyc2lvblxcLykoXFxkW1xcZC5dKykvLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL21hY2ludG9zaC9pXSxkZXNjcmliZShlKXtjb25zdCB0PVYuZ2V0Rmlyc3RNYXRjaCgvbWFjIG9zIHggKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpLnJlcGxhY2UoL1tfXFxzXS9nLFwiLlwiKSxuPVYuZ2V0TWFjT1NWZXJzaW9uTmFtZSh0KSxyPXtuYW1lOkIuTWFjT1MsdmVyc2lvbjp0fTtyZXR1cm4gbiYmKHIudmVyc2lvbk5hbWU9bikscn19LHt0ZXN0OlsvKGlwb2R8aXBob25lfGlwYWQpL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9Vi5nZXRGaXJzdE1hdGNoKC9vcyAoXFxkKyhbX1xcc11cXGQrKSopIGxpa2UgbWFjIG9zIHgvaSxlKS5yZXBsYWNlKC9bX1xcc10vZyxcIi5cIik7cmV0dXJue25hbWU6Qi5pT1MsdmVyc2lvbjp0fX19LHt0ZXN0KGUpe2NvbnN0IHQ9IWUudGVzdCgvbGlrZSBhbmRyb2lkL2kpLG49ZS50ZXN0KC9hbmRyb2lkL2kpO3JldHVybiB0JiZufSxkZXNjcmliZShlKXtjb25zdCB0PVYuZ2V0Rmlyc3RNYXRjaCgvYW5kcm9pZFtcXHMvLV0oXFxkKyhcXC5cXGQrKSopL2ksZSksbj1WLmdldEFuZHJvaWRWZXJzaW9uTmFtZSh0KSxyPXtuYW1lOkIuQW5kcm9pZCx2ZXJzaW9uOnR9O3JldHVybiBuJiYoci52ZXJzaW9uTmFtZT1uKSxyfX0se3Rlc3Q6Wy8od2VifGhwdylbbzBdcy9pXSxkZXNjcmliZShlKXtjb25zdCB0PVYuZ2V0Rmlyc3RNYXRjaCgvKD86d2VifGhwdylbbzBdc1xcLyhcXGQrKFxcLlxcZCspKikvaSxlKSxuPXtuYW1lOkIuV2ViT1N9O3JldHVybiB0JiZ0Lmxlbmd0aCYmKG4udmVyc2lvbj10KSxufX0se3Rlc3Q6Wy9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLC9yaW1cXHN0YWJsZXQvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD1WLmdldEZpcnN0TWF0Y2goL3JpbVxcc3RhYmxldFxcc29zXFxzKFxcZCsoXFwuXFxkKykqKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goL2JsYWNrYmVycnlcXGQrXFwvKFxcZCsoW19cXHNdXFxkKykqKS9pLGUpfHxWLmdldEZpcnN0TWF0Y2goL1xcYmJiKFxcZCspL2ksZSk7cmV0dXJue25hbWU6Qi5CbGFja0JlcnJ5LHZlcnNpb246dH19fSx7dGVzdDpbL2JhZGEvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD1WLmdldEZpcnN0TWF0Y2goL2JhZGFcXC8oXFxkKyhcXC5cXGQrKSopL2ksZSk7cmV0dXJue25hbWU6Qi5CYWRhLHZlcnNpb246dH19fSx7dGVzdDpbL3RpemVuL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9Vi5nZXRGaXJzdE1hdGNoKC90aXplblsvXFxzXShcXGQrKFxcLlxcZCspKikvaSxlKTtyZXR1cm57bmFtZTpCLlRpemVuLHZlcnNpb246dH19fSx7dGVzdDpbL2xpbnV4L2ldLGRlc2NyaWJlOigpPT4oe25hbWU6Qi5MaW51eH0pfSx7dGVzdDpbL0NyT1MvXSxkZXNjcmliZTooKT0+KHtuYW1lOkIuQ2hyb21lT1N9KX0se3Rlc3Q6Wy9QbGF5U3RhdGlvbiA0L10sZGVzY3JpYmUoZSl7Y29uc3QgdD1WLmdldEZpcnN0TWF0Y2goL1BsYXlTdGF0aW9uIDRbL1xcc10oXFxkKyhcXC5cXGQrKSopL2ksZSk7cmV0dXJue25hbWU6Qi5QbGF5U3RhdGlvbjQsdmVyc2lvbjp0fX19XSxXPVt7dGVzdDpbL2dvb2dsZWJvdC9pXSxkZXNjcmliZTooKT0+KHt0eXBlOlwiYm90XCIsdmVuZG9yOlwiR29vZ2xlXCJ9KX0se3Rlc3Q6Wy9odWF3ZWkvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD1WLmdldEZpcnN0TWF0Y2goLyhjYW4tbDAxKS9pLGUpJiZcIk5vdmFcIixuPXt0eXBlOkYubW9iaWxlLHZlbmRvcjpcIkh1YXdlaVwifTtyZXR1cm4gdCYmKG4ubW9kZWw9dCksbn19LHt0ZXN0OlsvbmV4dXNcXHMqKD86N3w4fDl8MTApLiovaV0sZGVzY3JpYmU6KCk9Pih7dHlwZTpGLnRhYmxldCx2ZW5kb3I6XCJOZXh1c1wifSl9LHt0ZXN0OlsvaXBhZC9pXSxkZXNjcmliZTooKT0+KHt0eXBlOkYudGFibGV0LHZlbmRvcjpcIkFwcGxlXCIsbW9kZWw6XCJpUGFkXCJ9KX0se3Rlc3Q6Wy9NYWNpbnRvc2goLio/KSBGeGlPUyguKj8pXFwvL10sZGVzY3JpYmU6KCk9Pih7dHlwZTpGLnRhYmxldCx2ZW5kb3I6XCJBcHBsZVwiLG1vZGVsOlwiaVBhZFwifSl9LHt0ZXN0Olsva2Z0dCBidWlsZC9pXSxkZXNjcmliZTooKT0+KHt0eXBlOkYudGFibGV0LHZlbmRvcjpcIkFtYXpvblwiLG1vZGVsOlwiS2luZGxlIEZpcmUgSEQgN1wifSl9LHt0ZXN0Olsvc2lsay9pXSxkZXNjcmliZTooKT0+KHt0eXBlOkYudGFibGV0LHZlbmRvcjpcIkFtYXpvblwifSl9LHt0ZXN0OlsvdGFibGV0KD8hIHBjKS9pXSxkZXNjcmliZTooKT0+KHt0eXBlOkYudGFibGV0fSl9LHt0ZXN0KGUpe2NvbnN0IHQ9ZS50ZXN0KC9pcG9kfGlwaG9uZS9pKSxuPWUudGVzdCgvbGlrZSAoaXBvZHxpcGhvbmUpL2kpO3JldHVybiB0JiYhbn0sZGVzY3JpYmUoZSl7Y29uc3QgdD1WLmdldEZpcnN0TWF0Y2goLyhpcG9kfGlwaG9uZSkvaSxlKTtyZXR1cm57dHlwZTpGLm1vYmlsZSx2ZW5kb3I6XCJBcHBsZVwiLG1vZGVsOnR9fX0se3Rlc3Q6Wy9uZXh1c1xccypbMC02XS4qL2ksL2dhbGF4eSBuZXh1cy9pXSxkZXNjcmliZTooKT0+KHt0eXBlOkYubW9iaWxlLHZlbmRvcjpcIk5leHVzXCJ9KX0se3Rlc3Q6Wy9bXi1dbW9iaS9pXSxkZXNjcmliZTooKT0+KHt0eXBlOkYubW9iaWxlfSl9LHt0ZXN0OmU9PlwiYmxhY2tiZXJyeVwiPT09ZS5nZXRCcm93c2VyTmFtZSghMCksZGVzY3JpYmU6KCk9Pih7dHlwZTpGLm1vYmlsZSx2ZW5kb3I6XCJCbGFja0JlcnJ5XCJ9KX0se3Rlc3Q6ZT0+XCJiYWRhXCI9PT1lLmdldEJyb3dzZXJOYW1lKCEwKSxkZXNjcmliZTooKT0+KHt0eXBlOkYubW9iaWxlfSl9LHt0ZXN0OmU9Plwid2luZG93cyBwaG9uZVwiPT09ZS5nZXRCcm93c2VyTmFtZSgpLGRlc2NyaWJlOigpPT4oe3R5cGU6Ri5tb2JpbGUsdmVuZG9yOlwiTWljcm9zb2Z0XCJ9KX0se3Rlc3QoZSl7Y29uc3QgdD1OdW1iZXIoU3RyaW5nKGUuZ2V0T1NWZXJzaW9uKCkpLnNwbGl0KFwiLlwiKVswXSk7cmV0dXJuXCJhbmRyb2lkXCI9PT1lLmdldE9TTmFtZSghMCkmJnQ+PTN9LGRlc2NyaWJlOigpPT4oe3R5cGU6Ri50YWJsZXR9KX0se3Rlc3Q6ZT0+XCJhbmRyb2lkXCI9PT1lLmdldE9TTmFtZSghMCksZGVzY3JpYmU6KCk9Pih7dHlwZTpGLm1vYmlsZX0pfSx7dGVzdDplPT5cIm1hY29zXCI9PT1lLmdldE9TTmFtZSghMCksZGVzY3JpYmU6KCk9Pih7dHlwZTpGLmRlc2t0b3AsdmVuZG9yOlwiQXBwbGVcIn0pfSx7dGVzdDplPT5cIndpbmRvd3NcIj09PWUuZ2V0T1NOYW1lKCEwKSxkZXNjcmliZTooKT0+KHt0eXBlOkYuZGVza3RvcH0pfSx7dGVzdDplPT5cImxpbnV4XCI9PT1lLmdldE9TTmFtZSghMCksZGVzY3JpYmU6KCk9Pih7dHlwZTpGLmRlc2t0b3B9KX0se3Rlc3Q6ZT0+XCJwbGF5c3RhdGlvbiA0XCI9PT1lLmdldE9TTmFtZSghMCksZGVzY3JpYmU6KCk9Pih7dHlwZTpGLnR2fSl9LHt0ZXN0OmU9Plwicm9rdVwiPT09ZS5nZXRPU05hbWUoITApLGRlc2NyaWJlOigpPT4oe3R5cGU6Ri50dn0pfV0sej1be3Rlc3Q6ZT0+XCJtaWNyb3NvZnQgZWRnZVwiPT09ZS5nZXRCcm93c2VyTmFtZSghMCksZGVzY3JpYmUoZSl7aWYoL1xcc2VkZ1xcLy9pLnRlc3QoZSkpcmV0dXJue25hbWU6VS5CbGlua307Y29uc3QgdD1WLmdldEZpcnN0TWF0Y2goL2VkZ2VcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJue25hbWU6VS5FZGdlSFRNTCx2ZXJzaW9uOnR9fX0se3Rlc3Q6Wy90cmlkZW50L2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6VS5UcmlkZW50fSxuPVYuZ2V0Rmlyc3RNYXRjaCgvdHJpZGVudFxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6ZT0+ZS50ZXN0KC9wcmVzdG8vaSksZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpVLlByZXN0b30sbj1WLmdldEZpcnN0TWF0Y2goL3ByZXN0b1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3QoZSl7Y29uc3QgdD1lLnRlc3QoL2dlY2tvL2kpLG49ZS50ZXN0KC9saWtlIGdlY2tvL2kpO3JldHVybiB0JiYhbn0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpVLkdlY2tvfSxuPVYuZ2V0Rmlyc3RNYXRjaCgvZ2Vja29cXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvKGFwcGxlKT93ZWJraXRcXC81MzdcXC4zNi9pXSxkZXNjcmliZTooKT0+KHtuYW1lOlUuQmxpbmt9KX0se3Rlc3Q6Wy8oYXBwbGUpP3dlYmtpdC9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlUuV2ViS2l0fSxuPVYuZ2V0Rmlyc3RNYXRjaCgvd2Via2l0XFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fV07Y2xhc3MgSHtjb25zdHJ1Y3RvcihlLHQ9ITEpe2lmKG51bGw9PWV8fFwiXCI9PT1lKXRocm93IG5ldyBFcnJvcihcIlVzZXJBZ2VudCBwYXJhbWV0ZXIgY2FuJ3QgYmUgZW1wdHlcIik7dGhpcy5fdWE9ZSx0aGlzLnBhcnNlZFJlc3VsdD17fSwhMCE9PXQmJnRoaXMucGFyc2UoKX1nZXRVQSgpe3JldHVybiB0aGlzLl91YX10ZXN0KGUpe3JldHVybiBlLnRlc3QodGhpcy5fdWEpfXBhcnNlQnJvd3Nlcigpe3RoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXI9e307Y29uc3QgZT1WLmZpbmQoJCwoZT0+e2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUudGVzdClyZXR1cm4gZS50ZXN0KHRoaXMpO2lmKGUudGVzdCBpbnN0YW5jZW9mIEFycmF5KXJldHVybiBlLnRlc3Quc29tZSgoZT0+dGhpcy50ZXN0KGUpKSk7dGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpfSkpO3JldHVybiBlJiYodGhpcy5wYXJzZWRSZXN1bHQuYnJvd3Nlcj1lLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSkpLHRoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXJ9Z2V0QnJvd3Nlcigpe3JldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyP3RoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXI6dGhpcy5wYXJzZUJyb3dzZXIoKX1nZXRCcm93c2VyTmFtZShlKXtyZXR1cm4gZT9TdHJpbmcodGhpcy5nZXRCcm93c2VyKCkubmFtZSkudG9Mb3dlckNhc2UoKXx8XCJcIjp0aGlzLmdldEJyb3dzZXIoKS5uYW1lfHxcIlwifWdldEJyb3dzZXJWZXJzaW9uKCl7cmV0dXJuIHRoaXMuZ2V0QnJvd3NlcigpLnZlcnNpb259Z2V0T1MoKXtyZXR1cm4gdGhpcy5wYXJzZWRSZXN1bHQub3M/dGhpcy5wYXJzZWRSZXN1bHQub3M6dGhpcy5wYXJzZU9TKCl9cGFyc2VPUygpe3RoaXMucGFyc2VkUmVzdWx0Lm9zPXt9O2NvbnN0IGU9Vi5maW5kKHEsKGU9PntpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRlc3QpcmV0dXJuIGUudGVzdCh0aGlzKTtpZihlLnRlc3QgaW5zdGFuY2VvZiBBcnJheSlyZXR1cm4gZS50ZXN0LnNvbWUoKGU9PnRoaXMudGVzdChlKSkpO3Rocm93IG5ldyBFcnJvcihcIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZFwiKX0pKTtyZXR1cm4gZSYmKHRoaXMucGFyc2VkUmVzdWx0Lm9zPWUuZGVzY3JpYmUodGhpcy5nZXRVQSgpKSksdGhpcy5wYXJzZWRSZXN1bHQub3N9Z2V0T1NOYW1lKGUpe2NvbnN0e25hbWU6dH09dGhpcy5nZXRPUygpO3JldHVybiBlP1N0cmluZyh0KS50b0xvd2VyQ2FzZSgpfHxcIlwiOnR8fFwiXCJ9Z2V0T1NWZXJzaW9uKCl7cmV0dXJuIHRoaXMuZ2V0T1MoKS52ZXJzaW9ufWdldFBsYXRmb3JtKCl7cmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtP3RoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtOnRoaXMucGFyc2VQbGF0Zm9ybSgpfWdldFBsYXRmb3JtVHlwZShlPSExKXtjb25zdHt0eXBlOnR9PXRoaXMuZ2V0UGxhdGZvcm0oKTtyZXR1cm4gZT9TdHJpbmcodCkudG9Mb3dlckNhc2UoKXx8XCJcIjp0fHxcIlwifXBhcnNlUGxhdGZvcm0oKXt0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybT17fTtjb25zdCBlPVYuZmluZChXLChlPT57aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS50ZXN0KXJldHVybiBlLnRlc3QodGhpcyk7aWYoZS50ZXN0IGluc3RhbmNlb2YgQXJyYXkpcmV0dXJuIGUudGVzdC5zb21lKChlPT50aGlzLnRlc3QoZSkpKTt0aHJvdyBuZXcgRXJyb3IoXCJCcm93c2VyJ3MgdGVzdCBmdW5jdGlvbiBpcyBub3QgdmFsaWRcIil9KSk7cmV0dXJuIGUmJih0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybT1lLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSkpLHRoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtfWdldEVuZ2luZSgpe3JldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmU/dGhpcy5wYXJzZWRSZXN1bHQuZW5naW5lOnRoaXMucGFyc2VFbmdpbmUoKX1nZXRFbmdpbmVOYW1lKGUpe3JldHVybiBlP1N0cmluZyh0aGlzLmdldEVuZ2luZSgpLm5hbWUpLnRvTG93ZXJDYXNlKCl8fFwiXCI6dGhpcy5nZXRFbmdpbmUoKS5uYW1lfHxcIlwifXBhcnNlRW5naW5lKCl7dGhpcy5wYXJzZWRSZXN1bHQuZW5naW5lPXt9O2NvbnN0IGU9Vi5maW5kKHosKGU9PntpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRlc3QpcmV0dXJuIGUudGVzdCh0aGlzKTtpZihlLnRlc3QgaW5zdGFuY2VvZiBBcnJheSlyZXR1cm4gZS50ZXN0LnNvbWUoKGU9PnRoaXMudGVzdChlKSkpO3Rocm93IG5ldyBFcnJvcihcIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZFwiKX0pKTtyZXR1cm4gZSYmKHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZT1lLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSkpLHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZX1wYXJzZSgpe3JldHVybiB0aGlzLnBhcnNlQnJvd3NlcigpLHRoaXMucGFyc2VPUygpLHRoaXMucGFyc2VQbGF0Zm9ybSgpLHRoaXMucGFyc2VFbmdpbmUoKSx0aGlzfWdldFJlc3VsdCgpe3JldHVybiBWLmFzc2lnbih7fSx0aGlzLnBhcnNlZFJlc3VsdCl9c2F0aXNmaWVzKGUpe2NvbnN0IHQ9e307bGV0IG49MDtjb25zdCByPXt9O2xldCBpPTA7aWYoT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgobz0+e2NvbnN0IGE9ZVtvXTtcInN0cmluZ1wiPT10eXBlb2YgYT8ocltvXT1hLGkrPTEpOlwib2JqZWN0XCI9PXR5cGVvZiBhJiYodFtvXT1hLG4rPTEpfSkpLG4+MCl7Y29uc3QgZT1PYmplY3Qua2V5cyh0KSxuPVYuZmluZChlLChlPT50aGlzLmlzT1MoZSkpKTtpZihuKXtjb25zdCBlPXRoaXMuc2F0aXNmaWVzKHRbbl0pO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGV9Y29uc3Qgcj1WLmZpbmQoZSwoZT0+dGhpcy5pc1BsYXRmb3JtKGUpKSk7aWYocil7Y29uc3QgZT10aGlzLnNhdGlzZmllcyh0W3JdKTtpZih2b2lkIDAhPT1lKXJldHVybiBlfX1pZihpPjApe2NvbnN0IGU9T2JqZWN0LmtleXMociksdD1WLmZpbmQoZSwoZT0+dGhpcy5pc0Jyb3dzZXIoZSwhMCkpKTtpZih2b2lkIDAhPT10KXJldHVybiB0aGlzLmNvbXBhcmVWZXJzaW9uKHJbdF0pfX1pc0Jyb3dzZXIoZSx0PSExKXtjb25zdCBuPXRoaXMuZ2V0QnJvd3Nlck5hbWUoKS50b0xvd2VyQ2FzZSgpO2xldCByPWUudG9Mb3dlckNhc2UoKTtjb25zdCBpPVYuZ2V0QnJvd3NlclR5cGVCeUFsaWFzKHIpO3JldHVybiB0JiZpJiYocj1pLnRvTG93ZXJDYXNlKCkpLHI9PT1ufWNvbXBhcmVWZXJzaW9uKGUpe2xldCB0PVswXSxuPWUscj0hMTtjb25zdCBpPXRoaXMuZ2V0QnJvd3NlclZlcnNpb24oKTtpZihcInN0cmluZ1wiPT10eXBlb2YgaSlyZXR1cm5cIj5cIj09PWVbMF18fFwiPFwiPT09ZVswXT8obj1lLnN1YnN0cigxKSxcIj1cIj09PWVbMV0/KHI9ITAsbj1lLnN1YnN0cigyKSk6dD1bXSxcIj5cIj09PWVbMF0/dC5wdXNoKDEpOnQucHVzaCgtMSkpOlwiPVwiPT09ZVswXT9uPWUuc3Vic3RyKDEpOlwiflwiPT09ZVswXSYmKHI9ITAsbj1lLnN1YnN0cigxKSksdC5pbmRleE9mKFYuY29tcGFyZVZlcnNpb25zKGksbixyKSk+LTF9aXNPUyhlKXtyZXR1cm4gdGhpcy5nZXRPU05hbWUoITApPT09U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCl9aXNQbGF0Zm9ybShlKXtyZXR1cm4gdGhpcy5nZXRQbGF0Zm9ybVR5cGUoITApPT09U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCl9aXNFbmdpbmUoZSl7cmV0dXJuIHRoaXMuZ2V0RW5naW5lTmFtZSghMCk9PT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKX1pcyhlLHQ9ITEpe3JldHVybiB0aGlzLmlzQnJvd3NlcihlLHQpfHx0aGlzLmlzT1MoZSl8fHRoaXMuaXNQbGF0Zm9ybShlKX1zb21lKGU9W10pe3JldHVybiBlLnNvbWUoKGU9PnRoaXMuaXMoZSkpKX19XG4vKiFcbiAqIEJvd3NlciAtIGEgYnJvd3NlciBkZXRlY3RvclxuICogaHR0cHM6Ly9naXRodWIuY29tL2xhbmNlZGlrc29uL2Jvd3NlclxuICogTUlUIExpY2Vuc2UgfCAoYykgRHVzdGluIERpYXogMjAxMi0yMDE1XG4gKiBNSVQgTGljZW5zZSB8IChjKSBEZW5pcyBEZW1jaGVua28gMjAxNS0yMDE5XG4gKi9jbGFzcyBHe3N0YXRpYyBnZXRQYXJzZXIoZSx0PSExKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCJVc2VyQWdlbnQgc2hvdWxkIGJlIGEgc3RyaW5nXCIpO3JldHVybiBuZXcgSChlLHQpfXN0YXRpYyBwYXJzZShlKXtyZXR1cm4gbmV3IEgoZSkuZ2V0UmVzdWx0KCl9c3RhdGljIGdldCBCUk9XU0VSX01BUCgpe3JldHVybiBSfXN0YXRpYyBnZXQgRU5HSU5FX01BUCgpe3JldHVybiBVfXN0YXRpYyBnZXQgT1NfTUFQKCl7cmV0dXJuIEJ9c3RhdGljIGdldCBQTEFURk9STVNfTUFQKCl7cmV0dXJuIEZ9fWZ1bmN0aW9uIFEoKXtyZXR1cm4gRGF0ZS5ub3coKStNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCl9ZnVuY3Rpb24gSygpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBtdXN0IGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzXCIpfWZ1bmN0aW9uIFkoZSx0KXtyZXR1cm4gbnVsbCE9dCYmdC5wcm94eVVybD90LnByb3h5VXJsKyhcIi9cIj09PXQucHJveHlVcmwuc2xpY2UoLTEpP1wiXCI6XCIvXCIpK2Uuc3Vic3RyaW5nKDgpOmV9ZnVuY3Rpb24gWChlKXtyZXR1cm4gbnVsbCE9ZSYmZS5jYWxsT2JqZWN0QnVuZGxlVXJsT3ZlcnJpZGU/ZS5jYWxsT2JqZWN0QnVuZGxlVXJsT3ZlcnJpZGU6WShcImh0dHBzOi8vYy5kYWlseS5jby9jYWxsLW1hY2hpbmUvdmVyc2lvbmVkL1wiLmNvbmNhdChcIjAuNzQuMFwiLFwiL3N0YXRpYy9jYWxsLW1hY2hpbmUtb2JqZWN0LWJ1bmRsZS5qc1wiKSxlKX1mdW5jdGlvbiBaKGUpe3RyeXtuZXcgVVJMKGUpfWNhdGNoKGUpe3JldHVybiExfXJldHVybiEwfWNvbnN0IGVlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZnVuY3Rpb24gdGUoZSl7c3dpdGNoKGVlLmNhbGwoZSkpe2Nhc2VcIltvYmplY3QgRXJyb3JdXCI6Y2FzZVwiW29iamVjdCBFeGNlcHRpb25dXCI6Y2FzZVwiW29iamVjdCBET01FeGNlcHRpb25dXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4gZGUoZSxFcnJvcil9fWZ1bmN0aW9uIG5lKGUsdCl7cmV0dXJuIGVlLmNhbGwoZSk9PT1gW29iamVjdCAke3R9XWB9ZnVuY3Rpb24gcmUoZSl7cmV0dXJuIG5lKGUsXCJFcnJvckV2ZW50XCIpfWZ1bmN0aW9uIGllKGUpe3JldHVybiBuZShlLFwiRE9NRXJyb3JcIil9ZnVuY3Rpb24gb2UoZSl7cmV0dXJuIG5lKGUsXCJTdHJpbmdcIil9ZnVuY3Rpb24gYWUoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcIl9fc2VudHJ5X3RlbXBsYXRlX3N0cmluZ19fXCJpbiBlJiZcIl9fc2VudHJ5X3RlbXBsYXRlX3ZhbHVlc19fXCJpbiBlfWZ1bmN0aW9uIHNlKGUpe3JldHVybiBudWxsPT09ZXx8YWUoZSl8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlfWZ1bmN0aW9uIGNlKGUpe3JldHVybiBuZShlLFwiT2JqZWN0XCIpfWZ1bmN0aW9uIGxlKGUpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBFdmVudCYmZGUoZSxFdmVudCl9ZnVuY3Rpb24gdWUoZSl7cmV0dXJuIEJvb2xlYW4oZSYmZS50aGVuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRoZW4pfWZ1bmN0aW9uIGRlKGUsdCl7dHJ5e3JldHVybiBlIGluc3RhbmNlb2YgdH1jYXRjaChlKXtyZXR1cm4hMX19ZnVuY3Rpb24gcGUoZSl7cmV0dXJuIShcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWV8fCFlLl9faXNWdWUmJiFlLl9pc1Z1ZSl9ZnVuY3Rpb24gaGUoZSx0PTApe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlfHwwPT09dHx8ZS5sZW5ndGg8PXQ/ZTpgJHtlLnNsaWNlKDAsdCl9Li4uYH1mdW5jdGlvbiBmZShlLHQpe2lmKCFBcnJheS5pc0FycmF5KGUpKXJldHVyblwiXCI7Y29uc3Qgbj1bXTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgcj1lW3RdO3RyeXtwZShyKT9uLnB1c2goXCJbVnVlVmlld01vZGVsXVwiKTpuLnB1c2goU3RyaW5nKHIpKX1jYXRjaChlKXtuLnB1c2goXCJbdmFsdWUgY2Fubm90IGJlIHNlcmlhbGl6ZWRdXCIpfX1yZXR1cm4gbi5qb2luKHQpfWZ1bmN0aW9uIHZlKGUsdCxuPSExKXtyZXR1cm4hIW9lKGUpJiYobmUodCxcIlJlZ0V4cFwiKT90LnRlc3QoZSk6ISFvZSh0KSYmKG4/ZT09PXQ6ZS5pbmNsdWRlcyh0KSkpfWZ1bmN0aW9uIG1lKGUsdD1bXSxuPSExKXtyZXR1cm4gdC5zb21lKCh0PT52ZShlLHQsbikpKX1mdW5jdGlvbiBnZShlLHQsbj0yNTAscixpLG8sYSl7aWYoIShvLmV4Y2VwdGlvbiYmby5leGNlcHRpb24udmFsdWVzJiZhJiZkZShhLm9yaWdpbmFsRXhjZXB0aW9uLEVycm9yKSkpcmV0dXJuO2NvbnN0IHM9by5leGNlcHRpb24udmFsdWVzLmxlbmd0aD4wP28uZXhjZXB0aW9uLnZhbHVlc1tvLmV4Y2VwdGlvbi52YWx1ZXMubGVuZ3RoLTFdOnZvaWQgMDt2YXIgYyxsO3MmJihvLmV4Y2VwdGlvbi52YWx1ZXM9KGM9eWUoZSx0LGksYS5vcmlnaW5hbEV4Y2VwdGlvbixyLG8uZXhjZXB0aW9uLnZhbHVlcyxzLDApLGw9bixjLm1hcCgoZT0+KGUudmFsdWUmJihlLnZhbHVlPWhlKGUudmFsdWUsbCkpLGUpKSkpKX1mdW5jdGlvbiB5ZShlLHQsbixyLGksbyxhLHMpe2lmKG8ubGVuZ3RoPj1uKzEpcmV0dXJuIG87bGV0IGM9Wy4uLm9dO2lmKGRlKHJbaV0sRXJyb3IpKXtfZShhLHMpO2NvbnN0IG89ZSh0LHJbaV0pLGw9Yy5sZW5ndGg7YmUobyxpLGwscyksYz15ZShlLHQsbixyW2ldLGksW28sLi4uY10sbyxsKX1yZXR1cm4gQXJyYXkuaXNBcnJheShyLmVycm9ycykmJnIuZXJyb3JzLmZvckVhY2goKChyLG8pPT57aWYoZGUocixFcnJvcikpe19lKGEscyk7Y29uc3QgbD1lKHQsciksdT1jLmxlbmd0aDtiZShsLGBlcnJvcnNbJHtvfV1gLHUscyksYz15ZShlLHQsbixyLGksW2wsLi4uY10sbCx1KX19KSksY31mdW5jdGlvbiBfZShlLHQpe2UubWVjaGFuaXNtPWUubWVjaGFuaXNtfHx7dHlwZTpcImdlbmVyaWNcIixoYW5kbGVkOiEwfSxlLm1lY2hhbmlzbT17Li4uZS5tZWNoYW5pc20sLi4uXCJBZ2dyZWdhdGVFcnJvclwiPT09ZS50eXBlJiZ7aXNfZXhjZXB0aW9uX2dyb3VwOiEwfSxleGNlcHRpb25faWQ6dH19ZnVuY3Rpb24gYmUoZSx0LG4scil7ZS5tZWNoYW5pc209ZS5tZWNoYW5pc218fHt0eXBlOlwiZ2VuZXJpY1wiLGhhbmRsZWQ6ITB9LGUubWVjaGFuaXNtPXsuLi5lLm1lY2hhbmlzbSx0eXBlOlwiY2hhaW5lZFwiLHNvdXJjZTp0LGV4Y2VwdGlvbl9pZDpuLHBhcmVudF9pZDpyfX1mdW5jdGlvbiB3ZShlKXtyZXR1cm4gdm9pZCAwPT09ZT92b2lkIDA6ZT49NDAwJiZlPDUwMD9cIndhcm5pbmdcIjplPj01MDA/XCJlcnJvclwiOnZvaWQgMH1jb25zdCBTZT1cIjguMzMuMVwiLGtlPWdsb2JhbFRoaXM7ZnVuY3Rpb24gTWUoZSx0LG4pe2NvbnN0IHI9bnx8a2UsaT1yLl9fU0VOVFJZX189ci5fX1NFTlRSWV9ffHx7fSxvPWlbU2VdPWlbU2VdfHx7fTtyZXR1cm4gb1tlXXx8KG9bZV09dCgpKX1jb25zdCBDZT1rZTtmdW5jdGlvbiBFZShlLHQ9e30pe2lmKCFlKXJldHVyblwiPHVua25vd24+XCI7dHJ5e2xldCBuPWU7Y29uc3Qgcj01LGk9W107bGV0IG89MCxhPTA7Y29uc3Qgcz1cIiA+IFwiLGM9cy5sZW5ndGg7bGV0IGw7Y29uc3QgdT1BcnJheS5pc0FycmF5KHQpP3Q6dC5rZXlBdHRycyxkPSFBcnJheS5pc0FycmF5KHQpJiZ0Lm1heFN0cmluZ0xlbmd0aHx8ODA7Zm9yKDtuJiZvKys8ciYmKGw9VGUobix1KSwhKFwiaHRtbFwiPT09bHx8bz4xJiZhK2kubGVuZ3RoKmMrbC5sZW5ndGg+PWQpKTspaS5wdXNoKGwpLGErPWwubGVuZ3RoLG49bi5wYXJlbnROb2RlO3JldHVybiBpLnJldmVyc2UoKS5qb2luKHMpfWNhdGNoKGUpe3JldHVyblwiPHVua25vd24+XCJ9fWZ1bmN0aW9uIFRlKGUsdCl7Y29uc3Qgbj1lLHI9W107aWYoIW58fCFuLnRhZ05hbWUpcmV0dXJuXCJcIjtpZihDZS5IVE1MRWxlbWVudCYmbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiZuLmRhdGFzZXQpe2lmKG4uZGF0YXNldC5zZW50cnlDb21wb25lbnQpcmV0dXJuIG4uZGF0YXNldC5zZW50cnlDb21wb25lbnQ7aWYobi5kYXRhc2V0LnNlbnRyeUVsZW1lbnQpcmV0dXJuIG4uZGF0YXNldC5zZW50cnlFbGVtZW50fXIucHVzaChuLnRhZ05hbWUudG9Mb3dlckNhc2UoKSk7Y29uc3QgaT10JiZ0Lmxlbmd0aD90LmZpbHRlcigoZT0+bi5nZXRBdHRyaWJ1dGUoZSkpKS5tYXAoKGU9PltlLG4uZ2V0QXR0cmlidXRlKGUpXSkpOm51bGw7aWYoaSYmaS5sZW5ndGgpaS5mb3JFYWNoKChlPT57ci5wdXNoKGBbJHtlWzBdfT1cIiR7ZVsxXX1cIl1gKX0pKTtlbHNle24uaWQmJnIucHVzaChgIyR7bi5pZH1gKTtjb25zdCBlPW4uY2xhc3NOYW1lO2lmKGUmJm9lKGUpKXtjb25zdCB0PWUuc3BsaXQoL1xccysvKTtmb3IoY29uc3QgZSBvZiB0KXIucHVzaChgLiR7ZX1gKX19Y29uc3Qgbz1bXCJhcmlhLWxhYmVsXCIsXCJ0eXBlXCIsXCJuYW1lXCIsXCJ0aXRsZVwiLFwiYWx0XCJdO2Zvcihjb25zdCBlIG9mIG8pe2NvbnN0IHQ9bi5nZXRBdHRyaWJ1dGUoZSk7dCYmci5wdXNoKGBbJHtlfT1cIiR7dH1cIl1gKX1yZXR1cm4gci5qb2luKFwiXCIpfWNvbnN0IFBlPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBfX1NFTlRSWV9ERUJVR19ffHxfX1NFTlRSWV9ERUJVR19fLE9lPVtcImRlYnVnXCIsXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiLFwibG9nXCIsXCJhc3NlcnRcIixcInRyYWNlXCJdLEFlPXt9O2Z1bmN0aW9uIGplKGUpe2lmKCEoXCJjb25zb2xlXCJpbiBrZSkpcmV0dXJuIGUoKTtjb25zdCB0PWtlLmNvbnNvbGUsbj17fSxyPU9iamVjdC5rZXlzKEFlKTtyLmZvckVhY2goKGU9Pntjb25zdCByPUFlW2VdO25bZV09dFtlXSx0W2VdPXJ9KSk7dHJ5e3JldHVybiBlKCl9ZmluYWxseXtyLmZvckVhY2goKGU9Pnt0W2VdPW5bZV19KSl9fWNvbnN0IHhlPU1lKFwibG9nZ2VyXCIsKGZ1bmN0aW9uKCl7bGV0IGU9ITE7Y29uc3QgdD17ZW5hYmxlOigpPT57ZT0hMH0sZGlzYWJsZTooKT0+e2U9ITF9LGlzRW5hYmxlZDooKT0+ZX07cmV0dXJuIFBlP09lLmZvckVhY2goKG49Pnt0W25dPSguLi50KT0+e2UmJmplKCgoKT0+e2tlLmNvbnNvbGVbbl0oYFNlbnRyeSBMb2dnZXIgWyR7bn1dOmAsLi4udCl9KSl9fSkpOk9lLmZvckVhY2goKGU9Pnt0W2VdPSgpPT57fX0pKSx0fSkpLExlPS9eKD86KFxcdyspOilcXC9cXC8oPzooXFx3KykoPzo6KFxcdyspPyk/QCkoW1xcdy4tXSspKD86OihcXGQrKSk/XFwvKC4rKS87ZnVuY3Rpb24gSWUoZSx0PSExKXtjb25zdHtob3N0Om4scGF0aDpyLHBhc3M6aSxwb3J0Om8scHJvamVjdElkOmEscHJvdG9jb2w6cyxwdWJsaWNLZXk6Y309ZTtyZXR1cm5gJHtzfTovLyR7Y30ke3QmJmk/YDoke2l9YDpcIlwifUAke259JHtvP2A6JHtvfWA6XCJcIn0vJHtyP2Ake3J9L2A6cn0ke2F9YH1mdW5jdGlvbiBEZShlKXtyZXR1cm57cHJvdG9jb2w6ZS5wcm90b2NvbCxwdWJsaWNLZXk6ZS5wdWJsaWNLZXl8fFwiXCIscGFzczplLnBhc3N8fFwiXCIsaG9zdDplLmhvc3QscG9ydDplLnBvcnR8fFwiXCIscGF0aDplLnBhdGh8fFwiXCIscHJvamVjdElkOmUucHJvamVjdElkfX1mdW5jdGlvbiBOZShlKXtjb25zdCB0PVwic3RyaW5nXCI9PXR5cGVvZiBlP2Z1bmN0aW9uKGUpe2NvbnN0IHQ9TGUuZXhlYyhlKTtpZighdClyZXR1cm4gdm9pZCBqZSgoKCk9Pntjb25zb2xlLmVycm9yKGBJbnZhbGlkIFNlbnRyeSBEc246ICR7ZX1gKX0pKTtjb25zdFtuLHIsaT1cIlwiLG89XCJcIixhPVwiXCIscz1cIlwiXT10LnNsaWNlKDEpO2xldCBjPVwiXCIsbD1zO2NvbnN0IHU9bC5zcGxpdChcIi9cIik7aWYodS5sZW5ndGg+MSYmKGM9dS5zbGljZSgwLC0xKS5qb2luKFwiL1wiKSxsPXUucG9wKCkpLGwpe2NvbnN0IGU9bC5tYXRjaCgvXlxcZCsvKTtlJiYobD1lWzBdKX1yZXR1cm4gRGUoe2hvc3Q6byxwYXNzOmkscGF0aDpjLHByb2plY3RJZDpsLHBvcnQ6YSxwcm90b2NvbDpuLHB1YmxpY0tleTpyfSl9KGUpOkRlKGUpO2lmKHQmJmZ1bmN0aW9uKGUpe2lmKCFQZSlyZXR1cm4hMDtjb25zdHtwb3J0OnQscHJvamVjdElkOm4scHJvdG9jb2w6cn09ZTtyZXR1cm4hKFtcInByb3RvY29sXCIsXCJwdWJsaWNLZXlcIixcImhvc3RcIixcInByb2plY3RJZFwiXS5maW5kKCh0PT4hZVt0XSYmKHhlLmVycm9yKGBJbnZhbGlkIFNlbnRyeSBEc246ICR7dH0gbWlzc2luZ2ApLCEwKSkpfHwobi5tYXRjaCgvXlxcZCskLyk/ZnVuY3Rpb24oZSl7cmV0dXJuXCJodHRwXCI9PT1lfHxcImh0dHBzXCI9PT1lfShyKT90JiZpc05hTihwYXJzZUludCh0LDEwKSkmJih4ZS5lcnJvcihgSW52YWxpZCBTZW50cnkgRHNuOiBJbnZhbGlkIHBvcnQgJHt0fWApLDEpOih4ZS5lcnJvcihgSW52YWxpZCBTZW50cnkgRHNuOiBJbnZhbGlkIHByb3RvY29sICR7cn1gKSwxKTooeGUuZXJyb3IoYEludmFsaWQgU2VudHJ5IERzbjogSW52YWxpZCBwcm9qZWN0SWQgJHtufWApLDEpKSl9KHQpKXJldHVybiB0fWNsYXNzIFJlIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSx0PVwid2FyblwiKXtzdXBlcihlKSx0aGlzLm1lc3NhZ2U9ZSx0aGlzLm5hbWU9bmV3LnRhcmdldC5wcm90b3R5cGUuY29uc3RydWN0b3IubmFtZSxPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxuZXcudGFyZ2V0LnByb3RvdHlwZSksdGhpcy5sb2dMZXZlbD10fX1mdW5jdGlvbiBGZShlLHQsbil7aWYoISh0IGluIGUpKXJldHVybjtjb25zdCByPWVbdF0saT1uKHIpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGkmJlVlKGksciksZVt0XT1pfWZ1bmN0aW9uIEJlKGUsdCxuKXt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1jYXRjaChuKXtQZSYmeGUubG9nKGBGYWlsZWQgdG8gYWRkIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IFwiJHt0fVwiIHRvIG9iamVjdGAsZSl9fWZ1bmN0aW9uIFVlKGUsdCl7dHJ5e2NvbnN0IG49dC5wcm90b3R5cGV8fHt9O2UucHJvdG90eXBlPXQucHJvdG90eXBlPW4sQmUoZSxcIl9fc2VudHJ5X29yaWdpbmFsX19cIix0KX1jYXRjaChlKXt9fWZ1bmN0aW9uIFZlKGUpe3JldHVybiBlLl9fc2VudHJ5X29yaWdpbmFsX199ZnVuY3Rpb24gSmUoZSl7aWYodGUoZSkpcmV0dXJue21lc3NhZ2U6ZS5tZXNzYWdlLG5hbWU6ZS5uYW1lLHN0YWNrOmUuc3RhY2ssLi4ucWUoZSl9O2lmKGxlKGUpKXtjb25zdCB0PXt0eXBlOmUudHlwZSx0YXJnZXQ6JGUoZS50YXJnZXQpLGN1cnJlbnRUYXJnZXQ6JGUoZS5jdXJyZW50VGFyZ2V0KSwuLi5xZShlKX07cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEN1c3RvbUV2ZW50JiZkZShlLEN1c3RvbUV2ZW50KSYmKHQuZGV0YWlsPWUuZGV0YWlsKSx0fXJldHVybiBlfWZ1bmN0aW9uICRlKGUpe3RyeXtyZXR1cm4gdD1lLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBFbGVtZW50JiZkZSh0LEVsZW1lbnQpP0VlKGUpOk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1jYXRjaChlKXtyZXR1cm5cIjx1bmtub3duPlwifXZhciB0fWZ1bmN0aW9uIHFlKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSl7Y29uc3QgdD17fTtmb3IoY29uc3QgbiBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiYodFtuXT1lW25dKTtyZXR1cm4gdH1yZXR1cm57fX1mdW5jdGlvbiBXZShlKXtyZXR1cm4gemUoZSxuZXcgTWFwKX1mdW5jdGlvbiB6ZShlLHQpe2lmKGZ1bmN0aW9uKGUpe2lmKCFjZShlKSlyZXR1cm4hMTt0cnl7Y29uc3QgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkuY29uc3RydWN0b3IubmFtZTtyZXR1cm4hdHx8XCJPYmplY3RcIj09PXR9Y2F0Y2goZSl7cmV0dXJuITB9fShlKSl7Y29uc3Qgbj10LmdldChlKTtpZih2b2lkIDAhPT1uKXJldHVybiBuO2NvbnN0IHI9e307dC5zZXQoZSxyKTtmb3IoY29uc3QgbiBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSl2b2lkIDAhPT1lW25dJiYocltuXT16ZShlW25dLHQpKTtyZXR1cm4gcn1pZihBcnJheS5pc0FycmF5KGUpKXtjb25zdCBuPXQuZ2V0KGUpO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG47Y29uc3Qgcj1bXTtyZXR1cm4gdC5zZXQoZSxyKSxlLmZvckVhY2goKGU9PntyLnB1c2goemUoZSx0KSl9KSkscn1yZXR1cm4gZX1jb25zdCBIZT1cIj9cIixHZT0vXFwoZXJyb3I6ICguKilcXCkvLFFlPS9jYXB0dXJlTWVzc2FnZXxjYXB0dXJlRXhjZXB0aW9uLztmdW5jdGlvbiBLZShlKXtyZXR1cm4gZVtlLmxlbmd0aC0xXXx8e319Y29uc3QgWWU9XCI8YW5vbnltb3VzPlwiO2Z1bmN0aW9uIFhlKGUpe3RyeXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5uYW1lfHxZZX1jYXRjaChlKXtyZXR1cm4gWWV9fWZ1bmN0aW9uIFplKGUpe2NvbnN0IHQ9ZS5leGNlcHRpb247aWYodCl7Y29uc3QgZT1bXTt0cnl7cmV0dXJuIHQudmFsdWVzLmZvckVhY2goKHQ9Pnt0LnN0YWNrdHJhY2UuZnJhbWVzJiZlLnB1c2goLi4udC5zdGFja3RyYWNlLmZyYW1lcyl9KSksZX1jYXRjaChlKXtyZXR1cm59fX1jb25zdCBldD17fSx0dD17fTtmdW5jdGlvbiBudChlLHQpe2V0W2VdPWV0W2VdfHxbXSxldFtlXS5wdXNoKHQpfWZ1bmN0aW9uIHJ0KGUsdCl7dHRbZV18fCh0KCksdHRbZV09ITApfWZ1bmN0aW9uIGl0KGUsdCl7Y29uc3Qgbj1lJiZldFtlXTtpZihuKWZvcihjb25zdCByIG9mIG4pdHJ5e3IodCl9Y2F0Y2godCl7UGUmJnhlLmVycm9yKGBFcnJvciB3aGlsZSB0cmlnZ2VyaW5nIGluc3RydW1lbnRhdGlvbiBoYW5kbGVyLlxcblR5cGU6ICR7ZX1cXG5OYW1lOiAke1hlKHIpfVxcbkVycm9yOmAsdCl9fWZ1bmN0aW9uIG90KCl7XCJjb25zb2xlXCJpbiBrZSYmT2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSBpbiBrZS5jb25zb2xlJiZGZShrZS5jb25zb2xlLGUsKGZ1bmN0aW9uKHQpe3JldHVybiBBZVtlXT10LGZ1bmN0aW9uKC4uLnQpe2l0KFwiY29uc29sZVwiLHthcmdzOnQsbGV2ZWw6ZX0pO2NvbnN0IG49QWVbZV07biYmbi5hcHBseShrZS5jb25zb2xlLHQpfX0pKX0pKX1jb25zdCBhdD1rZTtmdW5jdGlvbiBzdChlKXtyZXR1cm4gZSYmL15mdW5jdGlvblxccytcXHcrXFwoXFwpXFxzK1xce1xccytcXFtuYXRpdmUgY29kZVxcXVxccytcXH0kLy50ZXN0KGUudG9TdHJpbmcoKSl9ZnVuY3Rpb24gY3QoKXtpZihcInN0cmluZ1wiPT10eXBlb2YgRWRnZVJ1bnRpbWUpcmV0dXJuITA7aWYoIWZ1bmN0aW9uKCl7aWYoIShcImZldGNoXCJpbiBhdCkpcmV0dXJuITE7dHJ5e3JldHVybiBuZXcgSGVhZGVycyxuZXcgUmVxdWVzdChcImh0dHA6Ly93d3cuZXhhbXBsZS5jb21cIiksbmV3IFJlc3BvbnNlLCEwfWNhdGNoKGUpe3JldHVybiExfX0oKSlyZXR1cm4hMTtpZihzdChhdC5mZXRjaCkpcmV0dXJuITA7bGV0IGU9ITE7Y29uc3QgdD1hdC5kb2N1bWVudDtpZih0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNyZWF0ZUVsZW1lbnQpdHJ5e2NvbnN0IG49dC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO24uaGlkZGVuPSEwLHQuaGVhZC5hcHBlbmRDaGlsZChuKSxuLmNvbnRlbnRXaW5kb3cmJm4uY29udGVudFdpbmRvdy5mZXRjaCYmKGU9c3Qobi5jb250ZW50V2luZG93LmZldGNoKSksdC5oZWFkLnJlbW92ZUNoaWxkKG4pfWNhdGNoKGUpe1BlJiZ4ZS53YXJuKFwiQ291bGQgbm90IGNyZWF0ZSBzYW5kYm94IGlmcmFtZSBmb3IgcHVyZSBmZXRjaCBjaGVjaywgYmFpbGluZyB0byB3aW5kb3cuZmV0Y2g6IFwiLGUpfXJldHVybiBlfWZ1bmN0aW9uIGx0KCl7cmV0dXJuIERhdGUubm93KCkvMWUzfWNvbnN0IHV0PWZ1bmN0aW9uKCl7Y29uc3R7cGVyZm9ybWFuY2U6ZX09a2U7aWYoIWV8fCFlLm5vdylyZXR1cm4gbHQ7Y29uc3QgdD1EYXRlLm5vdygpLWUubm93KCksbj1udWxsPT1lLnRpbWVPcmlnaW4/dDplLnRpbWVPcmlnaW47cmV0dXJuKCk9PihuK2Uubm93KCkpLzFlM30oKTtmdW5jdGlvbiBkdChlLHQpe2NvbnN0IG49XCJmZXRjaFwiO250KG4sZSkscnQobiwoKCk9PmZ1bmN0aW9uKGUsdD0hMSl7aWYodCYmIWN0KCkpcmV0dXJuO0ZlKGtlLFwiZmV0Y2hcIiwoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKC4uLm4pe2NvbnN0e21ldGhvZDpyLHVybDppfT1mdW5jdGlvbihlKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJue21ldGhvZDpcIkdFVFwiLHVybDpcIlwifTtpZigyPT09ZS5sZW5ndGgpe2NvbnN0W3Qsbl09ZTtyZXR1cm57dXJsOmh0KHQpLG1ldGhvZDpwdChuLFwibWV0aG9kXCIpP1N0cmluZyhuLm1ldGhvZCkudG9VcHBlckNhc2UoKTpcIkdFVFwifX1jb25zdCB0PWVbMF07cmV0dXJue3VybDpodCh0KSxtZXRob2Q6cHQodCxcIm1ldGhvZFwiKT9TdHJpbmcodC5tZXRob2QpLnRvVXBwZXJDYXNlKCk6XCJHRVRcIn19KG4pLG89e2FyZ3M6bixmZXRjaERhdGE6e21ldGhvZDpyLHVybDppfSxzdGFydFRpbWVzdGFtcDoxZTMqdXQoKX07ZXx8aXQoXCJmZXRjaFwiLHsuLi5vfSk7Y29uc3QgYT0obmV3IEVycm9yKS5zdGFjaztyZXR1cm4gdC5hcHBseShrZSxuKS50aGVuKChhc3luYyB0PT4oZT9lKHQpOml0KFwiZmV0Y2hcIix7Li4ubyxlbmRUaW1lc3RhbXA6MWUzKnV0KCkscmVzcG9uc2U6dH0pLHQpKSwoZT0+e3Rocm93IGl0KFwiZmV0Y2hcIix7Li4ubyxlbmRUaW1lc3RhbXA6MWUzKnV0KCksZXJyb3I6ZX0pLHRlKGUpJiZ2b2lkIDA9PT1lLnN0YWNrJiYoZS5zdGFjaz1hLEJlKGUsXCJmcmFtZXNUb1BvcFwiLDEpKSxlfSkpfX0pKX0odm9pZCAwLHQpKSl9ZnVuY3Rpb24gcHQoZSx0KXtyZXR1cm4hIWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiYhIWVbdF19ZnVuY3Rpb24gaHQoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplP3B0KGUsXCJ1cmxcIik/ZS51cmw6ZS50b1N0cmluZz9lLnRvU3RyaW5nKCk6XCJcIjpcIlwifSgoKT0+e2NvbnN0e3BlcmZvcm1hbmNlOmV9PWtlO2lmKCFlfHwhZS5ub3cpcmV0dXJuO2NvbnN0IHQ9MzZlNSxuPWUubm93KCkscj1EYXRlLm5vdygpLGk9ZS50aW1lT3JpZ2luP01hdGguYWJzKGUudGltZU9yaWdpbituLXIpOnQsbz1pPHQsYT1lLnRpbWluZyYmZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0LHM9XCJudW1iZXJcIj09dHlwZW9mIGE/TWF0aC5hYnMoYStuLXIpOnQ7KG98fHM8dCkmJihpPD1zJiZlLnRpbWVPcmlnaW4pfSkoKTtsZXQgZnQ9bnVsbDtmdW5jdGlvbiB2dCgpe2Z0PWtlLm9uZXJyb3Isa2Uub25lcnJvcj1mdW5jdGlvbihlLHQsbixyLGkpe3JldHVybiBpdChcImVycm9yXCIse2NvbHVtbjpyLGVycm9yOmksbGluZTpuLG1zZzplLHVybDp0fSksISghZnR8fGZ0Ll9fU0VOVFJZX0xPQURFUl9fKSYmZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxrZS5vbmVycm9yLl9fU0VOVFJZX0lOU1RSVU1FTlRFRF9fPSEwfWxldCBtdD1udWxsO2Z1bmN0aW9uIGd0KCl7bXQ9a2Uub251bmhhbmRsZWRyZWplY3Rpb24sa2Uub251bmhhbmRsZWRyZWplY3Rpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGl0KFwidW5oYW5kbGVkcmVqZWN0aW9uXCIsZSksIShtdCYmIW10Ll9fU0VOVFJZX0xPQURFUl9fKXx8bXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxrZS5vbnVuaGFuZGxlZHJlamVjdGlvbi5fX1NFTlRSWV9JTlNUUlVNRU5URURfXz0hMH1mdW5jdGlvbiB5dCgpe2NvbnN0IGU9a2UsdD1lLmNyeXB0b3x8ZS5tc0NyeXB0bztsZXQgbj0oKT0+MTYqTWF0aC5yYW5kb20oKTt0cnl7aWYodCYmdC5yYW5kb21VVUlEKXJldHVybiB0LnJhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csXCJcIik7dCYmdC5nZXRSYW5kb21WYWx1ZXMmJihuPSgpPT57Y29uc3QgZT1uZXcgVWludDhBcnJheSgxKTtyZXR1cm4gdC5nZXRSYW5kb21WYWx1ZXMoZSksZVswXX0pfWNhdGNoKGUpe31yZXR1cm4oWzFlN10rMWUzKzRlMys4ZTMrMWUxMSkucmVwbGFjZSgvWzAxOF0vZywoZT0+KGVeKDE1Jm4oKSk+PmUvNCkudG9TdHJpbmcoMTYpKSl9ZnVuY3Rpb24gX3QoZSl7cmV0dXJuIGUuZXhjZXB0aW9uJiZlLmV4Y2VwdGlvbi52YWx1ZXM/ZS5leGNlcHRpb24udmFsdWVzWzBdOnZvaWQgMH1mdW5jdGlvbiBidChlKXtjb25zdHttZXNzYWdlOnQsZXZlbnRfaWQ6bn09ZTtpZih0KXJldHVybiB0O2NvbnN0IHI9X3QoZSk7cmV0dXJuIHI/ci50eXBlJiZyLnZhbHVlP2Ake3IudHlwZX06ICR7ci52YWx1ZX1gOnIudHlwZXx8ci52YWx1ZXx8bnx8XCI8dW5rbm93bj5cIjpufHxcIjx1bmtub3duPlwifWZ1bmN0aW9uIHd0KGUsdCxuKXtjb25zdCByPWUuZXhjZXB0aW9uPWUuZXhjZXB0aW9ufHx7fSxpPXIudmFsdWVzPXIudmFsdWVzfHxbXSxvPWlbMF09aVswXXx8e307by52YWx1ZXx8KG8udmFsdWU9dHx8XCJcIiksby50eXBlfHwoby50eXBlPW58fFwiRXJyb3JcIil9ZnVuY3Rpb24gU3QoZSx0KXtjb25zdCBuPV90KGUpO2lmKCFuKXJldHVybjtjb25zdCByPW4ubWVjaGFuaXNtO2lmKG4ubWVjaGFuaXNtPXt0eXBlOlwiZ2VuZXJpY1wiLGhhbmRsZWQ6ITAsLi4uciwuLi50fSx0JiZcImRhdGFcImluIHQpe2NvbnN0IGU9ey4uLnImJnIuZGF0YSwuLi50LmRhdGF9O24ubWVjaGFuaXNtLmRhdGE9ZX19ZnVuY3Rpb24ga3QoZSl7aWYoZSYmZS5fX3NlbnRyeV9jYXB0dXJlZF9fKXJldHVybiEwO3RyeXtCZShlLFwiX19zZW50cnlfY2FwdHVyZWRfX1wiLCEwKX1jYXRjaChlKXt9cmV0dXJuITF9ZnVuY3Rpb24gTXQoZSx0PTEwMCxuPTEvMCl7dHJ5e3JldHVybiBFdChcIlwiLGUsdCxuKX1jYXRjaChlKXtyZXR1cm57RVJST1I6YCoqbm9uLXNlcmlhbGl6YWJsZSoqICgke2V9KWB9fX1mdW5jdGlvbiBDdChlLHQ9MyxuPTEwMjQwMCl7Y29uc3Qgcj1NdChlLHQpO3JldHVybiBpPXIsZnVuY3Rpb24oZSl7cmV0dXJufi1lbmNvZGVVUkkoZSkuc3BsaXQoLyUuLnwuLykubGVuZ3RofShKU09OLnN0cmluZ2lmeShpKSk+bj9DdChlLHQtMSxuKTpyO3ZhciBpfWZ1bmN0aW9uIEV0KGUsdCxuPTEvMCxyPTEvMCxpPWZ1bmN0aW9uKCl7Y29uc3QgZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBXZWFrU2V0LHQ9ZT9uZXcgV2Vha1NldDpbXTtyZXR1cm5bZnVuY3Rpb24obil7aWYoZSlyZXR1cm4hIXQuaGFzKG4pfHwodC5hZGQobiksITEpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV09PT1uKXJldHVybiEwO3JldHVybiB0LnB1c2gobiksITF9LGZ1bmN0aW9uKG4pe2lmKGUpdC5kZWxldGUobik7ZWxzZSBmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdPT09bil7dC5zcGxpY2UoZSwxKTticmVha319XX0oKSl7Y29uc3RbbyxhXT1pO2lmKG51bGw9PXR8fFtcImJvb2xlYW5cIixcInN0cmluZ1wiXS5pbmNsdWRlcyh0eXBlb2YgdCl8fFwibnVtYmVyXCI9PXR5cGVvZiB0JiZOdW1iZXIuaXNGaW5pdGUodCkpcmV0dXJuIHQ7Y29uc3Qgcz1mdW5jdGlvbihlLHQpe3RyeXtpZihcImRvbWFpblwiPT09ZSYmdCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQuX2V2ZW50cylyZXR1cm5cIltEb21haW5dXCI7aWYoXCJkb21haW5FbWl0dGVyXCI9PT1lKXJldHVyblwiW0RvbWFpbkVtaXR0ZXJdXCI7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmdD09PWdsb2JhbClyZXR1cm5cIltHbG9iYWxdXCI7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmdD09PXdpbmRvdylyZXR1cm5cIltXaW5kb3ddXCI7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50JiZ0PT09ZG9jdW1lbnQpcmV0dXJuXCJbRG9jdW1lbnRdXCI7aWYocGUodCkpcmV0dXJuXCJbVnVlVmlld01vZGVsXVwiO2lmKGNlKG49dCkmJlwibmF0aXZlRXZlbnRcImluIG4mJlwicHJldmVudERlZmF1bHRcImluIG4mJlwic3RvcFByb3BhZ2F0aW9uXCJpbiBuKXJldHVyblwiW1N5bnRoZXRpY0V2ZW50XVwiO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0JiYhTnVtYmVyLmlzRmluaXRlKHQpKXJldHVybmBbJHt0fV1gO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQpcmV0dXJuYFtGdW5jdGlvbjogJHtYZSh0KX1dYDtpZihcInN5bWJvbFwiPT10eXBlb2YgdClyZXR1cm5gWyR7U3RyaW5nKHQpfV1gO2lmKFwiYmlnaW50XCI9PXR5cGVvZiB0KXJldHVybmBbQmlnSW50OiAke1N0cmluZyh0KX1dYDtjb25zdCByPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiB0P3QuY29uc3RydWN0b3IubmFtZTpcIm51bGwgcHJvdG90eXBlXCJ9KHQpO3JldHVybi9eSFRNTChcXHcqKUVsZW1lbnQkLy50ZXN0KHIpP2BbSFRNTEVsZW1lbnQ6ICR7cn1dYDpgW29iamVjdCAke3J9XWB9Y2F0Y2goZSl7cmV0dXJuYCoqbm9uLXNlcmlhbGl6YWJsZSoqICgke2V9KWB9dmFyIG59KGUsdCk7aWYoIXMuc3RhcnRzV2l0aChcIltvYmplY3QgXCIpKXJldHVybiBzO2lmKHQuX19zZW50cnlfc2tpcF9ub3JtYWxpemF0aW9uX18pcmV0dXJuIHQ7Y29uc3QgYz1cIm51bWJlclwiPT10eXBlb2YgdC5fX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX18/dC5fX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX186bjtpZigwPT09YylyZXR1cm4gcy5yZXBsYWNlKFwib2JqZWN0IFwiLFwiXCIpO2lmKG8odCkpcmV0dXJuXCJbQ2lyY3VsYXIgfl1cIjtjb25zdCBsPXQ7aWYobCYmXCJmdW5jdGlvblwiPT10eXBlb2YgbC50b0pTT04pdHJ5e3JldHVybiBFdChcIlwiLGwudG9KU09OKCksYy0xLHIsaSl9Y2F0Y2goZSl7fWNvbnN0IHU9QXJyYXkuaXNBcnJheSh0KT9bXTp7fTtsZXQgZD0wO2NvbnN0IHA9SmUodCk7Zm9yKGNvbnN0IGUgaW4gcCl7aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwLGUpKWNvbnRpbnVlO2lmKGQ+PXIpe3VbZV09XCJbTWF4UHJvcGVydGllcyB+XVwiO2JyZWFrfWNvbnN0IHQ9cFtlXTt1W2VdPUV0KGUsdCxjLTEscixpKSxkKyt9cmV0dXJuIGEodCksdX12YXIgVHQ7ZnVuY3Rpb24gUHQoZSl7cmV0dXJuIG5ldyBBdCgodD0+e3QoZSl9KSl9ZnVuY3Rpb24gT3QoZSl7cmV0dXJuIG5ldyBBdCgoKHQsbik9PntuKGUpfSkpfSFmdW5jdGlvbihlKXtlW2UuUEVORElORz0wXT1cIlBFTkRJTkdcIjtlW2UuUkVTT0xWRUQ9MV09XCJSRVNPTFZFRFwiO2VbZS5SRUpFQ1RFRD0yXT1cIlJFSkVDVEVEXCJ9KFR0fHwoVHQ9e30pKTtjbGFzcyBBdHtjb25zdHJ1Y3RvcihlKXtBdC5wcm90b3R5cGUuX19pbml0LmNhbGwodGhpcyksQXQucHJvdG90eXBlLl9faW5pdDIuY2FsbCh0aGlzKSxBdC5wcm90b3R5cGUuX19pbml0My5jYWxsKHRoaXMpLEF0LnByb3RvdHlwZS5fX2luaXQ0LmNhbGwodGhpcyksdGhpcy5fc3RhdGU9VHQuUEVORElORyx0aGlzLl9oYW5kbGVycz1bXTt0cnl7ZSh0aGlzLl9yZXNvbHZlLHRoaXMuX3JlamVjdCl9Y2F0Y2goZSl7dGhpcy5fcmVqZWN0KGUpfX10aGVuKGUsdCl7cmV0dXJuIG5ldyBBdCgoKG4scik9Pnt0aGlzLl9oYW5kbGVycy5wdXNoKFshMSx0PT57aWYoZSl0cnl7bihlKHQpKX1jYXRjaChlKXtyKGUpfWVsc2Ugbih0KX0sZT0+e2lmKHQpdHJ5e24odChlKSl9Y2F0Y2goZSl7cihlKX1lbHNlIHIoZSl9XSksdGhpcy5fZXhlY3V0ZUhhbmRsZXJzKCl9KSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMudGhlbigoZT0+ZSksZSl9ZmluYWxseShlKXtyZXR1cm4gbmV3IEF0KCgodCxuKT0+e2xldCByLGk7cmV0dXJuIHRoaXMudGhlbigodD0+e2k9ITEscj10LGUmJmUoKX0pLCh0PT57aT0hMCxyPXQsZSYmZSgpfSkpLnRoZW4oKCgpPT57aT9uKHIpOnQocil9KSl9KSl9X19pbml0KCl7dGhpcy5fcmVzb2x2ZT1lPT57dGhpcy5fc2V0UmVzdWx0KFR0LlJFU09MVkVELGUpfX1fX2luaXQyKCl7dGhpcy5fcmVqZWN0PWU9Pnt0aGlzLl9zZXRSZXN1bHQoVHQuUkVKRUNURUQsZSl9fV9faW5pdDMoKXt0aGlzLl9zZXRSZXN1bHQ9KGUsdCk9Pnt0aGlzLl9zdGF0ZT09PVR0LlBFTkRJTkcmJih1ZSh0KT90LnRoZW4odGhpcy5fcmVzb2x2ZSx0aGlzLl9yZWplY3QpOih0aGlzLl9zdGF0ZT1lLHRoaXMuX3ZhbHVlPXQsdGhpcy5fZXhlY3V0ZUhhbmRsZXJzKCkpKX19X19pbml0NCgpe3RoaXMuX2V4ZWN1dGVIYW5kbGVycz0oKT0+e2lmKHRoaXMuX3N0YXRlPT09VHQuUEVORElORylyZXR1cm47Y29uc3QgZT10aGlzLl9oYW5kbGVycy5zbGljZSgpO3RoaXMuX2hhbmRsZXJzPVtdLGUuZm9yRWFjaCgoZT0+e2VbMF18fCh0aGlzLl9zdGF0ZT09PVR0LlJFU09MVkVEJiZlWzFdKHRoaXMuX3ZhbHVlKSx0aGlzLl9zdGF0ZT09PVR0LlJFSkVDVEVEJiZlWzJdKHRoaXMuX3ZhbHVlKSxlWzBdPSEwKX0pKX19fWZ1bmN0aW9uIGp0KGUpe2NvbnN0IHQ9W107ZnVuY3Rpb24gbihlKXtyZXR1cm4gdC5zcGxpY2UodC5pbmRleE9mKGUpLDEpWzBdfHxQcm9taXNlLnJlc29sdmUodm9pZCAwKX1yZXR1cm57JDp0LGFkZDpmdW5jdGlvbihyKXtpZighKHZvaWQgMD09PWV8fHQubGVuZ3RoPGUpKXJldHVybiBPdChuZXcgUmUoXCJOb3QgYWRkaW5nIFByb21pc2UgYmVjYXVzZSBidWZmZXIgbGltaXQgd2FzIHJlYWNoZWQuXCIpKTtjb25zdCBpPXIoKTtyZXR1cm4tMT09PXQuaW5kZXhPZihpKSYmdC5wdXNoKGkpLGkudGhlbigoKCk9Pm4oaSkpKS50aGVuKG51bGwsKCgpPT5uKGkpLnRoZW4obnVsbCwoKCk9Pnt9KSkpKSxpfSxkcmFpbjpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IEF0KCgobixyKT0+e2xldCBpPXQubGVuZ3RoO2lmKCFpKXJldHVybiBuKCEwKTtjb25zdCBvPXNldFRpbWVvdXQoKCgpPT57ZSYmZT4wJiZuKCExKX0pLGUpO3QuZm9yRWFjaCgoZT0+e1B0KGUpLnRoZW4oKCgpPT57LS1pfHwoY2xlYXJUaW1lb3V0KG8pLG4oITApKX0pLHIpfSkpfSkpfX19ZnVuY3Rpb24geHQoZSl7aWYoIWUpcmV0dXJue307Y29uc3QgdD1lLm1hdGNoKC9eKChbXjovPyNdKyk6KT8oXFwvXFwvKFteLz8jXSopKT8oW14/I10qKShcXD8oW14jXSopKT8oIyguKikpPyQvKTtpZighdClyZXR1cm57fTtjb25zdCBuPXRbNl18fFwiXCIscj10WzhdfHxcIlwiO3JldHVybntob3N0OnRbNF0scGF0aDp0WzVdLHByb3RvY29sOnRbMl0sc2VhcmNoOm4saGFzaDpyLHJlbGF0aXZlOnRbNV0rbityfX1jb25zdCBMdD1bXCJmYXRhbFwiLFwiZXJyb3JcIixcIndhcm5pbmdcIixcImxvZ1wiLFwiaW5mb1wiLFwiZGVidWdcIl07ZnVuY3Rpb24gSXQoZSl7cmV0dXJuXCJ3YXJuXCI9PT1lP1wid2FybmluZ1wiOkx0LmluY2x1ZGVzKGUpP2U6XCJsb2dcIn1jb25zdCBEdD0vXnNlbnRyeS0vO2Z1bmN0aW9uIE50KGUpe2NvbnN0IHQ9ZnVuY3Rpb24oZSl7aWYoIWV8fCFvZShlKSYmIUFycmF5LmlzQXJyYXkoZSkpcmV0dXJuO2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGUucmVkdWNlKCgoZSx0KT0+e2NvbnN0IG49UnQodCk7cmV0dXJuIE9iamVjdC5lbnRyaWVzKG4pLmZvckVhY2goKChbdCxuXSk9PntlW3RdPW59KSksZX0pLHt9KTtyZXR1cm4gUnQoZSl9KGUpO2lmKCF0KXJldHVybjtjb25zdCBuPU9iamVjdC5lbnRyaWVzKHQpLnJlZHVjZSgoKGUsW3Qsbl0pPT57aWYodC5tYXRjaChEdCkpe2VbdC5zbGljZSg3KV09bn1yZXR1cm4gZX0pLHt9KTtyZXR1cm4gT2JqZWN0LmtleXMobikubGVuZ3RoPjA/bjp2b2lkIDB9ZnVuY3Rpb24gUnQoZSl7cmV0dXJuIGUuc3BsaXQoXCIsXCIpLm1hcCgoZT0+ZS5zcGxpdChcIj1cIikubWFwKChlPT5kZWNvZGVVUklDb21wb25lbnQoZS50cmltKCkpKSkpKS5yZWR1Y2UoKChlLFt0LG5dKT0+KHQmJm4mJihlW3RdPW4pLGUpKSx7fSl9ZnVuY3Rpb24gRnQoZSx0PVtdKXtyZXR1cm5bZSx0XX1mdW5jdGlvbiBCdChlLHQpe2NvbnN0W24scl09ZTtyZXR1cm5bbixbLi4ucix0XV19ZnVuY3Rpb24gVXQoZSx0KXtjb25zdCBuPWVbMV07Zm9yKGNvbnN0IGUgb2Ygbil7aWYodChlLGVbMF0udHlwZSkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gVnQoZSl7cmV0dXJuIGtlLl9fU0VOVFJZX18mJmtlLl9fU0VOVFJZX18uZW5jb2RlUG9seWZpbGw/a2UuX19TRU5UUllfXy5lbmNvZGVQb2x5ZmlsbChlKToobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUoZSl9ZnVuY3Rpb24gSnQoZSl7Y29uc3RbdCxuXT1lO2xldCByPUpTT04uc3RyaW5naWZ5KHQpO2Z1bmN0aW9uIGkoZSl7XCJzdHJpbmdcIj09dHlwZW9mIHI/cj1cInN0cmluZ1wiPT10eXBlb2YgZT9yK2U6W1Z0KHIpLGVdOnIucHVzaChcInN0cmluZ1wiPT10eXBlb2YgZT9WdChlKTplKX1mb3IoY29uc3QgZSBvZiBuKXtjb25zdFt0LG5dPWU7aWYoaShgXFxuJHtKU09OLnN0cmluZ2lmeSh0KX1cXG5gKSxcInN0cmluZ1wiPT10eXBlb2Ygbnx8biBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpaShuKTtlbHNle2xldCBlO3RyeXtlPUpTT04uc3RyaW5naWZ5KG4pfWNhdGNoKHQpe2U9SlNPTi5zdHJpbmdpZnkoTXQobikpfWkoZSl9fXJldHVyblwic3RyaW5nXCI9PXR5cGVvZiByP3I6ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLnJlZHVjZSgoKGUsdCk9PmUrdC5sZW5ndGgpLDApLG49bmV3IFVpbnQ4QXJyYXkodCk7bGV0IHI9MDtmb3IoY29uc3QgdCBvZiBlKW4uc2V0KHQscikscis9dC5sZW5ndGg7cmV0dXJuIG59KHIpfWZ1bmN0aW9uICR0KGUpe2NvbnN0IHQ9XCJzdHJpbmdcIj09dHlwZW9mIGUuZGF0YT9WdChlLmRhdGEpOmUuZGF0YTtyZXR1cm5bV2Uoe3R5cGU6XCJhdHRhY2htZW50XCIsbGVuZ3RoOnQubGVuZ3RoLGZpbGVuYW1lOmUuZmlsZW5hbWUsY29udGVudF90eXBlOmUuY29udGVudFR5cGUsYXR0YWNobWVudF90eXBlOmUuYXR0YWNobWVudFR5cGV9KSx0XX1jb25zdCBxdD17c2Vzc2lvbjpcInNlc3Npb25cIixzZXNzaW9uczpcInNlc3Npb25cIixhdHRhY2htZW50OlwiYXR0YWNobWVudFwiLHRyYW5zYWN0aW9uOlwidHJhbnNhY3Rpb25cIixldmVudDpcImVycm9yXCIsY2xpZW50X3JlcG9ydDpcImludGVybmFsXCIsdXNlcl9yZXBvcnQ6XCJkZWZhdWx0XCIscHJvZmlsZTpcInByb2ZpbGVcIixwcm9maWxlX2NodW5rOlwicHJvZmlsZVwiLHJlcGxheV9ldmVudDpcInJlcGxheVwiLHJlcGxheV9yZWNvcmRpbmc6XCJyZXBsYXlcIixjaGVja19pbjpcIm1vbml0b3JcIixmZWVkYmFjazpcImZlZWRiYWNrXCIsc3BhbjpcInNwYW5cIixzdGF0c2Q6XCJtZXRyaWNfYnVja2V0XCJ9O2Z1bmN0aW9uIFd0KGUpe3JldHVybiBxdFtlXX1mdW5jdGlvbiB6dChlKXtpZighZXx8IWUuc2RrKXJldHVybjtjb25zdHtuYW1lOnQsdmVyc2lvbjpufT1lLnNkaztyZXR1cm57bmFtZTp0LHZlcnNpb246bn19ZnVuY3Rpb24gSHQoZSx7c3RhdHVzQ29kZTp0LGhlYWRlcnM6bn0scj1EYXRlLm5vdygpKXtjb25zdCBpPXsuLi5lfSxvPW4mJm5bXCJ4LXNlbnRyeS1yYXRlLWxpbWl0c1wiXSxhPW4mJm5bXCJyZXRyeS1hZnRlclwiXTtpZihvKWZvcihjb25zdCBlIG9mIG8udHJpbSgpLnNwbGl0KFwiLFwiKSl7Y29uc3RbdCxuLCwsb109ZS5zcGxpdChcIjpcIiw1KSxhPXBhcnNlSW50KHQsMTApLHM9MWUzKihpc05hTihhKT82MDphKTtpZihuKWZvcihjb25zdCBlIG9mIG4uc3BsaXQoXCI7XCIpKVwibWV0cmljX2J1Y2tldFwiPT09ZSYmbyYmIW8uc3BsaXQoXCI7XCIpLmluY2x1ZGVzKFwiY3VzdG9tXCIpfHwoaVtlXT1yK3MpO2Vsc2UgaS5hbGw9citzfWVsc2UgYT9pLmFsbD1yK2Z1bmN0aW9uKGUsdD1EYXRlLm5vdygpKXtjb25zdCBuPXBhcnNlSW50KGAke2V9YCwxMCk7aWYoIWlzTmFOKG4pKXJldHVybiAxZTMqbjtjb25zdCByPURhdGUucGFyc2UoYCR7ZX1gKTtyZXR1cm4gaXNOYU4ocik/NmU0OnItdH0oYSxyKTo0Mjk9PT10JiYoaS5hbGw9cis2ZTQpO3JldHVybiBpfWZ1bmN0aW9uIEd0KCl7cmV0dXJue3RyYWNlSWQ6eXQoKSxzcGFuSWQ6eXQoKS5zdWJzdHJpbmcoMTYpfX1jb25zdCBRdD1rZTtjb25zdCBLdD1cInVuZGVmaW5lZFwiPT10eXBlb2YgX19TRU5UUllfREVCVUdfX3x8X19TRU5UUllfREVCVUdfXztmdW5jdGlvbiBZdCgpe3JldHVybiBYdChrZSksa2V9ZnVuY3Rpb24gWHQoZSl7Y29uc3QgdD1lLl9fU0VOVFJZX189ZS5fX1NFTlRSWV9ffHx7fTtyZXR1cm4gdC52ZXJzaW9uPXQudmVyc2lvbnx8U2UsdFtTZV09dFtTZV18fHt9fWZ1bmN0aW9uIFp0KGUsdD17fSl7aWYodC51c2VyJiYoIWUuaXBBZGRyZXNzJiZ0LnVzZXIuaXBfYWRkcmVzcyYmKGUuaXBBZGRyZXNzPXQudXNlci5pcF9hZGRyZXNzKSxlLmRpZHx8dC5kaWR8fChlLmRpZD10LnVzZXIuaWR8fHQudXNlci5lbWFpbHx8dC51c2VyLnVzZXJuYW1lKSksZS50aW1lc3RhbXA9dC50aW1lc3RhbXB8fHV0KCksdC5hYm5vcm1hbF9tZWNoYW5pc20mJihlLmFibm9ybWFsX21lY2hhbmlzbT10LmFibm9ybWFsX21lY2hhbmlzbSksdC5pZ25vcmVEdXJhdGlvbiYmKGUuaWdub3JlRHVyYXRpb249dC5pZ25vcmVEdXJhdGlvbiksdC5zaWQmJihlLnNpZD0zMj09PXQuc2lkLmxlbmd0aD90LnNpZDp5dCgpKSx2b2lkIDAhPT10LmluaXQmJihlLmluaXQ9dC5pbml0KSwhZS5kaWQmJnQuZGlkJiYoZS5kaWQ9YCR7dC5kaWR9YCksXCJudW1iZXJcIj09dHlwZW9mIHQuc3RhcnRlZCYmKGUuc3RhcnRlZD10LnN0YXJ0ZWQpLGUuaWdub3JlRHVyYXRpb24pZS5kdXJhdGlvbj12b2lkIDA7ZWxzZSBpZihcIm51bWJlclwiPT10eXBlb2YgdC5kdXJhdGlvbillLmR1cmF0aW9uPXQuZHVyYXRpb247ZWxzZXtjb25zdCB0PWUudGltZXN0YW1wLWUuc3RhcnRlZDtlLmR1cmF0aW9uPXQ+PTA/dDowfXQucmVsZWFzZSYmKGUucmVsZWFzZT10LnJlbGVhc2UpLHQuZW52aXJvbm1lbnQmJihlLmVudmlyb25tZW50PXQuZW52aXJvbm1lbnQpLCFlLmlwQWRkcmVzcyYmdC5pcEFkZHJlc3MmJihlLmlwQWRkcmVzcz10LmlwQWRkcmVzcyksIWUudXNlckFnZW50JiZ0LnVzZXJBZ2VudCYmKGUudXNlckFnZW50PXQudXNlckFnZW50KSxcIm51bWJlclwiPT10eXBlb2YgdC5lcnJvcnMmJihlLmVycm9ycz10LmVycm9ycyksdC5zdGF0dXMmJihlLnN0YXR1cz10LnN0YXR1cyl9Y29uc3QgZW49XCJfc2VudHJ5U3BhblwiO2Z1bmN0aW9uIHRuKGUsdCl7dD9CZShlLGVuLHQpOmRlbGV0ZSBlW2VuXX1mdW5jdGlvbiBubihlKXtyZXR1cm4gZVtlbl19Y2xhc3Mgcm57Y29uc3RydWN0b3IoKXt0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnM9ITEsdGhpcy5fc2NvcGVMaXN0ZW5lcnM9W10sdGhpcy5fZXZlbnRQcm9jZXNzb3JzPVtdLHRoaXMuX2JyZWFkY3J1bWJzPVtdLHRoaXMuX2F0dGFjaG1lbnRzPVtdLHRoaXMuX3VzZXI9e30sdGhpcy5fdGFncz17fSx0aGlzLl9leHRyYT17fSx0aGlzLl9jb250ZXh0cz17fSx0aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGE9e30sdGhpcy5fcHJvcGFnYXRpb25Db250ZXh0PUd0KCl9Y2xvbmUoKXtjb25zdCBlPW5ldyBybjtyZXR1cm4gZS5fYnJlYWRjcnVtYnM9Wy4uLnRoaXMuX2JyZWFkY3J1bWJzXSxlLl90YWdzPXsuLi50aGlzLl90YWdzfSxlLl9leHRyYT17Li4udGhpcy5fZXh0cmF9LGUuX2NvbnRleHRzPXsuLi50aGlzLl9jb250ZXh0c30sZS5fdXNlcj10aGlzLl91c2VyLGUuX2xldmVsPXRoaXMuX2xldmVsLGUuX3Nlc3Npb249dGhpcy5fc2Vzc2lvbixlLl90cmFuc2FjdGlvbk5hbWU9dGhpcy5fdHJhbnNhY3Rpb25OYW1lLGUuX2ZpbmdlcnByaW50PXRoaXMuX2ZpbmdlcnByaW50LGUuX2V2ZW50UHJvY2Vzc29ycz1bLi4udGhpcy5fZXZlbnRQcm9jZXNzb3JzXSxlLl9yZXF1ZXN0U2Vzc2lvbj10aGlzLl9yZXF1ZXN0U2Vzc2lvbixlLl9hdHRhY2htZW50cz1bLi4udGhpcy5fYXR0YWNobWVudHNdLGUuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YT17Li4udGhpcy5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhfSxlLl9wcm9wYWdhdGlvbkNvbnRleHQ9ey4uLnRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dH0sZS5fY2xpZW50PXRoaXMuX2NsaWVudCxlLl9sYXN0RXZlbnRJZD10aGlzLl9sYXN0RXZlbnRJZCx0bihlLG5uKHRoaXMpKSxlfXNldENsaWVudChlKXt0aGlzLl9jbGllbnQ9ZX1zZXRMYXN0RXZlbnRJZChlKXt0aGlzLl9sYXN0RXZlbnRJZD1lfWdldENsaWVudCgpe3JldHVybiB0aGlzLl9jbGllbnR9bGFzdEV2ZW50SWQoKXtyZXR1cm4gdGhpcy5fbGFzdEV2ZW50SWR9YWRkU2NvcGVMaXN0ZW5lcihlKXt0aGlzLl9zY29wZUxpc3RlbmVycy5wdXNoKGUpfWFkZEV2ZW50UHJvY2Vzc29yKGUpe3JldHVybiB0aGlzLl9ldmVudFByb2Nlc3NvcnMucHVzaChlKSx0aGlzfXNldFVzZXIoZSl7cmV0dXJuIHRoaXMuX3VzZXI9ZXx8e2VtYWlsOnZvaWQgMCxpZDp2b2lkIDAsaXBfYWRkcmVzczp2b2lkIDAsdXNlcm5hbWU6dm9pZCAwfSx0aGlzLl9zZXNzaW9uJiZadCh0aGlzLl9zZXNzaW9uLHt1c2VyOmV9KSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9Z2V0VXNlcigpe3JldHVybiB0aGlzLl91c2VyfWdldFJlcXVlc3RTZXNzaW9uKCl7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZXNzaW9ufXNldFJlcXVlc3RTZXNzaW9uKGUpe3JldHVybiB0aGlzLl9yZXF1ZXN0U2Vzc2lvbj1lLHRoaXN9c2V0VGFncyhlKXtyZXR1cm4gdGhpcy5fdGFncz17Li4udGhpcy5fdGFncywuLi5lfSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9c2V0VGFnKGUsdCl7cmV0dXJuIHRoaXMuX3RhZ3M9ey4uLnRoaXMuX3RhZ3MsW2VdOnR9LHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksdGhpc31zZXRFeHRyYXMoZSl7cmV0dXJuIHRoaXMuX2V4dHJhPXsuLi50aGlzLl9leHRyYSwuLi5lfSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9c2V0RXh0cmEoZSx0KXtyZXR1cm4gdGhpcy5fZXh0cmE9ey4uLnRoaXMuX2V4dHJhLFtlXTp0fSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9c2V0RmluZ2VycHJpbnQoZSl7cmV0dXJuIHRoaXMuX2ZpbmdlcnByaW50PWUsdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSx0aGlzfXNldExldmVsKGUpe3JldHVybiB0aGlzLl9sZXZlbD1lLHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksdGhpc31zZXRUcmFuc2FjdGlvbk5hbWUoZSl7cmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uTmFtZT1lLHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksdGhpc31zZXRDb250ZXh0KGUsdCl7cmV0dXJuIG51bGw9PT10P2RlbGV0ZSB0aGlzLl9jb250ZXh0c1tlXTp0aGlzLl9jb250ZXh0c1tlXT10LHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksdGhpc31zZXRTZXNzaW9uKGUpe3JldHVybiBlP3RoaXMuX3Nlc3Npb249ZTpkZWxldGUgdGhpcy5fc2Vzc2lvbix0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9Z2V0U2Vzc2lvbigpe3JldHVybiB0aGlzLl9zZXNzaW9ufXVwZGF0ZShlKXtpZighZSlyZXR1cm4gdGhpcztjb25zdCB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZSh0aGlzKTplLFtuLHJdPXQgaW5zdGFuY2VvZiBvbj9bdC5nZXRTY29wZURhdGEoKSx0LmdldFJlcXVlc3RTZXNzaW9uKCldOmNlKHQpP1tlLGUucmVxdWVzdFNlc3Npb25dOltdLHt0YWdzOmksZXh0cmE6byx1c2VyOmEsY29udGV4dHM6cyxsZXZlbDpjLGZpbmdlcnByaW50Omw9W10scHJvcGFnYXRpb25Db250ZXh0OnV9PW58fHt9O3JldHVybiB0aGlzLl90YWdzPXsuLi50aGlzLl90YWdzLC4uLml9LHRoaXMuX2V4dHJhPXsuLi50aGlzLl9leHRyYSwuLi5vfSx0aGlzLl9jb250ZXh0cz17Li4udGhpcy5fY29udGV4dHMsLi4uc30sYSYmT2JqZWN0LmtleXMoYSkubGVuZ3RoJiYodGhpcy5fdXNlcj1hKSxjJiYodGhpcy5fbGV2ZWw9YyksbC5sZW5ndGgmJih0aGlzLl9maW5nZXJwcmludD1sKSx1JiYodGhpcy5fcHJvcGFnYXRpb25Db250ZXh0PXUpLHImJih0aGlzLl9yZXF1ZXN0U2Vzc2lvbj1yKSx0aGlzfWNsZWFyKCl7cmV0dXJuIHRoaXMuX2JyZWFkY3J1bWJzPVtdLHRoaXMuX3RhZ3M9e30sdGhpcy5fZXh0cmE9e30sdGhpcy5fdXNlcj17fSx0aGlzLl9jb250ZXh0cz17fSx0aGlzLl9sZXZlbD12b2lkIDAsdGhpcy5fdHJhbnNhY3Rpb25OYW1lPXZvaWQgMCx0aGlzLl9maW5nZXJwcmludD12b2lkIDAsdGhpcy5fcmVxdWVzdFNlc3Npb249dm9pZCAwLHRoaXMuX3Nlc3Npb249dm9pZCAwLHRuKHRoaXMsdm9pZCAwKSx0aGlzLl9hdHRhY2htZW50cz1bXSx0aGlzLl9wcm9wYWdhdGlvbkNvbnRleHQ9R3QoKSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9YWRkQnJlYWRjcnVtYihlLHQpe2NvbnN0IG49XCJudW1iZXJcIj09dHlwZW9mIHQ/dDoxMDA7aWYobjw9MClyZXR1cm4gdGhpcztjb25zdCByPXt0aW1lc3RhbXA6bHQoKSwuLi5lfSxpPXRoaXMuX2JyZWFkY3J1bWJzO3JldHVybiBpLnB1c2gociksdGhpcy5fYnJlYWRjcnVtYnM9aS5sZW5ndGg+bj9pLnNsaWNlKC1uKTppLHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksdGhpc31nZXRMYXN0QnJlYWRjcnVtYigpe3JldHVybiB0aGlzLl9icmVhZGNydW1ic1t0aGlzLl9icmVhZGNydW1icy5sZW5ndGgtMV19Y2xlYXJCcmVhZGNydW1icygpe3JldHVybiB0aGlzLl9icmVhZGNydW1icz1bXSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9YWRkQXR0YWNobWVudChlKXtyZXR1cm4gdGhpcy5fYXR0YWNobWVudHMucHVzaChlKSx0aGlzfWNsZWFyQXR0YWNobWVudHMoKXtyZXR1cm4gdGhpcy5fYXR0YWNobWVudHM9W10sdGhpc31nZXRTY29wZURhdGEoKXtyZXR1cm57YnJlYWRjcnVtYnM6dGhpcy5fYnJlYWRjcnVtYnMsYXR0YWNobWVudHM6dGhpcy5fYXR0YWNobWVudHMsY29udGV4dHM6dGhpcy5fY29udGV4dHMsdGFnczp0aGlzLl90YWdzLGV4dHJhOnRoaXMuX2V4dHJhLHVzZXI6dGhpcy5fdXNlcixsZXZlbDp0aGlzLl9sZXZlbCxmaW5nZXJwcmludDp0aGlzLl9maW5nZXJwcmludHx8W10sZXZlbnRQcm9jZXNzb3JzOnRoaXMuX2V2ZW50UHJvY2Vzc29ycyxwcm9wYWdhdGlvbkNvbnRleHQ6dGhpcy5fcHJvcGFnYXRpb25Db250ZXh0LHNka1Byb2Nlc3NpbmdNZXRhZGF0YTp0aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGEsdHJhbnNhY3Rpb25OYW1lOnRoaXMuX3RyYW5zYWN0aW9uTmFtZSxzcGFuOm5uKHRoaXMpfX1zZXRTREtQcm9jZXNzaW5nTWV0YWRhdGEoZSl7cmV0dXJuIHRoaXMuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YT17Li4udGhpcy5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhLC4uLmV9LHRoaXN9c2V0UHJvcGFnYXRpb25Db250ZXh0KGUpe3JldHVybiB0aGlzLl9wcm9wYWdhdGlvbkNvbnRleHQ9ZSx0aGlzfWdldFByb3BhZ2F0aW9uQ29udGV4dCgpe3JldHVybiB0aGlzLl9wcm9wYWdhdGlvbkNvbnRleHR9Y2FwdHVyZUV4Y2VwdGlvbihlLHQpe2NvbnN0IG49dCYmdC5ldmVudF9pZD90LmV2ZW50X2lkOnl0KCk7aWYoIXRoaXMuX2NsaWVudClyZXR1cm4geGUud2FybihcIk5vIGNsaWVudCBjb25maWd1cmVkIG9uIHNjb3BlIC0gd2lsbCBub3QgY2FwdHVyZSBleGNlcHRpb24hXCIpLG47Y29uc3Qgcj1uZXcgRXJyb3IoXCJTZW50cnkgc3ludGhldGljRXhjZXB0aW9uXCIpO3JldHVybiB0aGlzLl9jbGllbnQuY2FwdHVyZUV4Y2VwdGlvbihlLHtvcmlnaW5hbEV4Y2VwdGlvbjplLHN5bnRoZXRpY0V4Y2VwdGlvbjpyLC4uLnQsZXZlbnRfaWQ6bn0sdGhpcyksbn1jYXB0dXJlTWVzc2FnZShlLHQsbil7Y29uc3Qgcj1uJiZuLmV2ZW50X2lkP24uZXZlbnRfaWQ6eXQoKTtpZighdGhpcy5fY2xpZW50KXJldHVybiB4ZS53YXJuKFwiTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIG1lc3NhZ2UhXCIpLHI7Y29uc3QgaT1uZXcgRXJyb3IoZSk7cmV0dXJuIHRoaXMuX2NsaWVudC5jYXB0dXJlTWVzc2FnZShlLHQse29yaWdpbmFsRXhjZXB0aW9uOmUsc3ludGhldGljRXhjZXB0aW9uOmksLi4ubixldmVudF9pZDpyfSx0aGlzKSxyfWNhcHR1cmVFdmVudChlLHQpe2NvbnN0IG49dCYmdC5ldmVudF9pZD90LmV2ZW50X2lkOnl0KCk7cmV0dXJuIHRoaXMuX2NsaWVudD8odGhpcy5fY2xpZW50LmNhcHR1cmVFdmVudChlLHsuLi50LGV2ZW50X2lkOm59LHRoaXMpLG4pOih4ZS53YXJuKFwiTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIGV2ZW50IVwiKSxuKX1fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKXt0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnN8fCh0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnM9ITAsdGhpcy5fc2NvcGVMaXN0ZW5lcnMuZm9yRWFjaCgoZT0+e2UodGhpcyl9KSksdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzPSExKX19Y29uc3Qgb249cm47Y2xhc3MgYW57Y29uc3RydWN0b3IoZSx0KXtsZXQgbixyO249ZXx8bmV3IG9uLHI9dHx8bmV3IG9uLHRoaXMuX3N0YWNrPVt7c2NvcGU6bn1dLHRoaXMuX2lzb2xhdGlvblNjb3BlPXJ9d2l0aFNjb3BlKGUpe2NvbnN0IHQ9dGhpcy5fcHVzaFNjb3BlKCk7bGV0IG47dHJ5e249ZSh0KX1jYXRjaChlKXt0aHJvdyB0aGlzLl9wb3BTY29wZSgpLGV9cmV0dXJuIHVlKG4pP24udGhlbigoZT0+KHRoaXMuX3BvcFNjb3BlKCksZSkpLChlPT57dGhyb3cgdGhpcy5fcG9wU2NvcGUoKSxlfSkpOih0aGlzLl9wb3BTY29wZSgpLG4pfWdldENsaWVudCgpe3JldHVybiB0aGlzLmdldFN0YWNrVG9wKCkuY2xpZW50fWdldFNjb3BlKCl7cmV0dXJuIHRoaXMuZ2V0U3RhY2tUb3AoKS5zY29wZX1nZXRJc29sYXRpb25TY29wZSgpe3JldHVybiB0aGlzLl9pc29sYXRpb25TY29wZX1nZXRTdGFja1RvcCgpe3JldHVybiB0aGlzLl9zdGFja1t0aGlzLl9zdGFjay5sZW5ndGgtMV19X3B1c2hTY29wZSgpe2NvbnN0IGU9dGhpcy5nZXRTY29wZSgpLmNsb25lKCk7cmV0dXJuIHRoaXMuX3N0YWNrLnB1c2goe2NsaWVudDp0aGlzLmdldENsaWVudCgpLHNjb3BlOmV9KSxlfV9wb3BTY29wZSgpe3JldHVybiEodGhpcy5fc3RhY2subGVuZ3RoPD0xKSYmISF0aGlzLl9zdGFjay5wb3AoKX19ZnVuY3Rpb24gc24oKXtjb25zdCBlPVh0KFl0KCkpO3JldHVybiBlLnN0YWNrPWUuc3RhY2t8fG5ldyBhbihNZShcImRlZmF1bHRDdXJyZW50U2NvcGVcIiwoKCk9Pm5ldyBvbikpLE1lKFwiZGVmYXVsdElzb2xhdGlvblNjb3BlXCIsKCgpPT5uZXcgb24pKSl9ZnVuY3Rpb24gY24oZSl7cmV0dXJuIHNuKCkud2l0aFNjb3BlKGUpfWZ1bmN0aW9uIGxuKGUsdCl7Y29uc3Qgbj1zbigpO3JldHVybiBuLndpdGhTY29wZSgoKCk9PihuLmdldFN0YWNrVG9wKCkuc2NvcGU9ZSx0KGUpKSkpfWZ1bmN0aW9uIHVuKGUpe3JldHVybiBzbigpLndpdGhTY29wZSgoKCk9PmUoc24oKS5nZXRJc29sYXRpb25TY29wZSgpKSkpfWZ1bmN0aW9uIGRuKGUpe2NvbnN0IHQ9WHQoZSk7cmV0dXJuIHQuYWNzP3QuYWNzOnt3aXRoSXNvbGF0aW9uU2NvcGU6dW4sd2l0aFNjb3BlOmNuLHdpdGhTZXRTY29wZTpsbix3aXRoU2V0SXNvbGF0aW9uU2NvcGU6KGUsdCk9PnVuKHQpLGdldEN1cnJlbnRTY29wZTooKT0+c24oKS5nZXRTY29wZSgpLGdldElzb2xhdGlvblNjb3BlOigpPT5zbigpLmdldElzb2xhdGlvblNjb3BlKCl9fWZ1bmN0aW9uIHBuKCl7cmV0dXJuIGRuKFl0KCkpLmdldEN1cnJlbnRTY29wZSgpfWZ1bmN0aW9uIGhuKCl7cmV0dXJuIGRuKFl0KCkpLmdldElzb2xhdGlvblNjb3BlKCl9ZnVuY3Rpb24gZm4oKXtyZXR1cm4gcG4oKS5nZXRDbGllbnQoKX1mdW5jdGlvbiB2bihlKXtjb25zdCB0PWUuX3NlbnRyeU1ldHJpY3M7aWYoIXQpcmV0dXJuO2NvbnN0IG49e307Zm9yKGNvbnN0WyxbZSxyXV1vZiB0KXsobltlXXx8KG5bZV09W10pKS5wdXNoKFdlKHIpKX1yZXR1cm4gbn1mdW5jdGlvbiBtbihlKXtjb25zdHtzcGFuSWQ6dCx0cmFjZUlkOm59PWUuc3BhbkNvbnRleHQoKSx7cGFyZW50X3NwYW5faWQ6cn09X24oZSk7cmV0dXJuIFdlKHtwYXJlbnRfc3Bhbl9pZDpyLHNwYW5faWQ6dCx0cmFjZV9pZDpufSl9ZnVuY3Rpb24gZ24oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGU/eW4oZSk6QXJyYXkuaXNBcnJheShlKT9lWzBdK2VbMV0vMWU5OmUgaW5zdGFuY2VvZiBEYXRlP3luKGUuZ2V0VGltZSgpKTp1dCgpfWZ1bmN0aW9uIHluKGUpe3JldHVybiBlPjk5OTk5OTk5OTk/ZS8xZTM6ZX1mdW5jdGlvbiBfbihlKXtpZihmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmdldFNwYW5KU09OfShlKSlyZXR1cm4gZS5nZXRTcGFuSlNPTigpO3RyeXtjb25zdHtzcGFuSWQ6dCx0cmFjZUlkOm59PWUuc3BhbkNvbnRleHQoKTtpZihmdW5jdGlvbihlKXtjb25zdCB0PWU7cmV0dXJuISEodC5hdHRyaWJ1dGVzJiZ0LnN0YXJ0VGltZSYmdC5uYW1lJiZ0LmVuZFRpbWUmJnQuc3RhdHVzKX0oZSkpe2NvbnN0e2F0dHJpYnV0ZXM6cixzdGFydFRpbWU6aSxuYW1lOm8sZW5kVGltZTphLHBhcmVudFNwYW5JZDpzLHN0YXR1czpjfT1lO3JldHVybiBXZSh7c3Bhbl9pZDp0LHRyYWNlX2lkOm4sZGF0YTpyLGRlc2NyaXB0aW9uOm8scGFyZW50X3NwYW5faWQ6cyxzdGFydF90aW1lc3RhbXA6Z24oaSksdGltZXN0YW1wOmduKGEpfHx2b2lkIDAsc3RhdHVzOmJuKGMpLG9wOnJbXCJzZW50cnkub3BcIl0sb3JpZ2luOnJbXCJzZW50cnkub3JpZ2luXCJdLF9tZXRyaWNzX3N1bW1hcnk6dm4oZSl9KX1yZXR1cm57c3Bhbl9pZDp0LHRyYWNlX2lkOm59fWNhdGNoKGUpe3JldHVybnt9fX1mdW5jdGlvbiBibihlKXtpZihlJiYwIT09ZS5jb2RlKXJldHVybiAxPT09ZS5jb2RlP1wib2tcIjplLm1lc3NhZ2V8fFwidW5rbm93bl9lcnJvclwifWZ1bmN0aW9uIHduKGUpe3JldHVybiBlLl9zZW50cnlSb290U3Bhbnx8ZX1jb25zdCBTbj1cInByb2R1Y3Rpb25cIjtmdW5jdGlvbiBrbihlLHQpe2NvbnN0IG49dC5nZXRPcHRpb25zKCkse3B1YmxpY0tleTpyfT10LmdldERzbigpfHx7fSxpPVdlKHtlbnZpcm9ubWVudDpuLmVudmlyb25tZW50fHxTbixyZWxlYXNlOm4ucmVsZWFzZSxwdWJsaWNfa2V5OnIsdHJhY2VfaWQ6ZX0pO3JldHVybiB0LmVtaXQoXCJjcmVhdGVEc2NcIixpKSxpfWZ1bmN0aW9uIE1uKGUpe2NvbnN0IHQ9Zm4oKTtpZighdClyZXR1cm57fTtjb25zdCBuPWtuKF9uKGUpLnRyYWNlX2lkfHxcIlwiLHQpLHI9d24oZSksaT1yLl9mcm96ZW5Ec2M7aWYoaSlyZXR1cm4gaTtjb25zdCBvPXIuc3BhbkNvbnRleHQoKS50cmFjZVN0YXRlLGE9byYmby5nZXQoXCJzZW50cnkuZHNjXCIpLHM9YSYmTnQoYSk7aWYocylyZXR1cm4gcztjb25zdCBjPV9uKHIpLGw9Yy5kYXRhfHx7fSx1PWxbXCJzZW50cnkuc2FtcGxlX3JhdGVcIl07bnVsbCE9dSYmKG4uc2FtcGxlX3JhdGU9YCR7dX1gKTtjb25zdCBkPWxbXCJzZW50cnkuc291cmNlXCJdLHA9Yy5kZXNjcmlwdGlvbjtyZXR1cm5cInVybFwiIT09ZCYmcCYmKG4udHJhbnNhY3Rpb249cCksZnVuY3Rpb24oZSl7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBfX1NFTlRSWV9UUkFDSU5HX18mJiFfX1NFTlRSWV9UUkFDSU5HX18pcmV0dXJuITE7Y29uc3QgdD1mbigpLG49ZXx8dCYmdC5nZXRPcHRpb25zKCk7cmV0dXJuISFuJiYobi5lbmFibGVUcmFjaW5nfHxcInRyYWNlc1NhbXBsZVJhdGVcImluIG58fFwidHJhY2VzU2FtcGxlclwiaW4gbil9KCkmJihuLnNhbXBsZWQ9U3RyaW5nKGZ1bmN0aW9uKGUpe2NvbnN0e3RyYWNlRmxhZ3M6dH09ZS5zcGFuQ29udGV4dCgpO3JldHVybiAxPT09dH0ocikpKSx0LmVtaXQoXCJjcmVhdGVEc2NcIixuLHIpLG59ZnVuY3Rpb24gQ24oZSx0LG4scil7Y29uc3QgaT16dChuKSxvPWUudHlwZSYmXCJyZXBsYXlfZXZlbnRcIiE9PWUudHlwZT9lLnR5cGU6XCJldmVudFwiOyFmdW5jdGlvbihlLHQpe3QmJihlLnNkaz1lLnNka3x8e30sZS5zZGsubmFtZT1lLnNkay5uYW1lfHx0Lm5hbWUsZS5zZGsudmVyc2lvbj1lLnNkay52ZXJzaW9ufHx0LnZlcnNpb24sZS5zZGsuaW50ZWdyYXRpb25zPVsuLi5lLnNkay5pbnRlZ3JhdGlvbnN8fFtdLC4uLnQuaW50ZWdyYXRpb25zfHxbXV0sZS5zZGsucGFja2FnZXM9Wy4uLmUuc2RrLnBhY2thZ2VzfHxbXSwuLi50LnBhY2thZ2VzfHxbXV0pfShlLG4mJm4uc2RrKTtjb25zdCBhPWZ1bmN0aW9uKGUsdCxuLHIpe2NvbnN0IGk9ZS5zZGtQcm9jZXNzaW5nTWV0YWRhdGEmJmUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLmR5bmFtaWNTYW1wbGluZ0NvbnRleHQ7cmV0dXJue2V2ZW50X2lkOmUuZXZlbnRfaWQsc2VudF9hdDoobmV3IERhdGUpLnRvSVNPU3RyaW5nKCksLi4udCYme3Nkazp0fSwuLi4hIW4mJnImJntkc246SWUocil9LC4uLmkmJnt0cmFjZTpXZSh7Li4uaX0pfX19KGUsaSxyLHQpO2RlbGV0ZSBlLnNka1Byb2Nlc3NpbmdNZXRhZGF0YTtyZXR1cm4gRnQoYSxbW3t0eXBlOm99LGVdXSl9ZnVuY3Rpb24gRW4oZSx0LG4scj0wKXtyZXR1cm4gbmV3IEF0KCgoaSxvKT0+e2NvbnN0IGE9ZVtyXTtpZihudWxsPT09dHx8XCJmdW5jdGlvblwiIT10eXBlb2YgYSlpKHQpO2Vsc2V7Y29uc3Qgcz1hKHsuLi50fSxuKTtLdCYmYS5pZCYmbnVsbD09PXMmJnhlLmxvZyhgRXZlbnQgcHJvY2Vzc29yIFwiJHthLmlkfVwiIGRyb3BwZWQgZXZlbnRgKSx1ZShzKT9zLnRoZW4oKHQ9PkVuKGUsdCxuLHIrMSkudGhlbihpKSkpLnRoZW4obnVsbCxvKTpFbihlLHMsbixyKzEpLnRoZW4oaSkudGhlbihudWxsLG8pfX0pKX1mdW5jdGlvbiBUbihlLHQpe2NvbnN0e2ZpbmdlcnByaW50Om4sc3BhbjpyLGJyZWFkY3J1bWJzOmksc2RrUHJvY2Vzc2luZ01ldGFkYXRhOm99PXQ7IWZ1bmN0aW9uKGUsdCl7Y29uc3R7ZXh0cmE6bix0YWdzOnIsdXNlcjppLGNvbnRleHRzOm8sbGV2ZWw6YSx0cmFuc2FjdGlvbk5hbWU6c309dCxjPVdlKG4pO2MmJk9iamVjdC5rZXlzKGMpLmxlbmd0aCYmKGUuZXh0cmE9ey4uLmMsLi4uZS5leHRyYX0pO2NvbnN0IGw9V2Uocik7bCYmT2JqZWN0LmtleXMobCkubGVuZ3RoJiYoZS50YWdzPXsuLi5sLC4uLmUudGFnc30pO2NvbnN0IHU9V2UoaSk7dSYmT2JqZWN0LmtleXModSkubGVuZ3RoJiYoZS51c2VyPXsuLi51LC4uLmUudXNlcn0pO2NvbnN0IGQ9V2Uobyk7ZCYmT2JqZWN0LmtleXMoZCkubGVuZ3RoJiYoZS5jb250ZXh0cz17Li4uZCwuLi5lLmNvbnRleHRzfSk7YSYmKGUubGV2ZWw9YSk7cyYmXCJ0cmFuc2FjdGlvblwiIT09ZS50eXBlJiYoZS50cmFuc2FjdGlvbj1zKX0oZSx0KSxyJiZmdW5jdGlvbihlLHQpe2UuY29udGV4dHM9e3RyYWNlOm1uKHQpLC4uLmUuY29udGV4dHN9LGUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhPXtkeW5hbWljU2FtcGxpbmdDb250ZXh0Ok1uKHQpLC4uLmUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhfTtjb25zdCBuPXduKHQpLHI9X24obikuZGVzY3JpcHRpb247ciYmIWUudHJhbnNhY3Rpb24mJlwidHJhbnNhY3Rpb25cIj09PWUudHlwZSYmKGUudHJhbnNhY3Rpb249cil9KGUsciksZnVuY3Rpb24oZSx0KXtlLmZpbmdlcnByaW50PWUuZmluZ2VycHJpbnQ/ZnVuY3Rpb24oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZTpbZV19KGUuZmluZ2VycHJpbnQpOltdLHQmJihlLmZpbmdlcnByaW50PWUuZmluZ2VycHJpbnQuY29uY2F0KHQpKTtlLmZpbmdlcnByaW50JiYhZS5maW5nZXJwcmludC5sZW5ndGgmJmRlbGV0ZSBlLmZpbmdlcnByaW50fShlLG4pLGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1bLi4uZS5icmVhZGNydW1ic3x8W10sLi4udF07ZS5icmVhZGNydW1icz1uLmxlbmd0aD9uOnZvaWQgMH0oZSxpKSxmdW5jdGlvbihlLHQpe2Uuc2RrUHJvY2Vzc2luZ01ldGFkYXRhPXsuLi5lLnNka1Byb2Nlc3NpbmdNZXRhZGF0YSwuLi50fX0oZSxvKX1mdW5jdGlvbiBQbihlLHQpe2NvbnN0e2V4dHJhOm4sdGFnczpyLHVzZXI6aSxjb250ZXh0czpvLGxldmVsOmEsc2RrUHJvY2Vzc2luZ01ldGFkYXRhOnMsYnJlYWRjcnVtYnM6YyxmaW5nZXJwcmludDpsLGV2ZW50UHJvY2Vzc29yczp1LGF0dGFjaG1lbnRzOmQscHJvcGFnYXRpb25Db250ZXh0OnAsdHJhbnNhY3Rpb25OYW1lOmgsc3BhbjpmfT10O09uKGUsXCJleHRyYVwiLG4pLE9uKGUsXCJ0YWdzXCIsciksT24oZSxcInVzZXJcIixpKSxPbihlLFwiY29udGV4dHNcIixvKSxPbihlLFwic2RrUHJvY2Vzc2luZ01ldGFkYXRhXCIscyksYSYmKGUubGV2ZWw9YSksaCYmKGUudHJhbnNhY3Rpb25OYW1lPWgpLGYmJihlLnNwYW49ZiksYy5sZW5ndGgmJihlLmJyZWFkY3J1bWJzPVsuLi5lLmJyZWFkY3J1bWJzLC4uLmNdKSxsLmxlbmd0aCYmKGUuZmluZ2VycHJpbnQ9Wy4uLmUuZmluZ2VycHJpbnQsLi4ubF0pLHUubGVuZ3RoJiYoZS5ldmVudFByb2Nlc3NvcnM9Wy4uLmUuZXZlbnRQcm9jZXNzb3JzLC4uLnVdKSxkLmxlbmd0aCYmKGUuYXR0YWNobWVudHM9Wy4uLmUuYXR0YWNobWVudHMsLi4uZF0pLGUucHJvcGFnYXRpb25Db250ZXh0PXsuLi5lLnByb3BhZ2F0aW9uQ29udGV4dCwuLi5wfX1mdW5jdGlvbiBPbihlLHQsbil7aWYobiYmT2JqZWN0LmtleXMobikubGVuZ3RoKXtlW3RdPXsuLi5lW3RdfTtmb3IoY29uc3QgciBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLHIpJiYoZVt0XVtyXT1uW3JdKX19ZnVuY3Rpb24gQW4oZSx0LG4scixpLG8pe2NvbnN0e25vcm1hbGl6ZURlcHRoOmE9Myxub3JtYWxpemVNYXhCcmVhZHRoOnM9MWUzfT1lLGM9ey4uLnQsZXZlbnRfaWQ6dC5ldmVudF9pZHx8bi5ldmVudF9pZHx8eXQoKSx0aW1lc3RhbXA6dC50aW1lc3RhbXB8fGx0KCl9LGw9bi5pbnRlZ3JhdGlvbnN8fGUuaW50ZWdyYXRpb25zLm1hcCgoZT0+ZS5uYW1lKSk7IWZ1bmN0aW9uKGUsdCl7Y29uc3R7ZW52aXJvbm1lbnQ6bixyZWxlYXNlOnIsZGlzdDppLG1heFZhbHVlTGVuZ3RoOm89MjUwfT10O1wiZW52aXJvbm1lbnRcImluIGV8fChlLmVudmlyb25tZW50PVwiZW52aXJvbm1lbnRcImluIHQ/bjpTbik7dm9pZCAwPT09ZS5yZWxlYXNlJiZ2b2lkIDAhPT1yJiYoZS5yZWxlYXNlPXIpO3ZvaWQgMD09PWUuZGlzdCYmdm9pZCAwIT09aSYmKGUuZGlzdD1pKTtlLm1lc3NhZ2UmJihlLm1lc3NhZ2U9aGUoZS5tZXNzYWdlLG8pKTtjb25zdCBhPWUuZXhjZXB0aW9uJiZlLmV4Y2VwdGlvbi52YWx1ZXMmJmUuZXhjZXB0aW9uLnZhbHVlc1swXTthJiZhLnZhbHVlJiYoYS52YWx1ZT1oZShhLnZhbHVlLG8pKTtjb25zdCBzPWUucmVxdWVzdDtzJiZzLnVybCYmKHMudXJsPWhlKHMudXJsLG8pKX0oYyxlKSxmdW5jdGlvbihlLHQpe3QubGVuZ3RoPjAmJihlLnNkaz1lLnNka3x8e30sZS5zZGsuaW50ZWdyYXRpb25zPVsuLi5lLnNkay5pbnRlZ3JhdGlvbnN8fFtdLC4uLnRdKX0oYyxsKSxpJiZpLmVtaXQoXCJhcHBseUZyYW1lTWV0YWRhdGFcIix0KSx2b2lkIDA9PT10LnR5cGUmJmZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1rZS5fc2VudHJ5RGVidWdJZHM7aWYoIW4pcmV0dXJuO2xldCByO2NvbnN0IGk9am4uZ2V0KHQpO2k/cj1pOihyPW5ldyBNYXAsam4uc2V0KHQscikpO2NvbnN0IG89T2JqZWN0LmVudHJpZXMobikucmVkdWNlKCgoZSxbbixpXSk9PntsZXQgbztjb25zdCBhPXIuZ2V0KG4pO2E/bz1hOihvPXQobiksci5zZXQobixvKSk7Zm9yKGxldCB0PW8ubGVuZ3RoLTE7dD49MDt0LS0pe2NvbnN0IG49b1t0XTtpZihuLmZpbGVuYW1lKXtlW24uZmlsZW5hbWVdPWk7YnJlYWt9fXJldHVybiBlfSkse30pO3RyeXtlLmV4Y2VwdGlvbi52YWx1ZXMuZm9yRWFjaCgoZT0+e2Uuc3RhY2t0cmFjZS5mcmFtZXMuZm9yRWFjaCgoZT0+e2UuZmlsZW5hbWUmJihlLmRlYnVnX2lkPW9bZS5maWxlbmFtZV0pfSkpfSkpfWNhdGNoKGUpe319KGMsZS5zdGFja1BhcnNlcik7Y29uc3QgdT1mdW5jdGlvbihlLHQpe2lmKCF0KXJldHVybiBlO2NvbnN0IG49ZT9lLmNsb25lKCk6bmV3IG9uO3JldHVybiBuLnVwZGF0ZSh0KSxufShyLG4uY2FwdHVyZUNvbnRleHQpO24ubWVjaGFuaXNtJiZTdChjLG4ubWVjaGFuaXNtKTtjb25zdCBkPWk/aS5nZXRFdmVudFByb2Nlc3NvcnMoKTpbXSxwPU1lKFwiZ2xvYmFsU2NvcGVcIiwoKCk9Pm5ldyBvbikpLmdldFNjb3BlRGF0YSgpO2lmKG8pe1BuKHAsby5nZXRTY29wZURhdGEoKSl9aWYodSl7UG4ocCx1LmdldFNjb3BlRGF0YSgpKX1jb25zdCBoPVsuLi5uLmF0dGFjaG1lbnRzfHxbXSwuLi5wLmF0dGFjaG1lbnRzXTtoLmxlbmd0aCYmKG4uYXR0YWNobWVudHM9aCksVG4oYyxwKTtyZXR1cm4gRW4oWy4uLmQsLi4ucC5ldmVudFByb2Nlc3NvcnNdLGMsbikudGhlbigoZT0+KGUmJmZ1bmN0aW9uKGUpe2NvbnN0IHQ9e307dHJ5e2UuZXhjZXB0aW9uLnZhbHVlcy5mb3JFYWNoKChlPT57ZS5zdGFja3RyYWNlLmZyYW1lcy5mb3JFYWNoKChlPT57ZS5kZWJ1Z19pZCYmKGUuYWJzX3BhdGg/dFtlLmFic19wYXRoXT1lLmRlYnVnX2lkOmUuZmlsZW5hbWUmJih0W2UuZmlsZW5hbWVdPWUuZGVidWdfaWQpLGRlbGV0ZSBlLmRlYnVnX2lkKX0pKX0pKX1jYXRjaChlKXt9aWYoMD09PU9iamVjdC5rZXlzKHQpLmxlbmd0aClyZXR1cm47ZS5kZWJ1Z19tZXRhPWUuZGVidWdfbWV0YXx8e30sZS5kZWJ1Z19tZXRhLmltYWdlcz1lLmRlYnVnX21ldGEuaW1hZ2VzfHxbXTtjb25zdCBuPWUuZGVidWdfbWV0YS5pbWFnZXM7T2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoKFtlLHRdKT0+e24ucHVzaCh7dHlwZTpcInNvdXJjZW1hcFwiLGNvZGVfZmlsZTplLGRlYnVnX2lkOnR9KX0pKX0oZSksXCJudW1iZXJcIj09dHlwZW9mIGEmJmE+MD9mdW5jdGlvbihlLHQsbil7aWYoIWUpcmV0dXJuIG51bGw7Y29uc3Qgcj17Li4uZSwuLi5lLmJyZWFkY3J1bWJzJiZ7YnJlYWRjcnVtYnM6ZS5icmVhZGNydW1icy5tYXAoKGU9Pih7Li4uZSwuLi5lLmRhdGEmJntkYXRhOk10KGUuZGF0YSx0LG4pfX0pKSl9LC4uLmUudXNlciYme3VzZXI6TXQoZS51c2VyLHQsbil9LC4uLmUuY29udGV4dHMmJntjb250ZXh0czpNdChlLmNvbnRleHRzLHQsbil9LC4uLmUuZXh0cmEmJntleHRyYTpNdChlLmV4dHJhLHQsbil9fTtlLmNvbnRleHRzJiZlLmNvbnRleHRzLnRyYWNlJiZyLmNvbnRleHRzJiYoci5jb250ZXh0cy50cmFjZT1lLmNvbnRleHRzLnRyYWNlLGUuY29udGV4dHMudHJhY2UuZGF0YSYmKHIuY29udGV4dHMudHJhY2UuZGF0YT1NdChlLmNvbnRleHRzLnRyYWNlLmRhdGEsdCxuKSkpO2Uuc3BhbnMmJihyLnNwYW5zPWUuc3BhbnMubWFwKChlPT4oey4uLmUsLi4uZS5kYXRhJiZ7ZGF0YTpNdChlLmRhdGEsdCxuKX19KSkpKTtyZXR1cm4gcn0oZSxhLHMpOmUpKSl9Y29uc3Qgam49bmV3IFdlYWtNYXA7ZnVuY3Rpb24geG4oZSl7aWYoZSlyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvbnx8XCJmdW5jdGlvblwiPT10eXBlb2YgZX0oZSl8fGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5zb21lKChlPT5Mbi5pbmNsdWRlcyhlKSkpfShlKT97Y2FwdHVyZUNvbnRleHQ6ZX06ZX1jb25zdCBMbj1bXCJ1c2VyXCIsXCJsZXZlbFwiLFwiZXh0cmFcIixcImNvbnRleHRzXCIsXCJ0YWdzXCIsXCJmaW5nZXJwcmludFwiLFwicmVxdWVzdFNlc3Npb25cIixcInByb3BhZ2F0aW9uQ29udGV4dFwiXTtmdW5jdGlvbiBJbihlLHQpe3JldHVybiBwbigpLmNhcHR1cmVFdmVudChlLHQpfWZ1bmN0aW9uIERuKGUsdCl7cmV0dXJuIG49e3NlbnRyeV9rZXk6ZS5wdWJsaWNLZXksc2VudHJ5X3ZlcnNpb246XCI3XCIsLi4udCYme3NlbnRyeV9jbGllbnQ6YCR7dC5uYW1lfS8ke3QudmVyc2lvbn1gfX0sT2JqZWN0LmtleXMobikubWFwKChlPT5gJHtlbmNvZGVVUklDb21wb25lbnQoZSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KG5bZV0pfWApKS5qb2luKFwiJlwiKTt2YXIgbn1jb25zdCBObj1bXTtmdW5jdGlvbiBSbihlLHQpe2Zvcihjb25zdCBuIG9mIHQpbiYmbi5hZnRlckFsbFNldHVwJiZuLmFmdGVyQWxsU2V0dXAoZSl9ZnVuY3Rpb24gRm4oZSx0LG4pe2lmKG5bdC5uYW1lXSlLdCYmeGUubG9nKGBJbnRlZ3JhdGlvbiBza2lwcGVkIGJlY2F1c2UgaXQgd2FzIGFscmVhZHkgaW5zdGFsbGVkOiAke3QubmFtZX1gKTtlbHNle2lmKG5bdC5uYW1lXT10LC0xPT09Tm4uaW5kZXhPZih0Lm5hbWUpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnNldHVwT25jZSYmKHQuc2V0dXBPbmNlKCksTm4ucHVzaCh0Lm5hbWUpKSx0LnNldHVwJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnNldHVwJiZ0LnNldHVwKGUpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQucHJlcHJvY2Vzc0V2ZW50KXtjb25zdCBuPXQucHJlcHJvY2Vzc0V2ZW50LmJpbmQodCk7ZS5vbihcInByZXByb2Nlc3NFdmVudFwiLCgodCxyKT0+bih0LHIsZSkpKX1pZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnByb2Nlc3NFdmVudCl7Y29uc3Qgbj10LnByb2Nlc3NFdmVudC5iaW5kKHQpLHI9T2JqZWN0LmFzc2lnbigoKHQscik9Pm4odCxyLGUpKSx7aWQ6dC5uYW1lfSk7ZS5hZGRFdmVudFByb2Nlc3NvcihyKX1LdCYmeGUubG9nKGBJbnRlZ3JhdGlvbiBpbnN0YWxsZWQ6ICR7dC5uYW1lfWApfX1jb25zdCBCbj1cIk5vdCBjYXB0dXJpbmcgZXhjZXB0aW9uIGJlY2F1c2UgaXQncyBhbHJlYWR5IGJlZW4gY2FwdHVyZWQuXCI7Y2xhc3MgVW57Y29uc3RydWN0b3IoZSl7aWYodGhpcy5fb3B0aW9ucz1lLHRoaXMuX2ludGVncmF0aW9ucz17fSx0aGlzLl9udW1Qcm9jZXNzaW5nPTAsdGhpcy5fb3V0Y29tZXM9e30sdGhpcy5faG9va3M9e30sdGhpcy5fZXZlbnRQcm9jZXNzb3JzPVtdLGUuZHNuP3RoaXMuX2Rzbj1OZShlLmRzbik6S3QmJnhlLndhcm4oXCJObyBEU04gcHJvdmlkZWQsIGNsaWVudCB3aWxsIG5vdCBzZW5kIGV2ZW50cy5cIiksdGhpcy5fZHNuKXtjb25zdCBpPSh0PXRoaXMuX2RzbixuPWUudHVubmVsLHI9ZS5fbWV0YWRhdGE/ZS5fbWV0YWRhdGEuc2RrOnZvaWQgMCxufHxgJHtmdW5jdGlvbihlKXtyZXR1cm5gJHtmdW5jdGlvbihlKXtjb25zdCB0PWUucHJvdG9jb2w/YCR7ZS5wcm90b2NvbH06YDpcIlwiLG49ZS5wb3J0P2A6JHtlLnBvcnR9YDpcIlwiO3JldHVybmAke3R9Ly8ke2UuaG9zdH0ke259JHtlLnBhdGg/YC8ke2UucGF0aH1gOlwiXCJ9L2FwaS9gfShlKX0ke2UucHJvamVjdElkfS9lbnZlbG9wZS9gfSh0KX0/JHtEbih0LHIpfWApO3RoaXMuX3RyYW5zcG9ydD1lLnRyYW5zcG9ydCh7dHVubmVsOnRoaXMuX29wdGlvbnMudHVubmVsLHJlY29yZERyb3BwZWRFdmVudDp0aGlzLnJlY29yZERyb3BwZWRFdmVudC5iaW5kKHRoaXMpLC4uLmUudHJhbnNwb3J0T3B0aW9ucyx1cmw6aX0pfXZhciB0LG4scn1jYXB0dXJlRXhjZXB0aW9uKGUsdCxuKXtjb25zdCByPXl0KCk7aWYoa3QoZSkpcmV0dXJuIEt0JiZ4ZS5sb2coQm4pLHI7Y29uc3QgaT17ZXZlbnRfaWQ6ciwuLi50fTtyZXR1cm4gdGhpcy5fcHJvY2Vzcyh0aGlzLmV2ZW50RnJvbUV4Y2VwdGlvbihlLGkpLnRoZW4oKGU9PnRoaXMuX2NhcHR1cmVFdmVudChlLGksbikpKSksaS5ldmVudF9pZH1jYXB0dXJlTWVzc2FnZShlLHQsbixyKXtjb25zdCBpPXtldmVudF9pZDp5dCgpLC4uLm59LG89YWUoZSk/ZTpTdHJpbmcoZSksYT1zZShlKT90aGlzLmV2ZW50RnJvbU1lc3NhZ2Uobyx0LGkpOnRoaXMuZXZlbnRGcm9tRXhjZXB0aW9uKGUsaSk7cmV0dXJuIHRoaXMuX3Byb2Nlc3MoYS50aGVuKChlPT50aGlzLl9jYXB0dXJlRXZlbnQoZSxpLHIpKSkpLGkuZXZlbnRfaWR9Y2FwdHVyZUV2ZW50KGUsdCxuKXtjb25zdCByPXl0KCk7aWYodCYmdC5vcmlnaW5hbEV4Y2VwdGlvbiYma3QodC5vcmlnaW5hbEV4Y2VwdGlvbikpcmV0dXJuIEt0JiZ4ZS5sb2coQm4pLHI7Y29uc3QgaT17ZXZlbnRfaWQ6ciwuLi50fSxvPShlLnNka1Byb2Nlc3NpbmdNZXRhZGF0YXx8e30pLmNhcHR1cmVkU3BhblNjb3BlO3JldHVybiB0aGlzLl9wcm9jZXNzKHRoaXMuX2NhcHR1cmVFdmVudChlLGksb3x8bikpLGkuZXZlbnRfaWR9Y2FwdHVyZVNlc3Npb24oZSl7XCJzdHJpbmdcIiE9dHlwZW9mIGUucmVsZWFzZT9LdCYmeGUud2FybihcIkRpc2NhcmRlZCBzZXNzaW9uIGJlY2F1c2Ugb2YgbWlzc2luZyBvciBub24tc3RyaW5nIHJlbGVhc2VcIik6KHRoaXMuc2VuZFNlc3Npb24oZSksWnQoZSx7aW5pdDohMX0pKX1nZXREc24oKXtyZXR1cm4gdGhpcy5fZHNufWdldE9wdGlvbnMoKXtyZXR1cm4gdGhpcy5fb3B0aW9uc31nZXRTZGtNZXRhZGF0YSgpe3JldHVybiB0aGlzLl9vcHRpb25zLl9tZXRhZGF0YX1nZXRUcmFuc3BvcnQoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0fWZsdXNoKGUpe2NvbnN0IHQ9dGhpcy5fdHJhbnNwb3J0O3JldHVybiB0Pyh0aGlzLmVtaXQoXCJmbHVzaFwiKSx0aGlzLl9pc0NsaWVudERvbmVQcm9jZXNzaW5nKGUpLnRoZW4oKG49PnQuZmx1c2goZSkudGhlbigoZT0+biYmZSkpKSkpOlB0KCEwKX1jbG9zZShlKXtyZXR1cm4gdGhpcy5mbHVzaChlKS50aGVuKChlPT4odGhpcy5nZXRPcHRpb25zKCkuZW5hYmxlZD0hMSx0aGlzLmVtaXQoXCJjbG9zZVwiKSxlKSkpfWdldEV2ZW50UHJvY2Vzc29ycygpe3JldHVybiB0aGlzLl9ldmVudFByb2Nlc3NvcnN9YWRkRXZlbnRQcm9jZXNzb3IoZSl7dGhpcy5fZXZlbnRQcm9jZXNzb3JzLnB1c2goZSl9aW5pdCgpeyh0aGlzLl9pc0VuYWJsZWQoKXx8dGhpcy5fb3B0aW9ucy5pbnRlZ3JhdGlvbnMuc29tZSgoKHtuYW1lOmV9KT0+ZS5zdGFydHNXaXRoKFwiU3BvdGxpZ2h0XCIpKSkpJiZ0aGlzLl9zZXR1cEludGVncmF0aW9ucygpfWdldEludGVncmF0aW9uQnlOYW1lKGUpe3JldHVybiB0aGlzLl9pbnRlZ3JhdGlvbnNbZV19YWRkSW50ZWdyYXRpb24oZSl7Y29uc3QgdD10aGlzLl9pbnRlZ3JhdGlvbnNbZS5uYW1lXTtGbih0aGlzLGUsdGhpcy5faW50ZWdyYXRpb25zKSx0fHxSbih0aGlzLFtlXSl9c2VuZEV2ZW50KGUsdD17fSl7dGhpcy5lbWl0KFwiYmVmb3JlU2VuZEV2ZW50XCIsZSx0KTtsZXQgbj1DbihlLHRoaXMuX2Rzbix0aGlzLl9vcHRpb25zLl9tZXRhZGF0YSx0aGlzLl9vcHRpb25zLnR1bm5lbCk7Zm9yKGNvbnN0IGUgb2YgdC5hdHRhY2htZW50c3x8W10pbj1CdChuLCR0KGUpKTtjb25zdCByPXRoaXMuc2VuZEVudmVsb3BlKG4pO3ImJnIudGhlbigodD0+dGhpcy5lbWl0KFwiYWZ0ZXJTZW5kRXZlbnRcIixlLHQpKSxudWxsKX1zZW5kU2Vzc2lvbihlKXtjb25zdCB0PWZ1bmN0aW9uKGUsdCxuLHIpe2NvbnN0IGk9enQobik7cmV0dXJuIEZ0KHtzZW50X2F0OihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSwuLi5pJiZ7c2RrOml9LC4uLiEhciYmdCYme2RzbjpJZSh0KX19LFtcImFnZ3JlZ2F0ZXNcImluIGU/W3t0eXBlOlwic2Vzc2lvbnNcIn0sZV06W3t0eXBlOlwic2Vzc2lvblwifSxlLnRvSlNPTigpXV0pfShlLHRoaXMuX2Rzbix0aGlzLl9vcHRpb25zLl9tZXRhZGF0YSx0aGlzLl9vcHRpb25zLnR1bm5lbCk7dGhpcy5zZW5kRW52ZWxvcGUodCl9cmVjb3JkRHJvcHBlZEV2ZW50KGUsdCxuKXtpZih0aGlzLl9vcHRpb25zLnNlbmRDbGllbnRSZXBvcnRzKXtjb25zdCByPVwibnVtYmVyXCI9PXR5cGVvZiBuP246MSxpPWAke2V9OiR7dH1gO0t0JiZ4ZS5sb2coYFJlY29yZGluZyBvdXRjb21lOiBcIiR7aX1cIiR7cj4xP2AgKCR7cn0gdGltZXMpYDpcIlwifWApLHRoaXMuX291dGNvbWVzW2ldPSh0aGlzLl9vdXRjb21lc1tpXXx8MCkrcn19b24oZSx0KXtjb25zdCBuPXRoaXMuX2hvb2tzW2VdPXRoaXMuX2hvb2tzW2VdfHxbXTtyZXR1cm4gbi5wdXNoKHQpLCgpPT57Y29uc3QgZT1uLmluZGV4T2YodCk7ZT4tMSYmbi5zcGxpY2UoZSwxKX19ZW1pdChlLC4uLnQpe2NvbnN0IG49dGhpcy5faG9va3NbZV07biYmbi5mb3JFYWNoKChlPT5lKC4uLnQpKSl9c2VuZEVudmVsb3BlKGUpe3JldHVybiB0aGlzLmVtaXQoXCJiZWZvcmVFbnZlbG9wZVwiLGUpLHRoaXMuX2lzRW5hYmxlZCgpJiZ0aGlzLl90cmFuc3BvcnQ/dGhpcy5fdHJhbnNwb3J0LnNlbmQoZSkudGhlbihudWxsLChlPT4oS3QmJnhlLmVycm9yKFwiRXJyb3Igd2hpbGUgc2VuZGluZyBldmVudDpcIixlKSxlKSkpOihLdCYmeGUuZXJyb3IoXCJUcmFuc3BvcnQgZGlzYWJsZWRcIiksUHQoe30pKX1fc2V0dXBJbnRlZ3JhdGlvbnMoKXtjb25zdHtpbnRlZ3JhdGlvbnM6ZX09dGhpcy5fb3B0aW9uczt0aGlzLl9pbnRlZ3JhdGlvbnM9ZnVuY3Rpb24oZSx0KXtjb25zdCBuPXt9O3JldHVybiB0LmZvckVhY2goKHQ9Pnt0JiZGbihlLHQsbil9KSksbn0odGhpcyxlKSxSbih0aGlzLGUpfV91cGRhdGVTZXNzaW9uRnJvbUV2ZW50KGUsdCl7bGV0IG49ITEscj0hMTtjb25zdCBpPXQuZXhjZXB0aW9uJiZ0LmV4Y2VwdGlvbi52YWx1ZXM7aWYoaSl7cj0hMDtmb3IoY29uc3QgZSBvZiBpKXtjb25zdCB0PWUubWVjaGFuaXNtO2lmKHQmJiExPT09dC5oYW5kbGVkKXtuPSEwO2JyZWFrfX19Y29uc3Qgbz1cIm9rXCI9PT1lLnN0YXR1czsobyYmMD09PWUuZXJyb3JzfHxvJiZuKSYmKFp0KGUsey4uLm4mJntzdGF0dXM6XCJjcmFzaGVkXCJ9LGVycm9yczplLmVycm9yc3x8TnVtYmVyKHJ8fG4pfSksdGhpcy5jYXB0dXJlU2Vzc2lvbihlKSl9X2lzQ2xpZW50RG9uZVByb2Nlc3NpbmcoZSl7cmV0dXJuIG5ldyBBdCgodD0+e2xldCBuPTA7Y29uc3Qgcj1zZXRJbnRlcnZhbCgoKCk9PnswPT10aGlzLl9udW1Qcm9jZXNzaW5nPyhjbGVhckludGVydmFsKHIpLHQoITApKToobis9MSxlJiZuPj1lJiYoY2xlYXJJbnRlcnZhbChyKSx0KCExKSkpfSksMSl9KSl9X2lzRW5hYmxlZCgpe3JldHVybiExIT09dGhpcy5nZXRPcHRpb25zKCkuZW5hYmxlZCYmdm9pZCAwIT09dGhpcy5fdHJhbnNwb3J0fV9wcmVwYXJlRXZlbnQoZSx0LG4scj1obigpKXtjb25zdCBpPXRoaXMuZ2V0T3B0aW9ucygpLG89T2JqZWN0LmtleXModGhpcy5faW50ZWdyYXRpb25zKTtyZXR1cm4hdC5pbnRlZ3JhdGlvbnMmJm8ubGVuZ3RoPjAmJih0LmludGVncmF0aW9ucz1vKSx0aGlzLmVtaXQoXCJwcmVwcm9jZXNzRXZlbnRcIixlLHQpLGUudHlwZXx8ci5zZXRMYXN0RXZlbnRJZChlLmV2ZW50X2lkfHx0LmV2ZW50X2lkKSxBbihpLGUsdCxuLHRoaXMscikudGhlbigoZT0+e2lmKG51bGw9PT1lKXJldHVybiBlO2NvbnN0IHQ9ey4uLnIuZ2V0UHJvcGFnYXRpb25Db250ZXh0KCksLi4ubj9uLmdldFByb3BhZ2F0aW9uQ29udGV4dCgpOnZvaWQgMH07aWYoIShlLmNvbnRleHRzJiZlLmNvbnRleHRzLnRyYWNlKSYmdCl7Y29uc3R7dHJhY2VJZDpuLHNwYW5JZDpyLHBhcmVudFNwYW5JZDppLGRzYzpvfT10O2UuY29udGV4dHM9e3RyYWNlOldlKHt0cmFjZV9pZDpuLHNwYW5faWQ6cixwYXJlbnRfc3Bhbl9pZDppfSksLi4uZS5jb250ZXh0c307Y29uc3QgYT1vfHxrbihuLHRoaXMpO2Uuc2RrUHJvY2Vzc2luZ01ldGFkYXRhPXtkeW5hbWljU2FtcGxpbmdDb250ZXh0OmEsLi4uZS5zZGtQcm9jZXNzaW5nTWV0YWRhdGF9fXJldHVybiBlfSkpfV9jYXB0dXJlRXZlbnQoZSx0PXt9LG4pe3JldHVybiB0aGlzLl9wcm9jZXNzRXZlbnQoZSx0LG4pLnRoZW4oKGU9PmUuZXZlbnRfaWQpLChlPT57aWYoS3Qpe2NvbnN0IHQ9ZTtcImxvZ1wiPT09dC5sb2dMZXZlbD94ZS5sb2codC5tZXNzYWdlKTp4ZS53YXJuKHQpfX0pKX1fcHJvY2Vzc0V2ZW50KGUsdCxuKXtjb25zdCByPXRoaXMuZ2V0T3B0aW9ucygpLHtzYW1wbGVSYXRlOml9PXIsbz1KbihlKSxhPVZuKGUpLHM9ZS50eXBlfHxcImVycm9yXCIsYz1gYmVmb3JlIHNlbmQgZm9yIHR5cGUgXFxgJHtzfVxcYGAsbD12b2lkIDA9PT1pP3ZvaWQgMDpmdW5jdGlvbihlKXtpZihcImJvb2xlYW5cIj09dHlwZW9mIGUpcmV0dXJuIE51bWJlcihlKTtjb25zdCB0PVwic3RyaW5nXCI9PXR5cGVvZiBlP3BhcnNlRmxvYXQoZSk6ZTtpZighKFwibnVtYmVyXCIhPXR5cGVvZiB0fHxpc05hTih0KXx8dDwwfHx0PjEpKXJldHVybiB0O0t0JiZ4ZS53YXJuKGBbVHJhY2luZ10gR2l2ZW4gc2FtcGxlIHJhdGUgaXMgaW52YWxpZC4gU2FtcGxlIHJhdGUgbXVzdCBiZSBhIGJvb2xlYW4gb3IgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiBHb3QgJHtKU09OLnN0cmluZ2lmeShlKX0gb2YgdHlwZSAke0pTT04uc3RyaW5naWZ5KHR5cGVvZiBlKX0uYCl9KGkpO2lmKGEmJlwibnVtYmVyXCI9PXR5cGVvZiBsJiZNYXRoLnJhbmRvbSgpPmwpcmV0dXJuIHRoaXMucmVjb3JkRHJvcHBlZEV2ZW50KFwic2FtcGxlX3JhdGVcIixcImVycm9yXCIsZSksT3QobmV3IFJlKGBEaXNjYXJkaW5nIGV2ZW50IGJlY2F1c2UgaXQncyBub3QgaW5jbHVkZWQgaW4gdGhlIHJhbmRvbSBzYW1wbGUgKHNhbXBsaW5nIHJhdGUgPSAke2l9KWAsXCJsb2dcIikpO2NvbnN0IHU9XCJyZXBsYXlfZXZlbnRcIj09PXM/XCJyZXBsYXlcIjpzLGQ9KGUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhfHx7fSkuY2FwdHVyZWRTcGFuSXNvbGF0aW9uU2NvcGU7cmV0dXJuIHRoaXMuX3ByZXBhcmVFdmVudChlLHQsbixkKS50aGVuKChuPT57aWYobnVsbD09PW4pdGhyb3cgdGhpcy5yZWNvcmREcm9wcGVkRXZlbnQoXCJldmVudF9wcm9jZXNzb3JcIix1LGUpLG5ldyBSZShcIkFuIGV2ZW50IHByb2Nlc3NvciByZXR1cm5lZCBgbnVsbGAsIHdpbGwgbm90IHNlbmQgZXZlbnQuXCIsXCJsb2dcIik7aWYodC5kYXRhJiYhMD09PXQuZGF0YS5fX3NlbnRyeV9fKXJldHVybiBuO2NvbnN0IGk9ZnVuY3Rpb24oZSx0LG4scil7Y29uc3R7YmVmb3JlU2VuZDppLGJlZm9yZVNlbmRUcmFuc2FjdGlvbjpvLGJlZm9yZVNlbmRTcGFuOmF9PXQ7aWYoVm4obikmJmkpcmV0dXJuIGkobixyKTtpZihKbihuKSl7aWYobi5zcGFucyYmYSl7Y29uc3QgdD1bXTtmb3IoY29uc3QgciBvZiBuLnNwYW5zKXtjb25zdCBuPWEocik7bj90LnB1c2gobik6ZS5yZWNvcmREcm9wcGVkRXZlbnQoXCJiZWZvcmVfc2VuZFwiLFwic3BhblwiKX1uLnNwYW5zPXR9aWYobyl7aWYobi5zcGFucyl7Y29uc3QgZT1uLnNwYW5zLmxlbmd0aDtuLnNka1Byb2Nlc3NpbmdNZXRhZGF0YT17Li4ubi5zZGtQcm9jZXNzaW5nTWV0YWRhdGEsc3BhbkNvdW50QmVmb3JlUHJvY2Vzc2luZzplfX1yZXR1cm4gbyhuLHIpfX1yZXR1cm4gbn0odGhpcyxyLG4sdCk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1gJHt0fSBtdXN0IHJldHVybiBcXGBudWxsXFxgIG9yIGEgdmFsaWQgZXZlbnQuYDtpZih1ZShlKSlyZXR1cm4gZS50aGVuKChlPT57aWYoIWNlKGUpJiZudWxsIT09ZSl0aHJvdyBuZXcgUmUobik7cmV0dXJuIGV9KSwoZT0+e3Rocm93IG5ldyBSZShgJHt0fSByZWplY3RlZCB3aXRoICR7ZX1gKX0pKTtpZighY2UoZSkmJm51bGwhPT1lKXRocm93IG5ldyBSZShuKTtyZXR1cm4gZX0oaSxjKX0pKS50aGVuKChyPT57aWYobnVsbD09PXIpe2lmKHRoaXMucmVjb3JkRHJvcHBlZEV2ZW50KFwiYmVmb3JlX3NlbmRcIix1LGUpLG8pe2NvbnN0IHQ9MSsoZS5zcGFuc3x8W10pLmxlbmd0aDt0aGlzLnJlY29yZERyb3BwZWRFdmVudChcImJlZm9yZV9zZW5kXCIsXCJzcGFuXCIsdCl9dGhyb3cgbmV3IFJlKGAke2N9IHJldHVybmVkIFxcYG51bGxcXGAsIHdpbGwgbm90IHNlbmQgZXZlbnQuYCxcImxvZ1wiKX1jb25zdCBpPW4mJm4uZ2V0U2Vzc2lvbigpO2lmKCFvJiZpJiZ0aGlzLl91cGRhdGVTZXNzaW9uRnJvbUV2ZW50KGksciksbyl7Y29uc3QgZT0oci5zZGtQcm9jZXNzaW5nTWV0YWRhdGEmJnIuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLnNwYW5Db3VudEJlZm9yZVByb2Nlc3Npbmd8fDApLShyLnNwYW5zP3Iuc3BhbnMubGVuZ3RoOjApO2U+MCYmdGhpcy5yZWNvcmREcm9wcGVkRXZlbnQoXCJiZWZvcmVfc2VuZFwiLFwic3BhblwiLGUpfWNvbnN0IGE9ci50cmFuc2FjdGlvbl9pbmZvO2lmKG8mJmEmJnIudHJhbnNhY3Rpb24hPT1lLnRyYW5zYWN0aW9uKXtjb25zdCBlPVwiY3VzdG9tXCI7ci50cmFuc2FjdGlvbl9pbmZvPXsuLi5hLHNvdXJjZTplfX1yZXR1cm4gdGhpcy5zZW5kRXZlbnQocix0KSxyfSkpLnRoZW4obnVsbCwoZT0+e2lmKGUgaW5zdGFuY2VvZiBSZSl0aHJvdyBlO3Rocm93IHRoaXMuY2FwdHVyZUV4Y2VwdGlvbihlLHtkYXRhOntfX3NlbnRyeV9fOiEwfSxvcmlnaW5hbEV4Y2VwdGlvbjplfSksbmV3IFJlKGBFdmVudCBwcm9jZXNzaW5nIHBpcGVsaW5lIHRocmV3IGFuIGVycm9yLCBvcmlnaW5hbCBldmVudCB3aWxsIG5vdCBiZSBzZW50LiBEZXRhaWxzIGhhdmUgYmVlbiBzZW50IGFzIGEgbmV3IGV2ZW50LlxcblJlYXNvbjogJHtlfWApfSkpfV9wcm9jZXNzKGUpe3RoaXMuX251bVByb2Nlc3NpbmcrKyxlLnRoZW4oKGU9Pih0aGlzLl9udW1Qcm9jZXNzaW5nLS0sZSkpLChlPT4odGhpcy5fbnVtUHJvY2Vzc2luZy0tLGUpKSl9X2NsZWFyT3V0Y29tZXMoKXtjb25zdCBlPXRoaXMuX291dGNvbWVzO3JldHVybiB0aGlzLl9vdXRjb21lcz17fSxPYmplY3QuZW50cmllcyhlKS5tYXAoKChbZSx0XSk9Pntjb25zdFtuLHJdPWUuc3BsaXQoXCI6XCIpO3JldHVybntyZWFzb246bixjYXRlZ29yeTpyLHF1YW50aXR5OnR9fSkpfV9mbHVzaE91dGNvbWVzKCl7S3QmJnhlLmxvZyhcIkZsdXNoaW5nIG91dGNvbWVzLi4uXCIpO2NvbnN0IGU9dGhpcy5fY2xlYXJPdXRjb21lcygpO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gdm9pZChLdCYmeGUubG9nKFwiTm8gb3V0Y29tZXMgdG8gc2VuZFwiKSk7aWYoIXRoaXMuX2RzbilyZXR1cm4gdm9pZChLdCYmeGUubG9nKFwiTm8gZHNuIHByb3ZpZGVkLCB3aWxsIG5vdCBzZW5kIG91dGNvbWVzXCIpKTtLdCYmeGUubG9nKFwiU2VuZGluZyBvdXRjb21lczpcIixlKTtjb25zdCB0PShuPWUsRnQoKHI9dGhpcy5fb3B0aW9ucy50dW5uZWwmJkllKHRoaXMuX2RzbikpP3tkc246cn06e30sW1t7dHlwZTpcImNsaWVudF9yZXBvcnRcIn0se3RpbWVzdGFtcDppfHxsdCgpLGRpc2NhcmRlZF9ldmVudHM6bn1dXSkpO3ZhciBuLHIsaTt0aGlzLnNlbmRFbnZlbG9wZSh0KX19ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIHZvaWQgMD09PWUudHlwZX1mdW5jdGlvbiBKbihlKXtyZXR1cm5cInRyYW5zYWN0aW9uXCI9PT1lLnR5cGV9ZnVuY3Rpb24gJG4oZSx0LG49anQoZS5idWZmZXJTaXplfHw2NCkpe2xldCByPXt9O3JldHVybntzZW5kOmZ1bmN0aW9uKGkpe2NvbnN0IG89W107aWYoVXQoaSwoKHQsbik9Pntjb25zdCBpPVd0KG4pO2lmKGZ1bmN0aW9uKGUsdCxuPURhdGUubm93KCkpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBlW3RdfHxlLmFsbHx8MH0oZSx0KT5ufShyLGkpKXtjb25zdCByPXFuKHQsbik7ZS5yZWNvcmREcm9wcGVkRXZlbnQoXCJyYXRlbGltaXRfYmFja29mZlwiLGkscil9ZWxzZSBvLnB1c2godCl9KSksMD09PW8ubGVuZ3RoKXJldHVybiBQdCh7fSk7Y29uc3QgYT1GdChpWzBdLG8pLHM9dD0+e1V0KGEsKChuLHIpPT57Y29uc3QgaT1xbihuLHIpO2UucmVjb3JkRHJvcHBlZEV2ZW50KHQsV3QociksaSl9KSl9O3JldHVybiBuLmFkZCgoKCk9PnQoe2JvZHk6SnQoYSl9KS50aGVuKChlPT4odm9pZCAwIT09ZS5zdGF0dXNDb2RlJiYoZS5zdGF0dXNDb2RlPDIwMHx8ZS5zdGF0dXNDb2RlPj0zMDApJiZLdCYmeGUud2FybihgU2VudHJ5IHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBjb2RlICR7ZS5zdGF0dXNDb2RlfSB0byBzZW50IGV2ZW50LmApLHI9SHQocixlKSxlKSksKGU9Pnt0aHJvdyBzKFwibmV0d29ya19lcnJvclwiKSxlfSkpKSkudGhlbigoZT0+ZSksKGU9PntpZihlIGluc3RhbmNlb2YgUmUpcmV0dXJuIEt0JiZ4ZS5lcnJvcihcIlNraXBwZWQgc2VuZGluZyBldmVudCBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsLlwiKSxzKFwicXVldWVfb3ZlcmZsb3dcIiksUHQoe30pO3Rocm93IGV9KSl9LGZsdXNoOmU9Pm4uZHJhaW4oZSl9fWZ1bmN0aW9uIHFuKGUsdCl7aWYoXCJldmVudFwiPT09dHx8XCJ0cmFuc2FjdGlvblwiPT09dClyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lWzFdOnZvaWQgMH1jb25zdCBXbj0xMDA7ZnVuY3Rpb24gem4oZSx0KXtjb25zdCBuPWZuKCkscj1obigpO2lmKCFuKXJldHVybjtjb25zdHtiZWZvcmVCcmVhZGNydW1iOmk9bnVsbCxtYXhCcmVhZGNydW1iczpvPVdufT1uLmdldE9wdGlvbnMoKTtpZihvPD0wKXJldHVybjtjb25zdCBhPXt0aW1lc3RhbXA6bHQoKSwuLi5lfSxzPWk/amUoKCgpPT5pKGEsdCkpKTphO251bGwhPT1zJiYobi5lbWl0JiZuLmVtaXQoXCJiZWZvcmVBZGRCcmVhZGNydW1iXCIscyx0KSxyLmFkZEJyZWFkY3J1bWIocyxvKSl9bGV0IEhuO2NvbnN0IEduPW5ldyBXZWFrTWFwLFFuPSgpPT4oe25hbWU6XCJGdW5jdGlvblRvU3RyaW5nXCIsc2V0dXBPbmNlKCl7SG49RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO3RyeXtGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oLi4uZSl7Y29uc3QgdD1WZSh0aGlzKSxuPUduLmhhcyhmbigpKSYmdm9pZCAwIT09dD90OnRoaXM7cmV0dXJuIEhuLmFwcGx5KG4sZSl9fWNhdGNoKGUpe319LHNldHVwKGUpe0duLnNldChlLCEwKX19KSxLbj1bL15TY3JpcHQgZXJyb3JcXC4/JC8sL15KYXZhc2NyaXB0IGVycm9yOiBTY3JpcHQgZXJyb3JcXC4/IG9uIGxpbmUgMCQvLC9eUmVzaXplT2JzZXJ2ZXIgbG9vcCBjb21wbGV0ZWQgd2l0aCB1bmRlbGl2ZXJlZCBub3RpZmljYXRpb25zLiQvLC9eQ2Fubm90IHJlZGVmaW5lIHByb3BlcnR5OiBnb29nbGV0YWckLyxcInVuZGVmaW5lZCBpcyBub3QgYW4gb2JqZWN0IChldmFsdWF0aW5nICdhLkwnKVwiLCdjYW5cXCd0IHJlZGVmaW5lIG5vbi1jb25maWd1cmFibGUgcHJvcGVydHkgXCJzb2xhbmFcIicsXCJ2digpLmdldFJlc3RyaWN0aW9ucyBpcyBub3QgYSBmdW5jdGlvbi4gKEluICd2digpLmdldFJlc3RyaWN0aW9ucygxLGEpJywgJ3Z2KCkuZ2V0UmVzdHJpY3Rpb25zJyBpcyB1bmRlZmluZWQpXCIsXCJDYW4ndCBmaW5kIHZhcmlhYmxlOiBfQXV0b2ZpbGxDYWxsYmFja0hhbmRsZXJcIl0sWW49KGU9e30pPT4oe25hbWU6XCJJbmJvdW5kRmlsdGVyc1wiLHByb2Nlc3NFdmVudCh0LG4scil7Y29uc3QgaT1yLmdldE9wdGlvbnMoKSxvPWZ1bmN0aW9uKGU9e30sdD17fSl7cmV0dXJue2FsbG93VXJsczpbLi4uZS5hbGxvd1VybHN8fFtdLC4uLnQuYWxsb3dVcmxzfHxbXV0sZGVueVVybHM6Wy4uLmUuZGVueVVybHN8fFtdLC4uLnQuZGVueVVybHN8fFtdXSxpZ25vcmVFcnJvcnM6Wy4uLmUuaWdub3JlRXJyb3JzfHxbXSwuLi50Lmlnbm9yZUVycm9yc3x8W10sLi4uZS5kaXNhYmxlRXJyb3JEZWZhdWx0cz9bXTpLbl0saWdub3JlVHJhbnNhY3Rpb25zOlsuLi5lLmlnbm9yZVRyYW5zYWN0aW9uc3x8W10sLi4udC5pZ25vcmVUcmFuc2FjdGlvbnN8fFtdXSxpZ25vcmVJbnRlcm5hbDp2b2lkIDA9PT1lLmlnbm9yZUludGVybmFsfHxlLmlnbm9yZUludGVybmFsfX0oZSxpKTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtpZih0Lmlnbm9yZUludGVybmFsJiZmdW5jdGlvbihlKXt0cnl7cmV0dXJuXCJTZW50cnlFcnJvclwiPT09ZS5leGNlcHRpb24udmFsdWVzWzBdLnR5cGV9Y2F0Y2goZSl7fXJldHVybiExfShlKSlyZXR1cm4gS3QmJnhlLndhcm4oYEV2ZW50IGRyb3BwZWQgZHVlIHRvIGJlaW5nIGludGVybmFsIFNlbnRyeSBFcnJvci5cXG5FdmVudDogJHtidChlKX1gKSwhMDtpZihmdW5jdGlvbihlLHQpe2lmKGUudHlwZXx8IXR8fCF0Lmxlbmd0aClyZXR1cm4hMTtyZXR1cm4gZnVuY3Rpb24oZSl7Y29uc3QgdD1bXTtlLm1lc3NhZ2UmJnQucHVzaChlLm1lc3NhZ2UpO2xldCBuO3RyeXtuPWUuZXhjZXB0aW9uLnZhbHVlc1tlLmV4Y2VwdGlvbi52YWx1ZXMubGVuZ3RoLTFdfWNhdGNoKGUpe31uJiZuLnZhbHVlJiYodC5wdXNoKG4udmFsdWUpLG4udHlwZSYmdC5wdXNoKGAke24udHlwZX06ICR7bi52YWx1ZX1gKSk7cmV0dXJuIHR9KGUpLnNvbWUoKGU9Pm1lKGUsdCkpKX0oZSx0Lmlnbm9yZUVycm9ycykpcmV0dXJuIEt0JiZ4ZS53YXJuKGBFdmVudCBkcm9wcGVkIGR1ZSB0byBiZWluZyBtYXRjaGVkIGJ5IFxcYGlnbm9yZUVycm9yc1xcYCBvcHRpb24uXFxuRXZlbnQ6ICR7YnQoZSl9YCksITA7aWYoZnVuY3Rpb24oZSl7aWYoZS50eXBlKXJldHVybiExO2lmKCFlLmV4Y2VwdGlvbnx8IWUuZXhjZXB0aW9uLnZhbHVlc3x8MD09PWUuZXhjZXB0aW9uLnZhbHVlcy5sZW5ndGgpcmV0dXJuITE7cmV0dXJuIWUubWVzc2FnZSYmIWUuZXhjZXB0aW9uLnZhbHVlcy5zb21lKChlPT5lLnN0YWNrdHJhY2V8fGUudHlwZSYmXCJFcnJvclwiIT09ZS50eXBlfHxlLnZhbHVlKSl9KGUpKXJldHVybiBLdCYmeGUud2FybihgRXZlbnQgZHJvcHBlZCBkdWUgdG8gbm90IGhhdmluZyBhbiBlcnJvciBtZXNzYWdlLCBlcnJvciB0eXBlIG9yIHN0YWNrdHJhY2UuXFxuRXZlbnQ6ICR7YnQoZSl9YCksITA7aWYoZnVuY3Rpb24oZSx0KXtpZihcInRyYW5zYWN0aW9uXCIhPT1lLnR5cGV8fCF0fHwhdC5sZW5ndGgpcmV0dXJuITE7Y29uc3Qgbj1lLnRyYW5zYWN0aW9uO3JldHVybiEhbiYmbWUobix0KX0oZSx0Lmlnbm9yZVRyYW5zYWN0aW9ucykpcmV0dXJuIEt0JiZ4ZS53YXJuKGBFdmVudCBkcm9wcGVkIGR1ZSB0byBiZWluZyBtYXRjaGVkIGJ5IFxcYGlnbm9yZVRyYW5zYWN0aW9uc1xcYCBvcHRpb24uXFxuRXZlbnQ6ICR7YnQoZSl9YCksITA7aWYoZnVuY3Rpb24oZSx0KXtpZighdHx8IXQubGVuZ3RoKXJldHVybiExO2NvbnN0IG49WG4oZSk7cmV0dXJuISFuJiZtZShuLHQpfShlLHQuZGVueVVybHMpKXJldHVybiBLdCYmeGUud2FybihgRXZlbnQgZHJvcHBlZCBkdWUgdG8gYmVpbmcgbWF0Y2hlZCBieSBcXGBkZW55VXJsc1xcYCBvcHRpb24uXFxuRXZlbnQ6ICR7YnQoZSl9LlxcblVybDogJHtYbihlKX1gKSwhMDtpZighZnVuY3Rpb24oZSx0KXtpZighdHx8IXQubGVuZ3RoKXJldHVybiEwO2NvbnN0IG49WG4oZSk7cmV0dXJuIW58fG1lKG4sdCl9KGUsdC5hbGxvd1VybHMpKXJldHVybiBLdCYmeGUud2FybihgRXZlbnQgZHJvcHBlZCBkdWUgdG8gbm90IGJlaW5nIG1hdGNoZWQgYnkgXFxgYWxsb3dVcmxzXFxgIG9wdGlvbi5cXG5FdmVudDogJHtidChlKX0uXFxuVXJsOiAke1huKGUpfWApLCEwO3JldHVybiExfSh0LG8pP251bGw6dH19KTtmdW5jdGlvbiBYbihlKXt0cnl7bGV0IHQ7dHJ5e3Q9ZS5leGNlcHRpb24udmFsdWVzWzBdLnN0YWNrdHJhY2UuZnJhbWVzfWNhdGNoKGUpe31yZXR1cm4gdD9mdW5jdGlvbihlPVtdKXtmb3IobGV0IHQ9ZS5sZW5ndGgtMTt0Pj0wO3QtLSl7Y29uc3Qgbj1lW3RdO2lmKG4mJlwiPGFub255bW91cz5cIiE9PW4uZmlsZW5hbWUmJlwiW25hdGl2ZSBjb2RlXVwiIT09bi5maWxlbmFtZSlyZXR1cm4gbi5maWxlbmFtZXx8bnVsbH1yZXR1cm4gbnVsbH0odCk6bnVsbH1jYXRjaCh0KXtyZXR1cm4gS3QmJnhlLmVycm9yKGBDYW5ub3QgZXh0cmFjdCB1cmwgZm9yIGV2ZW50ICR7YnQoZSl9YCksbnVsbH19Y29uc3QgWm49KCk9PntsZXQgZTtyZXR1cm57bmFtZTpcIkRlZHVwZVwiLHByb2Nlc3NFdmVudCh0KXtpZih0LnR5cGUpcmV0dXJuIHQ7dHJ5e2lmKGZ1bmN0aW9uKGUsdCl7aWYoIXQpcmV0dXJuITE7aWYoZnVuY3Rpb24oZSx0KXtjb25zdCBuPWUubWVzc2FnZSxyPXQubWVzc2FnZTtpZighbiYmIXIpcmV0dXJuITE7aWYobiYmIXJ8fCFuJiZyKXJldHVybiExO2lmKG4hPT1yKXJldHVybiExO2lmKCF0cihlLHQpKXJldHVybiExO2lmKCFlcihlLHQpKXJldHVybiExO3JldHVybiEwfShlLHQpKXJldHVybiEwO2lmKGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1ucih0KSxyPW5yKGUpO2lmKCFufHwhcilyZXR1cm4hMTtpZihuLnR5cGUhPT1yLnR5cGV8fG4udmFsdWUhPT1yLnZhbHVlKXJldHVybiExO2lmKCF0cihlLHQpKXJldHVybiExO2lmKCFlcihlLHQpKXJldHVybiExO3JldHVybiEwfShlLHQpKXJldHVybiEwO3JldHVybiExfSh0LGUpKXJldHVybiBLdCYmeGUud2FybihcIkV2ZW50IGRyb3BwZWQgZHVlIHRvIGJlaW5nIGEgZHVwbGljYXRlIG9mIHByZXZpb3VzbHkgY2FwdHVyZWQgZXZlbnQuXCIpLG51bGx9Y2F0Y2goZSl7fXJldHVybiBlPXR9fX07ZnVuY3Rpb24gZXIoZSx0KXtsZXQgbj1aZShlKSxyPVplKHQpO2lmKCFuJiYhcilyZXR1cm4hMDtpZihuJiYhcnx8IW4mJnIpcmV0dXJuITE7aWYoci5sZW5ndGghPT1uLmxlbmd0aClyZXR1cm4hMTtmb3IobGV0IGU9MDtlPHIubGVuZ3RoO2UrKyl7Y29uc3QgdD1yW2VdLGk9bltlXTtpZih0LmZpbGVuYW1lIT09aS5maWxlbmFtZXx8dC5saW5lbm8hPT1pLmxpbmVub3x8dC5jb2xubyE9PWkuY29sbm98fHQuZnVuY3Rpb24hPT1pLmZ1bmN0aW9uKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIHRyKGUsdCl7bGV0IG49ZS5maW5nZXJwcmludCxyPXQuZmluZ2VycHJpbnQ7aWYoIW4mJiFyKXJldHVybiEwO2lmKG4mJiFyfHwhbiYmcilyZXR1cm4hMTt0cnl7cmV0dXJuIShuLmpvaW4oXCJcIikhPT1yLmpvaW4oXCJcIikpfWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBucihlKXtyZXR1cm4gZS5leGNlcHRpb24mJmUuZXhjZXB0aW9uLnZhbHVlcyYmZS5leGNlcHRpb24udmFsdWVzWzBdfWNvbnN0IHJyPWtlO2xldCBpcj0wO2Z1bmN0aW9uIG9yKCl7cmV0dXJuIGlyPjB9ZnVuY3Rpb24gYXIoZSx0PXt9LG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJuIGU7dHJ5e2NvbnN0IHQ9ZS5fX3NlbnRyeV93cmFwcGVkX187aWYodClyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6ZTtpZihWZShlKSlyZXR1cm4gZX1jYXRjaCh0KXtyZXR1cm4gZX1jb25zdCByPWZ1bmN0aW9uKCl7Y29uc3Qgcj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3RyeXtuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjb25zdCBpPXIubWFwKChlPT5hcihlLHQpKSk7cmV0dXJuIGUuYXBwbHkodGhpcyxpKX1jYXRjaChlKXt0aHJvdyBpcisrLHNldFRpbWVvdXQoKCgpPT57aXItLX0pKSxmdW5jdGlvbiguLi5lKXtjb25zdCB0PWRuKFl0KCkpO2lmKDI9PT1lLmxlbmd0aCl7Y29uc3RbbixyXT1lO3JldHVybiBuP3Qud2l0aFNldFNjb3BlKG4scik6dC53aXRoU2NvcGUocil9dC53aXRoU2NvcGUoZVswXSl9KChuPT57dmFyIGksbztuLmFkZEV2ZW50UHJvY2Vzc29yKChlPT4odC5tZWNoYW5pc20mJih3dChlLHZvaWQgMCx2b2lkIDApLFN0KGUsdC5tZWNoYW5pc20pKSxlLmV4dHJhPXsuLi5lLmV4dHJhLGFyZ3VtZW50czpyfSxlKSkpLGk9ZSxwbigpLmNhcHR1cmVFeGNlcHRpb24oaSx4bihvKSl9KSksZX19O3RyeXtmb3IoY29uc3QgdCBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpJiYoclt0XT1lW3RdKX1jYXRjaChlKXt9VWUocixlKSxCZShlLFwiX19zZW50cnlfd3JhcHBlZF9fXCIscik7dHJ5e09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocixcIm5hbWVcIikuY29uZmlndXJhYmxlJiZPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIm5hbWVcIix7Z2V0OigpPT5lLm5hbWV9KX1jYXRjaChlKXt9cmV0dXJuIHJ9Y29uc3Qgc3I9XCJ1bmRlZmluZWRcIj09dHlwZW9mIF9fU0VOVFJZX0RFQlVHX198fF9fU0VOVFJZX0RFQlVHX187ZnVuY3Rpb24gY3IoZSx0KXtjb25zdCBuPWRyKGUsdCkscj17dHlwZTp0JiZ0Lm5hbWUsdmFsdWU6aHIodCl9O3JldHVybiBuLmxlbmd0aCYmKHIuc3RhY2t0cmFjZT17ZnJhbWVzOm59KSx2b2lkIDA9PT1yLnR5cGUmJlwiXCI9PT1yLnZhbHVlJiYoci52YWx1ZT1cIlVucmVjb3ZlcmFibGUgZXJyb3IgY2F1Z2h0XCIpLHJ9ZnVuY3Rpb24gbHIoZSx0LG4scil7Y29uc3QgaT1mbigpLG89aSYmaS5nZXRPcHRpb25zKCkubm9ybWFsaXplRGVwdGgsYT1mdW5jdGlvbihlKXtmb3IoY29uc3QgdCBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpKXtjb25zdCBuPWVbdF07aWYobiBpbnN0YW5jZW9mIEVycm9yKXJldHVybiBufXJldHVybn0odCkscz17X19zZXJpYWxpemVkX186Q3QodCxvKX07aWYoYSlyZXR1cm57ZXhjZXB0aW9uOnt2YWx1ZXM6W2NyKGUsYSldfSxleHRyYTpzfTtjb25zdCBjPXtleGNlcHRpb246e3ZhbHVlczpbe3R5cGU6bGUodCk/dC5jb25zdHJ1Y3Rvci5uYW1lOnI/XCJVbmhhbmRsZWRSZWplY3Rpb25cIjpcIkVycm9yXCIsdmFsdWU6bXIodCx7aXNVbmhhbmRsZWRSZWplY3Rpb246cn0pfV19LGV4dHJhOnN9O2lmKG4pe2NvbnN0IHQ9ZHIoZSxuKTt0Lmxlbmd0aCYmKGMuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlPXtmcmFtZXM6dH0pfXJldHVybiBjfWZ1bmN0aW9uIHVyKGUsdCl7cmV0dXJue2V4Y2VwdGlvbjp7dmFsdWVzOltjcihlLHQpXX19fWZ1bmN0aW9uIGRyKGUsdCl7Y29uc3Qgbj10LnN0YWNrdHJhY2V8fHQuc3RhY2t8fFwiXCIscj1mdW5jdGlvbihlKXtpZihlJiZwci50ZXN0KGUubWVzc2FnZSkpcmV0dXJuIDE7cmV0dXJuIDB9KHQpLGk9ZnVuY3Rpb24oZSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUuZnJhbWVzVG9Qb3ApcmV0dXJuIGUuZnJhbWVzVG9Qb3A7cmV0dXJuIDB9KHQpO3RyeXtyZXR1cm4gZShuLHIsaSl9Y2F0Y2goZSl7fXJldHVybltdfWNvbnN0IHByPS9NaW5pZmllZCBSZWFjdCBlcnJvciAjXFxkKzsvaTtmdW5jdGlvbiBocihlKXtjb25zdCB0PWUmJmUubWVzc2FnZTtyZXR1cm4gdD90LmVycm9yJiZcInN0cmluZ1wiPT10eXBlb2YgdC5lcnJvci5tZXNzYWdlP3QuZXJyb3IubWVzc2FnZTp0OlwiTm8gZXJyb3IgbWVzc2FnZVwifWZ1bmN0aW9uIGZyKGUsdCxuLHIsaSl7bGV0IG87aWYocmUodCkmJnQuZXJyb3Ipe3JldHVybiB1cihlLHQuZXJyb3IpfWlmKGllKHQpfHxuZSh0LFwiRE9NRXhjZXB0aW9uXCIpKXtjb25zdCBpPXQ7aWYoXCJzdGFja1wiaW4gdClvPXVyKGUsdCk7ZWxzZXtjb25zdCB0PWkubmFtZXx8KGllKGkpP1wiRE9NRXJyb3JcIjpcIkRPTUV4Y2VwdGlvblwiKSxhPWkubWVzc2FnZT9gJHt0fTogJHtpLm1lc3NhZ2V9YDp0O289dnIoZSxhLG4sciksd3QobyxhKX1yZXR1cm5cImNvZGVcImluIGkmJihvLnRhZ3M9ey4uLm8udGFncyxcIkRPTUV4Y2VwdGlvbi5jb2RlXCI6YCR7aS5jb2RlfWB9KSxvfWlmKHRlKHQpKXJldHVybiB1cihlLHQpO2lmKGNlKHQpfHxsZSh0KSl7cmV0dXJuIG89bHIoZSx0LG4saSksU3Qobyx7c3ludGhldGljOiEwfSksb31yZXR1cm4gbz12cihlLHQsbixyKSx3dChvLGAke3R9YCx2b2lkIDApLFN0KG8se3N5bnRoZXRpYzohMH0pLG99ZnVuY3Rpb24gdnIoZSx0LG4scil7Y29uc3QgaT17fTtpZihyJiZuKXtjb25zdCByPWRyKGUsbik7ci5sZW5ndGgmJihpLmV4Y2VwdGlvbj17dmFsdWVzOlt7dmFsdWU6dCxzdGFja3RyYWNlOntmcmFtZXM6cn19XX0pfWlmKGFlKHQpKXtjb25zdHtfX3NlbnRyeV90ZW1wbGF0ZV9zdHJpbmdfXzplLF9fc2VudHJ5X3RlbXBsYXRlX3ZhbHVlc19fOm59PXQ7cmV0dXJuIGkubG9nZW50cnk9e21lc3NhZ2U6ZSxwYXJhbXM6bn0saX1yZXR1cm4gaS5tZXNzYWdlPXQsaX1mdW5jdGlvbiBtcihlLHtpc1VuaGFuZGxlZFJlamVjdGlvbjp0fSl7Y29uc3Qgbj1mdW5jdGlvbihlLHQ9NDApe2NvbnN0IG49T2JqZWN0LmtleXMoSmUoZSkpO24uc29ydCgpO2NvbnN0IHI9blswXTtpZighcilyZXR1cm5cIltvYmplY3QgaGFzIG5vIGtleXNdXCI7aWYoci5sZW5ndGg+PXQpcmV0dXJuIGhlKHIsdCk7Zm9yKGxldCBlPW4ubGVuZ3RoO2U+MDtlLS0pe2NvbnN0IHI9bi5zbGljZSgwLGUpLmpvaW4oXCIsIFwiKTtpZighKHIubGVuZ3RoPnQpKXJldHVybiBlPT09bi5sZW5ndGg/cjpoZShyLHQpfXJldHVyblwiXCJ9KGUpLHI9dD9cInByb21pc2UgcmVqZWN0aW9uXCI6XCJleGNlcHRpb25cIjtpZihyZShlKSlyZXR1cm5gRXZlbnQgXFxgRXJyb3JFdmVudFxcYCBjYXB0dXJlZCBhcyAke3J9IHdpdGggbWVzc2FnZSBcXGAke2UubWVzc2FnZX1cXGBgO2lmKGxlKGUpKXtyZXR1cm5gRXZlbnQgXFxgJHtmdW5jdGlvbihlKXt0cnl7Y29uc3QgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIHQ/dC5jb25zdHJ1Y3Rvci5uYW1lOnZvaWQgMH1jYXRjaChlKXt9fShlKX1cXGAgKHR5cGU9JHtlLnR5cGV9KSBjYXB0dXJlZCBhcyAke3J9YH1yZXR1cm5gT2JqZWN0IGNhcHR1cmVkIGFzICR7cn0gd2l0aCBrZXlzOiAke259YH1jbGFzcyBnciBleHRlbmRzIFVue2NvbnN0cnVjdG9yKGUpe2NvbnN0IHQ9e3BhcmVudFNwYW5Jc0Fsd2F5c1Jvb3RTcGFuOiEwLC4uLmV9OyFmdW5jdGlvbihlLHQsbj1bdF0scj1cIm5wbVwiKXtjb25zdCBpPWUuX21ldGFkYXRhfHx7fTtpLnNka3x8KGkuc2RrPXtuYW1lOmBzZW50cnkuamF2YXNjcmlwdC4ke3R9YCxwYWNrYWdlczpuLm1hcCgoZT0+KHtuYW1lOmAke3J9OkBzZW50cnkvJHtlfWAsdmVyc2lvbjpTZX0pKSksdmVyc2lvbjpTZX0pLGUuX21ldGFkYXRhPWl9KHQsXCJicm93c2VyXCIsW1wiYnJvd3NlclwiXSxyci5TRU5UUllfU0RLX1NPVVJDRXx8XCJucG1cIiksc3VwZXIodCksdC5zZW5kQ2xpZW50UmVwb3J0cyYmcnIuZG9jdW1lbnQmJnJyLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsKCgpPT57XCJoaWRkZW5cIj09PXJyLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSYmdGhpcy5fZmx1c2hPdXRjb21lcygpfSkpfWV2ZW50RnJvbUV4Y2VwdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbixyKXtjb25zdCBpPWZyKGUsdCxuJiZuLnN5bnRoZXRpY0V4Y2VwdGlvbnx8dm9pZCAwLHIpO3JldHVybiBTdChpKSxpLmxldmVsPVwiZXJyb3JcIixuJiZuLmV2ZW50X2lkJiYoaS5ldmVudF9pZD1uLmV2ZW50X2lkKSxQdChpKX0odGhpcy5fb3B0aW9ucy5zdGFja1BhcnNlcixlLHQsdGhpcy5fb3B0aW9ucy5hdHRhY2hTdGFja3RyYWNlKX1ldmVudEZyb21NZXNzYWdlKGUsdD1cImluZm9cIixuKXtyZXR1cm4gZnVuY3Rpb24oZSx0LG49XCJpbmZvXCIscixpKXtjb25zdCBvPXZyKGUsdCxyJiZyLnN5bnRoZXRpY0V4Y2VwdGlvbnx8dm9pZCAwLGkpO3JldHVybiBvLmxldmVsPW4sciYmci5ldmVudF9pZCYmKG8uZXZlbnRfaWQ9ci5ldmVudF9pZCksUHQobyl9KHRoaXMuX29wdGlvbnMuc3RhY2tQYXJzZXIsZSx0LG4sdGhpcy5fb3B0aW9ucy5hdHRhY2hTdGFja3RyYWNlKX1jYXB0dXJlVXNlckZlZWRiYWNrKGUpe2lmKCF0aGlzLl9pc0VuYWJsZWQoKSlyZXR1cm4gdm9pZChzciYmeGUud2FybihcIlNESyBub3QgZW5hYmxlZCwgd2lsbCBub3QgY2FwdHVyZSB1c2VyIGZlZWRiYWNrLlwiKSk7Y29uc3QgdD1mdW5jdGlvbihlLHttZXRhZGF0YTp0LHR1bm5lbDpuLGRzbjpyfSl7Y29uc3QgaT17ZXZlbnRfaWQ6ZS5ldmVudF9pZCxzZW50X2F0OihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSwuLi50JiZ0LnNkayYme3Nkazp7bmFtZTp0LnNkay5uYW1lLHZlcnNpb246dC5zZGsudmVyc2lvbn19LC4uLiEhbiYmISFyJiZ7ZHNuOkllKHIpfX0sbz1mdW5jdGlvbihlKXtyZXR1cm5be3R5cGU6XCJ1c2VyX3JlcG9ydFwifSxlXX0oZSk7cmV0dXJuIEZ0KGksW29dKX0oZSx7bWV0YWRhdGE6dGhpcy5nZXRTZGtNZXRhZGF0YSgpLGRzbjp0aGlzLmdldERzbigpLHR1bm5lbDp0aGlzLmdldE9wdGlvbnMoKS50dW5uZWx9KTt0aGlzLnNlbmRFbnZlbG9wZSh0KX1fcHJlcGFyZUV2ZW50KGUsdCxuKXtyZXR1cm4gZS5wbGF0Zm9ybT1lLnBsYXRmb3JtfHxcImphdmFzY3JpcHRcIixzdXBlci5fcHJlcGFyZUV2ZW50KGUsdCxuKX19Y29uc3QgeXI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIF9fU0VOVFJZX0RFQlVHX198fF9fU0VOVFJZX0RFQlVHX18sX3I9a2U7bGV0IGJyLHdyLFNyLGtyO2Z1bmN0aW9uIE1yKCl7aWYoIV9yLmRvY3VtZW50KXJldHVybjtjb25zdCBlPWl0LmJpbmQobnVsbCxcImRvbVwiKSx0PUNyKGUsITApO19yLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHQsITEpLF9yLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLHQsITEpLFtcIkV2ZW50VGFyZ2V0XCIsXCJOb2RlXCJdLmZvckVhY2goKHQ9Pntjb25zdCBuPV9yW3RdJiZfclt0XS5wcm90b3R5cGU7biYmbi5oYXNPd25Qcm9wZXJ0eSYmbi5oYXNPd25Qcm9wZXJ0eShcImFkZEV2ZW50TGlzdGVuZXJcIikmJihGZShuLFwiYWRkRXZlbnRMaXN0ZW5lclwiLChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixyLGkpe2lmKFwiY2xpY2tcIj09PW58fFwia2V5cHJlc3NcIj09bil0cnl7Y29uc3Qgcj10aGlzLG89ci5fX3NlbnRyeV9pbnN0cnVtZW50YXRpb25faGFuZGxlcnNfXz1yLl9fc2VudHJ5X2luc3RydW1lbnRhdGlvbl9oYW5kbGVyc19ffHx7fSxhPW9bbl09b1tuXXx8e3JlZkNvdW50OjB9O2lmKCFhLmhhbmRsZXIpe2NvbnN0IHI9Q3IoZSk7YS5oYW5kbGVyPXIsdC5jYWxsKHRoaXMsbixyLGkpfWEucmVmQ291bnQrK31jYXRjaChlKXt9cmV0dXJuIHQuY2FsbCh0aGlzLG4scixpKX19KSksRmUobixcInJlbW92ZUV2ZW50TGlzdGVuZXJcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtpZihcImNsaWNrXCI9PT10fHxcImtleXByZXNzXCI9PXQpdHJ5e2NvbnN0IG49dGhpcyxpPW4uX19zZW50cnlfaW5zdHJ1bWVudGF0aW9uX2hhbmRsZXJzX198fHt9LG89aVt0XTtvJiYoby5yZWZDb3VudC0tLG8ucmVmQ291bnQ8PTAmJihlLmNhbGwodGhpcyx0LG8uaGFuZGxlcixyKSxvLmhhbmRsZXI9dm9pZCAwLGRlbGV0ZSBpW3RdKSwwPT09T2JqZWN0LmtleXMoaSkubGVuZ3RoJiZkZWxldGUgbi5fX3NlbnRyeV9pbnN0cnVtZW50YXRpb25faGFuZGxlcnNfXyl9Y2F0Y2goZSl7fXJldHVybiBlLmNhbGwodGhpcyx0LG4scil9fSkpKX0pKX1mdW5jdGlvbiBDcihlLHQ9ITEpe3JldHVybiBuPT57aWYoIW58fG4uX3NlbnRyeUNhcHR1cmVkKXJldHVybjtjb25zdCByPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZS50YXJnZXR9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fShuKTtpZihmdW5jdGlvbihlLHQpe3JldHVyblwia2V5cHJlc3NcIj09PWUmJighdHx8IXQudGFnTmFtZXx8XCJJTlBVVFwiIT09dC50YWdOYW1lJiZcIlRFWFRBUkVBXCIhPT10LnRhZ05hbWUmJiF0LmlzQ29udGVudEVkaXRhYmxlKX0obi50eXBlLHIpKXJldHVybjtCZShuLFwiX3NlbnRyeUNhcHR1cmVkXCIsITApLHImJiFyLl9zZW50cnlJZCYmQmUocixcIl9zZW50cnlJZFwiLHl0KCkpO2NvbnN0IGk9XCJrZXlwcmVzc1wiPT09bi50eXBlP1wiaW5wdXRcIjpuLnR5cGU7aWYoIWZ1bmN0aW9uKGUpe2lmKGUudHlwZSE9PXdyKXJldHVybiExO3RyeXtpZighZS50YXJnZXR8fGUudGFyZ2V0Ll9zZW50cnlJZCE9PVNyKXJldHVybiExfWNhdGNoKGUpe31yZXR1cm4hMH0obikpe2Uoe2V2ZW50Om4sbmFtZTppLGdsb2JhbDp0fSksd3I9bi50eXBlLFNyPXI/ci5fc2VudHJ5SWQ6dm9pZCAwfWNsZWFyVGltZW91dChiciksYnI9X3Iuc2V0VGltZW91dCgoKCk9PntTcj12b2lkIDAsd3I9dm9pZCAwfSksMWUzKX19ZnVuY3Rpb24gRXIoKXtpZighZnVuY3Rpb24oKXtjb25zdCBlPVF0LmNocm9tZSx0PWUmJmUuYXBwJiZlLmFwcC5ydW50aW1lLG49XCJoaXN0b3J5XCJpbiBRdCYmISFRdC5oaXN0b3J5LnB1c2hTdGF0ZSYmISFRdC5oaXN0b3J5LnJlcGxhY2VTdGF0ZTtyZXR1cm4hdCYmbn0oKSlyZXR1cm47Y29uc3QgZT1fci5vbnBvcHN0YXRlO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGZ1bmN0aW9uKC4uLnQpe2NvbnN0IG49dC5sZW5ndGg+Mj90WzJdOnZvaWQgMDtpZihuKXtjb25zdCBlPWtyLHQ9U3RyaW5nKG4pO2tyPXQ7aXQoXCJoaXN0b3J5XCIse2Zyb206ZSx0bzp0fSl9cmV0dXJuIGUuYXBwbHkodGhpcyx0KX19X3Iub25wb3BzdGF0ZT1mdW5jdGlvbiguLi50KXtjb25zdCBuPV9yLmxvY2F0aW9uLmhyZWYscj1rcjtrcj1uO2lmKGl0KFwiaGlzdG9yeVwiLHtmcm9tOnIsdG86bn0pLGUpdHJ5e3JldHVybiBlLmFwcGx5KHRoaXMsdCl9Y2F0Y2goZSl7fX0sRmUoX3IuaGlzdG9yeSxcInB1c2hTdGF0ZVwiLHQpLEZlKF9yLmhpc3RvcnksXCJyZXBsYWNlU3RhdGVcIix0KX1jb25zdCBUcj17fTtmdW5jdGlvbiBQcihlKXtUcltlXT12b2lkIDB9Y29uc3QgT3I9XCJfX3NlbnRyeV94aHJfdjNfX1wiO2Z1bmN0aW9uIEFyKCl7aWYoIV9yLlhNTEh0dHBSZXF1ZXN0KXJldHVybjtjb25zdCBlPVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZTtlLm9wZW49bmV3IFByb3h5KGUub3Blbix7YXBwbHkoZSx0LG4pe2NvbnN0IHI9MWUzKnV0KCksaT1vZShuWzBdKT9uWzBdLnRvVXBwZXJDYXNlKCk6dm9pZCAwLG89ZnVuY3Rpb24oZSl7aWYob2UoZSkpcmV0dXJuIGU7dHJ5e3JldHVybiBlLnRvU3RyaW5nKCl9Y2F0Y2goZSl7fXJldHVybn0oblsxXSk7aWYoIWl8fCFvKXJldHVybiBlLmFwcGx5KHQsbik7dFtPcl09e21ldGhvZDppLHVybDpvLHJlcXVlc3RfaGVhZGVyczp7fX0sXCJQT1NUXCI9PT1pJiZvLm1hdGNoKC9zZW50cnlfa2V5LykmJih0Ll9fc2VudHJ5X293bl9yZXF1ZXN0X189ITApO2NvbnN0IGE9KCk9Pntjb25zdCBlPXRbT3JdO2lmKGUmJjQ9PT10LnJlYWR5U3RhdGUpe3RyeXtlLnN0YXR1c19jb2RlPXQuc3RhdHVzfWNhdGNoKGUpe31pdChcInhoclwiLHtlbmRUaW1lc3RhbXA6MWUzKnV0KCksc3RhcnRUaW1lc3RhbXA6cix4aHI6dH0pfX07cmV0dXJuXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQub25yZWFkeXN0YXRlY2hhbmdlP3Qub25yZWFkeXN0YXRlY2hhbmdlPW5ldyBQcm94eSh0Lm9ucmVhZHlzdGF0ZWNoYW5nZSx7YXBwbHk6KGUsdCxuKT0+KGEoKSxlLmFwcGx5KHQsbikpfSk6dC5hZGRFdmVudExpc3RlbmVyKFwicmVhZHlzdGF0ZWNoYW5nZVwiLGEpLHQuc2V0UmVxdWVzdEhlYWRlcj1uZXcgUHJveHkodC5zZXRSZXF1ZXN0SGVhZGVyLHthcHBseShlLHQsbil7Y29uc3RbcixpXT1uLG89dFtPcl07cmV0dXJuIG8mJm9lKHIpJiZvZShpKSYmKG8ucmVxdWVzdF9oZWFkZXJzW3IudG9Mb3dlckNhc2UoKV09aSksZS5hcHBseSh0LG4pfX0pLGUuYXBwbHkodCxuKX19KSxlLnNlbmQ9bmV3IFByb3h5KGUuc2VuZCx7YXBwbHkoZSx0LG4pe2NvbnN0IHI9dFtPcl07aWYoIXIpcmV0dXJuIGUuYXBwbHkodCxuKTt2b2lkIDAhPT1uWzBdJiYoci5ib2R5PW5bMF0pO3JldHVybiBpdChcInhoclwiLHtzdGFydFRpbWVzdGFtcDoxZTMqdXQoKSx4aHI6dH0pLGUuYXBwbHkodCxuKX19KX1mdW5jdGlvbiBqcihlLHQ9ZnVuY3Rpb24oZSl7Y29uc3QgdD1UcltlXTtpZih0KXJldHVybiB0O2xldCBuPV9yW2VdO2lmKHN0KG4pKXJldHVybiBUcltlXT1uLmJpbmQoX3IpO2NvbnN0IHI9X3IuZG9jdW1lbnQ7aWYociYmXCJmdW5jdGlvblwiPT10eXBlb2Ygci5jcmVhdGVFbGVtZW50KXRyeXtjb25zdCB0PXIuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTt0LmhpZGRlbj0hMCxyLmhlYWQuYXBwZW5kQ2hpbGQodCk7Y29uc3QgaT10LmNvbnRlbnRXaW5kb3c7aSYmaVtlXSYmKG49aVtlXSksci5oZWFkLnJlbW92ZUNoaWxkKHQpfWNhdGNoKHQpe3lyJiZ4ZS53YXJuKGBDb3VsZCBub3QgY3JlYXRlIHNhbmRib3ggaWZyYW1lIGZvciAke2V9IGNoZWNrLCBiYWlsaW5nIHRvIHdpbmRvdy4ke2V9OiBgLHQpfXJldHVybiBuP1RyW2VdPW4uYmluZChfcik6bn0oXCJmZXRjaFwiKSl7bGV0IG49MCxyPTA7cmV0dXJuICRuKGUsKGZ1bmN0aW9uKGkpe2NvbnN0IG89aS5ib2R5Lmxlbmd0aDtuKz1vLHIrKztjb25zdCBhPXtib2R5OmkuYm9keSxtZXRob2Q6XCJQT1NUXCIscmVmZXJyZXJQb2xpY3k6XCJvcmlnaW5cIixoZWFkZXJzOmUuaGVhZGVycyxrZWVwYWxpdmU6bjw9NmU0JiZyPDE1LC4uLmUuZmV0Y2hPcHRpb25zfTtpZighdClyZXR1cm4gUHIoXCJmZXRjaFwiKSxPdChcIk5vIGZldGNoIGltcGxlbWVudGF0aW9uIGF2YWlsYWJsZVwiKTt0cnl7cmV0dXJuIHQoZS51cmwsYSkudGhlbigoZT0+KG4tPW8sci0tLHtzdGF0dXNDb2RlOmUuc3RhdHVzLGhlYWRlcnM6e1wieC1zZW50cnktcmF0ZS1saW1pdHNcIjplLmhlYWRlcnMuZ2V0KFwiWC1TZW50cnktUmF0ZS1MaW1pdHNcIiksXCJyZXRyeS1hZnRlclwiOmUuaGVhZGVycy5nZXQoXCJSZXRyeS1BZnRlclwiKX19KSkpfWNhdGNoKGUpe3JldHVybiBQcihcImZldGNoXCIpLG4tPW8sci0tLE90KGUpfX0pKX1mdW5jdGlvbiB4cihlLHQsbixyKXtjb25zdCBpPXtmaWxlbmFtZTplLGZ1bmN0aW9uOlwiPGFub255bW91cz5cIj09PXQ/SGU6dCxpbl9hcHA6ITB9O3JldHVybiB2b2lkIDAhPT1uJiYoaS5saW5lbm89biksdm9pZCAwIT09ciYmKGkuY29sbm89ciksaX1jb25zdCBMcj0vXlxccyphdCAoXFxTKz8pKD86OihcXGQrKSkoPzo6KFxcZCspKVxccyokL2ksSXI9L15cXHMqYXQgKD86KC4rP1xcKSg/OiBcXFsuK1xcXSk/fC4qPykgP1xcKCg/OmFkZHJlc3MgYXQgKT8pPyg/OmFzeW5jICk/KCg/Ojxhbm9ueW1vdXM+fFstYS16XSs6fC4qYnVuZGxlfFxcLyk/Lio/KSg/OjooXFxkKykpPyg/OjooXFxkKykpP1xcKT9cXHMqJC9pLERyPS9cXCgoXFxTKikoPzo6KFxcZCspKSg/OjooXFxkKykpXFwpLyxOcj0vXlxccyooLio/KSg/OlxcKCguKj8pXFwpKT8oPzpefEApPygoPzpbLWEtel0rKT86XFwvLio/fFxcW25hdGl2ZSBjb2RlXFxdfFteQF0qKD86YnVuZGxlfFxcZCtcXC5qcyl8XFwvW1xcd1xcLS4gLz1dKykoPzo6KFxcZCspKT8oPzo6KFxcZCspKT9cXHMqJC9pLFJyPS8oXFxTKykgbGluZSAoXFxkKykoPzogPiBldmFsIGxpbmUgXFxkKykqID4gZXZhbC9pLEZyPWZ1bmN0aW9uKC4uLmUpe2NvbnN0IHQ9ZS5zb3J0KCgoZSx0KT0+ZVswXS10WzBdKSkubWFwKChlPT5lWzFdKSk7cmV0dXJuKGUsbj0wLHI9MCk9Pntjb25zdCBpPVtdLG89ZS5zcGxpdChcIlxcblwiKTtmb3IobGV0IGU9bjtlPG8ubGVuZ3RoO2UrKyl7Y29uc3Qgbj1vW2VdO2lmKG4ubGVuZ3RoPjEwMjQpY29udGludWU7Y29uc3QgYT1HZS50ZXN0KG4pP24ucmVwbGFjZShHZSxcIiQxXCIpOm47aWYoIWEubWF0Y2goL1xcUypFcnJvcjogLykpe2Zvcihjb25zdCBlIG9mIHQpe2NvbnN0IHQ9ZShhKTtpZih0KXtpLnB1c2godCk7YnJlYWt9fWlmKGkubGVuZ3RoPj01MCtyKWJyZWFrfX1yZXR1cm4gZnVuY3Rpb24oZSl7aWYoIWUubGVuZ3RoKXJldHVybltdO2NvbnN0IHQ9QXJyYXkuZnJvbShlKTsvc2VudHJ5V3JhcHBlZC8udGVzdChLZSh0KS5mdW5jdGlvbnx8XCJcIikmJnQucG9wKCk7dC5yZXZlcnNlKCksUWUudGVzdChLZSh0KS5mdW5jdGlvbnx8XCJcIikmJih0LnBvcCgpLFFlLnRlc3QoS2UodCkuZnVuY3Rpb258fFwiXCIpJiZ0LnBvcCgpKTtyZXR1cm4gdC5zbGljZSgwLDUwKS5tYXAoKGU9Pih7Li4uZSxmaWxlbmFtZTplLmZpbGVuYW1lfHxLZSh0KS5maWxlbmFtZSxmdW5jdGlvbjplLmZ1bmN0aW9ufHxIZX0pKSl9KGkuc2xpY2UocikpfX0oLi4uW1szMCxlPT57Y29uc3QgdD1Mci5leGVjKGUpO2lmKHQpe2NvbnN0WyxlLG4scl09dDtyZXR1cm4geHIoZSxIZSwrbiwrcil9Y29uc3Qgbj1Jci5leGVjKGUpO2lmKG4pe2lmKG5bMl0mJjA9PT1uWzJdLmluZGV4T2YoXCJldmFsXCIpKXtjb25zdCBlPURyLmV4ZWMoblsyXSk7ZSYmKG5bMl09ZVsxXSxuWzNdPWVbMl0sbls0XT1lWzNdKX1jb25zdFtlLHRdPUJyKG5bMV18fEhlLG5bMl0pO3JldHVybiB4cih0LGUsblszXT8rblszXTp2b2lkIDAsbls0XT8rbls0XTp2b2lkIDApfX1dLFs1MCxlPT57Y29uc3QgdD1Oci5leGVjKGUpO2lmKHQpe2lmKHRbM10mJnRbM10uaW5kZXhPZihcIiA+IGV2YWxcIik+LTEpe2NvbnN0IGU9UnIuZXhlYyh0WzNdKTtlJiYodFsxXT10WzFdfHxcImV2YWxcIix0WzNdPWVbMV0sdFs0XT1lWzJdLHRbNV09XCJcIil9bGV0IGU9dFszXSxuPXRbMV18fEhlO3JldHVybltuLGVdPUJyKG4sZSkseHIoZSxuLHRbNF0/K3RbNF06dm9pZCAwLHRbNV0/K3RbNV06dm9pZCAwKX19XV0pLEJyPShlLHQpPT57Y29uc3Qgbj0tMSE9PWUuaW5kZXhPZihcInNhZmFyaS1leHRlbnNpb25cIikscj0tMSE9PWUuaW5kZXhPZihcInNhZmFyaS13ZWItZXh0ZW5zaW9uXCIpO3JldHVybiBufHxyP1stMSE9PWUuaW5kZXhPZihcIkBcIik/ZS5zcGxpdChcIkBcIilbMF06SGUsbj9gc2FmYXJpLWV4dGVuc2lvbjoke3R9YDpgc2FmYXJpLXdlYi1leHRlbnNpb246JHt0fWBdOltlLHRdfSxVcj0xMDI0LFZyPShlPXt9KT0+e2NvbnN0IHQ9e2NvbnNvbGU6ITAsZG9tOiEwLGZldGNoOiEwLGhpc3Rvcnk6ITAsc2VudHJ5OiEwLHhocjohMCwuLi5lfTtyZXR1cm57bmFtZTpcIkJyZWFkY3J1bWJzXCIsc2V0dXAoZSl7dmFyIG47dC5jb25zb2xlJiZmdW5jdGlvbihlKXtjb25zdCB0PVwiY29uc29sZVwiO250KHQsZSkscnQodCxvdCl9KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtpZihmbigpIT09ZSlyZXR1cm47Y29uc3Qgbj17Y2F0ZWdvcnk6XCJjb25zb2xlXCIsZGF0YTp7YXJndW1lbnRzOnQuYXJncyxsb2dnZXI6XCJjb25zb2xlXCJ9LGxldmVsOkl0KHQubGV2ZWwpLG1lc3NhZ2U6ZmUodC5hcmdzLFwiIFwiKX07aWYoXCJhc3NlcnRcIj09PXQubGV2ZWwpe2lmKCExIT09dC5hcmdzWzBdKXJldHVybjtuLm1lc3NhZ2U9YEFzc2VydGlvbiBmYWlsZWQ6ICR7ZmUodC5hcmdzLnNsaWNlKDEpLFwiIFwiKXx8XCJjb25zb2xlLmFzc2VydFwifWAsbi5kYXRhLmFyZ3VtZW50cz10LmFyZ3Muc2xpY2UoMSl9em4obix7aW5wdXQ6dC5hcmdzLGxldmVsOnQubGV2ZWx9KX19KGUpKSx0LmRvbSYmKG49ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24obil7aWYoZm4oKSE9PWUpcmV0dXJuO2xldCByLGksbz1cIm9iamVjdFwiPT10eXBlb2YgdD90LnNlcmlhbGl6ZUF0dHJpYnV0ZTp2b2lkIDAsYT1cIm9iamVjdFwiPT10eXBlb2YgdCYmXCJudW1iZXJcIj09dHlwZW9mIHQubWF4U3RyaW5nTGVuZ3RoP3QubWF4U3RyaW5nTGVuZ3RoOnZvaWQgMDthJiZhPlVyJiYoc3ImJnhlLndhcm4oYFxcYGRvbS5tYXhTdHJpbmdMZW5ndGhcXGAgY2Fubm90IGV4Y2VlZCAxMDI0LCBidXQgYSB2YWx1ZSBvZiAke2F9IHdhcyBjb25maWd1cmVkLiBTZW50cnkgd2lsbCB1c2UgMTAyNCBpbnN0ZWFkLmApLGE9VXIpLFwic3RyaW5nXCI9PXR5cGVvZiBvJiYobz1bb10pO3RyeXtjb25zdCBlPW4uZXZlbnQsdD1mdW5jdGlvbihlKXtyZXR1cm4hIWUmJiEhZS50YXJnZXR9KGUpP2UudGFyZ2V0OmU7cj1FZSh0LHtrZXlBdHRyczpvLG1heFN0cmluZ0xlbmd0aDphfSksaT1mdW5jdGlvbihlKXtpZighQ2UuSFRNTEVsZW1lbnQpcmV0dXJuIG51bGw7bGV0IHQ9ZTtmb3IobGV0IGU9MDtlPDU7ZSsrKXtpZighdClyZXR1cm4gbnVsbDtpZih0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe2lmKHQuZGF0YXNldC5zZW50cnlDb21wb25lbnQpcmV0dXJuIHQuZGF0YXNldC5zZW50cnlDb21wb25lbnQ7aWYodC5kYXRhc2V0LnNlbnRyeUVsZW1lbnQpcmV0dXJuIHQuZGF0YXNldC5zZW50cnlFbGVtZW50fXQ9dC5wYXJlbnROb2RlfXJldHVybiBudWxsfSh0KX1jYXRjaChlKXtyPVwiPHVua25vd24+XCJ9aWYoMD09PXIubGVuZ3RoKXJldHVybjtjb25zdCBzPXtjYXRlZ29yeTpgdWkuJHtuLm5hbWV9YCxtZXNzYWdlOnJ9O2kmJihzLmRhdGE9e1widWkuY29tcG9uZW50X25hbWVcIjppfSksem4ocyx7ZXZlbnQ6bi5ldmVudCxuYW1lOm4ubmFtZSxnbG9iYWw6bi5nbG9iYWx9KX19KGUsdC5kb20pLG50KFwiZG9tXCIsbikscnQoXCJkb21cIixNcikpLHQueGhyJiZmdW5jdGlvbihlKXtudChcInhoclwiLGUpLHJ0KFwieGhyXCIsQXIpfShmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYoZm4oKSE9PWUpcmV0dXJuO2NvbnN0e3N0YXJ0VGltZXN0YW1wOm4sZW5kVGltZXN0YW1wOnJ9PXQsaT10LnhocltPcl07aWYoIW58fCFyfHwhaSlyZXR1cm47Y29uc3R7bWV0aG9kOm8sdXJsOmEsc3RhdHVzX2NvZGU6cyxib2R5OmN9PWksbD17bWV0aG9kOm8sdXJsOmEsc3RhdHVzX2NvZGU6c30sdT17eGhyOnQueGhyLGlucHV0OmMsc3RhcnRUaW1lc3RhbXA6bixlbmRUaW1lc3RhbXA6cn07em4oe2NhdGVnb3J5OlwieGhyXCIsZGF0YTpsLHR5cGU6XCJodHRwXCIsbGV2ZWw6d2Uocyl9LHUpfX0oZSkpLHQuZmV0Y2gmJmR0KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtpZihmbigpIT09ZSlyZXR1cm47Y29uc3R7c3RhcnRUaW1lc3RhbXA6bixlbmRUaW1lc3RhbXA6cn09dDtpZihyJiYoIXQuZmV0Y2hEYXRhLnVybC5tYXRjaCgvc2VudHJ5X2tleS8pfHxcIlBPU1RcIiE9PXQuZmV0Y2hEYXRhLm1ldGhvZCkpaWYodC5lcnJvcil7em4oe2NhdGVnb3J5OlwiZmV0Y2hcIixkYXRhOnQuZmV0Y2hEYXRhLGxldmVsOlwiZXJyb3JcIix0eXBlOlwiaHR0cFwifSx7ZGF0YTp0LmVycm9yLGlucHV0OnQuYXJncyxzdGFydFRpbWVzdGFtcDpuLGVuZFRpbWVzdGFtcDpyfSl9ZWxzZXtjb25zdCBlPXQucmVzcG9uc2UsaT17Li4udC5mZXRjaERhdGEsc3RhdHVzX2NvZGU6ZSYmZS5zdGF0dXN9LG89e2lucHV0OnQuYXJncyxyZXNwb25zZTplLHN0YXJ0VGltZXN0YW1wOm4sZW5kVGltZXN0YW1wOnJ9O3puKHtjYXRlZ29yeTpcImZldGNoXCIsZGF0YTppLHR5cGU6XCJodHRwXCIsbGV2ZWw6d2UoaS5zdGF0dXNfY29kZSl9LG8pfX19KGUpKSx0Lmhpc3RvcnkmJmZ1bmN0aW9uKGUpe2NvbnN0IHQ9XCJoaXN0b3J5XCI7bnQodCxlKSxydCh0LEVyKX0oZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKGZuKCkhPT1lKXJldHVybjtsZXQgbj10LmZyb20scj10LnRvO2NvbnN0IGk9eHQocnIubG9jYXRpb24uaHJlZik7bGV0IG89bj94dChuKTp2b2lkIDA7Y29uc3QgYT14dChyKTtvJiZvLnBhdGh8fChvPWkpLGkucHJvdG9jb2w9PT1hLnByb3RvY29sJiZpLmhvc3Q9PT1hLmhvc3QmJihyPWEucmVsYXRpdmUpLGkucHJvdG9jb2w9PT1vLnByb3RvY29sJiZpLmhvc3Q9PT1vLmhvc3QmJihuPW8ucmVsYXRpdmUpLHpuKHtjYXRlZ29yeTpcIm5hdmlnYXRpb25cIixkYXRhOntmcm9tOm4sdG86cn19KX19KGUpKSx0LnNlbnRyeSYmZS5vbihcImJlZm9yZVNlbmRFdmVudFwiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtmbigpPT09ZSYmem4oe2NhdGVnb3J5Olwic2VudHJ5LlwiKyhcInRyYW5zYWN0aW9uXCI9PT10LnR5cGU/XCJ0cmFuc2FjdGlvblwiOlwiZXZlbnRcIiksZXZlbnRfaWQ6dC5ldmVudF9pZCxsZXZlbDp0LmxldmVsLG1lc3NhZ2U6YnQodCl9LHtldmVudDp0fSl9fShlKSl9fX07Y29uc3QgSnI9W1wiRXZlbnRUYXJnZXRcIixcIldpbmRvd1wiLFwiTm9kZVwiLFwiQXBwbGljYXRpb25DYWNoZVwiLFwiQXVkaW9UcmFja0xpc3RcIixcIkJyb2FkY2FzdENoYW5uZWxcIixcIkNoYW5uZWxNZXJnZXJOb2RlXCIsXCJDcnlwdG9PcGVyYXRpb25cIixcIkV2ZW50U291cmNlXCIsXCJGaWxlUmVhZGVyXCIsXCJIVE1MVW5rbm93bkVsZW1lbnRcIixcIklEQkRhdGFiYXNlXCIsXCJJREJSZXF1ZXN0XCIsXCJJREJUcmFuc2FjdGlvblwiLFwiS2V5T3BlcmF0aW9uXCIsXCJNZWRpYUNvbnRyb2xsZXJcIixcIk1lc3NhZ2VQb3J0XCIsXCJNb2RhbFdpbmRvd1wiLFwiTm90aWZpY2F0aW9uXCIsXCJTVkdFbGVtZW50SW5zdGFuY2VcIixcIlNjcmVlblwiLFwiU2hhcmVkV29ya2VyXCIsXCJUZXh0VHJhY2tcIixcIlRleHRUcmFja0N1ZVwiLFwiVGV4dFRyYWNrTGlzdFwiLFwiV2ViU29ja2V0XCIsXCJXZWJTb2NrZXRXb3JrZXJcIixcIldvcmtlclwiLFwiWE1MSHR0cFJlcXVlc3RcIixcIlhNTEh0dHBSZXF1ZXN0RXZlbnRUYXJnZXRcIixcIlhNTEh0dHBSZXF1ZXN0VXBsb2FkXCJdLCRyPShlPXt9KT0+e2NvbnN0IHQ9e1hNTEh0dHBSZXF1ZXN0OiEwLGV2ZW50VGFyZ2V0OiEwLHJlcXVlc3RBbmltYXRpb25GcmFtZTohMCxzZXRJbnRlcnZhbDohMCxzZXRUaW1lb3V0OiEwLC4uLmV9O3JldHVybntuYW1lOlwiQnJvd3NlckFwaUVycm9yc1wiLHNldHVwT25jZSgpe3Quc2V0VGltZW91dCYmRmUocnIsXCJzZXRUaW1lb3V0XCIscXIpLHQuc2V0SW50ZXJ2YWwmJkZlKHJyLFwic2V0SW50ZXJ2YWxcIixxciksdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUmJkZlKHJyLFwicmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIsV3IpLHQuWE1MSHR0cFJlcXVlc3QmJlwiWE1MSHR0cFJlcXVlc3RcImluIHJyJiZGZShYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUsXCJzZW5kXCIsenIpO2NvbnN0IGU9dC5ldmVudFRhcmdldDtpZihlKXsoQXJyYXkuaXNBcnJheShlKT9lOkpyKS5mb3JFYWNoKEhyKX19fX07ZnVuY3Rpb24gcXIoZSl7cmV0dXJuIGZ1bmN0aW9uKC4uLnQpe2NvbnN0IG49dFswXTtyZXR1cm4gdFswXT1hcihuLHttZWNoYW5pc206e2RhdGE6e2Z1bmN0aW9uOlhlKGUpfSxoYW5kbGVkOiExLHR5cGU6XCJpbnN0cnVtZW50XCJ9fSksZS5hcHBseSh0aGlzLHQpfX1mdW5jdGlvbiBXcihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodGhpcyxbYXIodCx7bWVjaGFuaXNtOntkYXRhOntmdW5jdGlvbjpcInJlcXVlc3RBbmltYXRpb25GcmFtZVwiLGhhbmRsZXI6WGUoZSl9LGhhbmRsZWQ6ITEsdHlwZTpcImluc3RydW1lbnRcIn19KV0pfX1mdW5jdGlvbiB6cihlKXtyZXR1cm4gZnVuY3Rpb24oLi4udCl7Y29uc3Qgbj10aGlzO3JldHVybltcIm9ubG9hZFwiLFwib25lcnJvclwiLFwib25wcm9ncmVzc1wiLFwib25yZWFkeXN0YXRlY2hhbmdlXCJdLmZvckVhY2goKGU9PntlIGluIG4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG5bZV0mJkZlKG4sZSwoZnVuY3Rpb24odCl7Y29uc3Qgbj17bWVjaGFuaXNtOntkYXRhOntmdW5jdGlvbjplLGhhbmRsZXI6WGUodCl9LGhhbmRsZWQ6ITEsdHlwZTpcImluc3RydW1lbnRcIn19LHI9VmUodCk7cmV0dXJuIHImJihuLm1lY2hhbmlzbS5kYXRhLmhhbmRsZXI9WGUocikpLGFyKHQsbil9KSl9KSksZS5hcHBseSh0aGlzLHQpfX1mdW5jdGlvbiBIcihlKXtjb25zdCB0PXJyLG49dFtlXSYmdFtlXS5wcm90b3R5cGU7biYmbi5oYXNPd25Qcm9wZXJ0eSYmbi5oYXNPd25Qcm9wZXJ0eShcImFkZEV2ZW50TGlzdGVuZXJcIikmJihGZShuLFwiYWRkRXZlbnRMaXN0ZW5lclwiLChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixyLGkpe3RyeXtcImZ1bmN0aW9uXCI9PXR5cGVvZiByLmhhbmRsZUV2ZW50JiYoci5oYW5kbGVFdmVudD1hcihyLmhhbmRsZUV2ZW50LHttZWNoYW5pc206e2RhdGE6e2Z1bmN0aW9uOlwiaGFuZGxlRXZlbnRcIixoYW5kbGVyOlhlKHIpLHRhcmdldDplfSxoYW5kbGVkOiExLHR5cGU6XCJpbnN0cnVtZW50XCJ9fSkpfWNhdGNoKGUpe31yZXR1cm4gdC5hcHBseSh0aGlzLFtuLGFyKHIse21lY2hhbmlzbTp7ZGF0YTp7ZnVuY3Rpb246XCJhZGRFdmVudExpc3RlbmVyXCIsaGFuZGxlcjpYZShyKSx0YXJnZXQ6ZX0saGFuZGxlZDohMSx0eXBlOlwiaW5zdHJ1bWVudFwifX0pLGldKX19KSksRmUobixcInJlbW92ZUV2ZW50TGlzdGVuZXJcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtjb25zdCBpPW47dHJ5e2NvbnN0IG49aSYmaS5fX3NlbnRyeV93cmFwcGVkX187biYmZS5jYWxsKHRoaXMsdCxuLHIpfWNhdGNoKGUpe31yZXR1cm4gZS5jYWxsKHRoaXMsdCxpLHIpfX0pKSl9Y29uc3QgR3I9KGU9e30pPT57Y29uc3QgdD17b25lcnJvcjohMCxvbnVuaGFuZGxlZHJlamVjdGlvbjohMCwuLi5lfTtyZXR1cm57bmFtZTpcIkdsb2JhbEhhbmRsZXJzXCIsc2V0dXBPbmNlKCl7RXJyb3Iuc3RhY2tUcmFjZUxpbWl0PTUwfSxzZXR1cChlKXt0Lm9uZXJyb3ImJighZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpe2NvbnN0IHQ9XCJlcnJvclwiO250KHQsZSkscnQodCx2dCl9KCh0PT57Y29uc3R7c3RhY2tQYXJzZXI6bixhdHRhY2hTdGFja3RyYWNlOnJ9PUtyKCk7aWYoZm4oKSE9PWV8fG9yKCkpcmV0dXJuO2NvbnN0e21zZzppLHVybDpvLGxpbmU6YSxjb2x1bW46cyxlcnJvcjpjfT10LGw9ZnVuY3Rpb24oZSx0LG4scil7Y29uc3QgaT1lLmV4Y2VwdGlvbj1lLmV4Y2VwdGlvbnx8e30sbz1pLnZhbHVlcz1pLnZhbHVlc3x8W10sYT1vWzBdPW9bMF18fHt9LHM9YS5zdGFja3RyYWNlPWEuc3RhY2t0cmFjZXx8e30sYz1zLmZyYW1lcz1zLmZyYW1lc3x8W10sbD1pc05hTihwYXJzZUludChyLDEwKSk/dm9pZCAwOnIsdT1pc05hTihwYXJzZUludChuLDEwKSk/dm9pZCAwOm4sZD1vZSh0KSYmdC5sZW5ndGg+MD90OmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBDZS5kb2N1bWVudC5sb2NhdGlvbi5ocmVmfWNhdGNoKGUpe3JldHVyblwiXCJ9fSgpOzA9PT1jLmxlbmd0aCYmYy5wdXNoKHtjb2xubzpsLGZpbGVuYW1lOmQsZnVuY3Rpb246SGUsaW5fYXBwOiEwLGxpbmVubzp1fSk7cmV0dXJuIGV9KGZyKG4sY3x8aSx2b2lkIDAsciwhMSksbyxhLHMpO2wubGV2ZWw9XCJlcnJvclwiLEluKGwse29yaWdpbmFsRXhjZXB0aW9uOmMsbWVjaGFuaXNtOntoYW5kbGVkOiExLHR5cGU6XCJvbmVycm9yXCJ9fSl9KSl9KGUpLFFyKFwib25lcnJvclwiKSksdC5vbnVuaGFuZGxlZHJlamVjdGlvbiYmKCFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7Y29uc3QgdD1cInVuaGFuZGxlZHJlamVjdGlvblwiO250KHQsZSkscnQodCxndCl9KCh0PT57Y29uc3R7c3RhY2tQYXJzZXI6bixhdHRhY2hTdGFja3RyYWNlOnJ9PUtyKCk7aWYoZm4oKSE9PWV8fG9yKCkpcmV0dXJuO2NvbnN0IGk9ZnVuY3Rpb24oZSl7aWYoc2UoZSkpcmV0dXJuIGU7dHJ5e2lmKFwicmVhc29uXCJpbiBlKXJldHVybiBlLnJlYXNvbjtpZihcImRldGFpbFwiaW4gZSYmXCJyZWFzb25cImluIGUuZGV0YWlsKXJldHVybiBlLmRldGFpbC5yZWFzb259Y2F0Y2goZSl7fXJldHVybiBlfSh0KSxvPXNlKGkpP3tleGNlcHRpb246e3ZhbHVlczpbe3R5cGU6XCJVbmhhbmRsZWRSZWplY3Rpb25cIix2YWx1ZTpgTm9uLUVycm9yIHByb21pc2UgcmVqZWN0aW9uIGNhcHR1cmVkIHdpdGggdmFsdWU6ICR7U3RyaW5nKGkpfWB9XX19OmZyKG4saSx2b2lkIDAsciwhMCk7by5sZXZlbD1cImVycm9yXCIsSW4obyx7b3JpZ2luYWxFeGNlcHRpb246aSxtZWNoYW5pc206e2hhbmRsZWQ6ITEsdHlwZTpcIm9udW5oYW5kbGVkcmVqZWN0aW9uXCJ9fSl9KSl9KGUpLFFyKFwib251bmhhbmRsZWRyZWplY3Rpb25cIikpfX19O2Z1bmN0aW9uIFFyKGUpe3NyJiZ4ZS5sb2coYEdsb2JhbCBIYW5kbGVyIGF0dGFjaGVkOiAke2V9YCl9ZnVuY3Rpb24gS3IoKXtjb25zdCBlPWZuKCk7cmV0dXJuIGUmJmUuZ2V0T3B0aW9ucygpfHx7c3RhY2tQYXJzZXI6KCk9PltdLGF0dGFjaFN0YWNrdHJhY2U6ITF9fWNvbnN0IFlyPSgpPT4oe25hbWU6XCJIdHRwQ29udGV4dFwiLHByZXByb2Nlc3NFdmVudChlKXtpZighcnIubmF2aWdhdG9yJiYhcnIubG9jYXRpb24mJiFyci5kb2N1bWVudClyZXR1cm47Y29uc3QgdD1lLnJlcXVlc3QmJmUucmVxdWVzdC51cmx8fHJyLmxvY2F0aW9uJiZyci5sb2NhdGlvbi5ocmVmLHtyZWZlcnJlcjpufT1yci5kb2N1bWVudHx8e30se3VzZXJBZ2VudDpyfT1yci5uYXZpZ2F0b3J8fHt9LGk9ey4uLmUucmVxdWVzdCYmZS5yZXF1ZXN0LmhlYWRlcnMsLi4ubiYme1JlZmVyZXI6bn0sLi4uciYme1wiVXNlci1BZ2VudFwiOnJ9fSxvPXsuLi5lLnJlcXVlc3QsLi4udCYme3VybDp0fSxoZWFkZXJzOml9O2UucmVxdWVzdD1vfX0pLFhyPShlPXt9KT0+e2NvbnN0IHQ9ZS5saW1pdHx8NSxuPWUua2V5fHxcImNhdXNlXCI7cmV0dXJue25hbWU6XCJMaW5rZWRFcnJvcnNcIixwcmVwcm9jZXNzRXZlbnQoZSxyLGkpe2NvbnN0IG89aS5nZXRPcHRpb25zKCk7Z2UoY3Isby5zdGFja1BhcnNlcixvLm1heFZhbHVlTGVuZ3RoLG4sdCxlLHIpfX19O3ZhciBacj1cIm5ld1wiLGVpPVwibG9hZGluZ1wiLHRpPVwibG9hZGVkXCIsbmk9XCJqb2luaW5nLW1lZXRpbmdcIixyaT1cImpvaW5lZC1tZWV0aW5nXCIsaWk9XCJsZWZ0LW1lZXRpbmdcIixvaT1cImVycm9yXCIsYWk9XCJibG9ja2VkXCIsc2k9XCJvZmZcIixjaT1cInNlbmRhYmxlXCIsbGk9XCJsb2FkaW5nXCIsdWk9XCJpbnRlcnJ1cHRlZFwiLGRpPVwicGxheWFibGVcIixwaT1cInVua25vd25cIixoaT1cImZ1bGxcIixmaT1cImxvYmJ5XCIsdmk9XCJub25lXCIsbWk9XCJiYXNlXCIsZ2k9XCIqXCIseWk9XCJlamVjdGVkXCIsX2k9XCJuYmYtcm9vbVwiLGJpPVwibmJmLXRva2VuXCIsd2k9XCJleHAtcm9vbVwiLFNpPVwiZXhwLXRva2VuXCIsa2k9XCJuby1yb29tXCIsTWk9XCJtZWV0aW5nLWZ1bGxcIixDaT1cImVuZC1vZi1saWZlXCIsRWk9XCJub3QtYWxsb3dlZFwiLFRpPVwiY29ubmVjdGlvbi1lcnJvclwiLFBpPVwiY2FtLWluLXVzZVwiLE9pPVwibWljLWluLXVzZVwiLEFpPVwiY2FtLW1pYy1pbi11c2VcIixqaT1cInBlcm1pc3Npb25zXCIseGk9XCJ1bmRlZmluZWQtbWVkaWFkZXZpY2VzXCIsTGk9XCJub3QtZm91bmRcIixJaT1cImNvbnN0cmFpbnRzXCIsRGk9XCJ1bmtub3duXCIsTmk9XCJpZnJhbWUtcmVhZHktZm9yLWxhdW5jaC1jb25maWdcIixSaT1cImlmcmFtZS1sYXVuY2gtY29uZmlnXCIsRmk9XCJ0aGVtZS11cGRhdGVkXCIsQmk9XCJsb2FkaW5nXCIsVWk9XCJsb2FkLWF0dGVtcHQtZmFpbGVkXCIsVmk9XCJsb2FkZWRcIixKaT1cInN0YXJ0ZWQtY2FtZXJhXCIsJGk9XCJjYW1lcmEtZXJyb3JcIixxaT1cImpvaW5pbmctbWVldGluZ1wiLFdpPVwiam9pbmVkLW1lZXRpbmdcIix6aT1cImxlZnQtbWVldGluZ1wiLEhpPVwicGFydGljaXBhbnQtam9pbmVkXCIsR2k9XCJwYXJ0aWNpcGFudC11cGRhdGVkXCIsUWk9XCJwYXJ0aWNpcGFudC1sZWZ0XCIsS2k9XCJwYXJ0aWNpcGFudC1jb3VudHMtdXBkYXRlZFwiLFlpPVwiYWNjZXNzLXN0YXRlLXVwZGF0ZWRcIixYaT1cIm1lZXRpbmctc2Vzc2lvbi1zdW1tYXJ5LXVwZGF0ZWRcIixaaT1cIm1lZXRpbmctc2Vzc2lvbi1zdGF0ZS11cGRhdGVkXCIsZW89XCJtZWV0aW5nLXNlc3Npb24tZGF0YS1lcnJvclwiLHRvPVwid2FpdGluZy1wYXJ0aWNpcGFudC1hZGRlZFwiLG5vPVwid2FpdGluZy1wYXJ0aWNpcGFudC11cGRhdGVkXCIscm89XCJ3YWl0aW5nLXBhcnRpY2lwYW50LXJlbW92ZWRcIixpbz1cInRyYWNrLXN0YXJ0ZWRcIixvbz1cInRyYWNrLXN0b3BwZWRcIixhbz1cInRyYW5zY3JpcHRpb24tc3RhcnRlZFwiLHNvPVwidHJhbnNjcmlwdGlvbi1zdG9wcGVkXCIsY289XCJ0cmFuc2NyaXB0aW9uLWVycm9yXCIsbG89XCJyZWNvcmRpbmctc3RhcnRlZFwiLHVvPVwicmVjb3JkaW5nLXN0b3BwZWRcIixwbz1cInJlY29yZGluZy1zdGF0c1wiLGhvPVwicmVjb3JkaW5nLWVycm9yXCIsZm89XCJyZWNvcmRpbmctdXBsb2FkLWNvbXBsZXRlZFwiLHZvPVwicmVjb3JkaW5nLWRhdGFcIixtbz1cImFwcC1tZXNzYWdlXCIsZ289XCJ0cmFuc2NyaXB0aW9uLW1lc3NhZ2VcIix5bz1cInJlbW90ZS1tZWRpYS1wbGF5ZXItc3RhcnRlZFwiLF9vPVwicmVtb3RlLW1lZGlhLXBsYXllci11cGRhdGVkXCIsYm89XCJyZW1vdGUtbWVkaWEtcGxheWVyLXN0b3BwZWRcIix3bz1cImxvY2FsLXNjcmVlbi1zaGFyZS1zdGFydGVkXCIsU289XCJsb2NhbC1zY3JlZW4tc2hhcmUtc3RvcHBlZFwiLGtvPVwibG9jYWwtc2NyZWVuLXNoYXJlLWNhbmNlbGVkXCIsTW89XCJhY3RpdmUtc3BlYWtlci1jaGFuZ2VcIixDbz1cImFjdGl2ZS1zcGVha2VyLW1vZGUtY2hhbmdlXCIsRW89XCJuZXR3b3JrLXF1YWxpdHktY2hhbmdlXCIsVG89XCJuZXR3b3JrLWNvbm5lY3Rpb25cIixQbz1cImNwdS1sb2FkLWNoYW5nZVwiLE9vPVwiZmFjZS1jb3VudHMtdXBkYXRlZFwiLEFvPVwiZnVsbHNjcmVlblwiLGpvPVwiZXhpdGVkLWZ1bGxzY3JlZW5cIix4bz1cImxpdmUtc3RyZWFtaW5nLXN0YXJ0ZWRcIixMbz1cImxpdmUtc3RyZWFtaW5nLXVwZGF0ZWRcIixJbz1cImxpdmUtc3RyZWFtaW5nLXN0b3BwZWRcIixEbz1cImxpdmUtc3RyZWFtaW5nLWVycm9yXCIsTm89XCJsYW5nLXVwZGF0ZWRcIixSbz1cInJlY2VpdmUtc2V0dGluZ3MtdXBkYXRlZFwiLEZvPVwiaW5wdXQtc2V0dGluZ3MtdXBkYXRlZFwiLEJvPVwibm9uZmF0YWwtZXJyb3JcIixVbz1cImVycm9yXCIsVm89NDA5NixKbz0xMDI0MDAsJG89XCJpZnJhbWUtY2FsbC1tZXNzYWdlXCIscW89XCJsb2NhbC1zY3JlZW4tc3RhcnRcIixXbz1cImRhaWx5LW1ldGhvZC11cGRhdGUtbGl2ZS1zdHJlYW1pbmctZW5kcG9pbnRzXCIsem89XCJ0cmFuc21pdC1sb2dcIixIbz1cImRhaWx5LWN1c3RvbS10cmFja1wiLEdvPXtOT05FOlwibm9uZVwiLEJHQkxVUjpcImJhY2tncm91bmQtYmx1clwiLEJHSU1BR0U6XCJiYWNrZ3JvdW5kLWltYWdlXCIsRkFDRV9ERVRFQ1RJT046XCJmYWNlLWRldGVjdGlvblwifSxRbz17Tk9ORTpcIm5vbmVcIixOT0lTRV9DQU5DRUxMQVRJT046XCJub2lzZS1jYW5jZWxsYXRpb25cIn0sS289e1BMQVk6XCJwbGF5XCIsUEFVU0U6XCJwYXVzZVwifSxZbz1bXCJqcGdcIixcInBuZ1wiLFwianBlZ1wiXSxYbz1cImFkZC1lbmRwb2ludHNcIixabz1cInJlbW92ZS1lbmRwb2ludHNcIixlYT1cInNpcC1jYWxsLXRyYW5zZmVyXCI7ZnVuY3Rpb24gdGEoKXtyZXR1cm4hbmEoKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lm5hdmlnYXRvciYmd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ/d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ6XCJcIn1mdW5jdGlvbiBuYSgpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJm5hdmlnYXRvci5wcm9kdWN0JiZcIlJlYWN0TmF0aXZlXCI9PT1uYXZpZ2F0b3IucHJvZHVjdH1mdW5jdGlvbiByYSgpe3JldHVybiBuYXZpZ2F0b3ImJm5hdmlnYXRvci5tZWRpYURldmljZXMmJm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhfWZ1bmN0aW9uIGlhKCl7cmV0dXJuISEobmF2aWdhdG9yJiZuYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSkmJihmdW5jdGlvbihlLHQpe2lmKCFlfHwhdClyZXR1cm4hMDtzd2l0Y2goZSl7Y2FzZVwiQ2hyb21lXCI6cmV0dXJuIHQubWFqb3I+PTc1O2Nhc2VcIlNhZmFyaVwiOnJldHVybiBSVENSdHBUcmFuc2NlaXZlci5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJjdXJyZW50RGlyZWN0aW9uXCIpJiYhKDEzPT09dC5tYWpvciYmMD09PXQubWlub3ImJjA9PT10LnBvaW50KTtjYXNlXCJGaXJlZm94XCI6cmV0dXJuIHQubWFqb3I+PTY3fXJldHVybiEwfShwYSgpLGhhKCkpfHxuYSgpKX1mdW5jdGlvbiBvYSgpe2lmKG5hKCkpcmV0dXJuITE7aWYoIWRvY3VtZW50KXJldHVybiExO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7cmV0dXJuISFlLnJlcXVlc3RGdWxsc2NyZWVufHwhIWUud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW59dmFyIGFhPWZ1bmN0aW9uKCl7dHJ5e3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdD1udWxsIT1lLmdldENvbnRleHQoXCJ3ZWJnbDJcIik7cmV0dXJuIGUucmVtb3ZlKCksdH1jYXRjaChlKXtyZXR1cm4hMX19KCk7ZnVuY3Rpb24gc2EoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO3JldHVybiFuYSgpJiYoISFhYSYmKGU/ZnVuY3Rpb24oKXtpZihkYSgpKXJldHVybiExO3JldHVybltcIkNocm9tZVwiLFwiRmlyZWZveFwiXS5pbmNsdWRlcyhwYSgpKX0oKTpmdW5jdGlvbigpe2lmKGRhKCkpcmV0dXJuITE7dmFyIGU9cGEoKTtpZihcIlNhZmFyaVwiPT09ZSl7dmFyIHQ9Z2EoKTtpZih0Lm1ham9yPDE1fHwxNT09PXQubWFqb3ImJnQubWlub3I8NClyZXR1cm4hMX1pZihcIkNocm9tZVwiPT09ZSl7cmV0dXJuIGZhKCkubWFqb3I+PTc3fWlmKFwiRmlyZWZveFwiPT09ZSl7cmV0dXJuIHlhKCkubWFqb3I+PTk3fXJldHVybltcIkNocm9tZVwiLFwiRmlyZWZveFwiLFwiU2FmYXJpXCJdLmluY2x1ZGVzKGUpfSgpKSl9ZnVuY3Rpb24gY2EoKXtpZihuYSgpKXJldHVybiExO2lmKHVhKCkpcmV0dXJuITE7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIEF1ZGlvV29ya2xldE5vZGUpcmV0dXJuITE7c3dpdGNoKHBhKCkpe2Nhc2VcIkNocm9tZVwiOmNhc2VcIkZpcmVmb3hcIjpyZXR1cm4hMDtjYXNlXCJTYWZhcmlcIjp2YXIgZT1oYSgpO3JldHVybiBlLm1ham9yPjE3fHwxNz09PWUubWFqb3ImJmUubWlub3I+PTR9cmV0dXJuITF9ZnVuY3Rpb24gbGEoKXtyZXR1cm4gcmEoKSYmIWZ1bmN0aW9uKCl7dmFyIGUsdD1wYSgpO2lmKCF0YSgpKXJldHVybiEwO3N3aXRjaCh0KXtjYXNlXCJDaHJvbWVcIjpyZXR1cm4oZT1mYSgpKS5tYWpvciYmZS5tYWpvcj4wJiZlLm1ham9yPDc1O2Nhc2VcIkZpcmVmb3hcIjpyZXR1cm4oZT15YSgpKS5tYWpvcjw5MTtjYXNlXCJTYWZhcmlcIjpyZXR1cm4oZT1nYSgpKS5tYWpvcjwxM3x8MTM9PT1lLm1ham9yJiZlLm1pbm9yPDE7ZGVmYXVsdDpyZXR1cm4hMH19KCl9ZnVuY3Rpb24gdWEoKXtyZXR1cm4gdGEoKS5tYXRjaCgvTGludXg7IEFuZHJvaWQvKX1mdW5jdGlvbiBkYSgpe3ZhciBlLHQsbj10YSgpLHI9bi5tYXRjaCgvTWFjLykmJighbmEoKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmbnVsbCE9PShlPXdpbmRvdykmJnZvaWQgMCE9PWUmJm51bGwhPT0odD1lLm5hdmlnYXRvcikmJnZvaWQgMCE9PXQmJnQubWF4VG91Y2hQb2ludHM/d2luZG93Lm5hdmlnYXRvci5tYXhUb3VjaFBvaW50czowKT49NTtyZXR1cm4hIShuLm1hdGNoKC9Nb2JpLyl8fG4ubWF0Y2goL0FuZHJvaWQvKXx8cil8fCghIXRhKCkubWF0Y2goL0RhaWx5QW5kXFwvLyl8fHZvaWQgMCl9ZnVuY3Rpb24gcGEoKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KXt2YXIgZT10YSgpO3JldHVybiB2YSgpP1wiU2FmYXJpXCI6ZS5pbmRleE9mKFwiRWRnZVwiKT4tMT9cIkVkZ2VcIjplLm1hdGNoKC9DaHJvbWVcXC8vKT9cIkNocm9tZVwiOmUuaW5kZXhPZihcIlNhZmFyaVwiKT4tMXx8bWEoKT9cIlNhZmFyaVwiOmUuaW5kZXhPZihcIkZpcmVmb3hcIik+LTE/XCJGaXJlZm94XCI6ZS5pbmRleE9mKFwiTVNJRVwiKT4tMXx8ZS5pbmRleE9mKFwiLk5FVFwiKT4tMT9cIklFXCI6XCJVbmtub3duIEJyb3dzZXJcIn19ZnVuY3Rpb24gaGEoKXtzd2l0Y2gocGEoKSl7Y2FzZVwiQ2hyb21lXCI6cmV0dXJuIGZhKCk7Y2FzZVwiU2FmYXJpXCI6cmV0dXJuIGdhKCk7Y2FzZVwiRmlyZWZveFwiOnJldHVybiB5YSgpO2Nhc2VcIkVkZ2VcIjpyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT0wLHQ9MDtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KXt2YXIgbj10YSgpLm1hdGNoKC9FZGdlXFwvKFxcZCspLihcXGQrKS8pO2lmKG4pdHJ5e2U9cGFyc2VJbnQoblsxXSksdD1wYXJzZUludChuWzJdKX1jYXRjaChlKXt9fXJldHVybnttYWpvcjplLG1pbm9yOnR9fSgpfX1mdW5jdGlvbiBmYSgpe3ZhciBlPTAsdD0wLG49MCxyPTAsaT0hMTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KXt2YXIgbz10YSgpLGE9by5tYXRjaCgvQ2hyb21lXFwvKFxcZCspLihcXGQrKS4oXFxkKykuKFxcZCspLyk7aWYoYSl0cnl7ZT1wYXJzZUludChhWzFdKSx0PXBhcnNlSW50KGFbMl0pLG49cGFyc2VJbnQoYVszXSkscj1wYXJzZUludChhWzRdKSxpPW8uaW5kZXhPZihcIk9QUi9cIik+LTF9Y2F0Y2goZSl7fX1yZXR1cm57bWFqb3I6ZSxtaW5vcjp0LGJ1aWxkOm4scGF0Y2g6cixvcGVyYTppfX1mdW5jdGlvbiB2YSgpe3JldHVybiEhdGEoKS5tYXRjaCgvaVBhZHxpUGhvbmV8aVBvZC9pKSYmcmEoKX1mdW5jdGlvbiBtYSgpe3JldHVybiB0YSgpLmluZGV4T2YoXCJBcHBsZVdlYktpdC82MDUuMS4xNVwiKT4tMX1mdW5jdGlvbiBnYSgpe3ZhciBlPTAsdD0wLG49MDtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KXt2YXIgcj10YSgpLm1hdGNoKC9WZXJzaW9uXFwvKFxcZCspLihcXGQrKSguKFxcZCspKT8vKTtpZihyKXRyeXtlPXBhcnNlSW50KHJbMV0pLHQ9cGFyc2VJbnQoclsyXSksbj1wYXJzZUludChyWzRdKX1jYXRjaChlKXt9ZWxzZSh2YSgpfHxtYSgpKSYmKGU9MTQsdD0wLG49Myl9cmV0dXJue21ham9yOmUsbWlub3I6dCxwb2ludDpufX1mdW5jdGlvbiB5YSgpe3ZhciBlPTAsdD0wO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpe3ZhciBuPXRhKCkubWF0Y2goL0ZpcmVmb3hcXC8oXFxkKykuKFxcZCspLyk7aWYobil0cnl7ZT1wYXJzZUludChuWzFdKSx0PXBhcnNlSW50KG5bMl0pfWNhdGNoKGUpe319cmV0dXJue21ham9yOmUsbWlub3I6dH19dmFyIF9hPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3QodGhpcyxlKX1yZXR1cm4gbyhlLFt7a2V5OlwiYWRkTGlzdGVuZXJGb3JNZXNzYWdlc0Zyb21DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtLKCl9fSx7a2V5OlwiYWRkTGlzdGVuZXJGb3JNZXNzYWdlc0Zyb21EYWlseUpzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe0soKX19LHtrZXk6XCJzZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmVcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixyKXtLKCl9fSx7a2V5Olwic2VuZE1lc3NhZ2VUb0RhaWx5SnNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe0soKX19LHtrZXk6XCJyZW1vdmVMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe0soKX19XSksZX0oKTtmdW5jdGlvbiBiYShlLHQpe3ZhciBuPU9iamVjdC5rZXlzKGUpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7dCYmKHI9ci5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSksbi5wdXNoLmFwcGx5KG4scil9cmV0dXJuIG59ZnVuY3Rpb24gd2EoZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49bnVsbCE9YXJndW1lbnRzW3RdP2FyZ3VtZW50c1t0XTp7fTt0JTI/YmEoT2JqZWN0KG4pLCEwKS5mb3JFYWNoKChmdW5jdGlvbih0KXtkKGUsdCxuW3RdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpiYShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHQpKX0pKX1yZXR1cm4gZX1mdW5jdGlvbiBTYShlKXt2YXIgdD1mdW5jdGlvbigpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fSgpO3JldHVybiBmdW5jdGlvbigpe3ZhciBuLHI9dShlKTtpZih0KXt2YXIgaT11KHRoaXMpLmNvbnN0cnVjdG9yO249UmVmbGVjdC5jb25zdHJ1Y3Qocixhcmd1bWVudHMsaSl9ZWxzZSBuPXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBsKHRoaXMsbil9fXZhciBrYT1mdW5jdGlvbigpe2MobixfYSk7dmFyIGU9U2Eobik7ZnVuY3Rpb24gbigpe3ZhciByO3JldHVybiB0KHRoaXMsbiksKHI9ZS5jYWxsKHRoaXMpKS5fd3JhcHBlZExpc3RlbmVycz17fSxyLl9tZXNzYWdlQ2FsbGJhY2tzPXt9LHJ9cmV0dXJuIG8obixbe2tleTpcImFkZExpc3RlbmVyRm9yTWVzc2FnZXNGcm9tQ2FsbE1hY2hpbmVcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcyxpPWZ1bmN0aW9uKGkpe2lmKGkuZGF0YSYmXCJpZnJhbWUtY2FsbC1tZXNzYWdlXCI9PT1pLmRhdGEud2hhdCYmKCFpLmRhdGEuY2FsbENsaWVudElkfHxpLmRhdGEuY2FsbENsaWVudElkPT09dCkmJighaS5kYXRhLmZyb218fFwibW9kdWxlXCIhPT1pLmRhdGEuZnJvbSkpe3ZhciBvPXdhKHt9LGkuZGF0YSk7aWYoZGVsZXRlIG8uZnJvbSxvLmNhbGxiYWNrU3RhbXAmJnIuX21lc3NhZ2VDYWxsYmFja3Nbby5jYWxsYmFja1N0YW1wXSl7dmFyIGE9by5jYWxsYmFja1N0YW1wO3IuX21lc3NhZ2VDYWxsYmFja3NbYV0uY2FsbChuLG8pLGRlbGV0ZSByLl9tZXNzYWdlQ2FsbGJhY2tzW2FdfWRlbGV0ZSBvLndoYXQsZGVsZXRlIG8uY2FsbGJhY2tTdGFtcCxlLmNhbGwobixvKX19O3RoaXMuX3dyYXBwZWRMaXN0ZW5lcnNbZV09aSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixpKX19LHtrZXk6XCJhZGRMaXN0ZW5lckZvck1lc3NhZ2VzRnJvbURhaWx5SnNcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZnVuY3Rpb24ocil7dmFyIGk7aWYoISghci5kYXRhfHxyLmRhdGEud2hhdCE9PSRvfHwhci5kYXRhLmFjdGlvbnx8ci5kYXRhLmZyb20mJlwibW9kdWxlXCIhPT1yLmRhdGEuZnJvbXx8ci5kYXRhLmNhbGxDbGllbnRJZCYmdCYmci5kYXRhLmNhbGxDbGllbnRJZCE9PXR8fG51bGwhPXImJm51bGwhPT0oaT1yLmRhdGEpJiZ2b2lkIDAhPT1pJiZpLmNhbGxGcmFtZUlkKSl7dmFyIG89ci5kYXRhO2UuY2FsbChuLG8pfX07dGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXT1yLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHIpfX0se2tleTpcInNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFuKXRocm93IG5ldyBFcnJvcihcInVuZGVmaW5lZCBjYWxsQ2xpZW50SWQuIEFyZSB5b3UgdHJ5aW5nIHRvIHVzZSBhIERhaWx5Q2FsbCBpbnN0YW5jZSBwcmV2aW91c2x5IGRlc3Ryb3llZD9cIik7dmFyIGk9d2Eoe30sZSk7aWYoaS53aGF0PSRvLGkuZnJvbT1cIm1vZHVsZVwiLGkuY2FsbENsaWVudElkPW4sdCl7dmFyIG89USgpO3RoaXMuX21lc3NhZ2VDYWxsYmFja3Nbb109dCxpLmNhbGxiYWNrU3RhbXA9b312YXIgYT1yP3IuY29udGVudFdpbmRvdzp3aW5kb3cscz10aGlzLl9jYWxsTWFjaGluZVRhcmdldE9yaWdpbihyKTtzJiZhLnBvc3RNZXNzYWdlKGkscyl9fSx7a2V5Olwic2VuZE1lc3NhZ2VUb0RhaWx5SnNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Uud2hhdD0kbyxlLmNhbGxDbGllbnRJZD10LGUuZnJvbT1cImVtYmVkZGVkXCIsd2luZG93LnBvc3RNZXNzYWdlKGUsdGhpcy5fdGFyZ2V0T3JpZ2luRnJvbVdpbmRvd0xvY2F0aW9uKCkpfX0se2tleTpcInJlbW92ZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXTt0JiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdCksZGVsZXRlIHRoaXMuX3dyYXBwZWRMaXN0ZW5lcnNbZV0pfX0se2tleTpcImZvcndhcmRQYWNrYWdlZE1lc3NhZ2VUb0NhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXdhKHt9LGUpO3IuY2FsbENsaWVudElkPW47dmFyIGk9dD90LmNvbnRlbnRXaW5kb3c6d2luZG93LG89dGhpcy5fY2FsbE1hY2hpbmVUYXJnZXRPcmlnaW4odCk7byYmaS5wb3N0TWVzc2FnZShyLG8pfX0se2tleTpcImFkZExpc3RlbmVyRm9yUGFja2FnZWRNZXNzYWdlc0Zyb21DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24obil7aWYobi5kYXRhJiZcImlmcmFtZS1jYWxsLW1lc3NhZ2VcIj09PW4uZGF0YS53aGF0JiYoIW4uZGF0YS5jYWxsQ2xpZW50SWR8fG4uZGF0YS5jYWxsQ2xpZW50SWQ9PT10KSYmKCFuLmRhdGEuZnJvbXx8XCJtb2R1bGVcIiE9PW4uZGF0YS5mcm9tKSl7dmFyIHI9bi5kYXRhO2Uocil9fTtyZXR1cm4gdGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXT1uLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLG4pLGV9fSx7a2V5OlwicmVtb3ZlTGlzdGVuZXJGb3JQYWNrYWdlZE1lc3NhZ2VzRnJvbUNhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXTt0JiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdCksZGVsZXRlIHRoaXMuX3dyYXBwZWRMaXN0ZW5lcnNbZV0pfX0se2tleTpcIl9jYWxsTWFjaGluZVRhcmdldE9yaWdpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlP2Uuc3JjP25ldyBVUkwoZS5zcmMpLm9yaWdpbjp2b2lkIDA6dGhpcy5fdGFyZ2V0T3JpZ2luRnJvbVdpbmRvd0xvY2F0aW9uKCl9fSx7a2V5OlwiX3RhcmdldE9yaWdpbkZyb21XaW5kb3dMb2NhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJmaWxlOlwiPT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sP1wiKlwiOndpbmRvdy5sb2NhdGlvbi5vcmlnaW59fV0pLG59KCk7ZnVuY3Rpb24gTWEoZSx0KXt2YXIgbj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihyPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIENhKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG4scj11KGUpO2lmKHQpe3ZhciBpPXUodGhpcykuY29uc3RydWN0b3I7bj1SZWZsZWN0LmNvbnN0cnVjdChyLGFyZ3VtZW50cyxpKX1lbHNlIG49ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGwodGhpcyxuKX19dmFyIEVhPWZ1bmN0aW9uKCl7YyhuLF9hKTt2YXIgZT1DYShuKTtmdW5jdGlvbiBuKCl7dmFyIHI7cmV0dXJuIHQodGhpcyxuKSxyPWUuY2FsbCh0aGlzKSxnbG9iYWwuY2FsbE1hY2hpbmVUb0RhaWx5SnNFbWl0dGVyPWdsb2JhbC5jYWxsTWFjaGluZVRvRGFpbHlKc0VtaXR0ZXJ8fG5ldyBnLkV2ZW50RW1pdHRlcixnbG9iYWwuZGFpbHlKc1RvQ2FsbE1hY2hpbmVFbWl0dGVyPWdsb2JhbC5kYWlseUpzVG9DYWxsTWFjaGluZUVtaXR0ZXJ8fG5ldyBnLkV2ZW50RW1pdHRlcixyLl93cmFwcGVkTGlzdGVuZXJzPXt9LHIuX21lc3NhZ2VDYWxsYmFja3M9e30scn1yZXR1cm4gbyhuLFt7a2V5OlwiYWRkTGlzdGVuZXJGb3JNZXNzYWdlc0Zyb21DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9hZGRMaXN0ZW5lcihlLGdsb2JhbC5jYWxsTWFjaGluZVRvRGFpbHlKc0VtaXR0ZXIsdCxuLFwicmVjZWl2ZWQgY2FsbCBtYWNoaW5lIG1lc3NhZ2VcIil9fSx7a2V5OlwiYWRkTGlzdGVuZXJGb3JNZXNzYWdlc0Zyb21EYWlseUpzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX2FkZExpc3RlbmVyKGUsZ2xvYmFsLmRhaWx5SnNUb0NhbGxNYWNoaW5lRW1pdHRlcix0LG4sXCJyZWNlaXZlZCBkYWlseS1qcyBtZXNzYWdlXCIpfX0se2tleTpcInNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9zZW5kTWVzc2FnZShlLGdsb2JhbC5kYWlseUpzVG9DYWxsTWFjaGluZUVtaXR0ZXIsbix0LFwic2VuZGluZyBtZXNzYWdlIHRvIGNhbGwgbWFjaGluZVwiKX19LHtrZXk6XCJzZW5kTWVzc2FnZVRvRGFpbHlKc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fc2VuZE1lc3NhZ2UoZSxnbG9iYWwuY2FsbE1hY2hpbmVUb0RhaWx5SnNFbWl0dGVyLHQsbnVsbCxcInNlbmRpbmcgbWVzc2FnZSB0byBkYWlseS1qc1wiKX19LHtrZXk6XCJyZW1vdmVMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3dyYXBwZWRMaXN0ZW5lcnNbZV07dCYmKGdsb2JhbC5jYWxsTWFjaGluZVRvRGFpbHlKc0VtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoXCJtZXNzYWdlXCIsdCksZ2xvYmFsLmRhaWx5SnNUb0NhbGxNYWNoaW5lRW1pdHRlci5yZW1vdmVMaXN0ZW5lcihcIm1lc3NhZ2VcIix0KSxkZWxldGUgdGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXSl9fSx7a2V5OlwiX2FkZExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz10aGlzLGE9ZnVuY3Rpb24odCl7aWYodC5jYWxsQ2xpZW50SWQ9PT1uKXtpZih0LmNhbGxiYWNrU3RhbXAmJm8uX21lc3NhZ2VDYWxsYmFja3NbdC5jYWxsYmFja1N0YW1wXSl7dmFyIGk9dC5jYWxsYmFja1N0YW1wO28uX21lc3NhZ2VDYWxsYmFja3NbaV0uY2FsbChyLHQpLGRlbGV0ZSBvLl9tZXNzYWdlQ2FsbGJhY2tzW2ldfWUuY2FsbChyLHQpfX07dGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXT1hLHQuYWRkTGlzdGVuZXIoXCJtZXNzYWdlXCIsYSl9fSx7a2V5OlwiX3NlbmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbdF0/YXJndW1lbnRzW3RdOnt9O3QlMj9NYShPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKHQpe2QoZSx0LG5bdF0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOk1hKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sdCkpfSkpfXJldHVybiBlfSh7fSxlKTtpZihvLmNhbGxDbGllbnRJZD1uLHIpe3ZhciBhPVEoKTt0aGlzLl9tZXNzYWdlQ2FsbGJhY2tzW2FdPXIsby5jYWxsYmFja1N0YW1wPWF9dC5lbWl0KFwibWVzc2FnZVwiLG8pfX1dKSxufSgpLFRhPVwicmVwbGFjZVwiLFBhPVwic2hhbGxvdy1tZXJnZVwiLE9hPVtUYSxQYV07dmFyIEFhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPW4uZGF0YSxpPW4ubWVyZ2VTdHJhdGVneSxvPXZvaWQgMD09PWk/VGE6aTt0KHRoaXMsZSksZS5fdmFsaWRhdGVNZXJnZVN0cmF0ZWd5KG8pLGUuX3ZhbGlkYXRlRGF0YShyLG8pLHRoaXMubWVyZ2VTdHJhdGVneT1vLHRoaXMuZGF0YT1yfXJldHVybiBvKGUsW3trZXk6XCJpc05vT3BcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBlLmlzTm9PcFVwZGF0ZSh0aGlzLmRhdGEsdGhpcy5tZXJnZVN0cmF0ZWd5KX19XSxbe2tleTpcImlzTm9PcFVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDA9PT1PYmplY3Qua2V5cyhlKS5sZW5ndGgmJnQ9PT1QYX19LHtrZXk6XCJfdmFsaWRhdGVNZXJnZVN0cmF0ZWd5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIU9hLmluY2x1ZGVzKGUpKXRocm93IEVycm9yKFwiVW5yZWNvZ25pemVkIG1lcmdlU3RyYXRlZ3kgcHJvdmlkZWQuIE9wdGlvbnMgYXJlOiBbXCIuY29uY2F0KE9hLFwiXVwiKSl9fSx7a2V5OlwiX3ZhbGlkYXRlRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoIWZ1bmN0aW9uKGUpe2lmKG51bGw9PWV8fFwib2JqZWN0XCIhPT1uKGUpKXJldHVybiExO3ZhciB0PU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09dHx8dD09PU9iamVjdC5wcm90b3R5cGV9KGUpKXRocm93IEVycm9yKFwiTWVldGluZyBzZXNzaW9uIGRhdGEgbXVzdCBiZSBhIHBsYWluIChtYXAtbGlrZSkgb2JqZWN0XCIpO3ZhciByO3RyeXtpZihyPUpTT04uc3RyaW5naWZ5KGUpLHQ9PT1UYSl7dmFyIGk9SlNPTi5wYXJzZShyKTtEKGksZSl8fGNvbnNvbGUud2FybihcIlRoZSBtZWV0aW5nIHNlc3Npb24gZGF0YSBwcm92aWRlZCB3aWxsIGJlIG1vZGlmaWVkIHdoZW4gc2VyaWFsaXplZC5cIixpLGUpfWVsc2UgaWYodD09PVBhKWZvcih2YXIgbyBpbiBlKWlmKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbykmJnZvaWQgMCE9PWVbb10pe3ZhciBhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZVtvXSkpO0QoZVtvXSxhKXx8Y29uc29sZS53YXJuKFwiQXQgbGVhc3Qgb25lIGtleSBpbiB0aGUgbWVldGluZyBzZXNzaW9uIGRhdGEgcHJvdmlkZWQgd2lsbCBiZSBtb2RpZmllZCB3aGVuIHNlcmlhbGl6ZWQuXCIsYSxlW29dKX19Y2F0Y2goZSl7dGhyb3cgRXJyb3IoXCJNZWV0aW5nIHNlc3Npb24gZGF0YSBtdXN0IGJlIHNlcmlhbGl6YWJsZSB0byBKU09OOiBcIi5jb25jYXQoZSkpfWlmKHIubGVuZ3RoPkpvKXRocm93IEVycm9yKFwiTWVldGluZyBzZXNzaW9uIGRhdGEgaXMgdG9vIGxhcmdlIChcIi5jb25jYXQoci5sZW5ndGgsXCIgY2hhcmFjdGVycykuIE1heGltdW0gc2l6ZSBzdXBwcG9ydGVkIGlzIFwiKS5jb25jYXQoSm8sXCIuXCIpKX19XSksZX0oKTtmdW5jdGlvbiBqYShlLHQsbil7cmV0dXJuIGphPWZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19KCk/UmVmbGVjdC5jb25zdHJ1Y3QuYmluZCgpOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bbnVsbF07ci5wdXNoLmFwcGx5KHIsdCk7dmFyIGk9bmV3KEZ1bmN0aW9uLmJpbmQuYXBwbHkoZSxyKSk7cmV0dXJuIG4mJnMoaSxuLnByb3RvdHlwZSksaX0samEuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIHhhKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIE1hcD9uZXcgTWFwOnZvaWQgMDtyZXR1cm4geGE9ZnVuY3Rpb24oZSl7aWYobnVsbD09PWV8fChuPWUsLTE9PT1GdW5jdGlvbi50b1N0cmluZy5jYWxsKG4pLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpKSlyZXR1cm4gZTt2YXIgbjtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtpZih2b2lkIDAhPT10KXtpZih0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dC5zZXQoZSxyKX1mdW5jdGlvbiByKCl7cmV0dXJuIGphKGUsYXJndW1lbnRzLHUodGhpcykuY29uc3RydWN0b3IpfXJldHVybiByLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6cixlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxzKHIsZSl9LHhhKGUpfWZ1bmN0aW9uIExhKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG4scj11KGUpO2lmKHQpe3ZhciBpPXUodGhpcykuY29uc3RydWN0b3I7bj1SZWZsZWN0LmNvbnN0cnVjdChyLGFyZ3VtZW50cyxpKX1lbHNlIG49ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGwodGhpcyxuKX19ZnVuY3Rpb24gSWEoZSl7dmFyIHQsbj1udWxsPT09KHQ9d2luZG93Ll9kYWlseSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucGVuZGluZ3M7aWYobil7dmFyIHI9bi5pbmRleE9mKGUpOy0xIT09ciYmbi5zcGxpY2UociwxKX19dmFyIERhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShuKXt0KHRoaXMsZSksdGhpcy5fY3VycmVudExvYWQ9bnVsbCx0aGlzLl9jYWxsQ2xpZW50SWQ9bn1yZXR1cm4gbyhlLFt7a2V5OlwibG9hZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LHI9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsaT1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMDtpZih0aGlzLmxvYWRlZClyZXR1cm4gd2luZG93Ll9kYWlseS5pbnN0YW5jZXNbdGhpcy5fY2FsbENsaWVudElkXS5jYWxsTWFjaGluZS5yZXNldCgpLHZvaWQgcighMCk7ZT10aGlzLl9jYWxsQ2xpZW50SWQsd2luZG93Ll9kYWlseS5wZW5kaW5ncy5wdXNoKGUpLHRoaXMuX2N1cnJlbnRMb2FkJiZ0aGlzLl9jdXJyZW50TG9hZC5jYW5jZWwoKSx0aGlzLl9jdXJyZW50TG9hZD1uZXcgTmEobiwoZnVuY3Rpb24oKXtyKCExKX0pLChmdW5jdGlvbihlLG4pe258fElhKHQuX2NhbGxDbGllbnRJZCksaShlLG4pfSkpLHRoaXMuX2N1cnJlbnRMb2FkLnN0YXJ0KCl9fSx7a2V5OlwiY2FuY2VsXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50TG9hZCYmdGhpcy5fY3VycmVudExvYWQuY2FuY2VsKCksSWEodGhpcy5fY2FsbENsaWVudElkKX19LHtrZXk6XCJsb2FkZWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudExvYWQmJnRoaXMuX2N1cnJlbnRMb2FkLnN1Y2NlZWRlZH19XSksZX0oKSxOYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30scj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxpPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwO3QodGhpcyxlKSx0aGlzLl9hdHRlbXB0c1JlbWFpbmluZz0zLHRoaXMuX2N1cnJlbnRBdHRlbXB0PW51bGwsdGhpcy5fZGFpbHlDb25maWc9bix0aGlzLl9zdWNjZXNzQ2FsbGJhY2s9cix0aGlzLl9mYWlsdXJlQ2FsbGJhY2s9aX1yZXR1cm4gbyhlLFt7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX2N1cnJlbnRBdHRlbXB0KXt0aGlzLl9jdXJyZW50QXR0ZW1wdD1uZXcgQmEodGhpcy5fZGFpbHlDb25maWcsdGhpcy5fc3VjY2Vzc0NhbGxiYWNrLChmdW5jdGlvbiB0KG4pe2UuX2N1cnJlbnRBdHRlbXB0LmNhbmNlbGxlZHx8KGUuX2F0dGVtcHRzUmVtYWluaW5nLS0sZS5fZmFpbHVyZUNhbGxiYWNrKG4sZS5fYXR0ZW1wdHNSZW1haW5pbmc+MCksZS5fYXR0ZW1wdHNSZW1haW5pbmc8PTB8fHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS5fY3VycmVudEF0dGVtcHQuY2FuY2VsbGVkfHwoZS5fY3VycmVudEF0dGVtcHQ9bmV3IEJhKGUuX2RhaWx5Q29uZmlnLGUuX3N1Y2Nlc3NDYWxsYmFjayx0KSxlLl9jdXJyZW50QXR0ZW1wdC5zdGFydCgpKX0pLDNlMykpfSkpLHRoaXMuX2N1cnJlbnRBdHRlbXB0LnN0YXJ0KCl9fX0se2tleTpcImNhbmNlbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudEF0dGVtcHQmJnRoaXMuX2N1cnJlbnRBdHRlbXB0LmNhbmNlbCgpfX0se2tleTpcImNhbmNlbGxlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50QXR0ZW1wdCYmdGhpcy5fY3VycmVudEF0dGVtcHQuY2FuY2VsbGVkfX0se2tleTpcInN1Y2NlZWRlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50QXR0ZW1wdCYmdGhpcy5fY3VycmVudEF0dGVtcHQuc3VjY2VlZGVkfX1dKSxlfSgpLFJhPWZ1bmN0aW9uKCl7YyhuLHhhKEVycm9yKSk7dmFyIGU9TGEobik7ZnVuY3Rpb24gbigpe3JldHVybiB0KHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG8obil9KCksRmE9MmU0LEJhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShuLHIsaSl7dCh0aGlzLGUpLHRoaXMuX2xvYWRBdHRlbXB0SW1wbD1uYSgpfHwhbi5hdm9pZEV2YWw/bmV3IFVhKG4scixpKTpuZXcgVmEobixyLGkpfXZhciBuO3JldHVybiBvKGUsW3trZXk6XCJzdGFydFwiLHZhbHVlOihuPWgoKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9sb2FkQXR0ZW1wdEltcGwuc3RhcnQoKX0pKSxmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiY2FuY2VsXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9sb2FkQXR0ZW1wdEltcGwuY2FuY2VsKCl9fSx7a2V5OlwiY2FuY2VsbGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRBdHRlbXB0SW1wbC5jYW5jZWxsZWR9fSx7a2V5Olwic3VjY2VlZGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRBdHRlbXB0SW1wbC5zdWNjZWVkZWR9fV0pLGV9KCksVWE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKG4scixpKXt0KHRoaXMsZSksdGhpcy5jYW5jZWxsZWQ9ITEsdGhpcy5zdWNjZWVkZWQ9ITEsdGhpcy5fbmV0d29ya1RpbWVkT3V0PSExLHRoaXMuX25ldHdvcmtUaW1lb3V0PW51bGwsdGhpcy5faW9zQ2FjaGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGlPU0NhbGxPYmplY3RCdW5kbGVDYWNoZSYmaU9TQ2FsbE9iamVjdEJ1bmRsZUNhY2hlLHRoaXMuX3JlZmV0Y2hIZWFkZXJzPW51bGwsdGhpcy5fZGFpbHlDb25maWc9bix0aGlzLl9zdWNjZXNzQ2FsbGJhY2s9cix0aGlzLl9mYWlsdXJlQ2FsbGJhY2s9aX12YXIgbixyLGksYTtyZXR1cm4gbyhlLFt7a2V5Olwic3RhcnRcIix2YWx1ZTooYT1oKChmdW5jdGlvbiooKXt2YXIgZT1YKHRoaXMuX2RhaWx5Q29uZmlnKTshKHlpZWxkIHRoaXMuX3RyeUxvYWRGcm9tSU9TQ2FjaGUoZSkpJiZ0aGlzLl9sb2FkRnJvbU5ldHdvcmsoZSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImNhbmNlbFwiLHZhbHVlOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX25ldHdvcmtUaW1lb3V0KSx0aGlzLmNhbmNlbGxlZD0hMH19LHtrZXk6XCJfdHJ5TG9hZEZyb21JT1NDYWNoZVwiLHZhbHVlOihpPWgoKGZ1bmN0aW9uKihlKXtpZighdGhpcy5faW9zQ2FjaGUpcmV0dXJuITE7dHJ5e3ZhciB0PXlpZWxkIHRoaXMuX2lvc0NhY2hlLmdldChlKTtyZXR1cm4hIXRoaXMuY2FuY2VsbGVkfHwhIXQmJih0LmNvZGU/KEZ1bmN0aW9uKCdcInVzZSBzdHJpY3RcIjsnK3QuY29kZSkoKSx0aGlzLnN1Y2NlZWRlZD0hMCx0aGlzLl9zdWNjZXNzQ2FsbGJhY2soKSwhMCk6KHRoaXMuX3JlZmV0Y2hIZWFkZXJzPXQucmVmZXRjaEhlYWRlcnMsITEpKX1jYXRjaChlKXtyZXR1cm4hMX19KSksZnVuY3Rpb24oZSl7cmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJfbG9hZEZyb21OZXR3b3JrXCIsdmFsdWU6KHI9aCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXM7dGhpcy5fbmV0d29ya1RpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Ll9uZXR3b3JrVGltZWRPdXQ9ITAsdC5fZmFpbHVyZUNhbGxiYWNrKHttc2c6XCJUaW1lZCBvdXQgKD5cIi5jb25jYXQoRmEsXCIgbXMpIHdoZW4gbG9hZGluZyBjYWxsIG9iamVjdCBidW5kbGUgXCIpLmNvbmNhdChlKSx0eXBlOlwidGltZW91dFwifSl9KSxGYSk7dHJ5e3ZhciBuPXRoaXMuX3JlZmV0Y2hIZWFkZXJzP3toZWFkZXJzOnRoaXMuX3JlZmV0Y2hIZWFkZXJzfTp7fSxyPXlpZWxkIGZldGNoKGUsbik7aWYoY2xlYXJUaW1lb3V0KHRoaXMuX25ldHdvcmtUaW1lb3V0KSx0aGlzLmNhbmNlbGxlZHx8dGhpcy5fbmV0d29ya1RpbWVkT3V0KXRocm93IG5ldyBSYTt2YXIgaT15aWVsZCB0aGlzLl9nZXRCdW5kbGVDb2RlRnJvbVJlc3BvbnNlKGUscik7aWYodGhpcy5jYW5jZWxsZWQpdGhyb3cgbmV3IFJhO0Z1bmN0aW9uKCdcInVzZSBzdHJpY3RcIjsnK2kpKCksdGhpcy5faW9zQ2FjaGUmJnRoaXMuX2lvc0NhY2hlLnNldChlLGksci5oZWFkZXJzKSx0aGlzLnN1Y2NlZWRlZD0hMCx0aGlzLl9zdWNjZXNzQ2FsbGJhY2soKX1jYXRjaCh0KXtpZihjbGVhclRpbWVvdXQodGhpcy5fbmV0d29ya1RpbWVvdXQpLHQgaW5zdGFuY2VvZiBSYXx8dGhpcy5jYW5jZWxsZWR8fHRoaXMuX25ldHdvcmtUaW1lZE91dClyZXR1cm47dGhpcy5fZmFpbHVyZUNhbGxiYWNrKHttc2c6XCJGYWlsZWQgdG8gbG9hZCBjYWxsIG9iamVjdCBidW5kbGUgXCIuY29uY2F0KGUsXCI6IFwiKS5jb25jYXQodCksdHlwZTp0Lm1lc3NhZ2V9KX19KSksZnVuY3Rpb24oZSl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJfZ2V0QnVuZGxlQ29kZUZyb21SZXNwb25zZVwiLHZhbHVlOihuPWgoKGZ1bmN0aW9uKihlLHQpe2lmKHQub2spcmV0dXJuIHlpZWxkIHQudGV4dCgpO2lmKHRoaXMuX2lvc0NhY2hlJiYzMDQ9PT10LnN0YXR1cylyZXR1cm4oeWllbGQgdGhpcy5faW9zQ2FjaGUucmVuZXcoZSx0LmhlYWRlcnMpKS5jb2RlO3Rocm93IG5ldyBFcnJvcihcIlJlY2VpdmVkIFwiLmNvbmNhdCh0LnN0YXR1cyxcIiByZXNwb25zZVwiKSl9KSksZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxlfSgpLFZhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShuLHIsaSl7dCh0aGlzLGUpLHRoaXMuY2FuY2VsbGVkPSExLHRoaXMuc3VjY2VlZGVkPSExLHRoaXMuX2RhaWx5Q29uZmlnPW4sdGhpcy5fc3VjY2Vzc0NhbGxiYWNrPXIsdGhpcy5fZmFpbHVyZUNhbGxiYWNrPWksdGhpcy5fYXR0ZW1wdElkPVEoKSx0aGlzLl9uZXR3b3JrVGltZW91dD1udWxsLHRoaXMuX3NjcmlwdEVsZW1lbnQ9bnVsbH1yZXR1cm4gbyhlLFt7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3dpbmRvdy5fZGFpbHlDYWxsTWFjaGluZUxvYWRXYWl0bGlzdHx8KHdpbmRvdy5fZGFpbHlDYWxsTWFjaGluZUxvYWRXYWl0bGlzdD1uZXcgU2V0KTt2YXIgZT1YKHRoaXMuX2RhaWx5Q29uZmlnKTtcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkb2N1bWVudD9cInVuZGVmaW5lZFwiOm4oZG9jdW1lbnQpKT90aGlzLl9zdGFydExvYWRpbmcoZSk6dGhpcy5fZmFpbHVyZUNhbGxiYWNrKHttc2c6XCJDYWxsIG9iamVjdCBidW5kbGUgbXVzdCBiZSBsb2FkZWQgaW4gYSBET00vd2ViIGNvbnRleHRcIix0eXBlOlwibWlzc2luZyBjb250ZXh0XCJ9KX19LHtrZXk6XCJjYW5jZWxcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N0b3BMb2FkaW5nKCksdGhpcy5jYW5jZWxsZWQ9ITB9fSx7a2V5OlwiX3N0YXJ0TG9hZGluZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fc2lnblVwRm9yQ2FsbE1hY2hpbmVMb2FkV2FpdGxpc3QoKSx0aGlzLl9uZXR3b3JrVGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuX3N0b3BMb2FkaW5nKCksdC5fZmFpbHVyZUNhbGxiYWNrKHttc2c6XCJUaW1lZCBvdXQgKD5cIi5jb25jYXQoRmEsXCIgbXMpIHdoZW4gbG9hZGluZyBjYWxsIG9iamVjdCBidW5kbGUgXCIpLmNvbmNhdChlKSx0eXBlOlwidGltZW91dFwifSl9KSxGYSk7dmFyIG49ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTt0aGlzLl9zY3JpcHRFbGVtZW50PXIsci5vbmxvYWQ9ZnVuY3Rpb24oKXt0Ll9zdG9wTG9hZGluZygpLHQuc3VjY2VlZGVkPSEwLHQuX3N1Y2Nlc3NDYWxsYmFjaygpfSxyLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dC5fc3RvcExvYWRpbmcoKSx0Ll9mYWlsdXJlQ2FsbGJhY2soe21zZzpcIkZhaWxlZCB0byBsb2FkIGNhbGwgb2JqZWN0IGJ1bmRsZSBcIi5jb25jYXQoZS50YXJnZXQuc3JjKSx0eXBlOmUubWVzc2FnZX0pfSxyLnNyYz1lLG4uYXBwZW5kQ2hpbGQocil9fSx7a2V5OlwiX3N0b3BMb2FkaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl93aXRoZHJhd0Zyb21DYWxsTWFjaGluZUxvYWRXYWl0bGlzdCgpLGNsZWFyVGltZW91dCh0aGlzLl9uZXR3b3JrVGltZW91dCksdGhpcy5fc2NyaXB0RWxlbWVudCYmKHRoaXMuX3NjcmlwdEVsZW1lbnQub25sb2FkPW51bGwsdGhpcy5fc2NyaXB0RWxlbWVudC5vbmVycm9yPW51bGwpfX0se2tleTpcIl9zaWduVXBGb3JDYWxsTWFjaGluZUxvYWRXYWl0bGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7d2luZG93Ll9kYWlseUNhbGxNYWNoaW5lTG9hZFdhaXRsaXN0LmFkZCh0aGlzLl9hdHRlbXB0SWQpfX0se2tleTpcIl93aXRoZHJhd0Zyb21DYWxsTWFjaGluZUxvYWRXYWl0bGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7d2luZG93Ll9kYWlseUNhbGxNYWNoaW5lTG9hZFdhaXRsaXN0LmRlbGV0ZSh0aGlzLl9hdHRlbXB0SWQpfX1dKSxlfSgpLEphPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4hMD09PVdhKGUubG9jYWwsdCxuKX0sJGE9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlLmxvY2FsLnN0cmVhbXMmJmUubG9jYWwuc3RyZWFtc1t0XSYmZS5sb2NhbC5zdHJlYW1zW3RdLnN0cmVhbSYmZS5sb2NhbC5zdHJlYW1zW3RdLnN0cmVhbVtcImdldFwiLmNvbmNhdChcInZpZGVvXCI9PT1uP1wiVmlkZW9cIjpcIkF1ZGlvXCIsXCJUcmFja3NcIildKClbMF19LHFhPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXphKGUsdCxuLHIpO3JldHVybiBpJiZpLnBlbmRpbmdUcmFja30sV2E9ZnVuY3Rpb24oZSx0LG4pe2lmKCFlKXJldHVybiExO3ZhciByPWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlXCJhdmF0YXJcIjpyZXR1cm4hMDtjYXNlXCJzdGFnZWRcIjpyZXR1cm4gZTtkZWZhdWx0OnJldHVybiEhZX19LGk9ZS5wdWJsaWMuc3Vic2NyaWJlZFRyYWNrcztyZXR1cm4gaSYmaVt0XT8tMT09PVtcImNhbS1hdWRpb1wiLFwiY2FtLXZpZGVvXCIsXCJzY3JlZW4tdmlkZW9cIixcInNjcmVlbi1hdWRpb1wiLFwicm1wQXVkaW9cIixcInJtcFZpZGVvXCJdLmluZGV4T2YobikmJmlbdF0uY3VzdG9tP1shMCxcInN0YWdlZFwiXS5pbmNsdWRlcyhpW3RdLmN1c3RvbSk/cihpW3RdLmN1c3RvbSk6cihpW3RdLmN1c3RvbVtuXSk6cihpW3RdW25dKTohaXx8cihpLkFMTCl9LHphPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPU9iamVjdC52YWx1ZXMoZS5zdHJlYW1zfHx7fSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJ0aWNpcGFudElkPT09dCYmZS50eXBlPT09biYmZS5wZW5kaW5nVHJhY2smJmUucGVuZGluZ1RyYWNrLmtpbmQ9PT1yfSkpLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBEYXRlKHQuc3RhcnR0aW1lKS1uZXcgRGF0ZShlLnN0YXJ0dGltZSl9KSk7cmV0dXJuIGkmJmlbMF19LEhhPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5sb2NhbC5wdWJsaWMuY3VzdG9tVHJhY2tzO2lmKG4mJm5bdF0pcmV0dXJuIG5bdF0udHJhY2t9O2Z1bmN0aW9uIEdhKGUsdCl7Zm9yKHZhciBuPXQuZ2V0U3RhdGUoKSxyPTAsaT1bXCJjYW1cIixcInNjcmVlblwiXTtyPGkubGVuZ3RoO3IrKylmb3IodmFyIG89aVtyXSxhPTAscz1bXCJ2aWRlb1wiLFwiYXVkaW9cIl07YTxzLmxlbmd0aDthKyspe3ZhciBjPXNbYV0sbD1cImNhbVwiPT09bz9jOlwic2NyZWVuXCIuY29uY2F0KGMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYy5zbGljZSgxKSksdT1lLnRyYWNrc1tsXTtpZih1KXt2YXIgZD1lLmxvY2FsPyRhKG4sbyxjKTpxYShuLGUuc2Vzc2lvbl9pZCxvLGMpO1wicGxheWFibGVcIj09PXUuc3RhdGUmJih1LnRyYWNrPWQpLHUucGVyc2lzdGVudFRyYWNrPWR9fX1mdW5jdGlvbiBRYShlLHQpe3RyeXt2YXIgbj10LmdldFN0YXRlKCk7Zm9yKHZhciByIGluIGUudHJhY2tzKWlmKCFLYShyKSl7dmFyIGk9ZS50cmFja3Nbcl0ua2luZDtpZihpKXt2YXIgbz1lLnRyYWNrc1tyXTtpZihvKXt2YXIgYT1lLmxvY2FsP0hhKG4scik6cWEobixlLnNlc3Npb25faWQscixpKTtcInBsYXlhYmxlXCI9PT1vLnN0YXRlJiYoZS50cmFja3Nbcl0udHJhY2s9YSksby5wZXJzaXN0ZW50VHJhY2s9YX19ZWxzZSBjb25zb2xlLmVycm9yKFwidW5rbm93biB0eXBlIGZvciBjdXN0b20gdHJhY2tcIil9fWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9fWZ1bmN0aW9uIEthKGUpe3JldHVybltcInZpZGVvXCIsXCJhdWRpb1wiLFwic2NyZWVuVmlkZW9cIixcInNjcmVlbkF1ZGlvXCJdLmluY2x1ZGVzKGUpfWZ1bmN0aW9uIFlhKGUsdCxuKXt2YXIgcj1uLmdldFN0YXRlKCk7aWYoZS5sb2NhbCl7aWYoZS5hdWRpbyl0cnl7ZS5hdWRpb1RyYWNrPXIubG9jYWwuc3RyZWFtcy5jYW0uc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0sZS5hdWRpb1RyYWNrfHwoZS5hdWRpbz0hMSl9Y2F0Y2goZSl7fWlmKGUudmlkZW8pdHJ5e2UudmlkZW9UcmFjaz1yLmxvY2FsLnN0cmVhbXMuY2FtLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLGUudmlkZW9UcmFja3x8KGUudmlkZW89ITEpfWNhdGNoKGUpe31pZihlLnNjcmVlbil0cnl7ZS5zY3JlZW5WaWRlb1RyYWNrPXIubG9jYWwuc3RyZWFtcy5zY3JlZW4uc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0sZS5zY3JlZW5BdWRpb1RyYWNrPXIubG9jYWwuc3RyZWFtcy5zY3JlZW4uc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0sZS5zY3JlZW5WaWRlb1RyYWNrfHxlLnNjcmVlbkF1ZGlvVHJhY2t8fChlLnNjcmVlbj0hMSl9Y2F0Y2goZSl7fX1lbHNle3ZhciBpPSEwO3RyeXt2YXIgbz1yLnBhcnRpY2lwYW50c1tlLnNlc3Npb25faWRdO28mJm8ucHVibGljJiZvLnB1YmxpYy5ydGNUeXBlJiZcInBlZXItdG8tcGVlclwiPT09by5wdWJsaWMucnRjVHlwZS5pbXBsJiZvLnByaXZhdGUmJiFbXCJjb25uZWN0ZWRcIixcImNvbXBsZXRlZFwiXS5pbmNsdWRlcyhvLnByaXZhdGUucGVlcmluZ1N0YXRlKSYmKGk9ITEpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9aWYoIWkpcmV0dXJuIGUuYXVkaW89ITEsZS5hdWRpb1RyYWNrPSExLGUudmlkZW89ITEsZS52aWRlb1RyYWNrPSExLGUuc2NyZWVuPSExLHZvaWQoZS5zY3JlZW5UcmFjaz0hMSk7dHJ5e3Iuc3RyZWFtcztpZihlLmF1ZGlvJiZKYShyLGUuc2Vzc2lvbl9pZCxcImNhbS1hdWRpb1wiKSl7dmFyIGE9cWEocixlLnNlc3Npb25faWQsXCJjYW1cIixcImF1ZGlvXCIpO2EmJih0JiZ0LmF1ZGlvVHJhY2smJnQuYXVkaW9UcmFjay5pZD09PWEuaWQ/ZS5hdWRpb1RyYWNrPWE6YS5tdXRlZHx8KGUuYXVkaW9UcmFjaz1hKSksZS5hdWRpb1RyYWNrfHwoZS5hdWRpbz0hMSl9aWYoZS52aWRlbyYmSmEocixlLnNlc3Npb25faWQsXCJjYW0tdmlkZW9cIikpe3ZhciBzPXFhKHIsZS5zZXNzaW9uX2lkLFwiY2FtXCIsXCJ2aWRlb1wiKTtzJiYodCYmdC52aWRlb1RyYWNrJiZ0LnZpZGVvVHJhY2suaWQ9PT1zLmlkP2UudmlkZW9UcmFjaz1zOnMubXV0ZWR8fChlLnZpZGVvVHJhY2s9cykpLGUudmlkZW9UcmFja3x8KGUudmlkZW89ITEpfWlmKGUuc2NyZWVuJiZKYShyLGUuc2Vzc2lvbl9pZCxcInNjcmVlbi1hdWRpb1wiKSl7dmFyIGM9cWEocixlLnNlc3Npb25faWQsXCJzY3JlZW5cIixcImF1ZGlvXCIpO2MmJih0JiZ0LnNjcmVlbkF1ZGlvVHJhY2smJnQuc2NyZWVuQXVkaW9UcmFjay5pZD09PWMuaWQ/ZS5zY3JlZW5BdWRpb1RyYWNrPWM6Yy5tdXRlZHx8KGUuc2NyZWVuQXVkaW9UcmFjaz1jKSl9aWYoZS5zY3JlZW4mJkphKHIsZS5zZXNzaW9uX2lkLFwic2NyZWVuLXZpZGVvXCIpKXt2YXIgbD1xYShyLGUuc2Vzc2lvbl9pZCxcInNjcmVlblwiLFwidmlkZW9cIik7bCYmKHQmJnQuc2NyZWVuVmlkZW9UcmFjayYmdC5zY3JlZW5WaWRlb1RyYWNrLmlkPT09bC5pZD9lLnNjcmVlblZpZGVvVHJhY2s9bDpsLm11dGVkfHwoZS5zY3JlZW5WaWRlb1RyYWNrPWwpKX1lLnNjcmVlblZpZGVvVHJhY2t8fGUuc2NyZWVuQXVkaW9UcmFja3x8KGUuc2NyZWVuPSExKX1jYXRjaChlKXtjb25zb2xlLmVycm9yKFwidW5leHBlY3RlZCBlcnJvciBtYXRjaGluZyB1cCB0cmFja3NcIixlKX19fWZ1bmN0aW9uIFhhKGUsdCl7dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdfHxlW1wiQEBpdGVyYXRvclwiXTtpZighbil7aWYoQXJyYXkuaXNBcnJheShlKXx8KG49ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm47aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIFphKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO1wiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpO2lmKFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bilyZXR1cm4gQXJyYXkuZnJvbShlKTtpZihcIkFyZ3VtZW50c1wiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpcmV0dXJuIFphKGUsdCl9KGUpKXx8dCYmZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXtuJiYoZT1uKTt2YXIgcj0wLGk9ZnVuY3Rpb24oKXt9O3JldHVybntzOmksbjpmdW5jdGlvbigpe3JldHVybiByPj1lLmxlbmd0aD97ZG9uZTohMH06e2RvbmU6ITEsdmFsdWU6ZVtyKytdfX0sZTpmdW5jdGlvbihlKXt0aHJvdyBlfSxmOml9fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX12YXIgbyxhPSEwLHM9ITE7cmV0dXJue3M6ZnVuY3Rpb24oKXtuPW4uY2FsbChlKX0sbjpmdW5jdGlvbigpe3ZhciBlPW4ubmV4dCgpO3JldHVybiBhPWUuZG9uZSxlfSxlOmZ1bmN0aW9uKGUpe3M9ITAsbz1lfSxmOmZ1bmN0aW9uKCl7dHJ5e2F8fG51bGw9PW4ucmV0dXJufHxuLnJldHVybigpfWZpbmFsbHl7aWYocyl0aHJvdyBvfX19fWZ1bmN0aW9uIFphKGUsdCl7KG51bGw9PXR8fHQ+ZS5sZW5ndGgpJiYodD1lLmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkodCk7bjx0O24rKylyW25dPWVbbl07cmV0dXJuIHJ9dmFyIGVzPW5ldyBNYXAsdHM9bnVsbDtmdW5jdGlvbiBucyhlLHQpe3ZhciBuPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXXx8ZVtcIkBAaXRlcmF0b3JcIl07aWYoIW4pe2lmKEFycmF5LmlzQXJyYXkoZSl8fChuPWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBycyhlLHQpO3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LC0xKTtcIk9iamVjdFwiPT09biYmZS5jb25zdHJ1Y3RvciYmKG49ZS5jb25zdHJ1Y3Rvci5uYW1lKTtpZihcIk1hcFwiPT09bnx8XCJTZXRcIj09PW4pcmV0dXJuIEFycmF5LmZyb20oZSk7aWYoXCJBcmd1bWVudHNcIj09PW58fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKXJldHVybiBycyhlLHQpfShlKSl8fHQmJmUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aCl7biYmKGU9bik7dmFyIHI9MCxpPWZ1bmN0aW9uKCl7fTtyZXR1cm57czppLG46ZnVuY3Rpb24oKXtyZXR1cm4gcj49ZS5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOmVbcisrXX19LGU6ZnVuY3Rpb24oZSl7dGhyb3cgZX0sZjppfX10aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9dmFyIG8sYT0hMCxzPSExO3JldHVybntzOmZ1bmN0aW9uKCl7bj1uLmNhbGwoZSl9LG46ZnVuY3Rpb24oKXt2YXIgZT1uLm5leHQoKTtyZXR1cm4gYT1lLmRvbmUsZX0sZTpmdW5jdGlvbihlKXtzPSEwLG89ZX0sZjpmdW5jdGlvbigpe3RyeXthfHxudWxsPT1uLnJldHVybnx8bi5yZXR1cm4oKX1maW5hbGx5e2lmKHMpdGhyb3cgb319fX1mdW5jdGlvbiBycyhlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgbj0wLHI9bmV3IEFycmF5KHQpO248dDtuKyspcltuXT1lW25dO3JldHVybiByfXZhciBpcz1uZXcgTWFwLG9zPW51bGw7ZnVuY3Rpb24gYXMoZSl7Y3MoKT9mdW5jdGlvbihlKXtlcy5oYXMoZSl8fChlcy5zZXQoZSx7fSksbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbigoZnVuY3Rpb24odCl7ZXMuaGFzKGUpJiYoZXMuZ2V0KGUpLmxhc3REZXZpY2VzU3RyaW5nPUpTT04uc3RyaW5naWZ5KHQpLHRzfHwodHM9ZnVuY3Rpb24oKXt2YXIgZT1oKChmdW5jdGlvbiooKXt2YXIgZSx0PXlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLG49WGEoZXMua2V5cygpKTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciByPWUudmFsdWUsaT1KU09OLnN0cmluZ2lmeSh0KTtpIT09ZXMuZ2V0KHIpLmxhc3REZXZpY2VzU3RyaW5nJiYoZXMuZ2V0KHIpLmxhc3REZXZpY2VzU3RyaW5nPWkscih0KSl9fWNhdGNoKGUpe24uZShlKX1maW5hbGx5e24uZigpfX0pKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpLG5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLHRzKSkpfSkpLmNhdGNoKChmdW5jdGlvbigpe30pKSl9KGUpOmZ1bmN0aW9uKGUpe2lzLmhhcyhlKXx8KGlzLnNldChlLHt9KSxuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKChmdW5jdGlvbih0KXtpcy5oYXMoZSkmJihpcy5nZXQoZSkubGFzdERldmljZXNTdHJpbmc9SlNPTi5zdHJpbmdpZnkodCksb3N8fChvcz1zZXRJbnRlcnZhbChoKChmdW5jdGlvbiooKXt2YXIgZSx0PXlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLG49bnMoaXMua2V5cygpKTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciByPWUudmFsdWUsaT1KU09OLnN0cmluZ2lmeSh0KTtpIT09aXMuZ2V0KHIpLmxhc3REZXZpY2VzU3RyaW5nJiYoaXMuZ2V0KHIpLmxhc3REZXZpY2VzU3RyaW5nPWkscih0KSl9fWNhdGNoKGUpe24uZShlKX1maW5hbGx5e24uZigpfX0pKSwzZTMpKSl9KSkpfShlKX1mdW5jdGlvbiBzcyhlKXtjcygpP2Z1bmN0aW9uKGUpe2VzLmhhcyhlKSYmKGVzLmRlbGV0ZShlKSwwPT09ZXMuc2l6ZSYmdHMmJihuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkZXZpY2VjaGFuZ2VcIix0cyksdHM9bnVsbCkpfShlKTpmdW5jdGlvbihlKXtpcy5oYXMoZSkmJihpcy5kZWxldGUoZSksMD09PWlzLnNpemUmJm9zJiYoY2xlYXJJbnRlcnZhbChvcyksb3M9bnVsbCkpfShlKX1mdW5jdGlvbiBjcygpe3JldHVybiBuYSgpfHx2b2lkIDAhPT1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLm9uZGV2aWNlY2hhbmdlfXZhciBscz1uZXcgU2V0O2Z1bmN0aW9uIHVzKGUsdCl7dmFyIG49dC5pc0xvY2FsU2NyZWVuVmlkZW87cmV0dXJuIGUmJlwibGl2ZVwiPT09ZS5yZWFkeVN0YXRlJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4oIXQuaXNMb2NhbFNjcmVlblZpZGVvfHxcIkNocm9tZVwiIT09cGEoKSkmJmUubXV0ZWQmJiFscy5oYXMoZS5pZCl9KGUse2lzTG9jYWxTY3JlZW5WaWRlbzpufSl9dmFyIGRzPVtcInJlc3VsdFwiXSxwcz1bXCJwcmVzZXJ2ZUlmcmFtZVwiXTtmdW5jdGlvbiBocyhlLHQpe3ZhciBuPU9iamVjdC5rZXlzKGUpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7dCYmKHI9ci5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSksbi5wdXNoLmFwcGx5KG4scil9cmV0dXJuIG59ZnVuY3Rpb24gZnMoZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49bnVsbCE9YXJndW1lbnRzW3RdP2FyZ3VtZW50c1t0XTp7fTt0JTI/aHMoT2JqZWN0KG4pLCEwKS5mb3JFYWNoKChmdW5jdGlvbih0KXtkKGUsdCxuW3RdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpocyhPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHQpKX0pKX1yZXR1cm4gZX1mdW5jdGlvbiB2cyhlKXt2YXIgdD1mdW5jdGlvbigpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fSgpO3JldHVybiBmdW5jdGlvbigpe3ZhciBuLHI9dShlKTtpZih0KXt2YXIgaT11KHRoaXMpLmNvbnN0cnVjdG9yO249UmVmbGVjdC5jb25zdHJ1Y3Qocixhcmd1bWVudHMsaSl9ZWxzZSBuPXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBsKHRoaXMsbil9fWZ1bmN0aW9uIG1zKGUsdCl7dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdfHxlW1wiQEBpdGVyYXRvclwiXTtpZighbil7aWYoQXJyYXkuaXNBcnJheShlKXx8KG49ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm47aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIGdzKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO1wiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpO2lmKFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bilyZXR1cm4gQXJyYXkuZnJvbShlKTtpZihcIkFyZ3VtZW50c1wiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpcmV0dXJuIGdzKGUsdCl9KGUpKXx8dCYmZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXtuJiYoZT1uKTt2YXIgcj0wLGk9ZnVuY3Rpb24oKXt9O3JldHVybntzOmksbjpmdW5jdGlvbigpe3JldHVybiByPj1lLmxlbmd0aD97ZG9uZTohMH06e2RvbmU6ITEsdmFsdWU6ZVtyKytdfX0sZTpmdW5jdGlvbihlKXt0aHJvdyBlfSxmOml9fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX12YXIgbyxhPSEwLHM9ITE7cmV0dXJue3M6ZnVuY3Rpb24oKXtuPW4uY2FsbChlKX0sbjpmdW5jdGlvbigpe3ZhciBlPW4ubmV4dCgpO3JldHVybiBhPWUuZG9uZSxlfSxlOmZ1bmN0aW9uKGUpe3M9ITAsbz1lfSxmOmZ1bmN0aW9uKCl7dHJ5e2F8fG51bGw9PW4ucmV0dXJufHxuLnJldHVybigpfWZpbmFsbHl7aWYocyl0aHJvdyBvfX19fWZ1bmN0aW9uIGdzKGUsdCl7KG51bGw9PXR8fHQ+ZS5sZW5ndGgpJiYodD1lLmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkodCk7bjx0O24rKylyW25dPWVbbl07cmV0dXJuIHJ9dmFyIHlzPXt9O3ZhciBfcz1cInZpZGVvXCIsYnM9XCJ2b2ljZVwiLHdzPW5hKCk/e2RhdGE6e319OntkYXRhOnt9LHRvcG9sb2d5Olwibm9uZVwifSxTcz17cHJlc2VudDowLGhpZGRlbjowfSxrcz17bWF4Qml0cmF0ZTp7bWluOjFlNSxtYXg6MjVlNX0sbWF4RnJhbWVyYXRlOnttaW46MSxtYXg6MzB9LHNjYWxlUmVzb2x1dGlvbkRvd25CeTp7bWluOjEsbWF4Ojh9fSxNcz1PYmplY3Qua2V5cyhrcyksQ3M9W1wic3RhdGVcIixcInZvbHVtZVwiLFwic2ltdWxjYXN0RW5jb2RpbmdzXCJdLEVzPXthbmRyb2lkSW5DYWxsTm90aWZpY2F0aW9uOnt0aXRsZTpcInN0cmluZ1wiLHN1YnRpdGxlOlwic3RyaW5nXCIsaWNvbk5hbWU6XCJzdHJpbmdcIixkaXNhYmxlRm9yQ3VzdG9tT3ZlcnJpZGU6XCJib29sZWFuXCJ9LGRpc2FibGVBdXRvRGV2aWNlTWFuYWdlbWVudDp7YXVkaW86XCJib29sZWFuXCIsdmlkZW86XCJib29sZWFuXCJ9fSxUcz17aWQ6e2ljb25QYXRoOlwic3RyaW5nXCIsaWNvblBhdGhEYXJrTW9kZTpcInN0cmluZ1wiLGxhYmVsOlwic3RyaW5nXCIsdG9vbHRpcDpcInN0cmluZ1wiLHZpc3VhbFN0YXRlOlwiJ2RlZmF1bHQnIHwgJ3NpZGViYXItb3BlbicgfCAnYWN0aXZlJ1wifX0sUHM9e2lkOnthbGxvdzpcInN0cmluZ1wiLGNvbnRyb2xsZWRCeTpcIicqJyB8ICdvd25lcnMnIHwgc3RyaW5nW11cIixjc3A6XCJzdHJpbmdcIixpY29uVVJMOlwic3RyaW5nXCIsbGFiZWw6XCJzdHJpbmdcIixsb2FkaW5nOlwiJ2VhZ2VyJyB8ICdsYXp5J1wiLGxvY2F0aW9uOlwiJ21haW4nIHwgJ3NpZGViYXInXCIsbmFtZTpcInN0cmluZ1wiLHJlZmVycmVyUG9saWN5Olwic3RyaW5nXCIsc2FuZGJveDpcInN0cmluZ1wiLHNyYzpcInN0cmluZ1wiLHNyY2RvYzpcInN0cmluZ1wiLHNoYXJlZDpcInN0cmluZ1tdIHwgJ293bmVycycgfCBib29sZWFuXCJ9fSxPcz17Y3VzdG9tSW50ZWdyYXRpb25zOnt2YWxpZGF0ZTpLcyxoZWxwOkdzKCl9LGN1c3RvbVRyYXlCdXR0b25zOnt2YWxpZGF0ZTpRcyxoZWxwOlwiY3VzdG9tVHJheUJ1dHRvbnMgc2hvdWxkIGJlIGEgZGljdGlvbmFyeSBvZiB0aGUgdHlwZSBcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoVHMpKX0sdXJsOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0saGVscDpcInVybCBzaG91bGQgYmUgYSBzdHJpbmdcIn0sYmFzZVVybDp7dmFsaWRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9LGhlbHA6XCJiYXNlVXJsIHNob3VsZCBiZSBhIHN0cmluZ1wifSx0b2tlbjp7dmFsaWRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9LGhlbHA6XCJ0b2tlbiBzaG91bGQgYmUgYSBzdHJpbmdcIixxdWVyeVN0cmluZzpcInRcIn0sZGFpbHlDb25maWc6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiB0LnZhbGlkYXRlRGFpbHlDb25maWcoZSksITB9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB2YWxpZGF0ZSBkYWlseUNvbmZpZ1wiLGUpfXJldHVybiExfSxoZWxwOlwiVW5zdXBwb3J0ZWQgZGFpbHlDb25maWcuIENoZWNrIGVycm9yIGxvZ3MgZm9yIGRldGFpbGVkIGluZm8uXCJ9LHJlYWN0TmF0aXZlQ29uZmlnOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gWXMoZSxFcyl9LGhlbHA6XCJyZWFjdE5hdGl2ZUNvbmZpZyBzaG91bGQgbG9vayBsaWtlIFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShFcyksXCIsIGFsbCBmaWVsZHMgb3B0aW9uYWxcIil9LGxhbmc6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUpe3JldHVybltcImRhXCIsXCJkZVwiLFwiZW4tdXNcIixcImVuXCIsXCJlc1wiLFwiZmlcIixcImZyXCIsXCJpdFwiLFwianBcIixcImthXCIsXCJubFwiLFwibm9cIixcInBsXCIsXCJwdFwiLFwicHQtQlJcIixcInJ1XCIsXCJzdlwiLFwidHJcIixcInVzZXJcIl0uaW5jbHVkZXMoZSl9LGhlbHA6XCJsYW5ndWFnZSBub3Qgc3VwcG9ydGVkLiBPcHRpb25zIGFyZTogZGEsIGRlLCBlbi11cywgZW4sIGVzLCBmaSwgZnIsIGl0LCBqcCwga2EsIG5sLCBubywgcGwsIHB0LCBwdC1CUiwgcnUsIHN2LCB0ciwgdXNlclwifSx1c2VyTmFtZTohMCx1c2VyRGF0YTp7dmFsaWRhdGU6ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBKcyhlKSwhMH1jYXRjaChlKXtyZXR1cm4gY29uc29sZS5lcnJvcihlKSwhMX19LGhlbHA6XCJpbnZhbGlkIHVzZXJEYXRhIHR5cGUgcHJvdmlkZWRcIn0sc3RhcnRWaWRlb09mZjohMCxzdGFydEF1ZGlvT2ZmOiEwLGFjdGl2ZVNwZWFrZXJNb2RlOiEwLHNob3dMZWF2ZUJ1dHRvbjohMCxzaG93TG9jYWxWaWRlbzohMCxzaG93UGFydGljaXBhbnRzQmFyOiEwLHNob3dGdWxsc2NyZWVuQnV0dG9uOiEwLHNob3dVc2VyTmFtZUNoYW5nZVVJOiEwLGlmcmFtZVN0eWxlOiEwLGN1c3RvbUxheW91dDohMCxjc3NGaWxlOiEwLGNzc1RleHQ6ITAsYm9keUNsYXNzOiEwLHZpZGVvU291cmNlOnt2YWxpZGF0ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgTWVkaWFTdHJlYW1UcmFjayYmKHQuX3NoYXJlZFRyYWNrcy52aWRlb0RldmljZUlkPWUpLHQuX3ByZWxvYWRDYWNoZS52aWRlb0RldmljZUlkPWUsITB9fSxhdWRpb1NvdXJjZTp7dmFsaWRhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtVHJhY2smJih0Ll9zaGFyZWRUcmFja3MuYXVkaW9EZXZpY2VJZD1lKSx0Ll9wcmVsb2FkQ2FjaGUuYXVkaW9EZXZpY2VJZD1lLCEwfX0sc3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5Ont2YWxpZGF0ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0Ll9wcmVsb2FkQ2FjaGUuc3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5PWUsITB9fSx0aGVtZTp7dmFsaWRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9W1wiYWNjZW50XCIsXCJhY2NlbnRUZXh0XCIsXCJiYWNrZ3JvdW5kXCIsXCJiYWNrZ3JvdW5kQWNjZW50XCIsXCJiYXNlVGV4dFwiLFwiYm9yZGVyXCIsXCJtYWluQXJlYUJnXCIsXCJtYWluQXJlYUJnQWNjZW50XCIsXCJtYWluQXJlYVRleHRcIixcInN1cHBvcnRpdmVUZXh0XCJdLHI9ZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTAscj1PYmplY3Qua2V5cyhlKTtuPHIubGVuZ3RoO24rKyl7dmFyIGk9cltuXTtpZighdC5pbmNsdWRlcyhpKSlyZXR1cm4gY29uc29sZS5lcnJvcigndW5zdXBwb3J0ZWQgY29sb3IgXCInLmNvbmNhdChpLCdcIi4gVmFsaWQgY29sb3JzOiAnKS5jb25jYXQodC5qb2luKFwiLCBcIikpKSwhMTtpZighZVtpXS5tYXRjaCgvXiNbMC05YS1mXXs2fXwjWzAtOWEtZl17M30kL2kpKXJldHVybiBjb25zb2xlLmVycm9yKFwiXCIuY29uY2F0KGksJyB0aGVtZSBjb2xvciBzaG91bGQgYmUgcHJvdmlkZWQgaW4gdmFsaWQgaGV4IGNvbG9yIGZvcm1hdC4gUmVjZWl2ZWQ6IFwiJykuY29uY2F0KGVbaV0sJ1wiJykpLCExfXJldHVybiEwfTtyZXR1cm5cIm9iamVjdFwiPT09bihlKSYmKFwibGlnaHRcImluIGUmJlwiZGFya1wiaW4gZXx8XCJjb2xvcnNcImluIGUpP1wibGlnaHRcImluIGUmJlwiZGFya1wiaW4gZT9cImNvbG9yc1wiaW4gZS5saWdodD9cImNvbG9yc1wiaW4gZS5kYXJrP3IoZS5saWdodC5jb2xvcnMpJiZyKGUuZGFyay5jb2xvcnMpOihjb25zb2xlLmVycm9yKCdEYXJrIHRoZW1lIGlzIG1pc3NpbmcgXCJjb2xvcnNcIiBwcm9wZXJ0eS4nLGUpLCExKTooY29uc29sZS5lcnJvcignTGlnaHQgdGhlbWUgaXMgbWlzc2luZyBcImNvbG9yc1wiIHByb3BlcnR5LicsZSksITEpOnIoZS5jb2xvcnMpOihjb25zb2xlLmVycm9yKCdUaGVtZSBtdXN0IGNvbnRhaW4gZWl0aGVyIGJvdGggXCJsaWdodFwiIGFuZCBcImRhcmtcIiBwcm9wZXJ0aWVzLCBvciBcImNvbG9yc1wiLicsZSksITEpfSxoZWxwOlwidW5zdXBwb3J0ZWQgdGhlbWUgY29uZmlndXJhdGlvbi4gQ2hlY2sgZXJyb3IgbG9ncyBmb3IgZGV0YWlsZWQgaW5mby5cIn0sbGF5b3V0Q29uZmlnOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXtpZihcImdyaWRcImluIGUpe3ZhciB0PWUuZ3JpZDtpZihcIm1heFRpbGVzUGVyUGFnZVwiaW4gdCl7aWYoIU51bWJlci5pc0ludGVnZXIodC5tYXhUaWxlc1BlclBhZ2UpKXJldHVybiBjb25zb2xlLmVycm9yKFwiZ3JpZC5tYXhUaWxlc1BlclBhZ2Ugc2hvdWxkIGJlIGFuIGludGVnZXIuIFlvdSBwYXNzZWQgXCIuY29uY2F0KHQubWF4VGlsZXNQZXJQYWdlLFwiLlwiKSksITE7aWYodC5tYXhUaWxlc1BlclBhZ2U+NDkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJncmlkLm1heFRpbGVzUGVyUGFnZSBjYW4ndCBiZSBsYXJnZXIgdGhhbiA0OSB3aXRob3V0IHNhY3JpZmljaW5nIGJyb3dzZXIgcGVyZm9ybWFuY2UuIFBsZWFzZSBjb250YWN0IHVzIGF0IGh0dHBzOi8vd3d3LmRhaWx5LmNvL2NvbnRhY3QgdG8gdGFsayBhYm91dCB5b3VyIHVzZSBjYXNlLlwiKSwhMX1pZihcIm1pblRpbGVzUGVyUGFnZVwiaW4gdCl7aWYoIU51bWJlci5pc0ludGVnZXIodC5taW5UaWxlc1BlclBhZ2UpKXJldHVybiBjb25zb2xlLmVycm9yKFwiZ3JpZC5taW5UaWxlc1BlclBhZ2Ugc2hvdWxkIGJlIGFuIGludGVnZXIuIFlvdSBwYXNzZWQgXCIuY29uY2F0KHQubWluVGlsZXNQZXJQYWdlLFwiLlwiKSksITE7aWYodC5taW5UaWxlc1BlclBhZ2U8MSlyZXR1cm4gY29uc29sZS5lcnJvcihcImdyaWQubWluVGlsZXNQZXJQYWdlIGNhbid0IGJlIGxvd2VyIHRoYW4gMS5cIiksITE7aWYoXCJtYXhUaWxlc1BlclBhZ2VcImluIHQmJnQubWluVGlsZXNQZXJQYWdlPnQubWF4VGlsZXNQZXJQYWdlKXJldHVybiBjb25zb2xlLmVycm9yKFwiZ3JpZC5taW5UaWxlc1BlclBhZ2UgY2FuJ3QgYmUgaGlnaGVyIHRoYW4gZ3JpZC5tYXhUaWxlc1BlclBhZ2UuXCIpLCExfX1yZXR1cm4hMH0saGVscDpcInVuc3VwcG9ydGVkIGxheW91dENvbmZpZy4gQ2hlY2sgZXJyb3IgbG9ncyBmb3IgZGV0YWlsZWQgaW5mby5cIn0scmVjZWl2ZVNldHRpbmdzOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gJHMoZSx7YWxsb3dBbGxQYXJ0aWNpcGFudHNLZXk6ITF9KX0saGVscDpIcyh7YWxsb3dBbGxQYXJ0aWNpcGFudHNLZXk6ITF9KX0sc2VuZFNldHRpbmdzOnt2YWxpZGF0ZTpmdW5jdGlvbihlLHQpe3JldHVybiEhZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIHQudmFsaWRhdGVVcGRhdGVTZW5kU2V0dGluZ3MoZSksITB9Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdmFsaWRhdGUgc2VuZCBzZXR0aW5nc1wiLGUpLCExfX0oZSx0KSYmKHQuX3ByZWxvYWRDYWNoZS5zZW5kU2V0dGluZ3M9ZSwhMCl9LGhlbHA6XCJJbnZhbGlkIHNlbmRTZXR0aW5ncyBwcm92aWRlZC4gQ2hlY2sgZXJyb3IgbG9ncyBmb3IgZGV0YWlsZWQgaW5mby5cIn0saW5wdXRTZXR0aW5nczp7dmFsaWRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4hIXFzKGUpJiYodC5fcHJlbG9hZENhY2hlLmlucHV0U2V0dGluZ3N8fCh0Ll9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5ncz17fSksV3MoZSxudWxsPT09KG49dC5wcm9wZXJ0aWVzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5kYWlseUNvbmZpZyksZS5hdWRpbyYmKHQuX3ByZWxvYWRDYWNoZS5pbnB1dFNldHRpbmdzLmF1ZGlvPWUuYXVkaW8pLGUudmlkZW8mJih0Ll9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5ncy52aWRlbz1lLnZpZGVvKSwhMCl9LGhlbHA6enMoKX0sbGF5b3V0Ont2YWxpZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm5cImN1c3RvbS12MVwiPT09ZXx8XCJicm93c2VyXCI9PT1lfHxcIm5vbmVcIj09PWV9LGhlbHA6J2xheW91dCBtYXkgb25seSBiZSBzZXQgdG8gXCJjdXN0b20tdjFcIicscXVlcnlTdHJpbmc6XCJsYXlvdXRcIn0sZW1iOntxdWVyeVN0cmluZzpcImVtYlwifSxlbWJIcmVmOntxdWVyeVN0cmluZzpcImVtYkhyZWZcIn0sZGFpbHlKc1ZlcnNpb246e3F1ZXJ5U3RyaW5nOlwiZGFpbHlKc1ZlcnNpb25cIn0scHJveHk6e3F1ZXJ5U3RyaW5nOlwicHJveHlcIn0sc3RyaWN0TW9kZTohMCxhbGxvd011bHRpcGxlQ2FsbEluc3RhbmNlczohMH0sQXM9e3N0eWxlczp7dmFsaWRhdGU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpaWYoXCJjYW1cIiE9PXQmJlwic2NyZWVuXCIhPT10KXJldHVybiExO2lmKGUuY2FtKWZvcih2YXIgbiBpbiBlLmNhbSlpZihcImRpdlwiIT09biYmXCJ2aWRlb1wiIT09bilyZXR1cm4hMTtpZihlLnNjcmVlbilmb3IodmFyIHIgaW4gZS5zY3JlZW4paWYoXCJkaXZcIiE9PXImJlwidmlkZW9cIiE9PXIpcmV0dXJuITE7cmV0dXJuITB9LGhlbHA6XCJzdHlsZXMgZm9ybWF0IHNob3VsZCBiZSBhIHN1YnNldCBvZjogeyBjYW06IHtkaXY6IHt9LCB2aWRlbzoge319LCBzY3JlZW46IHtkaXY6IHt9LCB2aWRlbzoge319IH1cIn0sc2V0U3Vic2NyaWJlZFRyYWNrczp7dmFsaWRhdGU6ZnVuY3Rpb24oZSx0KXtpZih0Ll9wcmVsb2FkQ2FjaGUuc3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5KXJldHVybiExO3ZhciBuPVshMCwhMSxcInN0YWdlZFwiXTtpZihuLmluY2x1ZGVzKGUpfHwhbmEoKSYmXCJhdmF0YXJcIj09PWUpcmV0dXJuITA7dmFyIHI9W1wiYXVkaW9cIixcInZpZGVvXCIsXCJzY3JlZW5BdWRpb1wiLFwic2NyZWVuVmlkZW9cIixcInJtcEF1ZGlvXCIsXCJybXBWaWRlb1wiXTtyZXR1cm4gZnVuY3Rpb24gZSh0KXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2Zvcih2YXIgbyBpbiB0KWlmKFwiY3VzdG9tXCI9PT1vKXtpZighbi5pbmNsdWRlcyh0W29dKSYmIWUodFtvXSwhMCkpcmV0dXJuITF9ZWxzZXt2YXIgYT0haSYmIXIuaW5jbHVkZXMobykscz0hbi5pbmNsdWRlcyh0W29dKTtpZihhfHxzKXJldHVybiExfXJldHVybiEwfShlKX0saGVscDpcInNldFN1YnNjcmliZWRUcmFja3MgY2Fubm90IGJlIHVzZWQgd2hlbiBzZXRTdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHkgaXMgZW5hYmxlZCwgYW5kIHNob3VsZCBiZSBvZiB0aGUgZm9ybTogXCIrXCJ0cnVlXCIuY29uY2F0KG5hKCk/XCJcIjpcIiB8ICdhdmF0YXInXCIsXCIgfCBmYWxzZSB8ICdzdGFnZWQnIHwgeyBbYXVkaW86IHRydWV8ZmFsc2V8J3N0YWdlZCddLCBbdmlkZW86IHRydWV8ZmFsc2V8J3N0YWdlZCddLCBbc2NyZWVuQXVkaW86IHRydWV8ZmFsc2V8J3N0YWdlZCddLCBbc2NyZWVuVmlkZW86IHRydWV8ZmFsc2V8J3N0YWdlZCddIH1cIil9LHNldEF1ZGlvOiEwLHNldFZpZGVvOiEwLHNldFNjcmVlblNoYXJlOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4hMT09PWV9LGhlbHA6XCJzZXRTY3JlZW5TaGFyZSBtdXN0IGJlIGZhbHNlLCBhcyBpdCdzIG9ubHkgbWVhbnQgZm9yIHN0b3BwaW5nIHJlbW90ZSBwYXJ0aWNpcGFudHMnIHNjcmVlbiBzaGFyZXNcIn0sZWplY3Q6ITAsdXBkYXRlUGVybWlzc2lvbnM6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49T2JqZWN0LmVudHJpZXMoZSk7dDxuLmxlbmd0aDt0Kyspe3ZhciByPXYoblt0XSwyKSxpPXJbMF0sbz1yWzFdO3N3aXRjaChpKXtjYXNlXCJoYXNQcmVzZW5jZVwiOmlmKFwiYm9vbGVhblwiIT10eXBlb2YgbylyZXR1cm4hMTticmVhaztjYXNlXCJjYW5TZW5kXCI6aWYobyBpbnN0YW5jZW9mIFNldHx8byBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5KG8pKXt2YXIgYSxzPVtcInZpZGVvXCIsXCJhdWRpb1wiLFwic2NyZWVuVmlkZW9cIixcInNjcmVlbkF1ZGlvXCIsXCJjdXN0b21WaWRlb1wiLFwiY3VzdG9tQXVkaW9cIl0sYz1tcyhvKTt0cnl7Zm9yKGMucygpOyEoYT1jLm4oKSkuZG9uZTspe3ZhciBsPWEudmFsdWU7aWYoIXMuaW5jbHVkZXMobCkpcmV0dXJuITF9fWNhdGNoKGUpe2MuZShlKX1maW5hbGx5e2MuZigpfX1lbHNlIGlmKFwiYm9vbGVhblwiIT10eXBlb2YgbylyZXR1cm4hMTsobyBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5KG8pKSYmKGUuY2FuU2VuZD1uZXcgU2V0KG8pKTticmVhaztjYXNlXCJjYW5BZG1pblwiOmlmKG8gaW5zdGFuY2VvZiBTZXR8fG8gaW5zdGFuY2VvZiBBcnJheXx8QXJyYXkuaXNBcnJheShvKSl7dmFyIHUsZD1bXCJwYXJ0aWNpcGFudHNcIixcInN0cmVhbWluZ1wiLFwidHJhbnNjcmlwdGlvblwiXSxwPW1zKG8pO3RyeXtmb3IocC5zKCk7ISh1PXAubigpKS5kb25lOyl7dmFyIGg9dS52YWx1ZTtpZighZC5pbmNsdWRlcyhoKSlyZXR1cm4hMX19Y2F0Y2goZSl7cC5lKGUpfWZpbmFsbHl7cC5mKCl9fWVsc2UgaWYoXCJib29sZWFuXCIhPXR5cGVvZiBvKXJldHVybiExOyhvIGluc3RhbmNlb2YgQXJyYXl8fEFycmF5LmlzQXJyYXkobykpJiYoZS5jYW5BZG1pbj1uZXcgU2V0KG8pKTticmVhaztkZWZhdWx0OnJldHVybiExfX1yZXR1cm4hMH0saGVscDpcInVwZGF0ZVBlcm1pc3Npb25zIGNhbiB0YWtlIGhhc1ByZXNlbmNlLCBjYW5TZW5kLCBhbmQgY2FuQWRtaW4gcGVybWlzc2lvbnMuIGhhc1ByZXNlbmNlIG11c3QgYmUgYSBib29sZWFuLiBjYW5TZW5kIGNhbiBiZSBhIGJvb2xlYW4gb3IgYW4gQXJyYXkgb3IgU2V0IG9mIG1lZGlhIHR5cGVzICh2aWRlbywgYXVkaW8sIHNjcmVlblZpZGVvLCBzY3JlZW5BdWRpbywgY3VzdG9tVmlkZW8sIGN1c3RvbUF1ZGlvKS4gY2FuQWRtaW4gY2FuIGJlIGEgYm9vbGVhbiBvciBhbiBBcnJheSBvciBTZXQgb2YgYWRtaW4gdHlwZXMgKHBhcnRpY2lwYW50cywgc3RyZWFtaW5nLCB0cmFuc2NyaXB0aW9uKS5cIn19O1Byb21pc2UuYW55fHwoUHJvbWlzZS5hbnk9ZnVuY3Rpb24oKXt2YXIgZT1oKChmdW5jdGlvbiooZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3ZhciByPVtdO2UuZm9yRWFjaCgoZnVuY3Rpb24oaSl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShpKS50aGVuKChmdW5jdGlvbihlKXt0KGUpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyLnB1c2godCksci5sZW5ndGg9PT1lLmxlbmd0aCYmbihyKX0pKX0pKX0pKX0pKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKSk7dmFyIGpzPWZ1bmN0aW9uKCl7YyhlZSxnKTt2YXIgcixpLHMsbCx1LHAsZixtLHksXyxiLHcsUyxrLE0sQyxFLFQsUCxPLEEsaix4LEwsSSxOLFIsRixCLFUsVixKLCQscSxXLHosSCxLLFo9dnMoZWUpO2Z1bmN0aW9uIGVlKGUpe3ZhciBuLHIsaSxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZih0KHRoaXMsZWUpLGQoYShyPVouY2FsbCh0aGlzKSksXCJzdGFydExpc3RlbmluZ0ZvckRldmljZUNoYW5nZXNcIiwoZnVuY3Rpb24oKXthcyhyLmhhbmRsZURldmljZUNoYW5nZSl9KSksZChhKHIpLFwic3RvcExpc3RlbmluZ0ZvckRldmljZUNoYW5nZXNcIiwoZnVuY3Rpb24oKXtzcyhyLmhhbmRsZURldmljZUNoYW5nZSl9KSksZChhKHIpLFwiaGFuZGxlRGV2aWNlQ2hhbmdlXCIsKGZ1bmN0aW9uKGUpe2U9ZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKX0pKSxyLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpcImF2YWlsYWJsZS1kZXZpY2VzLXVwZGF0ZWRcIixhdmFpbGFibGVEZXZpY2VzOmV9KX0pKSxkKGEociksXCJoYW5kbGVOYXRpdmVBcHBTdGF0ZUNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIGU9aCgoZnVuY3Rpb24qKGUpe2lmKFwiZGVzdHJveWVkXCI9PT1lKXJldHVybiBjb25zb2xlLndhcm4oXCJBcHAgaGFzIGJlZW4gZGVzdHJveWVkIGJlZm9yZSBsZWF2aW5nIHRoZSBtZWV0aW5nLiBDbGVhbmluZyB1cCBhbGwgdGhlIHJlc291cmNlcyFcIiksdm9pZCh5aWVsZCByLmRlc3Ryb3koKSk7dmFyIHQ9XCJhY3RpdmVcIj09PWU7ci5kaXNhYmxlUmVhY3ROYXRpdmVBdXRvRGV2aWNlTWFuYWdlbWVudChcInZpZGVvXCIpfHwodD9yLmNhbVVubXV0ZWRCZWZvcmVMb3NpbmdOYXRpdmVBY3RpdmVTdGF0ZSYmci5zZXRMb2NhbFZpZGVvKCEwKTooci5jYW1Vbm11dGVkQmVmb3JlTG9zaW5nTmF0aXZlQWN0aXZlU3RhdGU9ci5sb2NhbFZpZGVvKCksci5jYW1Vbm11dGVkQmVmb3JlTG9zaW5nTmF0aXZlQWN0aXZlU3RhdGUmJnIuc2V0TG9jYWxWaWRlbyghMSkpKX0pKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKSksZChhKHIpLFwiaGFuZGxlTmF0aXZlQXVkaW9Gb2N1c0NoYW5nZVwiLChmdW5jdGlvbihlKXtyLmRpc2FibGVSZWFjdE5hdGl2ZUF1dG9EZXZpY2VNYW5hZ2VtZW50KFwiYXVkaW9cIil8fChyLl9oYXNOYXRpdmVBdWRpb0ZvY3VzPWUsci50b2dnbGVQYXJ0aWNpcGFudEF1ZGlvQmFzZWRPbk5hdGl2ZUF1ZGlvRm9jdXMoKSxyLl9oYXNOYXRpdmVBdWRpb0ZvY3VzP3IubWljVW5tdXRlZEJlZm9yZUxvc2luZ05hdGl2ZUF1ZGlvRm9jdXMmJnIuc2V0TG9jYWxBdWRpbyghMCk6KHIubWljVW5tdXRlZEJlZm9yZUxvc2luZ05hdGl2ZUF1ZGlvRm9jdXM9ci5sb2NhbEF1ZGlvKCksci5zZXRMb2NhbEF1ZGlvKCExKSkpfSkpLGQoYShyKSxcImhhbmRsZU5hdGl2ZVN5c3RlbVNjcmVlbkNhcHR1cmVTdG9wXCIsKGZ1bmN0aW9uKCl7ci5zdG9wU2NyZWVuU2hhcmUoKX0pKSxyLnN0cmljdE1vZGU9dm9pZCAwPT09by5zdHJpY3RNb2RlfHxvLnN0cmljdE1vZGUsci5hbGxvd011bHRpcGxlQ2FsbEluc3RhbmNlcz1udWxsIT09KG49by5hbGxvd011bHRpcGxlQ2FsbEluc3RhbmNlcykmJnZvaWQgMCE9PW4mJm4sT2JqZWN0LmtleXMoeXMpLmxlbmd0aCYmKHIuX2xvZ0R1cGxpY2F0ZUluc3RhbmNlQXR0ZW1wdCgpLCFyLmFsbG93TXVsdGlwbGVDYWxsSW5zdGFuY2VzKSl7aWYoci5zdHJpY3RNb2RlKXRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZSBEYWlseUlmcmFtZSBpbnN0YW5jZXMgYXJlIG5vdCBhbGxvd2VkXCIpO2NvbnNvbGUud2FybihcIlVzaW5nIHN0cmljdE1vZGU6IGZhbHNlIHRvIGFsbG93IG11bHRpcGxlIGNhbGwgaW5zdGFuY2VzIGlzIG5vdyBkZXByZWNhdGVkLiBTZXQgYGFsbG93TXVsdGlwbGVDYWxsSW5zdGFuY2VzOiB0cnVlYFwiKX1pZih3aW5kb3cuX2RhaWx5fHwod2luZG93Ll9kYWlseT17cGVuZGluZ3M6W10saW5zdGFuY2VzOnt9fSksci5jYWxsQ2xpZW50SWQ9USgpLGk9YShyKSx5c1tpLmNhbGxDbGllbnRJZF09aSx3aW5kb3cuX2RhaWx5Lmluc3RhbmNlc1tyLmNhbGxDbGllbnRJZF09e30sci5fc2hhcmVkVHJhY2tzPXt9LHdpbmRvdy5fZGFpbHkuaW5zdGFuY2VzW3IuY2FsbENsaWVudElkXS50cmFja3M9ci5fc2hhcmVkVHJhY2tzLG8uZGFpbHlKc1ZlcnNpb249ZWUudmVyc2lvbigpLHIuX2lmcmFtZT1lLHIuX2NhbGxPYmplY3RNb2RlPVwibm9uZVwiPT09by5sYXlvdXQmJiFyLl9pZnJhbWUsci5fcHJlbG9hZENhY2hlPXtzdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHk6ITAsYXVkaW9EZXZpY2VJZDpudWxsLHZpZGVvRGV2aWNlSWQ6bnVsbCxvdXRwdXREZXZpY2VJZDpudWxsLGlucHV0U2V0dGluZ3M6bnVsbCxzZW5kU2V0dGluZ3M6bnVsbCx2aWRlb1RyYWNrRm9yTmV0d29ya0Nvbm5lY3Rpdml0eVRlc3Q6bnVsbCx2aWRlb1RyYWNrRm9yQ29ubmVjdGlvblF1YWxpdHlUZXN0Om51bGx9LHZvaWQgMCE9PW8uc2hvd0xvY2FsVmlkZW8/ci5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcInNob3dMb2NhbFZpZGVvIGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbCBvYmplY3QgbW9kZVwiKTpyLl9zaG93TG9jYWxWaWRlbz0hIW8uc2hvd0xvY2FsVmlkZW86ci5fc2hvd0xvY2FsVmlkZW89ITAsdm9pZCAwIT09by5zaG93UGFydGljaXBhbnRzQmFyP3IuX2NhbGxPYmplY3RNb2RlP2NvbnNvbGUuZXJyb3IoXCJzaG93UGFydGljaXBhbnRzQmFyIGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbCBvYmplY3QgbW9kZVwiKTpyLl9zaG93UGFydGljaXBhbnRzQmFyPSEhby5zaG93UGFydGljaXBhbnRzQmFyOnIuX3Nob3dQYXJ0aWNpcGFudHNCYXI9ITAsdm9pZCAwIT09by5jdXN0b21JbnRlZ3JhdGlvbnM/ci5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcImN1c3RvbUludGVncmF0aW9ucyBpcyBub3QgYXZhaWxhYmxlIGluIGNhbGwgb2JqZWN0IG1vZGVcIik6ci5fY3VzdG9tSW50ZWdyYXRpb25zPW8uY3VzdG9tSW50ZWdyYXRpb25zOnIuX2N1c3RvbUludGVncmF0aW9ucz17fSx2b2lkIDAhPT1vLmN1c3RvbVRyYXlCdXR0b25zP3IuX2NhbGxPYmplY3RNb2RlP2NvbnNvbGUuZXJyb3IoXCJjdXN0b21UcmF5QnV0dG9ucyBpcyBub3QgYXZhaWxhYmxlIGluIGNhbGwgb2JqZWN0IG1vZGVcIik6ci5fY3VzdG9tVHJheUJ1dHRvbnM9by5jdXN0b21UcmF5QnV0dG9uczpyLl9jdXN0b21UcmF5QnV0dG9ucz17fSx2b2lkIDAhPT1vLmFjdGl2ZVNwZWFrZXJNb2RlP3IuX2NhbGxPYmplY3RNb2RlP2NvbnNvbGUuZXJyb3IoXCJhY3RpdmVTcGVha2VyTW9kZSBpcyBub3QgYXZhaWxhYmxlIGluIGNhbGwgb2JqZWN0IG1vZGVcIik6ci5fYWN0aXZlU3BlYWtlck1vZGU9ISFvLmFjdGl2ZVNwZWFrZXJNb2RlOnIuX2FjdGl2ZVNwZWFrZXJNb2RlPSExLG8ucmVjZWl2ZVNldHRpbmdzP3IuX2NhbGxPYmplY3RNb2RlP3IuX3JlY2VpdmVTZXR0aW5ncz1vLnJlY2VpdmVTZXR0aW5nczpjb25zb2xlLmVycm9yKFwicmVjZWl2ZVNldHRpbmdzIGlzIG9ubHkgYXZhaWxhYmxlIGluIGNhbGwgb2JqZWN0IG1vZGVcIik6ci5fcmVjZWl2ZVNldHRpbmdzPXt9LHIudmFsaWRhdGVQcm9wZXJ0aWVzKG8pLHIucHJvcGVydGllcz1mcyh7fSxvKSxyLl9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5nc3x8KHIuX3ByZWxvYWRDYWNoZS5pbnB1dFNldHRpbmdzPXt9KSxvLmlucHV0U2V0dGluZ3MmJm8uaW5wdXRTZXR0aW5ncy5hdWRpbyYmKHIuX3ByZWxvYWRDYWNoZS5pbnB1dFNldHRpbmdzLmF1ZGlvPW8uaW5wdXRTZXR0aW5ncy5hdWRpbyksby5pbnB1dFNldHRpbmdzJiZvLmlucHV0U2V0dGluZ3MudmlkZW8mJihyLl9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5ncy52aWRlbz1vLmlucHV0U2V0dGluZ3MudmlkZW8pLHIuX2NhbGxPYmplY3RMb2FkZXI9ci5fY2FsbE9iamVjdE1vZGU/bmV3IERhKHIuY2FsbENsaWVudElkKTpudWxsLHIuX2NhbGxTdGF0ZT1acixyLl9pc1ByZXBhcmluZ1RvSm9pbj0hMSxyLl9hY2Nlc3NTdGF0ZT17YWNjZXNzOnBpfSxyLl9tZWV0aW5nU2Vzc2lvblN1bW1hcnk9e30sci5fZmluYWxTdW1tYXJ5T2ZQcmV2U2Vzc2lvbj17fSxyLl9tZWV0aW5nU2Vzc2lvblN0YXRlPXRjKHdzLHIuX2NhbGxPYmplY3RNb2RlKSxyLl9uYXRpdmVJbkNhbGxBdWRpb01vZGU9X3Msci5fcGFydGljaXBhbnRzPXt9LHIuX2lzU2NyZWVuU2hhcmluZz0hMSxyLl9wYXJ0aWNpcGFudENvdW50cz1TcyxyLl9ybXBQbGF5ZXJTdGF0ZT17fSxyLl93YWl0aW5nUGFydGljaXBhbnRzPXt9LHIuX25ldHdvcms9e3RocmVzaG9sZDpcImdvb2RcIixxdWFsaXR5OjEwMH0sci5fYWN0aXZlU3BlYWtlcj17fSxyLl9sb2NhbEF1ZGlvTGV2ZWw9MCxyLl9pc0xvY2FsQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMSxyLl9yZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsPXt9LHIuX2lzUmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMSxyLl9tYXhBcHBNZXNzYWdlU2l6ZT1WbyxyLl9tZXNzYWdlQ2hhbm5lbD1uYSgpP25ldyBFYTpuZXcga2Esci5faWZyYW1lJiYoci5faWZyYW1lLnJlcXVlc3RGdWxsc2NyZWVuP3IuX2lmcmFtZS5hZGRFdmVudExpc3RlbmVyKFwiZnVsbHNjcmVlbmNoYW5nZVwiLChmdW5jdGlvbigpe2RvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50PT09ci5faWZyYW1lPyhyLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpBb30pLHIuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246QW99KSk6KHIuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOmpvfSksci5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpqb30pKX0pKTpyLl9pZnJhbWUud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4mJnIuX2lmcmFtZS5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0ZnVsbHNjcmVlbmNoYW5nZVwiLChmdW5jdGlvbigpe2RvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50PT09ci5faWZyYW1lPyhyLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpBb30pLHIuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246QW99KSk6KHIuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOmpvfSksci5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpqb30pKX0pKSksbmEoKSl7dmFyIHM9ci5uYXRpdmVVdGlscygpO3MuYWRkQXVkaW9Gb2N1c0NoYW5nZUxpc3RlbmVyJiZzLnJlbW92ZUF1ZGlvRm9jdXNDaGFuZ2VMaXN0ZW5lciYmcy5hZGRBcHBTdGF0ZUNoYW5nZUxpc3RlbmVyJiZzLnJlbW92ZUFwcFN0YXRlQ2hhbmdlTGlzdGVuZXImJnMuYWRkU3lzdGVtU2NyZWVuQ2FwdHVyZVN0b3BMaXN0ZW5lciYmcy5yZW1vdmVTeXN0ZW1TY3JlZW5DYXB0dXJlU3RvcExpc3RlbmVyfHxjb25zb2xlLndhcm4oXCJleHBlY3RlZCAoYWRkfHJlbW92ZSkoQXVkaW9Gb2N1c0NoYW5nZXxBcHBBY3RpdmVTdGF0ZUNoYW5nZXxTeXN0ZW1TY3JlZW5DYXB0dXJlU3RvcClMaXN0ZW5lciB0byBiZSBhdmFpbGFibGUgaW4gUmVhY3QgTmF0aXZlXCIpLHIuX2hhc05hdGl2ZUF1ZGlvRm9jdXM9ITAscy5hZGRBdWRpb0ZvY3VzQ2hhbmdlTGlzdGVuZXIoci5oYW5kbGVOYXRpdmVBdWRpb0ZvY3VzQ2hhbmdlKSxzLmFkZEFwcFN0YXRlQ2hhbmdlTGlzdGVuZXIoci5oYW5kbGVOYXRpdmVBcHBTdGF0ZUNoYW5nZSkscy5hZGRTeXN0ZW1TY3JlZW5DYXB0dXJlU3RvcExpc3RlbmVyKHIuaGFuZGxlTmF0aXZlU3lzdGVtU2NyZWVuQ2FwdHVyZVN0b3ApfXJldHVybiByLl9jYWxsT2JqZWN0TW9kZSYmci5zdGFydExpc3RlbmluZ0ZvckRldmljZUNoYW5nZXMoKSxyLl9tZXNzYWdlQ2hhbm5lbC5hZGRMaXN0ZW5lckZvck1lc3NhZ2VzRnJvbUNhbGxNYWNoaW5lKHIuaGFuZGxlTWVzc2FnZUZyb21DYWxsTWFjaGluZSxyLmNhbGxDbGllbnRJZCxhKHIpKSxyfXJldHVybiBvKGVlLFt7a2V5OlwiZGVzdHJveVwiLHZhbHVlOihLPWgoKGZ1bmN0aW9uKigpe3ZhciBlLHQ7dHJ5e3lpZWxkIHRoaXMubGVhdmUoKX1jYXRjaChlKXt9dmFyIG49dGhpcy5faWZyYW1lO2lmKG4pe3ZhciByPW4ucGFyZW50RWxlbWVudDtyJiZyLnJlbW92ZUNoaWxkKG4pfWlmKHRoaXMuX21lc3NhZ2VDaGFubmVsLnJlbW92ZUxpc3RlbmVyKHRoaXMuaGFuZGxlTWVzc2FnZUZyb21DYWxsTWFjaGluZSksbmEoKSl7dmFyIGk9dGhpcy5uYXRpdmVVdGlscygpO2kucmVtb3ZlQXVkaW9Gb2N1c0NoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlTmF0aXZlQXVkaW9Gb2N1c0NoYW5nZSksaS5yZW1vdmVBcHBTdGF0ZUNoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlTmF0aXZlQXBwU3RhdGVDaGFuZ2UpLGkucmVtb3ZlU3lzdGVtU2NyZWVuQ2FwdHVyZVN0b3BMaXN0ZW5lcih0aGlzLmhhbmRsZU5hdGl2ZVN5c3RlbVNjcmVlbkNhcHR1cmVTdG9wKX10aGlzLl9jYWxsT2JqZWN0TW9kZSYmdGhpcy5zdG9wTGlzdGVuaW5nRm9yRGV2aWNlQ2hhbmdlcygpLHRoaXMucmVzZXRNZWV0aW5nRGVwZW5kZW50VmFycygpLHRoaXMuX2Rlc3Ryb3llZD0hMCx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpcImNhbGwtaW5zdGFuY2UtZGVzdHJveWVkXCJ9KSxkZWxldGUgeXNbdGhpcy5jYWxsQ2xpZW50SWRdLChudWxsPT09KGU9d2luZG93KXx8dm9pZCAwPT09ZXx8bnVsbD09PSh0PWUuX2RhaWx5KXx8dm9pZCAwPT09dD92b2lkIDA6dC5pbnN0YW5jZXMpJiZkZWxldGUgd2luZG93Ll9kYWlseS5pbnN0YW5jZXNbdGhpcy5jYWxsQ2xpZW50SWRdLHRoaXMuc3RyaWN0TW9kZSYmKHRoaXMuY2FsbENsaWVudElkPXZvaWQgMCl9KSksZnVuY3Rpb24oKXtyZXR1cm4gSy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImlzRGVzdHJveWVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2Rlc3Ryb3llZH19LHtrZXk6XCJsb2FkQ3NzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5Q2xhc3Msbj1lLmNzc0ZpbGUscj1lLmNzc1RleHQ7cmV0dXJuIFVzKCksdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImxvYWQtY3NzXCIsY3NzRmlsZTp0aGlzLmFic29sdXRlVXJsKG4pLGJvZHlDbGFzczp0LGNzc1RleHQ6cn0pLHRoaXN9fSx7a2V5OlwiaWZyYW1lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gVXMoKSx0aGlzLl9pZnJhbWV9fSx7a2V5OlwibWVldGluZ1N0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FsbFN0YXRlfX0se2tleTpcImFjY2Vzc1N0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gRnModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJhY2Nlc3NTdGF0ZSgpXCIpLHRoaXMuX2FjY2Vzc1N0YXRlfX0se2tleTpcInBhcnRpY2lwYW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50c319LHtrZXk6XCJwYXJ0aWNpcGFudENvdW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50Q291bnRzfX0se2tleTpcIndhaXRpbmdQYXJ0aWNpcGFudHNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBGcyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcIndhaXRpbmdQYXJ0aWNpcGFudHMoKVwiKSx0aGlzLl93YWl0aW5nUGFydGljaXBhbnRzfX0se2tleTpcInZhbGlkYXRlUGFydGljaXBhbnRQcm9wZXJ0aWVzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdCl7aWYoIUFzW25dKXRocm93IG5ldyBFcnJvcihcInVucmVjb2duaXplZCB1cGRhdGVQYXJ0aWNpcGFudCBwcm9wZXJ0eSBcIi5jb25jYXQobikpO2lmKEFzW25dLnZhbGlkYXRlJiYhQXNbbl0udmFsaWRhdGUodFtuXSx0aGlzLHRoaXMuX3BhcnRpY2lwYW50c1tlXSkpdGhyb3cgbmV3IEVycm9yKEFzW25dLmhlbHApfX19LHtrZXk6XCJ1cGRhdGVQYXJ0aWNpcGFudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbCYmdGhpcy5fcGFydGljaXBhbnRzLmxvY2FsLnNlc3Npb25faWQ9PT1lJiYoZT1cImxvY2FsXCIpLGUmJnQmJih0aGlzLnZhbGlkYXRlUGFydGljaXBhbnRQcm9wZXJ0aWVzKGUsdCksdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInVwZGF0ZS1wYXJ0aWNpcGFudFwiLGlkOmUscHJvcGVydGllczp0fSkpLHRoaXN9fSx7a2V5OlwidXBkYXRlUGFydGljaXBhbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcGFydGljaXBhbnRzLmxvY2FsJiZ0aGlzLl9wYXJ0aWNpcGFudHMubG9jYWwuc2Vzc2lvbl9pZDtmb3IodmFyIG4gaW4gZSluPT09dCYmKG49XCJsb2NhbFwiKSxuJiZlW25dJiZ0aGlzLnZhbGlkYXRlUGFydGljaXBhbnRQcm9wZXJ0aWVzKG4sZVtuXSk7cmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJ1cGRhdGUtcGFydGljaXBhbnRzXCIscGFydGljaXBhbnRzOmV9KSx0aGlzfX0se2tleTpcInVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudFwiLHZhbHVlOihIPWgoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06XCJcIixyPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihGcyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudCgpXCIpLExzKHRoaXMuX2NhbGxTdGF0ZSxcInVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudCgpXCIpLFwic3RyaW5nXCIhPXR5cGVvZiB0fHxcIm9iamVjdFwiIT09bihyKSl0aHJvdyBuZXcgRXJyb3IoXCJ1cGRhdGVXYWl0aW5nUGFydGljaXBhbnQoKSBtdXN0IHRha2UgYW4gaWQgc3RyaW5nIGFuZCBhIHVwZGF0ZXMgb2JqZWN0XCIpO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixpKXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXVwZGF0ZS13YWl0aW5nLXBhcnRpY2lwYW50XCIsaWQ6dCx1cGRhdGVzOnJ9LChmdW5jdGlvbihlKXtlLmVycm9yJiZpKGUuZXJyb3IpLGUuaWR8fGkobmV3IEVycm9yKFwidW5rbm93biBlcnJvciBpbiB1cGRhdGVXYWl0aW5nUGFydGljaXBhbnQoKVwiKSksbih7aWQ6ZS5pZH0pfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIEguYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJ1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRzXCIsdmFsdWU6KHo9aCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtpZihGcyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudHMoKVwiKSxMcyh0aGlzLl9jYWxsU3RhdGUsXCJ1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRzKClcIiksXCJvYmplY3RcIiE9PW4odCkpdGhyb3cgbmV3IEVycm9yKFwidXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50cygpIG11c3QgdGFrZSBhIG1hcHBpbmcgYmV0d2VlbiBpZHMgYW5kIHVwZGF0ZSBvYmplY3RzXCIpO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXVwZGF0ZS13YWl0aW5nLXBhcnRpY2lwYW50c1wiLHVwZGF0ZXNCeUlkOnR9LChmdW5jdGlvbihlKXtlLmVycm9yJiZyKGUuZXJyb3IpLGUuaWRzfHxyKG5ldyBFcnJvcihcInVua25vd24gZXJyb3IgaW4gdXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50cygpXCIpKSxuKHtpZHM6ZS5pZHN9KX0pKX0pKX0pKSxmdW5jdGlvbigpe3JldHVybiB6LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwicmVxdWVzdEFjY2Vzc1wiLHZhbHVlOihXPWgoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LmFjY2VzcyxyPXZvaWQgMD09PW4/e2xldmVsOmhpfTpuLGk9dC5uYW1lLG89dm9pZCAwPT09aT9cIlwiOmk7cmV0dXJuIEZzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwicmVxdWVzdEFjY2VzcygpXCIpLExzKHRoaXMuX2NhbGxTdGF0ZSxcInJlcXVlc3RBY2Nlc3MoKVwiKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXJlcXVlc3QtYWNjZXNzXCIsYWNjZXNzOnIsbmFtZTpvfSwoZnVuY3Rpb24oZSl7ZS5lcnJvciYmbihlLmVycm9yKSxlLmFjY2Vzc3x8bihuZXcgRXJyb3IoXCJ1bmtub3duIGVycm9yIGluIHJlcXVlc3RBY2Nlc3MoKVwiKSksdCh7YWNjZXNzOmUuYWNjZXNzLGdyYW50ZWQ6ZS5ncmFudGVkfSl9KSl9KSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gVy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImxvY2FsQXVkaW9cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWNpcGFudHMubG9jYWw/IVtcImJsb2NrZWRcIixcIm9mZlwiXS5pbmNsdWRlcyh0aGlzLl9wYXJ0aWNpcGFudHMubG9jYWwudHJhY2tzLmF1ZGlvLnN0YXRlKTpudWxsfX0se2tleTpcImxvY2FsVmlkZW9cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWNpcGFudHMubG9jYWw/IVtcImJsb2NrZWRcIixcIm9mZlwiXS5pbmNsdWRlcyh0aGlzLl9wYXJ0aWNpcGFudHMubG9jYWwudHJhY2tzLnZpZGVvLnN0YXRlKTpudWxsfX0se2tleTpcInNldExvY2FsQXVkaW9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuXCJmb3JjZURpc2NhcmRUcmFja1wiaW4gdCYmKG5hKCk/KGNvbnNvbGUud2FybihcImZvcmNlRGlzY2FyZFRyYWNrIG9wdGlvbiBub3Qgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZTsgaWdub3JpbmdcIiksdD17fSk6ZSYmKGNvbnNvbGUud2FybihcImZvcmNlRGlzY2FyZFRyYWNrIG9wdGlvbiBvbmx5IHN1cHBvcnRlZCB3aGVuIGNhbGxpbmcgc2V0TG9jYWxBdWRpbyhmYWxzZSk7IGlnbm9yaW5nXCIpLHQ9e30pKSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwibG9jYWwtYXVkaW9cIixzdGF0ZTplLG9wdGlvbnM6dH0pLHRoaXN9fSx7a2V5OlwibG9jYWxTY3JlZW5BdWRpb1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbD8hW1wiYmxvY2tlZFwiLFwib2ZmXCJdLmluY2x1ZGVzKHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbC50cmFja3Muc2NyZWVuQXVkaW8uc3RhdGUpOm51bGx9fSx7a2V5OlwibG9jYWxTY3JlZW5WaWRlb1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbD8hW1wiYmxvY2tlZFwiLFwib2ZmXCJdLmluY2x1ZGVzKHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbC50cmFja3Muc2NyZWVuVmlkZW8uc3RhdGUpOm51bGx9fSx7a2V5OlwidXBkYXRlU2NyZWVuU2hhcmVcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLl9pc1NjcmVlblNoYXJpbmcpcmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJsb2NhbC1zY3JlZW4tdXBkYXRlXCIsb3B0aW9uczplfSksdGhpcztjb25zb2xlLndhcm4oXCJUaGVyZSBpcyBubyBzY3JlZW4gc2hhcmUgaW4gcHJvZ3Jlc3MuIFRyeSBjYWxsaW5nIHN0YXJ0U2NyZWVuU2hhcmUgZmlyc3QuXCIpfX0se2tleTpcInNldExvY2FsVmlkZW9cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImxvY2FsLXZpZGVvXCIsc3RhdGU6ZX0pLHRoaXN9fSx7a2V5OlwiZ2V0UmVjZWl2ZVNldHRpbmdzXCIsdmFsdWU6KHE9aCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXMscj0oYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9KS5zaG93SW5oZXJpdGVkVmFsdWVzLGk9dm9pZCAwIT09ciYmcjtpZihGcyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcImdldFJlY2VpdmVTZXR0aW5ncygpXCIpLCF0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkKXJldHVybiB0aGlzLl9yZWNlaXZlU2V0dGluZ3M7c3dpdGNoKG4oZSkpe2Nhc2VcInN0cmluZ1wiOnJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImdldC1zaW5nbGUtcGFydGljaXBhbnQtcmVjZWl2ZS1zZXR0aW5nc1wiLGlkOmUsc2hvd0luaGVyaXRlZFZhbHVlczppfSwoZnVuY3Rpb24oZSl7bihlLnJlY2VpdmVTZXR0aW5ncyl9KSl9KSk7Y2FzZVwidW5kZWZpbmVkXCI6cmV0dXJuIHRoaXMuX3JlY2VpdmVTZXR0aW5ncztkZWZhdWx0OnRocm93IG5ldyBFcnJvcignZmlyc3QgYXJndW1lbnQgdG8gZ2V0UmVjZWl2ZVNldHRpbmdzKCkgbXVzdCBiZSBhIHBhcnRpY2lwYW50IGlkIChvciBcImJhc2VcIiksIG9yIHRoZXJlIHNob3VsZCBiZSBubyBhcmd1bWVudHMnKX19KSksZnVuY3Rpb24oZSl7cmV0dXJuIHEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJ1cGRhdGVSZWNlaXZlU2V0dGluZ3NcIix2YWx1ZTooJD1oKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztpZihGcyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInVwZGF0ZVJlY2VpdmVTZXR0aW5ncygpXCIpLCEkcyhlLHthbGxvd0FsbFBhcnRpY2lwYW50c0tleTohMH0pKXRocm93IG5ldyBFcnJvcihIcyh7YWxsb3dBbGxQYXJ0aWNpcGFudHNLZXk6ITB9KSk7cmV0dXJuIExzKHRoaXMuX2NhbGxTdGF0ZSxcInVwZGF0ZVJlY2VpdmVTZXR0aW5ncygpXCIsXCJUbyBzcGVjaWZ5IHJlY2VpdmUgc2V0dGluZ3MgZWFybGllciwgdXNlIHRoZSByZWNlaXZlU2V0dGluZ3MgY29uZmlnIHByb3BlcnR5LlwiKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInVwZGF0ZS1yZWNlaXZlLXNldHRpbmdzXCIscmVjZWl2ZVNldHRpbmdzOmV9LChmdW5jdGlvbihlKXtuKHtyZWNlaXZlU2V0dGluZ3M6ZS5yZWNlaXZlU2V0dGluZ3N9KX0pKX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gJC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcIl9wcmVwSW5wdXRTZXR0aW5nc1RvUHJlc2VudFRvVXNlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8sYSxzLGM7aWYoZSl7dmFyIGw9e30sdT1cIm5vbmVcIj09PShudWxsPT09KHQ9ZS5hdWRpbyl8fHZvaWQgMD09PXR8fG51bGw9PT0obj10LnByb2Nlc3Nvcil8fHZvaWQgMD09PW4/dm9pZCAwOm4udHlwZSkmJihudWxsPT09KHI9ZS5hdWRpbyl8fHZvaWQgMD09PXJ8fG51bGw9PT0oaT1yLnByb2Nlc3Nvcil8fHZvaWQgMD09PWk/dm9pZCAwOmkuX2lzRGVmYXVsdFdoZW5Ob25lKTtpZihlLmF1ZGlvJiYhdSl7dmFyIGQ9ZnMoe30sZS5hdWRpby5wcm9jZXNzb3IpO2RlbGV0ZSBkLl9pc0RlZmF1bHRXaGVuTm9uZSxsLmF1ZGlvPWZzKGZzKHt9LGUuYXVkaW8pLHt9LHtwcm9jZXNzb3I6ZH0pfXZhciBwPVwibm9uZVwiPT09KG51bGw9PT0obz1lLnZpZGVvKXx8dm9pZCAwPT09b3x8bnVsbD09PShhPW8ucHJvY2Vzc29yKXx8dm9pZCAwPT09YT92b2lkIDA6YS50eXBlKSYmKG51bGw9PT0ocz1lLnZpZGVvKXx8dm9pZCAwPT09c3x8bnVsbD09PShjPXMucHJvY2Vzc29yKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5faXNEZWZhdWx0V2hlbk5vbmUpO2lmKGUudmlkZW8mJiFwKXt2YXIgaD1mcyh7fSxlLnZpZGVvLnByb2Nlc3Nvcik7ZGVsZXRlIGguX2lzRGVmYXVsdFdoZW5Ob25lLGwudmlkZW89ZnMoZnMoe30sZS52aWRlbykse30se3Byb2Nlc3NvcjpofSl9cmV0dXJuIGx9fX0se2tleTpcImdldElucHV0U2V0dGluZ3NcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIFVzKCksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe3QoZS5fZ2V0SW5wdXRTZXR0aW5ncygpKX0pKX19LHtrZXk6XCJfZ2V0SW5wdXRTZXR0aW5nc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLGEscyxjPXtwcm9jZXNzb3I6e3R5cGU6XCJub25lXCIsX2lzRGVmYXVsdFdoZW5Ob25lOiEwfX07dGhpcy5faW5wdXRTZXR0aW5ncz8oZT0obnVsbD09PShuPXRoaXMuX2lucHV0U2V0dGluZ3MpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnZpZGVvKXx8Yyx0PShudWxsPT09KHI9dGhpcy5faW5wdXRTZXR0aW5ncyl8fHZvaWQgMD09PXI/dm9pZCAwOnIuYXVkaW8pfHxjKTooZT0obnVsbD09PShpPXRoaXMuX3ByZWxvYWRDYWNoZSl8fHZvaWQgMD09PWl8fG51bGw9PT0obz1pLmlucHV0U2V0dGluZ3MpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnZpZGVvKXx8Yyx0PShudWxsPT09KGE9dGhpcy5fcHJlbG9hZENhY2hlKXx8dm9pZCAwPT09YXx8bnVsbD09PShzPWEuaW5wdXRTZXR0aW5ncyl8fHZvaWQgMD09PXM/dm9pZCAwOnMuYXVkaW8pfHxjKTt2YXIgbD17YXVkaW86dCx2aWRlbzplfTtyZXR1cm4gdGhpcy5fcHJlcElucHV0U2V0dGluZ3NUb1ByZXNlbnRUb1VzZXIobCl9fSx7a2V5OlwidXBkYXRlSW5wdXRTZXR0aW5nc1wiLHZhbHVlOihKPWgoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzO3JldHVybiBVcygpLHFzKGUpPyhlJiYodGhpcy5fcHJlbG9hZENhY2hlLmlucHV0U2V0dGluZ3N8fCh0aGlzLl9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5ncz17fSksV3MoZSx0aGlzLnByb3BlcnRpZXMuZGFpbHlDb25maWcpLGUuYXVkaW8mJih0aGlzLl9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5ncy5hdWRpbz1lLmF1ZGlvKSxlLnZpZGVvJiYodGhpcy5fcHJlbG9hZENhY2hlLmlucHV0U2V0dGluZ3MudmlkZW89ZS52aWRlbykpLGUudmlkZW98fGUuYXVkaW8/dGhpcy5fY2FsbE9iamVjdE1vZGUmJiF0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkP3RoaXMuX2dldElucHV0U2V0dGluZ3MoKTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwidXBkYXRlLWlucHV0LXNldHRpbmdzXCIsaW5wdXRTZXR0aW5nczplfSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9yKGUuZXJyb3IpOm4oe2lucHV0U2V0dGluZ3M6dC5fcHJlcElucHV0U2V0dGluZ3NUb1ByZXNlbnRUb1VzZXIoZS5pbnB1dFNldHRpbmdzKX0pfSkpfSkpOnRoaXMuX2dldElucHV0U2V0dGluZ3MoKSk6KGNvbnNvbGUuZXJyb3IoenMoKSksUHJvbWlzZS5yZWplY3QoenMoKSkpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBKLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5Olwic2V0QmFuZHdpZHRoXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rYnMsbj1lLnRyYWNrQ29uc3RyYWludHM7aWYoVXMoKSx0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkKXJldHVybiB0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LWJhbmR3aWR0aFwiLGticzp0LHRyYWNrQ29uc3RyYWludHM6bn0pLHRoaXN9fSx7a2V5OlwiZ2V0RGFpbHlMYW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKFVzKCksdGhpcy5fY2FsbE1hY2hpbmVJbml0aWFsaXplZClyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJnZXQtZGFpbHktbGFuZ1wifSwoZnVuY3Rpb24oZSl7ZGVsZXRlIGUuYWN0aW9uLGRlbGV0ZSBlLmNhbGxiYWNrU3RhbXAsdChlKX0pKX0pKX19LHtrZXk6XCJzZXREYWlseUxhbmdcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gVXMoKSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LWRhaWx5LWxhbmdcIixsYW5nOmV9KSx0aGlzfX0se2tleTpcInNldFByb3h5VXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtcHJveHktdXJsXCIscHJveHlVcmw6ZX0pLHRoaXN9fSx7a2V5Olwic2V0SWNlQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtaWNlLWNvbmZpZ1wiLGljZUNvbmZpZzplfSksdGhpc319LHtrZXk6XCJtZWV0aW5nU2Vzc2lvblN1bW1hcnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybltpaSxvaV0uaW5jbHVkZXModGhpcy5fY2FsbFN0YXRlKT90aGlzLl9maW5hbFN1bW1hcnlPZlByZXZTZXNzaW9uOnRoaXMuX21lZXRpbmdTZXNzaW9uU3VtbWFyeX19LHtrZXk6XCJnZXRNZWV0aW5nU2Vzc2lvblwiLHZhbHVlOihWPWgoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXM7cmV0dXJuIGNvbnNvbGUud2FybihcImdldE1lZXRpbmdTZXNzaW9uKCkgaXMgZGVwcmVjYXRlZDogdXNlIG1lZXRpbmdTZXNzaW9uU3VtbWFyeSgpLCB3aGljaCB3aWxsIHJldHVybiBpbW1lZGlhdGVseVwiKSxMcyh0aGlzLl9jYWxsU3RhdGUsXCJnZXRNZWV0aW5nU2Vzc2lvbigpXCIpLG5ldyBQcm9taXNlKChmdW5jdGlvbih0KXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZ2V0LW1lZXRpbmctc2Vzc2lvblwifSwoZnVuY3Rpb24oZSl7ZGVsZXRlIGUuYWN0aW9uLGRlbGV0ZSBlLmNhbGxiYWNrU3RhbXAsdChlKX0pKX0pKX0pKSxmdW5jdGlvbigpe3JldHVybiBWLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwibWVldGluZ1Nlc3Npb25TdGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIExzKHRoaXMuX2NhbGxTdGF0ZSxcIm1lZXRpbmdTZXNzaW9uU3RhdGVcIiksdGhpcy5fbWVldGluZ1Nlc3Npb25TdGF0ZX19LHtrZXk6XCJzZXRNZWV0aW5nU2Vzc2lvbkRhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJyZXBsYWNlXCI7RnModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzZXRNZWV0aW5nU2Vzc2lvbkRhdGEoKVwiKSxMcyh0aGlzLl9jYWxsU3RhdGUsXCJzZXRNZWV0aW5nU2Vzc2lvbkRhdGFcIik7dHJ5eyFmdW5jdGlvbihlLHQpe25ldyBBYSh7ZGF0YTplLG1lcmdlU3RyYXRlZ3k6dH0pfShlLHQpfWNhdGNoKGUpe3Rocm93IGNvbnNvbGUuZXJyb3IoZSksZX10cnl7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1zZXNzaW9uLWRhdGFcIixkYXRhOmUsbWVyZ2VTdHJhdGVneTp0fSl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc2V0dGluZyBtZWV0aW5nIHNlc3Npb24gZGF0YTogXCIuY29uY2F0KGUpKX19fSx7a2V5Olwic2V0VXNlck5hbWVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMucHJvcGVydGllcy51c2VyTmFtZT1lLG5ldyBQcm9taXNlKChmdW5jdGlvbihyKXtuLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LXVzZXItbmFtZVwiLG5hbWU6bnVsbCE9ZT9lOlwiXCIsdGhpc01lZXRpbmdPbmx5Om5hKCl8fCEhdCYmISF0LnRoaXNNZWV0aW5nT25seX0sKGZ1bmN0aW9uKGUpe2RlbGV0ZSBlLmFjdGlvbixkZWxldGUgZS5jYWxsYmFja1N0YW1wLHIoZSl9KSl9KSl9fSx7a2V5Olwic2V0VXNlckRhdGFcIix2YWx1ZTooVT1oKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpczt0cnl7SnMoZSl9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihlKSxlfWlmKHRoaXMucHJvcGVydGllcy51c2VyRGF0YT1lLHRoaXMuX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQpcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuKXt0cnl7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC11c2VyLWRhdGFcIix1c2VyRGF0YTplfSwoZnVuY3Rpb24oZSl7ZGVsZXRlIGUuYWN0aW9uLGRlbGV0ZSBlLmNhbGxiYWNrU3RhbXAsbihlKX0pKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzZXR0aW5nIHVzZXIgZGF0YTogXCIuY29uY2F0KGUpKX19KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIFUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJ2YWxpZGF0ZUF1ZGlvTGV2ZWxJbnRlcnZhbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUmJihlPDEwMHx8XCJudW1iZXJcIiE9dHlwZW9mIGUpKXRocm93IG5ldyBFcnJvcihcIlRoZSBpbnRlcnZhbCBtdXN0IGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAxMDAgbWlsbGlzZWNvbmRzLlwiKX19LHtrZXk6XCJzdGFydExvY2FsQXVkaW9MZXZlbE9ic2VydmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgQXVkaW9Xb3JrbGV0Tm9kZSYmIW5hKCkpdGhyb3cgbmV3IEVycm9yKFwic3RhcnRMb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlcigpIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyXCIpO2lmKHRoaXMudmFsaWRhdGVBdWRpb0xldmVsSW50ZXJ2YWwoZSksdGhpcy5fY2FsbE1hY2hpbmVJbml0aWFsaXplZClyZXR1cm4gdGhpcy5faXNMb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmc9ITAsbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0YXJ0LWxvY2FsLWF1ZGlvLWxldmVsLW9ic2VydmVyXCIsaW50ZXJ2YWw6ZX0sKGZ1bmN0aW9uKGUpe3QuX2lzTG9jYWxBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nPSFlLmVycm9yLGUuZXJyb3I/cih7ZXJyb3I6ZS5lcnJvcn0pOm4oKX0pKX0pKTt0aGlzLl9wcmVsb2FkQ2FjaGUubG9jYWxBdWRpb0xldmVsT2JzZXJ2ZXI9e2VuYWJsZWQ6ITAsaW50ZXJ2YWw6ZX19fSx7a2V5OlwiaXNMb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0xvY2FsQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZ319LHtrZXk6XCJzdG9wTG9jYWxBdWRpb0xldmVsT2JzZXJ2ZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3ByZWxvYWRDYWNoZS5sb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlcj1udWxsLHRoaXMuX2xvY2FsQXVkaW9MZXZlbD0wLHRoaXMuX2lzTG9jYWxBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nPSExLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzdG9wLWxvY2FsLWF1ZGlvLWxldmVsLW9ic2VydmVyXCJ9KX19LHtrZXk6XCJzdGFydFJlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWxPYnNlcnZlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy52YWxpZGF0ZUF1ZGlvTGV2ZWxJbnRlcnZhbChlKSx0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkKXJldHVybiB0aGlzLl9pc1JlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmc9ITAsbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0YXJ0LXJlbW90ZS1wYXJ0aWNpcGFudHMtYXVkaW8tbGV2ZWwtb2JzZXJ2ZXJcIixpbnRlcnZhbDplfSwoZnVuY3Rpb24oZSl7dC5faXNSZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nPSFlLmVycm9yLGUuZXJyb3I/cih7ZXJyb3I6ZS5lcnJvcn0pOm4oKX0pKX0pKTt0aGlzLl9wcmVsb2FkQ2FjaGUucmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyPXtlbmFibGVkOiEwLGludGVydmFsOmV9fX0se2tleTpcImlzUmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzUmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZ319LHtrZXk6XCJzdG9wUmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9wcmVsb2FkQ2FjaGUucmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyPW51bGwsdGhpcy5fcmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbD17fSx0aGlzLl9pc1JlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmc9ITEsdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0b3AtcmVtb3RlLXBhcnRpY2lwYW50cy1hdWRpby1sZXZlbC1vYnNlcnZlclwifSl9fSx7a2V5Olwic3RhcnRDYW1lcmFcIix2YWx1ZTooQj1oKChmdW5jdGlvbiooKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2lmKEZzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic3RhcnRDYW1lcmEoKVwiKSxEcyh0aGlzLl9jYWxsU3RhdGUsdGhpcy5faXNQcmVwYXJpbmdUb0pvaW4sXCJzdGFydENhbWVyYSgpXCIsXCJEaWQgeW91IG1lYW4gdG8gdXNlIHNldExvY2FsQXVkaW8oKSBhbmQvb3Igc2V0TG9jYWxWaWRlbygpIGluc3RlYWQ/XCIpLHRoaXMubmVlZHNMb2FkKCkpdHJ5e3lpZWxkIHRoaXMubG9hZCh0KX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9ZWxzZXtpZih0aGlzLl9kaWRQcmVBdXRoKXtpZih0LnVybCYmdC51cmwhPT10aGlzLnByb3BlcnRpZXMudXJsKXJldHVybiBjb25zb2xlLmVycm9yKFwidXJsIGluIHN0YXJ0Q2FtZXJhKCkgaXMgZGlmZmVyZW50IHRoYW4gdGhlIG9uZSB1c2VkIGluIHByZUF1dGgoKVwiKSxQcm9taXNlLnJlamVjdCgpO2lmKHQudG9rZW4mJnQudG9rZW4hPT10aGlzLnByb3BlcnRpZXMudG9rZW4pcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ0b2tlbiBpbiBzdGFydENhbWVyYSgpIGlzIGRpZmZlcmVudCB0aGFuIHRoZSBvbmUgdXNlZCBpbiBwcmVBdXRoKClcIiksUHJvbWlzZS5yZWplY3QoKX10aGlzLnZhbGlkYXRlUHJvcGVydGllcyh0KSx0aGlzLnByb3BlcnRpZXM9ZnMoZnMoe30sdGhpcy5wcm9wZXJ0aWVzKSx0KX1yZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzdGFydC1jYW1lcmFcIixwcm9wZXJ0aWVzOnhzKGUucHJvcGVydGllcyxlLmNhbGxDbGllbnRJZCkscHJlbG9hZENhY2hlOnhzKGUuX3ByZWxvYWRDYWNoZSxlLmNhbGxDbGllbnRJZCl9LChmdW5jdGlvbihlKXtkZWxldGUgZS5hY3Rpb24sZGVsZXRlIGUuY2FsbGJhY2tTdGFtcCx0KGUpfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIEIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJ2YWxpZGF0ZUN1c3RvbVRyYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe2lmKG4mJm4ubGVuZ3RoPjUwKXRocm93IG5ldyBFcnJvcihcIkN1c3RvbSB0cmFjayBgdHJhY2tOYW1lYCBtdXN0IG5vdCBiZSBtb3JlIHRoYW4gNTAgY2hhcmFjdGVyc1wiKTtpZih0JiZcIm11c2ljXCIhPT10JiZcInNwZWVjaFwiIT09dCYmISh0IGluc3RhbmNlb2YgT2JqZWN0KSl0aHJvdyBuZXcgRXJyb3IoXCJDdXN0b20gdHJhY2sgYG1vZGVgIG11c3QgYmUgZWl0aGVyIGBtdXNpY2AgfCBgc3BlZWNoYCB8IGBEYWlseU1pY0F1ZGlvTW9kZVNldHRpbmdzYCBvciBgdW5kZWZpbmVkYFwiKTtpZighIW4mJltcImNhbS1hdWRpb1wiLFwiY2FtLXZpZGVvXCIsXCJzY3JlZW4tdmlkZW9cIixcInNjcmVlbi1hdWRpb1wiLFwicm1wQXVkaW9cIixcInJtcFZpZGVvXCIsXCJjdXN0b21WaWRlb0RlZmF1bHRzXCJdLmluY2x1ZGVzKG4pKXRocm93IG5ldyBFcnJvcihcIkN1c3RvbSB0cmFjayBgdHJhY2tOYW1lYCBtdXN0IG5vdCBtYXRjaCBhIHRyYWNrIG5hbWUgYWxyZWFkeSB1c2VkIGJ5IGRhaWx5OiBjYW0tYXVkaW8sIGNhbS12aWRlbywgY3VzdG9tVmlkZW9EZWZhdWx0cywgc2NyZWVuLXZpZGVvLCBzY3JlZW4tYXVkaW8sIHJtcEF1ZGlvLCBybXBWaWRlb1wiKTtpZighKGUgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbVRyYWNrKSl0aHJvdyBuZXcgRXJyb3IoXCJDdXN0b20gdHJhY2tzIHByb3ZpZGVkIG11c3QgYmUgaW5zdGFuY2VzIG9mIE1lZGlhU3RyZWFtVHJhY2tcIil9fSx7a2V5Olwic3RhcnRDdXN0b21UcmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7dHJhY2s6dHJhY2ssbW9kZTptb2RlLHRyYWNrTmFtZTp0cmFja05hbWV9O3JldHVybiBVcygpLExzKHRoaXMuX2NhbGxTdGF0ZSxcInN0YXJ0Q3VzdG9tVHJhY2soKVwiKSx0aGlzLnZhbGlkYXRlQ3VzdG9tVHJhY2sodC50cmFjayx0Lm1vZGUsdC50cmFja05hbWUpLG5ldyBQcm9taXNlKChmdW5jdGlvbihuLHIpe2UuX3NoYXJlZFRyYWNrcy5jdXN0b21UcmFjaz10LnRyYWNrLHQudHJhY2s9SG8sZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0YXJ0LWN1c3RvbS10cmFja1wiLHByb3BlcnRpZXM6dH0sKGZ1bmN0aW9uKGUpe2UuZXJyb3I/cih7ZXJyb3I6ZS5lcnJvcn0pOm4oZS5tZWRpYVRhZyl9KSl9KSl9fSx7a2V5Olwic3RvcEN1c3RvbVRyYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gVXMoKSxMcyh0aGlzLl9jYWxsU3RhdGUsXCJzdG9wQ3VzdG9tVHJhY2soKVwiKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0b3AtY3VzdG9tLXRyYWNrXCIsbWVkaWFUYWc6ZX0sKGZ1bmN0aW9uKGUpe24oZS5tZWRpYVRhZyl9KSl9KSl9fSx7a2V5Olwic2V0Q2FtZXJhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gVnMoKSxOcyh0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkLFwic2V0Q2FtZXJhKClcIiksbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3Quc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtY2FtZXJhXCIsY2FtZXJhRGV2aWNlSWQ6ZX0sKGZ1bmN0aW9uKGUpe24oe2RldmljZTplLmRldmljZX0pfSkpfSkpfX0se2tleTpcInNldEF1ZGlvRGV2aWNlXCIsdmFsdWU6KEY9aCgoZnVuY3Rpb24qKGUpe3JldHVybiBWcygpLHRoaXMubmF0aXZlVXRpbHMoKS5zZXRBdWRpb0RldmljZShlKSx7ZGV2aWNlSWQ6eWllbGQgdGhpcy5uYXRpdmVVdGlscygpLmdldEF1ZGlvRGV2aWNlKCl9fSkpLGZ1bmN0aW9uKGUpe3JldHVybiBGLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiY3ljbGVDYW1lcmFcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuKXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiY3ljbGUtY2FtZXJhXCIscHJvcGVydGllczp0fSwoZnVuY3Rpb24oZSl7bih7ZGV2aWNlOmUuZGV2aWNlfSl9KSl9KSl9fSx7a2V5OlwiY3ljbGVNaWNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIFVzKCksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJjeWNsZS1taWNcIn0sKGZ1bmN0aW9uKGUpe3Qoe2RldmljZTplLmRldmljZX0pfSkpfSkpfX0se2tleTpcImdldENhbWVyYUZhY2luZ01vZGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIFZzKCksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJnZXQtY2FtZXJhLWZhY2luZy1tb2RlXCJ9LChmdW5jdGlvbihlKXt0KGUuZmFjaW5nTW9kZSl9KSl9KSl9fSx7a2V5Olwic2V0SW5wdXREZXZpY2VzQXN5bmNcIix2YWx1ZTooUj1oKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcyxuPWUuYXVkaW9EZXZpY2VJZCxyPWUudmlkZW9EZXZpY2VJZCxpPWUuYXVkaW9Tb3VyY2Usbz1lLnZpZGVvU291cmNlO3JldHVybiBVcygpLHZvaWQgMCE9PWkmJihuPWkpLHZvaWQgMCE9PW8mJihyPW8pLG4mJih0aGlzLl9wcmVsb2FkQ2FjaGUuYXVkaW9EZXZpY2VJZD1uLHRoaXMuX3NoYXJlZFRyYWNrcy5hdWRpb0RldmljZUlkPW4pLHImJih0aGlzLl9wcmVsb2FkQ2FjaGUudmlkZW9EZXZpY2VJZD1yLHRoaXMuX3NoYXJlZFRyYWNrcy52aWRlb0RldmljZUlkPXIpLHRoaXMuX2NhbGxPYmplY3RNb2RlJiZ0aGlzLm5lZWRzTG9hZCgpP3tjYW1lcmE6e2RldmljZUlkOnRoaXMuX3ByZWxvYWRDYWNoZS52aWRlb0RldmljZUlkfSxtaWM6e2RldmljZUlkOnRoaXMuX3ByZWxvYWRDYWNoZS5hdWRpb0RldmljZUlkfSxzcGVha2VyOntkZXZpY2VJZDp0aGlzLl9wcmVsb2FkQ2FjaGUub3V0cHV0RGV2aWNlSWR9fToobiBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtVHJhY2smJihuPUhvKSxyIGluc3RhbmNlb2YgTWVkaWFTdHJlYW1UcmFjayYmKHI9SG8pLG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LWlucHV0LWRldmljZXNcIixhdWRpb0RldmljZUlkOm4sdmlkZW9EZXZpY2VJZDpyfSwoZnVuY3Rpb24obil7ZGVsZXRlIG4uYWN0aW9uLGRlbGV0ZSBuLmNhbGxiYWNrU3RhbXAsbi5yZXR1cm5QcmVsb2FkQ2FjaGU/ZSh7Y2FtZXJhOntkZXZpY2VJZDp0Ll9wcmVsb2FkQ2FjaGUudmlkZW9EZXZpY2VJZH0sbWljOntkZXZpY2VJZDp0Ll9wcmVsb2FkQ2FjaGUuYXVkaW9EZXZpY2VJZH0sc3BlYWtlcjp7ZGV2aWNlSWQ6dC5fcHJlbG9hZENhY2hlLm91dHB1dERldmljZUlkfX0pOmUobil9KSl9KSkpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBSLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5Olwic2V0T3V0cHV0RGV2aWNlQXN5bmNcIix2YWx1ZTooTj1oKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcyxuPWUub3V0cHV0RGV2aWNlSWQ7cmV0dXJuIFVzKCksbiYmKHRoaXMuX3ByZWxvYWRDYWNoZS5vdXRwdXREZXZpY2VJZD1uKSx0aGlzLl9jYWxsT2JqZWN0TW9kZSYmdGhpcy5uZWVkc0xvYWQoKT97Y2FtZXJhOntkZXZpY2VJZDp0aGlzLl9wcmVsb2FkQ2FjaGUudmlkZW9EZXZpY2VJZH0sbWljOntkZXZpY2VJZDp0aGlzLl9wcmVsb2FkQ2FjaGUuYXVkaW9EZXZpY2VJZH0sc3BlYWtlcjp7ZGV2aWNlSWQ6dGhpcy5fcHJlbG9hZENhY2hlLm91dHB1dERldmljZUlkfX06bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe3Quc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtb3V0cHV0LWRldmljZVwiLG91dHB1dERldmljZUlkOm59LChmdW5jdGlvbihuKXtkZWxldGUgbi5hY3Rpb24sZGVsZXRlIG4uY2FsbGJhY2tTdGFtcCxuLnJldHVyblByZWxvYWRDYWNoZT9lKHtjYW1lcmE6e2RldmljZUlkOnQuX3ByZWxvYWRDYWNoZS52aWRlb0RldmljZUlkfSxtaWM6e2RldmljZUlkOnQuX3ByZWxvYWRDYWNoZS5hdWRpb0RldmljZUlkfSxzcGVha2VyOntkZXZpY2VJZDp0Ll9wcmVsb2FkQ2FjaGUub3V0cHV0RGV2aWNlSWR9fSk6ZShuKX0pKX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gTi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImdldElucHV0RGV2aWNlc1wiLHZhbHVlOihJPWgoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX2NhbGxPYmplY3RNb2RlJiZ0aGlzLm5lZWRzTG9hZCgpP3tjYW1lcmE6e2RldmljZUlkOnRoaXMuX3ByZWxvYWRDYWNoZS52aWRlb0RldmljZUlkfSxtaWM6e2RldmljZUlkOnRoaXMuX3ByZWxvYWRDYWNoZS5hdWRpb0RldmljZUlkfSxzcGVha2VyOntkZXZpY2VJZDp0aGlzLl9wcmVsb2FkQ2FjaGUub3V0cHV0RGV2aWNlSWR9fTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7ZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImdldC1pbnB1dC1kZXZpY2VzXCJ9LChmdW5jdGlvbihuKXtkZWxldGUgbi5hY3Rpb24sZGVsZXRlIG4uY2FsbGJhY2tTdGFtcCxuLnJldHVyblByZWxvYWRDYWNoZT90KHtjYW1lcmE6e2RldmljZUlkOmUuX3ByZWxvYWRDYWNoZS52aWRlb0RldmljZUlkfSxtaWM6e2RldmljZUlkOmUuX3ByZWxvYWRDYWNoZS5hdWRpb0RldmljZUlkfSxzcGVha2VyOntkZXZpY2VJZDplLl9wcmVsb2FkQ2FjaGUub3V0cHV0RGV2aWNlSWR9fSk6dChuKX0pKX0pKX0pKSxmdW5jdGlvbigpe3JldHVybiBJLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwibmF0aXZlSW5DYWxsQXVkaW9Nb2RlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gVnMoKSx0aGlzLl9uYXRpdmVJbkNhbGxBdWRpb01vZGV9fSx7a2V5Olwic2V0TmF0aXZlSW5DYWxsQXVkaW9Nb2RlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoVnMoKSxbX3MsYnNdLmluY2x1ZGVzKGUpKXtpZihlIT09dGhpcy5fbmF0aXZlSW5DYWxsQXVkaW9Nb2RlKXJldHVybiB0aGlzLl9uYXRpdmVJbkNhbGxBdWRpb01vZGU9ZSwhdGhpcy5kaXNhYmxlUmVhY3ROYXRpdmVBdXRvRGV2aWNlTWFuYWdlbWVudChcImF1ZGlvXCIpJiZJcyh0aGlzLl9jYWxsU3RhdGUsdGhpcy5faXNQcmVwYXJpbmdUb0pvaW4pJiZ0aGlzLm5hdGl2ZVV0aWxzKCkuc2V0QXVkaW9Nb2RlKHRoaXMuX25hdGl2ZUluQ2FsbEF1ZGlvTW9kZSksdGhpc31lbHNlIGNvbnNvbGUuZXJyb3IoXCJpbnZhbGlkIGluLWNhbGwgYXVkaW8gbW9kZSBzcGVjaWZpZWQ6IFwiLGUpfX0se2tleTpcInByZUF1dGhcIix2YWx1ZTooTD1oKChmdW5jdGlvbiooKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2lmKEZzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwicHJlQXV0aCgpXCIpLERzKHRoaXMuX2NhbGxTdGF0ZSx0aGlzLl9pc1ByZXBhcmluZ1RvSm9pbixcInByZUF1dGgoKVwiKSx0aGlzLm5lZWRzTG9hZCgpJiYoeWllbGQgdGhpcy5sb2FkKHQpKSwhdC51cmwpdGhyb3cgbmV3IEVycm9yKFwicHJlQXV0aCgpIHJlcXVpcmVzIGF0IGxlYXN0IGEgdXJsIHRvIGJlIHByb3ZpZGVkXCIpO3JldHVybiB0aGlzLnZhbGlkYXRlUHJvcGVydGllcyh0KSx0aGlzLnByb3BlcnRpZXM9ZnMoZnMoe30sdGhpcy5wcm9wZXJ0aWVzKSx0KSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXByZWF1dGhcIixwcm9wZXJ0aWVzOnhzKGUucHJvcGVydGllcyxlLmNhbGxDbGllbnRJZCkscHJlbG9hZENhY2hlOnhzKGUuX3ByZWxvYWRDYWNoZSxlLmNhbGxDbGllbnRJZCl9LChmdW5jdGlvbihyKXtyZXR1cm4gci5lcnJvcj9uKHIuZXJyb3IpOnIuYWNjZXNzPyhlLl9kaWRQcmVBdXRoPSEwLHZvaWQgdCh7YWNjZXNzOnIuYWNjZXNzfSkpOm4obmV3IEVycm9yKFwidW5rbm93biBlcnJvciBpbiBwcmVBdXRoKClcIikpfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIEwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJsb2FkXCIsdmFsdWU6KHg9aCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5uZWVkc0xvYWQoKSl7aWYodGhpcy5fZGVzdHJveWVkJiYodGhpcy5fbG9nVXNlQWZ0ZXJEZXN0cm95KCksdGhpcy5zdHJpY3RNb2RlKSl0aHJvdyBuZXcgRXJyb3IoXCJVc2UgYWZ0ZXIgZGVzdHJveVwiKTtpZihlJiYodGhpcy52YWxpZGF0ZVByb3BlcnRpZXMoZSksdGhpcy5wcm9wZXJ0aWVzPWZzKGZzKHt9LHRoaXMucHJvcGVydGllcyksZSkpLCF0aGlzLl9jYWxsT2JqZWN0TW9kZSYmIXRoaXMucHJvcGVydGllcy51cmwpdGhyb3cgbmV3IEVycm9yKFwiY2FuJ3QgbG9hZCBpZnJhbWUgbWVldGluZyBiZWNhdXNlIHVybCBwcm9wZXJ0eSBpc24ndCBzZXRcIik7cmV0dXJuIHRoaXMuX3VwZGF0ZUNhbGxTdGF0ZShlaSksdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246Qml9KSx0aGlzLl9jYWxsT2JqZWN0TW9kZT9uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxuKXt0Ll9jYWxsT2JqZWN0TG9hZGVyLmNhbmNlbCgpO3ZhciByPURhdGUubm93KCk7dC5fY2FsbE9iamVjdExvYWRlci5sb2FkKHQucHJvcGVydGllcy5kYWlseUNvbmZpZywoZnVuY3Rpb24obil7dC5fYnVuZGxlTG9hZFRpbWU9bj9cIm5vLW9wXCI6RGF0ZS5ub3coKS1yLHQuX3VwZGF0ZUNhbGxTdGF0ZSh0aSksbiYmdC5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246Vml9KSxlKCl9KSwoZnVuY3Rpb24oZSxyKXtpZih0LmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpVaX0pLCFyKXt0Ll91cGRhdGVDYWxsU3RhdGUob2kpLHQucmVzZXRNZWV0aW5nRGVwZW5kZW50VmFycygpO3ZhciBpPXthY3Rpb246VW8sZXJyb3JNc2c6ZS5tc2csZXJyb3I6e3R5cGU6XCJjb25uZWN0aW9uLWVycm9yXCIsbXNnOlwiRmFpbGVkIHRvIGxvYWQgY2FsbCBvYmplY3QgYnVuZGxlLlwiLGRldGFpbHM6e29uOlwibG9hZFwiLHNvdXJjZUVycm9yOmUsYnVuZGxlVXJsOlgodC5wcm9wZXJ0aWVzLmRhaWx5Q29uZmlnKX19fTt0Ll9tYXliZVNlbmRUb1NlbnRyeShpKSx0LmVtaXREYWlseUpTRXZlbnQoaSksbihlLm1zZyl9fSkpfSkpOih0aGlzLl9pZnJhbWUuc3JjPVkodGhpcy5hc3NlbWJsZU1lZXRpbmdVcmwoKSx0aGlzLnByb3BlcnRpZXMuZGFpbHlDb25maWcpLG5ldyBQcm9taXNlKChmdW5jdGlvbihlLG4pe3QuX2xvYWRlZENhbGxiYWNrPWZ1bmN0aW9uKHIpe3QuX2NhbGxTdGF0ZSE9PW9pPyh0Ll91cGRhdGVDYWxsU3RhdGUodGkpLCh0LnByb3BlcnRpZXMuY3NzRmlsZXx8dC5wcm9wZXJ0aWVzLmNzc1RleHQpJiZ0LmxvYWRDc3ModC5wcm9wZXJ0aWVzKSxlKCkpOm4ocil9fSkpKX19KSksZnVuY3Rpb24oZSl7cmV0dXJuIHguYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJqb2luXCIsdmFsdWU6KGo9aCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLl90ZXN0Q2FsbEluUHJvZ3Jlc3MmJnRoaXMuc3RvcFRlc3RDYWxsUXVhbGl0eSgpO3ZhciBuPSExO2lmKHRoaXMubmVlZHNMb2FkKCkpe3RoaXMudXBkYXRlSXNQcmVwYXJpbmdUb0pvaW4oITApO3RyeXt5aWVsZCB0aGlzLmxvYWQodCl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMudXBkYXRlSXNQcmVwYXJpbmdUb0pvaW4oITEpLFByb21pc2UucmVqZWN0KGUpfX1lbHNle2lmKG49ISghdGhpcy5wcm9wZXJ0aWVzLmNzc0ZpbGUmJiF0aGlzLnByb3BlcnRpZXMuY3NzVGV4dCksdGhpcy5fZGlkUHJlQXV0aCl7aWYodC51cmwmJnQudXJsIT09dGhpcy5wcm9wZXJ0aWVzLnVybClyZXR1cm4gY29uc29sZS5lcnJvcihcInVybCBpbiBqb2luKCkgaXMgZGlmZmVyZW50IHRoYW4gdGhlIG9uZSB1c2VkIGluIHByZUF1dGgoKVwiKSx0aGlzLnVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luKCExKSxQcm9taXNlLnJlamVjdCgpO2lmKHQudG9rZW4mJnQudG9rZW4hPT10aGlzLnByb3BlcnRpZXMudG9rZW4pcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ0b2tlbiBpbiBqb2luKCkgaXMgZGlmZmVyZW50IHRoYW4gdGhlIG9uZSB1c2VkIGluIHByZUF1dGgoKVwiKSx0aGlzLnVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luKCExKSxQcm9taXNlLnJlamVjdCgpfWlmKHQudXJsJiYhdGhpcy5fY2FsbE9iamVjdE1vZGUmJnQudXJsJiZ0LnVybCE9PXRoaXMucHJvcGVydGllcy51cmwpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ1cmwgaW4gam9pbigpIGlzIGRpZmZlcmVudCB0aGFuIHRoZSBvbmUgdXNlZCBpbiBsb2FkKCkgKFwiLmNvbmNhdCh0aGlzLnByb3BlcnRpZXMudXJsLFwiIC0+IFwiKS5jb25jYXQodC51cmwsXCIpXCIpKSx0aGlzLnVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luKCExKSxQcm9taXNlLnJlamVjdCgpO3RoaXMudmFsaWRhdGVQcm9wZXJ0aWVzKHQpLHRoaXMucHJvcGVydGllcz1mcyhmcyh7fSx0aGlzLnByb3BlcnRpZXMpLHQpfXJldHVybiB2b2lkIDAhPT10LnNob3dMb2NhbFZpZGVvJiYodGhpcy5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcInNob3dMb2NhbFZpZGVvIGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbE9iamVjdCBtb2RlXCIpOnRoaXMuX3Nob3dMb2NhbFZpZGVvPSEhdC5zaG93TG9jYWxWaWRlbyksdm9pZCAwIT09dC5zaG93UGFydGljaXBhbnRzQmFyJiYodGhpcy5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcInNob3dQYXJ0aWNpcGFudHNCYXIgaXMgbm90IGF2YWlsYWJsZSBpbiBjYWxsT2JqZWN0IG1vZGVcIik6dGhpcy5fc2hvd1BhcnRpY2lwYW50c0Jhcj0hIXQuc2hvd1BhcnRpY2lwYW50c0JhciksdGhpcy5fY2FsbFN0YXRlPT09cml8fHRoaXMuX2NhbGxTdGF0ZT09PW5pPyhjb25zb2xlLndhcm4oXCJhbHJlYWR5IGpvaW5lZCBtZWV0aW5nLCBjYWxsIGxlYXZlKCkgYmVmb3JlIGpvaW5pbmcgYWdhaW5cIiksdm9pZCB0aGlzLnVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luKCExKSk6KHRoaXMuX3VwZGF0ZUNhbGxTdGF0ZShuaSwhMSksdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246cWl9KSx0aGlzLl9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5nc3x8KHRoaXMuX3ByZWxvYWRDYWNoZS5pbnB1dFNldHRpbmdzPXt9KSx0LmlucHV0U2V0dGluZ3MmJnQuaW5wdXRTZXR0aW5ncy5hdWRpbyYmKHRoaXMuX3ByZWxvYWRDYWNoZS5pbnB1dFNldHRpbmdzLmF1ZGlvPXQuaW5wdXRTZXR0aW5ncy5hdWRpbyksdC5pbnB1dFNldHRpbmdzJiZ0LmlucHV0U2V0dGluZ3MudmlkZW8mJih0aGlzLl9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5ncy52aWRlbz10LmlucHV0U2V0dGluZ3MudmlkZW8pLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJqb2luLW1lZXRpbmdcIixwcm9wZXJ0aWVzOnhzKHRoaXMucHJvcGVydGllcyx0aGlzLmNhbGxDbGllbnRJZCkscHJlbG9hZENhY2hlOnhzKHRoaXMuX3ByZWxvYWRDYWNoZSx0aGlzLmNhbGxDbGllbnRJZCl9KSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxyKXtlLl9qb2luZWRDYWxsYmFjaz1mdW5jdGlvbihpLG8pe2lmKGUuX2NhbGxTdGF0ZSE9PW9pKXtpZihlLl91cGRhdGVDYWxsU3RhdGUocmkpLGkpZm9yKHZhciBhIGluIGkpe2lmKGUuX2NhbGxPYmplY3RNb2RlKXt2YXIgcz1lLl9jYWxsTWFjaGluZSgpLnN0b3JlO0dhKGlbYV0scyksUWEoaVthXSxzKSxZYShpW2FdLGUuX3BhcnRpY2lwYW50c1thXSxzKX1lLl9wYXJ0aWNpcGFudHNbYV09ZnMoe30saVthXSksZS50b2dnbGVQYXJ0aWNpcGFudEF1ZGlvQmFzZWRPbk5hdGl2ZUF1ZGlvRm9jdXMoKX1uJiZlLmxvYWRDc3MoZS5wcm9wZXJ0aWVzKSx0KGkpfWVsc2UgcihvKX19KSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGouYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJsZWF2ZVwiLHZhbHVlOihBPWgoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3Rlc3RDYWxsSW5Qcm9ncmVzcyYmdGhpcy5zdG9wVGVzdENhbGxRdWFsaXR5KCksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2UuX2NhbGxTdGF0ZT09PWlpfHxlLl9jYWxsU3RhdGU9PT1vaT90KCk6ZS5fY2FsbE9iamVjdExvYWRlciYmIWUuX2NhbGxPYmplY3RMb2FkZXIubG9hZGVkPyhlLl9jYWxsT2JqZWN0TG9hZGVyLmNhbmNlbCgpLGUuX3VwZGF0ZUNhbGxTdGF0ZShpaSksZS5yZXNldE1lZXRpbmdEZXBlbmRlbnRWYXJzKCksZS5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246aWl9KSx0KCkpOihlLl9yZXNvbHZlTGVhdmU9dCxlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwibGVhdmUtbWVldGluZ1wifSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIEEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdGFydFNjcmVlblNoYXJlXCIsdmFsdWU6KE89aCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtpZihOcyh0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkLFwic3RhcnRTY3JlZW5TaGFyZSgpXCIpLHQuc2NyZWVuVmlkZW9TZW5kU2V0dGluZ3MmJnRoaXMuX3ZhbGlkYXRlVmlkZW9TZW5kU2V0dGluZ3MoXCJzY3JlZW5WaWRlb1wiLHQuc2NyZWVuVmlkZW9TZW5kU2V0dGluZ3MpLHQubWVkaWFTdHJlYW0mJih0aGlzLl9zaGFyZWRUcmFja3Muc2NyZWVuTWVkaWFTdHJlYW09dC5tZWRpYVN0cmVhbSx0Lm1lZGlhU3RyZWFtPUhvKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgRGFpbHlOYXRpdmVVdGlscyYmdm9pZCAwIT09RGFpbHlOYXRpdmVVdGlscy5pc0lPUyYmRGFpbHlOYXRpdmVVdGlscy5pc0lPUyl7dmFyIG49dGhpcy5uYXRpdmVVdGlscygpO2lmKHlpZWxkIG4uaXNTY3JlZW5CZWluZ0NhcHR1cmVkKCkpcmV0dXJuIHZvaWQgdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246Qm8sdHlwZTpcInNjcmVlbi1zaGFyZS1lcnJvclwiLGVycm9yTXNnOlwiQ291bGQgbm90IHN0YXJ0IHRoZSBzY3JlZW4gc2hhcmluZy4gVGhlIHNjcmVlbiBpcyBhbHJlYWR5IGJlZW4gY2FwdHVyZWQhXCJ9KTtuLnNldFN5c3RlbVNjcmVlbkNhcHR1cmVTdGFydENhbGxiYWNrKChmdW5jdGlvbigpe24uc2V0U3lzdGVtU2NyZWVuQ2FwdHVyZVN0YXJ0Q2FsbGJhY2sobnVsbCksZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpxbyxjYXB0dXJlT3B0aW9uczp0fSl9KSksbi5wcmVzZW50U3lzdGVtU2NyZWVuQ2FwdHVyZVByb21wdCgpfWVsc2UgdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpxbyxjYXB0dXJlT3B0aW9uczp0fSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gTy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInN0b3BTY3JlZW5TaGFyZVwiLHZhbHVlOmZ1bmN0aW9uKCl7TnModGhpcy5fY2FsbE1hY2hpbmVJbml0aWFsaXplZCxcInN0b3BTY3JlZW5TaGFyZSgpXCIpLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJsb2NhbC1zY3JlZW4tc3RvcFwifSl9fSx7a2V5Olwic3RhcnRSZWNvcmRpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSx0PWUudHlwZTtpZih0JiZcImNsb3VkXCIhPT10JiZcInJhdy10cmFja3NcIiE9PXQmJlwibG9jYWxcIiE9PXQpdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB0eXBlOiBcIi5jb25jYXQodCxcIiwgYWxsb3dlZCB2YWx1ZXMgJ2Nsb3VkJywgJ3Jhdy10cmFja3MnLCBvciAnbG9jYWwnXCIpKTt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShmcyh7YWN0aW9uOlwibG9jYWwtcmVjb3JkaW5nLXN0YXJ0XCJ9LGUpKX19LHtrZXk6XCJ1cGRhdGVSZWNvcmRpbmdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmxheW91dCxuPXZvaWQgMD09PXQ/e3ByZXNldDpcImRlZmF1bHRcIn06dCxyPWUuaW5zdGFuY2VJZDt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXVwZGF0ZS1yZWNvcmRpbmdcIixsYXlvdXQ6bixpbnN0YW5jZUlkOnJ9KX19LHtrZXk6XCJzdG9wUmVjb3JkaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoZnMoe2FjdGlvbjpcImxvY2FsLXJlY29yZGluZy1zdG9wXCJ9LGUpKX19LHtrZXk6XCJzdGFydExpdmVTdHJlYW1pbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShmcyh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXN0YXJ0LWxpdmUtc3RyZWFtaW5nXCJ9LGUpKX19LHtrZXk6XCJ1cGRhdGVMaXZlU3RyZWFtaW5nXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sYXlvdXQsbj12b2lkIDA9PT10P3twcmVzZXQ6XCJkZWZhdWx0XCJ9OnQscj1lLmluc3RhbmNlSWQ7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImRhaWx5LW1ldGhvZC11cGRhdGUtbGl2ZS1zdHJlYW1pbmdcIixsYXlvdXQ6bixpbnN0YW5jZUlkOnJ9KX19LHtrZXk6XCJhZGRMaXZlU3RyZWFtaW5nRW5kcG9pbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbmRwb2ludHMsbj1lLmluc3RhbmNlSWQ7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpXbyxlbmRwb2ludHNPcDpYbyxlbmRwb2ludHM6dCxpbnN0YW5jZUlkOm59KX19LHtrZXk6XCJyZW1vdmVMaXZlU3RyZWFtaW5nRW5kcG9pbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbmRwb2ludHMsbj1lLmluc3RhbmNlSWQ7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpXbyxlbmRwb2ludHNPcDpabyxlbmRwb2ludHM6dCxpbnN0YW5jZUlkOm59KX19LHtrZXk6XCJzdG9wTGl2ZVN0cmVhbWluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3RoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKGZzKHthY3Rpb246XCJkYWlseS1tZXRob2Qtc3RvcC1saXZlLXN0cmVhbWluZ1wifSxlKSl9fSx7a2V5OlwidmFsaWRhdGVEYWlseUNvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2UuY2FtU2ltdWxjYXN0RW5jb2RpbmdzJiYoY29uc29sZS53YXJuKFwiY2FtU2ltdWxjYXN0RW5jb2RpbmdzIGlzIGRlcHJlY2F0ZWQuIFVzZSBzZW5kU2V0dGluZ3MsIGZvdW5kIGluIERhaWx5Q2FsbE9wdGlvbnMsIHRvIHByb3ZpZGUgY2FtZXJhIHNpbXVsY2FzdCBzZXR0aW5ncy5cIiksdGhpcy52YWxpZGF0ZVNpbXVsY2FzdEVuY29kaW5ncyhlLmNhbVNpbXVsY2FzdEVuY29kaW5ncykpLGUuc2NyZWVuU2ltdWxjYXN0RW5jb2RpbmdzJiZjb25zb2xlLndhcm4oXCJzY3JlZW5TaW11bGNhc3RFbmNvZGluZ3MgaXMgZGVwcmVjYXRlZC4gVXNlIHNlbmRTZXR0aW5ncywgZm91bmQgaW4gRGFpbHlDYWxsT3B0aW9ucywgdG8gcHJvdmlkZSBzY3JlZW4gc2ltdWxjYXN0IHNldHRpbmdzLlwiKSx1YSgpJiZlLm5vQXV0b0RlZmF1bHREZXZpY2VDaGFuZ2UmJmNvbnNvbGUud2FybihcIm5vQXV0b0RlZmF1bHREZXZpY2VDaGFuZ2UgaXMgbm90IHN1cHBvcnRlZCBvbiBBbmRyb2lkLCBhbmQgd2lsbCBiZSBpZ25vcmVkLlwiKX19LHtrZXk6XCJ2YWxpZGF0ZVNpbXVsY2FzdEVuY29kaW5nc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXTtpZihlKXtpZighKGUgaW5zdGFuY2VvZiBBcnJheXx8QXJyYXkuaXNBcnJheShlKSkpdGhyb3cgbmV3IEVycm9yKFwiZW5jb2RpbmdzIG11c3QgYmUgYW4gQXJyYXlcIik7aWYoIWVjKGUubGVuZ3RoLDEsMykpdGhyb3cgbmV3IEVycm9yKFwiZW5jb2RpbmdzIG11c3QgYmUgYW4gQXJyYXkgd2l0aCBiZXR3ZWVuIDEgdG8gXCIuY29uY2F0KDMsXCIgbGF5ZXJzXCIpKTtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9ZVtyXTtmb3IodmFyIG8gaW4gdGhpcy5fdmFsaWRhdGVFbmNvZGluZ0xheWVySGFzVmFsaWRQcm9wZXJ0aWVzKGkpLGkpaWYoTXMuaW5jbHVkZXMobykpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBpW29dKXRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChvLFwiIG11c3QgYmUgYSBudW1iZXJcIikpO2lmKHQpe3ZhciBhPXRbb10scz1hLm1pbixjPWEubWF4O2lmKCFlYyhpW29dLHMsYykpdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KG8sXCIgdmFsdWUgbm90IGluIHJhbmdlLiB2YWxpZCByYW5nZTogXCIpLmNvbmNhdChzLFwiIHRvIFwiKS5jb25jYXQoYykpfX1lbHNlIGlmKCFbXCJhY3RpdmVcIixcInNjYWxhYmlsaXR5TW9kZVwiXS5pbmNsdWRlcyhvKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGtleSBcIi5jb25jYXQobyxcIiwgdmFsaWQga2V5cyBhcmU6XCIpK09iamVjdC52YWx1ZXMoTXMpKTtpZihuJiYhaS5oYXNPd25Qcm9wZXJ0eShcIm1heEJpdHJhdGVcIikpdGhyb3cgbmV3IEVycm9yKFwibWF4Qml0cmF0ZSBpcyBub3Qgc3BlY2lmaWVkXCIpfX19fSx7a2V5Olwic3RhcnRSZW1vdGVNZWRpYVBsYXllclwiLHZhbHVlOihQPWgoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzLG49ZS51cmwscj1lLnNldHRpbmdzLGk9dm9pZCAwPT09cj97c3RhdGU6S28uUExBWX06cjt0cnl7IWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcigndXJsIHBhcmFtZXRlciBtdXN0IGJlIFwic3RyaW5nXCIgdHlwZScpfShuKSxacyhpKSxmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZighQ3MuaW5jbHVkZXModCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBrZXkgXCIuY29uY2F0KHQsXCIsIHZhbGlkIGtleXMgYXJlOiBcIikuY29uY2F0KENzKSk7ZS5zaW11bGNhc3RFbmNvZGluZ3MmJnRoaXMudmFsaWRhdGVTaW11bGNhc3RFbmNvZGluZ3MoZS5zaW11bGNhc3RFbmNvZGluZ3Msa3MsITApfShpKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKFwiaW52YWxpZCBhcmd1bWVudCBFcnJvcjogXCIuY29uY2F0KGUpKSxjb25zb2xlLmVycm9yKCdzdGFydFJlbW90ZU1lZGlhUGxheWVyIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHRoZSBmb3JtOlxcbiAgeyB1cmw6IFwicGxheWJhY2sgdXJsXCIsXFxuICBzZXR0aW5ncz86XFxuICB7c3RhdGU6IFwicGxheVwifFwicGF1c2VcIiwgc2ltdWxjYXN0RW5jb2RpbmdzPzogW3t9XSB9IH0nKSxlfXJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXN0YXJ0LXJlbW90ZS1tZWRpYS1wbGF5ZXJcIix1cmw6bixzZXR0aW5nczppfSwoZnVuY3Rpb24odCl7dC5lcnJvcj9yKHtlcnJvcjp0LmVycm9yLGVycm9yTXNnOnQuZXJyb3JNc2d9KTplKHtzZXNzaW9uX2lkOnQuc2Vzc2lvbl9pZCxyZW1vdGVNZWRpYVBsYXllclN0YXRlOntzdGF0ZTp0LnN0YXRlLHNldHRpbmdzOnQuc2V0dGluZ3N9fSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIFAuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdG9wUmVtb3RlTWVkaWFQbGF5ZXJcIix2YWx1ZTooVD1oKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCIgcmVtb3RlUGxheWVySUQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZ1wiKTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImRhaWx5LW1ldGhvZC1zdG9wLXJlbW90ZS1tZWRpYS1wbGF5ZXJcIixzZXNzaW9uX2lkOmV9LChmdW5jdGlvbihlKXtlLmVycm9yP3Ioe2Vycm9yOmUuZXJyb3IsZXJyb3JNc2c6ZS5lcnJvck1zZ30pOm4oKX0pKX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gVC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInVwZGF0ZVJlbW90ZU1lZGlhUGxheWVyXCIsdmFsdWU6KEU9aCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXMsbj1lLnNlc3Npb25faWQscj1lLnNldHRpbmdzO3RyeXtacyhyKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKFwiaW52YWxpZCBhcmd1bWVudCBFcnJvcjogXCIuY29uY2F0KGUpKSxjb25zb2xlLmVycm9yKCd1cGRhdGVSZW1vdGVNZWRpYVBsYXllciBhcmd1bWVudHMgbXVzdCBiZSBvZiB0aGUgZm9ybTpcXG4gIHNlc3Npb25faWQ6IFwicGFydGljaXBhbnQgc2Vzc2lvblwiLFxcbiAgeyBzZXR0aW5ncz86IHtzdGF0ZTogXCJwbGF5XCJ8XCJwYXVzZVwifSB9JyksZX1yZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsaSl7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImRhaWx5LW1ldGhvZC11cGRhdGUtcmVtb3RlLW1lZGlhLXBsYXllclwiLHNlc3Npb25faWQ6bixzZXR0aW5nczpyfSwoZnVuY3Rpb24odCl7dC5lcnJvcj9pKHtlcnJvcjp0LmVycm9yLGVycm9yTXNnOnQuZXJyb3JNc2d9KTplKHtzZXNzaW9uX2lkOnQuc2Vzc2lvbl9pZCxyZW1vdGVNZWRpYVBsYXllclN0YXRlOntzdGF0ZTp0LnN0YXRlLHNldHRpbmdzOnQuc2V0dGluZ3N9fSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIEUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdGFydFRyYW5zY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtMcyh0aGlzLl9jYWxsU3RhdGUsXCJzdGFydFRyYW5zY3JpcHRpb24oKVwiKSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShmcyh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXN0YXJ0LXRyYW5zY3JpcHRpb25cIn0sZSkpfX0se2tleTpcInVwZGF0ZVRyYW5zY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtpZihMcyh0aGlzLl9jYWxsU3RhdGUsXCJ1cGRhdGVUcmFuc2NyaXB0aW9uKClcIiksIWUpdGhyb3cgbmV3IEVycm9yKFwidXBkYXRlVHJhbnNjcmlwdGlvbiBFcnJvcjogb3B0aW9ucyBpcyBtYW5kYXRvcnlcIik7aWYoXCJvYmplY3RcIiE9PW4oZSkpdGhyb3cgbmV3IEVycm9yKFwidXBkYXRlVHJhbnNjcmlwdGlvbiBFcnJvcjogb3B0aW9ucyBtdXN0IGJlIG9iamVjdCB0eXBlXCIpO2lmKGUucGFydGljaXBhbnRzJiYhQXJyYXkuaXNBcnJheShlLnBhcnRpY2lwYW50cykpdGhyb3cgbmV3IEVycm9yKFwidXBkYXRlVHJhbnNjcmlwdGlvbiBFcnJvcjogcGFydGljaXBhbnRzIG11c3QgYmUgYW4gYXJyYXlcIik7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoZnMoe2FjdGlvbjpcImRhaWx5LW1ldGhvZC11cGRhdGUtdHJhbnNjcmlwdGlvblwifSxlKSl9fSx7a2V5Olwic3RvcFRyYW5zY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtpZihMcyh0aGlzLl9jYWxsU3RhdGUsXCJzdG9wVHJhbnNjcmlwdGlvbigpXCIpLGUmJlwib2JqZWN0XCIhPT1uKGUpKXRocm93IG5ldyBFcnJvcihcInN0b3BUcmFuc2NyaXB0aW9uIEVycm9yOiBvcHRpb25zIG11c3QgYmUgb2JqZWN0IHR5cGVcIik7aWYoZSYmIWUuaW5zdGFuY2VJZCl0aHJvdyBuZXcgRXJyb3IoJ1wiaW5zdGFuY2VJZFwiIG5vdCBwcm92aWRlZCcpO3RoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKGZzKHthY3Rpb246XCJkYWlseS1tZXRob2Qtc3RvcC10cmFuc2NyaXB0aW9uXCJ9LGUpKX19LHtrZXk6XCJzdGFydERpYWxPdXRcIix2YWx1ZTooQz1oKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztMcyh0aGlzLl9jYWxsU3RhdGUsXCJzdGFydERpYWxPdXQoKVwiKTt2YXIgbj1mdW5jdGlvbihlKXtpZihlKXtpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogYXVkaW8gY29kZWMgbXVzdCBiZSBhbiBhcnJheVwiKTtpZihlLmxlbmd0aDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogYXVkaW8gY29kZWMgYXJyYXkgc3BlY2lmaWVkIGJ1dCBlbXB0eVwiKTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiBhdWRpbyBjb2RlYyBtdXN0IGJlIGEgc3RyaW5nXCIpO2lmKFwiT1BVU1wiIT09ZSYmXCJQQ01VXCIhPT1lJiZcIlBDTUFcIiE9PWUmJlwiRzcyMlwiIT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogYXVkaW8gY29kZWMgbXVzdCBiZSBvbmUgb2YgT1BVUywgUENNVSwgUENNQSwgRzcyMlwiKX0pKX19O2lmKCFlLnNpcFVyaSYmIWUucGhvbmVOdW1iZXIpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IGVpdGhlciBhIHNpcCB1cmkgb3IgcGhvbmUgbnVtYmVyIG11c3QgYmUgcHJvdmlkZWRcIik7aWYoZS5zaXBVcmkmJmUucGhvbmVOdW1iZXIpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IG9ubHkgb25lIG9mIHNpcCB1cmkgb3IgcGhvbmUgbnVtYmVyIG11c3QgYmUgcHJvdmlkZWRcIik7aWYoZS5zaXBVcmkpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlLnNpcFVyaSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogc2lwVXJpIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoIWUuc2lwVXJpLnN0YXJ0c1dpdGgoXCJzaXA6XCIpKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiBJbnZhbGlkIFNJUCBVUkksIG11c3Qgc3RhcnQgd2l0aCAnc2lwOidcIik7aWYoZS52aWRlbyYmXCJib29sZWFuXCIhPXR5cGVvZiBlLnZpZGVvKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiB2aWRlbyBtdXN0IGJlIGEgYm9vbGVhbiB2YWx1ZVwiKTshZnVuY3Rpb24oZSl7aWYoZSYmKG4oZS5hdWRpbyksZS52aWRlbykpe2lmKCFBcnJheS5pc0FycmF5KGUudmlkZW8pKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiB2aWRlbyBjb2RlYyBtdXN0IGJlIGFuIGFycmF5XCIpO2lmKGUudmlkZW8ubGVuZ3RoPD0wKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiB2aWRlbyBjb2RlYyBhcnJheSBzcGVjaWZpZWQgYnV0IGVtcHR5XCIpO2UudmlkZW8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IHZpZGVvIGNvZGVjIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoXCJIMjY0XCIhPT1lJiZcIlZQOFwiIT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogdmlkZW8gY29kZWMgbXVzdCBiZSBIMjY0IG9yIFZQOFwiKX0pKX19KGUuY29kZWNzKX1pZihlLnBob25lTnVtYmVyKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZS5waG9uZU51bWJlcil0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogcGhvbmVOdW1iZXIgbXVzdCBiZSBhIHN0cmluZ1wiKTtpZighL15cXCtcXGR7MSx9JC8udGVzdChlLnBob25lTnVtYmVyKSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogSW52YWxpZCBwaG9uZSBudW1iZXIsIG11c3QgYmUgdmFsaWQgcGhvbmUgbnVtYmVyIGFzIHBlciBFLjE2NFwiKTtlLmNvZGVjcyYmbihlLmNvZGVjcy5hdWRpbyl9aWYoZS5jYWxsZXJJZCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUuY2FsbGVySWQpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IGNhbGxlcklkIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoZS5zaXBVcmkpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IGNhbGxlcklkIG5vdCBhbGxvd2VkIHdpdGggc2lwVXJpXCIpfWlmKGUuZGlzcGxheU5hbWUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlLmRpc3BsYXlOYW1lKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiBkaXNwbGF5TmFtZSBtdXN0IGJlIGEgc3RyaW5nXCIpO2lmKGUuZGlzcGxheU5hbWUubGVuZ3RoPj0yMDApdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IGRpc3BsYXlOYW1lIGxlbmd0aCBtdXN0IGJlIGxlc3MgdGhhbiAyMDBcIil9aWYoZS51c2VySWQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlLnVzZXJJZCl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogdXNlcklkIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoZS51c2VySWQubGVuZ3RoPjM2KXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiB1c2VySWQgbGVuZ3RoIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDM2XCIpfXJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShmcyh7YWN0aW9uOlwiZGlhbG91dC1zdGFydFwifSxlKSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9yKGUuZXJyb3IpOm4oZSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIEMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdG9wRGlhbE91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIExzKHRoaXMuX2NhbGxTdGF0ZSxcInN0b3BEaWFsT3V0KClcIiksbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoZnMoe2FjdGlvbjpcImRpYWxvdXQtc3RvcFwifSxlKSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9yKGUuZXJyb3IpOm4oZSl9KSl9KSl9fSx7a2V5Olwic2lwQ2FsbFRyYW5zZmVyXCIsdmFsdWU6KE09aCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXM7aWYoTHModGhpcy5fY2FsbFN0YXRlLFwic2lwQ2FsbFRyYW5zZmVyKClcIiksIWUpdGhyb3cgbmV3IEVycm9yKFwic2lwQ2FsbFRyYW5zZmVyKCkgcmVxdWlyZXMgYSBzZXNzaW9uSWQgYW5kIHRvRW5kUG9pbnRcIik7cmV0dXJuIGUudXNlU2lwUmVmZXI9ITEsWHMoZSxcInNpcENhbGxUcmFuc2ZlclwiKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShmcyh7YWN0aW9uOmVhfSxlKSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9yKGUuZXJyb3IpOm4oZSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIE0uYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzaXBSZWZlclwiLHZhbHVlOihrPWgoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzO2lmKExzKHRoaXMuX2NhbGxTdGF0ZSxcInNpcFJlZmVyKClcIiksIWUpdGhyb3cgbmV3IEVycm9yKFwic2Vzc2lvbklkIGFuZCB0b0VuZFBvaW50IGFyZSBtYW5kYXRvcnkgcGFyYW1ldGVyXCIpO3JldHVybiBlLnVzZVNpcFJlZmVyPSEwLFhzKGUsXCJzaXBSZWZlclwiKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShmcyh7YWN0aW9uOmVhfSxlKSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9yKGUuZXJyb3IpOm4oZSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIGsuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzZW5kRFRNRlwiLHZhbHVlOihTPWgoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzO3JldHVybiBMcyh0aGlzLl9jYWxsU3RhdGUsXCJzZW5kRFRNRigpXCIpLGZ1bmN0aW9uKGUpe3ZhciB0PWUuc2Vzc2lvbklkLG49ZS50b25lcztpZighdHx8IW4pdGhyb3cgbmV3IEVycm9yKFwic2Vzc2lvbklkIGFuZCB0b25lcyBhcmUgbWFuZGF0b3J5IHBhcmFtZXRlclwiKTtpZihcInN0cmluZ1wiIT10eXBlb2YgdHx8XCJzdHJpbmdcIiE9dHlwZW9mIG4pdGhyb3cgbmV3IEVycm9yKFwic2Vzc2lvbklkIGFuZCB0b25lcyBzaG91bGQgYmUgb2Ygc3RyaW5nIHR5cGVcIik7aWYobi5sZW5ndGg+MjApdGhyb3cgbmV3IEVycm9yKFwidG9uZXMgc3RyaW5nIG11c3QgYmUgdXB0byAyMCBjaGFyYWN0ZXJzXCIpO3ZhciByPS9bXjAtOUEtRCojXS9nLGk9bi5tYXRjaChyKTtpZihpJiZpWzBdKXRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChpWzBdLFwiIGlzIG5vdCB2YWxpZCBEVE1GIHRvbmVcIikpfShlKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShmcyh7YWN0aW9uOlwic2VuZC1kdG1mXCJ9LGUpLChmdW5jdGlvbihlKXtlLmVycm9yP3IoZS5lcnJvcik6bihlKX0pKX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gUy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImdldE5ldHdvcmtTdGF0c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLl9jYWxsU3RhdGUhPT1yaSl7cmV0dXJue3N0YXRzOntsYXRlc3Q6e319fX1yZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJnZXQtY2FsYy1zdGF0c1wifSwoZnVuY3Rpb24obil7dChmcyh7c3RhdHM6bi5zdGF0c30sZS5fbmV0d29yaykpfSkpfSkpfX0se2tleTpcInRlc3RXZWJzb2NrZXRDb25uZWN0aXZpdHlcIix2YWx1ZToodz1oKChmdW5jdGlvbiooKXt2YXIgZT10aGlzO2lmKFJzKHRoaXMuX3Rlc3RDYWxsSW5Qcm9ncmVzcyxcInRlc3RXZWJzb2NrZXRDb25uZWN0aXZpdHkoKVwiKSx0aGlzLm5lZWRzTG9hZCgpKXRyeXt5aWVsZCB0aGlzLmxvYWQoKX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJ0ZXN0LXdlYnNvY2tldC1jb25uZWN0aXZpdHlcIn0sKGZ1bmN0aW9uKGUpe2UuZXJyb3I/bihlLmVycm9yKTp0KGUucmVzdWx0cyl9KSl9KSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gdy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImFib3J0VGVzdFdlYnNvY2tldENvbm5lY3Rpdml0eVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImFib3J0LXRlc3Qtd2Vic29ja2V0LWNvbm5lY3Rpdml0eVwifSl9fSx7a2V5OlwiX3ZhbGlkYXRlVmlkZW9UcmFja0Zvck5ldHdvcmtUZXN0c1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlP2UgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbVRyYWNrPyEhdXMoZSx7aXNMb2NhbFNjcmVlblZpZGVvOiExfSl8fChjb25zb2xlLmVycm9yKFwiVmlkZW8gdHJhY2sgaXMgbm90IHBsYXlhYmxlLiBUaGlzIHRlc3QgbmVlZHMgYSBsaXZlIHZpZGVvIHRyYWNrLlwiKSwhMSk6KGNvbnNvbGUuZXJyb3IoXCJWaWRlbyB0cmFjayBuZWVkcyB0byBiZSBvZiB0eXBlIGBNZWRpYVN0cmVhbVRyYWNrYC5cIiksITEpOihjb25zb2xlLmVycm9yKFwiTWlzc2luZyB2aWRlbyB0cmFjay4gWW91IG11c3QgcHJvdmlkZSBhIHZpZGVvIHRyYWNrIGluIG9yZGVyIHRvIHJ1biB0aGlzIHRlc3QuXCIpLCExKX19LHtrZXk6XCJ0ZXN0Q2FsbFF1YWxpdHlcIix2YWx1ZTooYj1oKChmdW5jdGlvbiooKXt2YXIgdD10aGlzO1VzKCksRnModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJ0ZXN0Q2FsbFF1YWxpdHkoKVwiKSxOcyh0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkLFwidGVzdENhbGxRdWFsaXR5KClcIixudWxsLCEwKSxEcyh0aGlzLl9jYWxsU3RhdGUsdGhpcy5faXNQcmVwYXJpbmdUb0pvaW4sXCJ0ZXN0Q2FsbFF1YWxpdHkoKVwiKTt2YXIgbj10aGlzLl90ZXN0Q2FsbEFscmVhZHlJblByb2dyZXNzLHI9ZnVuY3Rpb24oZSl7bnx8KHQuX3Rlc3RDYWxsSW5Qcm9ncmVzcz1lKX07aWYocighMCksdGhpcy5uZWVkc0xvYWQoKSl0cnl7dmFyIGk9dGhpcy5fY2FsbFN0YXRlO3lpZWxkIHRoaXMubG9hZCgpLHRoaXMuX2NhbGxTdGF0ZT1pfWNhdGNoKGUpe3JldHVybiByKCExKSxQcm9taXNlLnJlamVjdChlKX1yZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3Quc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJ0ZXN0LWNhbGwtcXVhbGl0eVwiLGRhaWx5SnNWZXJzaW9uOnQucHJvcGVydGllcy5kYWlseUpzVmVyc2lvbn0sKGZ1bmN0aW9uKGkpe3ZhciBvPWkucmVzdWx0cyxhPW8ucmVzdWx0LHM9ZShvLGRzKTtpZihcImZhaWxlZFwiPT09YSl7dmFyIGMsbD1mcyh7fSxzKTtudWxsIT09KGM9cy5lcnJvcikmJnZvaWQgMCE9PWMmJmMuZGV0YWlscz8ocy5lcnJvci5kZXRhaWxzPUpTT04ucGFyc2Uocy5lcnJvci5kZXRhaWxzKSxsLmVycm9yPWZzKGZzKHt9LGwuZXJyb3IpLHt9LHtkZXRhaWxzOmZzKHt9LGwuZXJyb3IuZGV0YWlscyl9KSxsLmVycm9yLmRldGFpbHMuZHVyaW5nVGVzdD1cInRlc3RDYWxsUXVhbGl0eVwiKToobC5lcnJvcj1sLmVycm9yP2ZzKHt9LGwuZXJyb3IpOnt9LGwuZXJyb3IuZGV0YWlscz17ZHVyaW5nVGVzdDpcInRlc3RDYWxsUXVhbGl0eVwifSksdC5fbWF5YmVTZW5kVG9TZW50cnkobCl9cighMSksbihmcyh7cmVzdWx0OmF9LHMpKX0pKX0pKX0pKSxmdW5jdGlvbigpe3JldHVybiBiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5Olwic3RvcFRlc3RDYWxsUXVhbGl0eVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0b3AtdGVzdC1jYWxsLXF1YWxpdHlcIn0pfX0se2tleTpcInRlc3RDb25uZWN0aW9uUXVhbGl0eVwiLHZhbHVlOihfPWgoKGZ1bmN0aW9uKihlKXt2YXIgdDtuYSgpPyhjb25zb2xlLndhcm4oXCJ0ZXN0Q29ubmVjdGlvblF1YWxpdHkoKSBpcyBkZXByZWNhdGVkOiB1c2UgdGVzdFBlZXJUb1BlZXJDYWxsUXVhbGl0eSgpIGluc3RlYWRcIiksdD15aWVsZCB0aGlzLnRlc3RQZWVyVG9QZWVyQ2FsbFF1YWxpdHkoZSkpOihjb25zb2xlLndhcm4oXCJ0ZXN0Q29ubmVjdGlvblF1YWxpdHkoKSBpcyBkZXByZWNhdGVkOiB1c2UgdGVzdENhbGxRdWFsaXR5KCkgaW5zdGVhZFwiKSx0PXlpZWxkIHRoaXMudGVzdENhbGxRdWFsaXR5KCkpO3ZhciBuPXtyZXN1bHQ6dC5yZXN1bHQsc2Vjb25kc0VsYXBzZWQ6dC5zZWNvbmRzRWxhcHNlZH07cmV0dXJuIHQuZGF0YSYmKG4uZGF0YT17bWF4UlRUOnQuZGF0YS5tYXhSb3VuZFRyaXBUaW1lLHBhY2tldExvc3M6dC5kYXRhLmF2Z1JlY3ZQYWNrZXRMb3NzfSksbn0pKSxmdW5jdGlvbihlKXtyZXR1cm4gXy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInRlc3RQZWVyVG9QZWVyQ2FsbFF1YWxpdHlcIix2YWx1ZTooeT1oKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztpZihScyh0aGlzLl90ZXN0Q2FsbEluUHJvZ3Jlc3MsXCJ0ZXN0UGVlclRvUGVlckNhbGxRdWFsaXR5KClcIiksdGhpcy5uZWVkc0xvYWQoKSl0cnl7eWllbGQgdGhpcy5sb2FkKCl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfXZhciBuPWUudmlkZW9UcmFjayxyPWUuZHVyYXRpb247aWYoIXRoaXMuX3ZhbGlkYXRlVmlkZW9UcmFja0Zvck5ldHdvcmtUZXN0cyhuKSl0aHJvdyBuZXcgRXJyb3IoXCJWaWRlbyB0cmFjayBlcnJvclwiKTtyZXR1cm4gdGhpcy5fc2hhcmVkVHJhY2tzLnZpZGVvVHJhY2tGb3JDb25uZWN0aW9uUXVhbGl0eVRlc3Q9bixuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxuKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwidGVzdC1wMnAtY2FsbC1xdWFsaXR5XCIsZHVyYXRpb246cn0sKGZ1bmN0aW9uKHQpe3QuZXJyb3I/bih0LmVycm9yKTplKHQucmVzdWx0cyl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIHkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdG9wVGVzdENvbm5lY3Rpb25RdWFsaXR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtuYSgpPyhjb25zb2xlLndhcm4oXCJzdG9wVGVzdENvbm5lY3Rpb25RdWFsaXR5KCkgaXMgZGVwcmVjYXRlZDogdXNlIHRlc3RQZWVyVG9QZWVyQ2FsbFF1YWxpdHkoKSBhbmQgc3RvcFRlc3RQZWVyVG9QZWVyQ2FsbFF1YWxpdHkoKSBpbnN0ZWFkXCIpLHRoaXMuc3RvcFRlc3RQZWVyVG9QZWVyQ2FsbFF1YWxpdHkoKSk6KGNvbnNvbGUud2FybihcInN0b3BUZXN0Q29ubmVjdGlvblF1YWxpdHkoKSBpcyBkZXByZWNhdGVkOiB1c2UgdGVzdENhbGxRdWFsaXR5KCkgYW5kIHN0b3BUZXN0Q2FsbFF1YWxpdHkoKSBpbnN0ZWFkXCIpLHRoaXMuc3RvcFRlc3RDYWxsUXVhbGl0eSgpKX19LHtrZXk6XCJzdG9wVGVzdFBlZXJUb1BlZXJDYWxsUXVhbGl0eVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0b3AtdGVzdC1wMnAtY2FsbC1xdWFsaXR5XCJ9KX19LHtrZXk6XCJ0ZXN0TmV0d29ya0Nvbm5lY3Rpdml0eVwiLHZhbHVlOihtPWgoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzO2lmKFJzKHRoaXMuX3Rlc3RDYWxsSW5Qcm9ncmVzcyxcInRlc3ROZXR3b3JrQ29ubmVjdGl2aXR5KClcIiksdGhpcy5uZWVkc0xvYWQoKSl0cnl7eWllbGQgdGhpcy5sb2FkKCl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfWlmKCF0aGlzLl92YWxpZGF0ZVZpZGVvVHJhY2tGb3JOZXR3b3JrVGVzdHMoZSkpdGhyb3cgbmV3IEVycm9yKFwiVmlkZW8gdHJhY2sgZXJyb3JcIik7cmV0dXJuIHRoaXMuX3NoYXJlZFRyYWNrcy52aWRlb1RyYWNrRm9yTmV0d29ya0Nvbm5lY3Rpdml0eVRlc3Q9ZSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxuKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwidGVzdC1uZXR3b3JrLWNvbm5lY3Rpdml0eVwifSwoZnVuY3Rpb24odCl7dC5lcnJvcj9uKHQuZXJyb3IpOmUodC5yZXN1bHRzKX0pKX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gbS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImFib3J0VGVzdE5ldHdvcmtDb25uZWN0aXZpdHlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJhYm9ydC10ZXN0LW5ldHdvcmstY29ubmVjdGl2aXR5XCJ9KX19LHtrZXk6XCJnZXRDcHVMb2FkU3RhdHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0KXtpZihlLl9jYWxsU3RhdGU9PT1yaSl7ZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImdldC1jcHUtbG9hZC1zdGF0c1wifSwoZnVuY3Rpb24oZSl7dChlLmNwdVN0YXRzKX0pKX1lbHNlIHQoe2NwdUxvYWRTdGF0ZTp2b2lkIDAsY3B1TG9hZFN0YXRlUmVhc29uOnZvaWQgMCxzdGF0czp7fX0pfSkpfX0se2tleTpcIl92YWxpZGF0ZUVuY29kaW5nTGF5ZXJIYXNWYWxpZFByb3BlcnRpZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdDtpZighKChudWxsPT09KHQ9T2JqZWN0LmtleXMoZSkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmxlbmd0aCk+MCkpdGhyb3cgbmV3IEVycm9yKFwiRW1wdHkgZW5jb2RpbmcgaXMgbm90IGFsbG93ZWQuIEF0IGxlYXN0IG9uZSBvZiB0aGVzZSB2YWxpZCBrZXlzIHNob3VsZCBiZSBzcGVjaWZpZWQ6XCIrT2JqZWN0LnZhbHVlcyhNcykpfX0se2tleTpcIl92YWxpZGF0ZVZpZGVvU2VuZFNldHRpbmdzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1cInNjcmVlblZpZGVvXCI9PT1lP1tcImRlZmF1bHQtc2NyZWVuLXZpZGVvXCIsXCJkZXRhaWwtb3B0aW1pemVkXCIsXCJtb3Rpb24tb3B0aW1pemVkXCIsXCJtb3Rpb24tYW5kLWRldGFpbC1iYWxhbmNlZFwiXTpbXCJkZWZhdWx0LXZpZGVvXCIsXCJiYW5kd2lkdGgtb3B0aW1pemVkXCIsXCJiYW5kd2lkdGgtYW5kLXF1YWxpdHktYmFsYW5jZWRcIixcInF1YWxpdHktb3B0aW1pemVkXCIsXCJhZGFwdGl2ZS0yLWxheWVyc1wiLFwiYWRhcHRpdmUtMy1sYXllcnNcIl0saT1cIlZpZGVvIHNlbmQgc2V0dGluZ3Mgc2hvdWxkIGJlIGVpdGhlciBhbiBvYmplY3Qgb3Igb25lIG9mIHRoZSBzdXBwb3J0ZWQgcHJlc2V0czogXCIuY29uY2F0KHIuam9pbigpKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7aWYoIXIuaW5jbHVkZXModCkpdGhyb3cgbmV3IEVycm9yKGkpfWVsc2V7aWYoXCJvYmplY3RcIiE9PW4odCkpdGhyb3cgbmV3IEVycm9yKGkpO2lmKCF0Lm1heFF1YWxpdHkmJiF0LmVuY29kaW5ncyYmdm9pZCAwPT09dC5hbGxvd0FkYXB0aXZlTGF5ZXJzKXRocm93IG5ldyBFcnJvcihcIlZpZGVvIHNlbmQgc2V0dGluZ3MgbXVzdCBjb250YWluIGF0IGxlYXN0IG1heFF1YWxpdHksIGFsbG93QWRhcHRpdmVMYXllcnMgb3IgZW5jb2RpbmdzIGF0dHJpYnV0ZVwiKTtpZih0Lm1heFF1YWxpdHkmJi0xPT09W1wibG93XCIsXCJtZWRpdW1cIixcImhpZ2hcIl0uaW5kZXhPZih0Lm1heFF1YWxpdHkpKXRocm93IG5ldyBFcnJvcihcIm1heFF1YWxpdHkgbXVzdCBiZSBlaXRoZXIgbG93LCBtZWRpdW0gb3IgaGlnaFwiKTtpZih0LmVuY29kaW5ncyl7dmFyIG89ITE7c3dpdGNoKE9iamVjdC5rZXlzKHQuZW5jb2RpbmdzKS5sZW5ndGgpe2Nhc2UgMTpvPSF0LmVuY29kaW5ncy5sb3c7YnJlYWs7Y2FzZSAyOm89IXQuZW5jb2RpbmdzLmxvd3x8IXQuZW5jb2RpbmdzLm1lZGl1bTticmVhaztjYXNlIDM6bz0hdC5lbmNvZGluZ3MubG93fHwhdC5lbmNvZGluZ3MubWVkaXVtfHwhdC5lbmNvZGluZ3MuaGlnaDticmVhaztkZWZhdWx0Om89ITB9aWYobyl0aHJvdyBuZXcgRXJyb3IoXCJFbmNvZGluZ3MgbXVzdCBiZSBkZWZpbmVkIGFzOiBsb3csIGxvdyBhbmQgbWVkaXVtLCBvciBsb3csIG1lZGl1bSBhbmQgaGlnaC5cIik7dC5lbmNvZGluZ3MubG93JiZ0aGlzLl92YWxpZGF0ZUVuY29kaW5nTGF5ZXJIYXNWYWxpZFByb3BlcnRpZXModC5lbmNvZGluZ3MubG93KSx0LmVuY29kaW5ncy5tZWRpdW0mJnRoaXMuX3ZhbGlkYXRlRW5jb2RpbmdMYXllckhhc1ZhbGlkUHJvcGVydGllcyh0LmVuY29kaW5ncy5tZWRpdW0pLHQuZW5jb2RpbmdzLmhpZ2gmJnRoaXMuX3ZhbGlkYXRlRW5jb2RpbmdMYXllckhhc1ZhbGlkUHJvcGVydGllcyh0LmVuY29kaW5ncy5oaWdoKX19fX0se2tleTpcInZhbGlkYXRlVXBkYXRlU2VuZFNldHRpbmdzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZXx8MD09PU9iamVjdC5rZXlzKGUpLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJTZW5kIHNldHRpbmdzIG11c3QgY29udGFpbiBhdCBsZWFzdCBpbmZvcm1hdGlvbiBmb3Igb25lIHRyYWNrIVwiKTtPYmplY3QuZW50cmllcyhlKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj12KGUsMikscj1uWzBdLGk9blsxXTt0Ll92YWxpZGF0ZVZpZGVvU2VuZFNldHRpbmdzKHIsaSl9KSl9fSx7a2V5OlwidXBkYXRlU2VuZFNldHRpbmdzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy52YWxpZGF0ZVVwZGF0ZVNlbmRTZXR0aW5ncyhlKSx0aGlzLm5lZWRzTG9hZCgpPyh0aGlzLl9wcmVsb2FkQ2FjaGUuc2VuZFNldHRpbmdzPWUse3NlbmRTZXR0aW5nczp0aGlzLl9wcmVsb2FkQ2FjaGUuc2VuZFNldHRpbmdzfSk6bmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInVwZGF0ZS1zZW5kLXNldHRpbmdzXCIsc2VuZFNldHRpbmdzOmV9LChmdW5jdGlvbihlKXtlLmVycm9yP3IoZS5lcnJvcik6bihlLnNlbmRTZXR0aW5ncyl9KSl9KSl9fSx7a2V5OlwiZ2V0U2VuZFNldHRpbmdzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VuZFNldHRpbmdzfHx0aGlzLl9wcmVsb2FkQ2FjaGUuc2VuZFNldHRpbmdzfX0se2tleTpcImdldExvY2FsQXVkaW9MZXZlbFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2FsQXVkaW9MZXZlbH19LHtrZXk6XCJnZXRSZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbH19LHtrZXk6XCJnZXRBY3RpdmVTcGVha2VyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gVXMoKSx0aGlzLl9hY3RpdmVTcGVha2VyfX0se2tleTpcInNldEFjdGl2ZVNwZWFrZXJNb2RlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIFVzKCksdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1hY3RpdmUtc3BlYWtlci1tb2RlXCIsZW5hYmxlZDplfSksdGhpc319LHtrZXk6XCJhY3RpdmVTcGVha2VyTW9kZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFVzKCksdGhpcy5fYWN0aXZlU3BlYWtlck1vZGV9fSx7a2V5Olwic3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJlbG9hZENhY2hlLnN1YnNjcmliZVRvVHJhY2tzQXV0b21hdGljYWxseX19LHtrZXk6XCJzZXRTdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHlcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gTHModGhpcy5fY2FsbFN0YXRlLFwic2V0U3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5KClcIixcIlVzZSB0aGUgc3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5IGNvbmZpZ3VyYXRpb24gcHJvcGVydHkuXCIpLHRoaXMuX3ByZWxvYWRDYWNoZS5zdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHk9ZSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXN1YnNjcmliZS10by10cmFja3MtYXV0b21hdGljYWxseVwiLGVuYWJsZWQ6ZX0pLHRoaXN9fSx7a2V5OlwiZW51bWVyYXRlRGV2aWNlc1wiLHZhbHVlOihmPWgoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXM7aWYodGhpcy5fY2FsbE9iamVjdE1vZGUpe3ZhciB0PXlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpO3JldHVyblwiRmlyZWZveFwiPT09cGEoKSYmaGEoKS5tYWpvcj4xMTUmJmhhKCkubWFqb3I8MTIzJiYodD10LmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb291dHB1dFwiIT09ZS5raW5kfSkpKSx7ZGV2aWNlczp0Lm1hcCgoZnVuY3Rpb24oZSl7dmFyIHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSk7aWYoIW5hKCkmJlwidmlkZW9pbnB1dFwiPT09ZS5raW5kJiZlLmdldENhcGFiaWxpdGllcyl7dmFyIG4scj1lLmdldENhcGFiaWxpdGllcygpO3QuZmFjaW5nPShudWxsPT1yfHxudWxsPT09KG49ci5mYWNpbmdNb2RlKXx8dm9pZCAwPT09bj92b2lkIDA6bi5sZW5ndGgpPj0xP3IuZmFjaW5nTW9kZVswXTp2b2lkIDB9cmV0dXJuIHR9KSl9fXJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7ZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImVudW1lcmF0ZS1kZXZpY2VzXCJ9LChmdW5jdGlvbihlKXt0KHtkZXZpY2VzOmUuZGV2aWNlc30pfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzZW5kQXBwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIipcIjtpZihMcyh0aGlzLl9jYWxsU3RhdGUsXCJzZW5kQXBwTWVzc2FnZSgpXCIpLEpTT04uc3RyaW5naWZ5KGUpLmxlbmd0aD50aGlzLl9tYXhBcHBNZXNzYWdlU2l6ZSl0aHJvdyBuZXcgRXJyb3IoXCJNZXNzYWdlIGRhdGEgdG9vIGxhcmdlLiBNYXggc2l6ZSBpcyBcIit0aGlzLl9tYXhBcHBNZXNzYWdlU2l6ZSk7cmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJhcHAtbXNnXCIsZGF0YTplLHRvOnR9KSx0aGlzfX0se2tleTpcImFkZEZha2VQYXJ0aWNpcGFudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBVcygpLExzKHRoaXMuX2NhbGxTdGF0ZSxcImFkZEZha2VQYXJ0aWNpcGFudCgpXCIpLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKGZzKHthY3Rpb246XCJhZGQtZmFrZS1wYXJ0aWNpcGFudFwifSxlKSksdGhpc319LHtrZXk6XCJzZXRTaG93TmFtZXNNb2RlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEJzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic2V0U2hvd05hbWVzTW9kZSgpXCIpLFVzKCksZSYmXCJhbHdheXNcIiE9PWUmJlwibmV2ZXJcIiE9PWU/KGNvbnNvbGUuZXJyb3IoJ3NldFNob3dOYW1lc01vZGUgYXJndW1lbnQgc2hvdWxkIGJlIFwiYWx3YXlzXCIsIFwibmV2ZXJcIiwgb3IgZmFsc2UnKSx0aGlzKToodGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1zaG93LW5hbWVzXCIsbW9kZTplfSksdGhpcyl9fSx7a2V5Olwic2V0U2hvd0xvY2FsVmlkZW9cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF07cmV0dXJuIEJzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic2V0U2hvd0xvY2FsVmlkZW8oKVwiKSxVcygpLExzKHRoaXMuX2NhbGxTdGF0ZSxcInNldFNob3dMb2NhbFZpZGVvKClcIiksXCJib29sZWFuXCIhPXR5cGVvZiBlPyhjb25zb2xlLmVycm9yKFwic2V0U2hvd0xvY2FsVmlkZW8gb25seSBhY2NlcHRzIGEgYm9vbGVhbiB2YWx1ZVwiKSx0aGlzKToodGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1zaG93LWxvY2FsLXZpZGVvXCIsc2hvdzplfSksdGhpcy5fc2hvd0xvY2FsVmlkZW89ZSx0aGlzKX19LHtrZXk6XCJzaG93TG9jYWxWaWRlb1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEJzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic2hvd0xvY2FsVmlkZW8oKVwiKSxVcygpLHRoaXMuX3Nob3dMb2NhbFZpZGVvfX0se2tleTpcInNldFNob3dQYXJ0aWNpcGFudHNCYXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF07cmV0dXJuIEJzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic2V0U2hvd1BhcnRpY2lwYW50c0JhcigpXCIpLFVzKCksTHModGhpcy5fY2FsbFN0YXRlLFwic2V0U2hvd1BhcnRpY2lwYW50c0JhcigpXCIpLFwiYm9vbGVhblwiIT10eXBlb2YgZT8oY29uc29sZS5lcnJvcihcInNldFNob3dQYXJ0aWNpcGFudHNCYXIgb25seSBhY2NlcHRzIGEgYm9vbGVhbiB2YWx1ZVwiKSx0aGlzKToodGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1zaG93LXBhcnRpY2lwYW50cy1iYXJcIixzaG93OmV9KSx0aGlzLl9zaG93UGFydGljaXBhbnRzQmFyPWUsdGhpcyl9fSx7a2V5Olwic2hvd1BhcnRpY2lwYW50c0JhclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEJzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic2hvd1BhcnRpY2lwYW50c0JhcigpXCIpLFVzKCksdGhpcy5fc2hvd1BhcnRpY2lwYW50c0Jhcn19LHtrZXk6XCJjdXN0b21JbnRlZ3JhdGlvbnNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBVcygpLEJzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwiY3VzdG9tSW50ZWdyYXRpb25zKClcIiksdGhpcy5fY3VzdG9tSW50ZWdyYXRpb25zfX0se2tleTpcInNldEN1c3RvbUludGVncmF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBVcygpLEJzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic2V0Q3VzdG9tSW50ZWdyYXRpb25zKClcIiksTHModGhpcy5fY2FsbFN0YXRlLFwic2V0Q3VzdG9tSW50ZWdyYXRpb25zKClcIiksS3MoZSk/KHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtY3VzdG9tLWludGVncmF0aW9uc1wiLGludGVncmF0aW9uczplfSksdGhpcy5fY3VzdG9tSW50ZWdyYXRpb25zPWUsdGhpcyk6dGhpc319LHtrZXk6XCJzdGFydEN1c3RvbUludGVncmF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoVXMoKSxCcyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInN0YXJ0Q3VzdG9tSW50ZWdyYXRpb25zKClcIiksTHModGhpcy5fY2FsbFN0YXRlLFwic3RhcnRDdXN0b21JbnRlZ3JhdGlvbnMoKVwiKSxBcnJheS5pc0FycmF5KGUpJiZlLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlfSkpfHwhQXJyYXkuaXNBcnJheShlKSYmXCJzdHJpbmdcIiE9dHlwZW9mIGUpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJzdGFydEN1c3RvbUludGVncmF0aW9ucygpIG9ubHkgYWNjZXB0cyBzdHJpbmcgfCBzdHJpbmdbXVwiKSx0aGlzO3ZhciBuPVwic3RyaW5nXCI9PXR5cGVvZiBlP1tlXTplLHI9bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiEoZSBpbiB0Ll9jdXN0b21JbnRlZ3JhdGlvbnMpfSkpO3JldHVybiByLmxlbmd0aD8oY29uc29sZS5lcnJvcihcIkNhbid0IGZpbmQgY3VzdG9tIGludGVncmF0aW9uKHMpOiBcXFwiXCIuY29uY2F0KHIuam9pbihcIiwgXCIpLCdcIicpKSx0aGlzKToodGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0YXJ0LWN1c3RvbS1pbnRlZ3JhdGlvbnNcIixpZHM6bn0pLHRoaXMpfX0se2tleTpcInN0b3BDdXN0b21JbnRlZ3JhdGlvbnNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKFVzKCksQnModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzdG9wQ3VzdG9tSW50ZWdyYXRpb25zKClcIiksTHModGhpcy5fY2FsbFN0YXRlLFwic3RvcEN1c3RvbUludGVncmF0aW9ucygpXCIpLEFycmF5LmlzQXJyYXkoZSkmJmUuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGV9KSl8fCFBcnJheS5pc0FycmF5KGUpJiZcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gY29uc29sZS5lcnJvcihcInN0b3BDdXN0b21JbnRlZ3JhdGlvbnMoKSBvbmx5IGFjY2VwdHMgc3RyaW5nIHwgc3RyaW5nW11cIiksdGhpczt2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgZT9bZV06ZSxyPW4uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hKGUgaW4gdC5fY3VzdG9tSW50ZWdyYXRpb25zKX0pKTtyZXR1cm4gci5sZW5ndGg/KGNvbnNvbGUuZXJyb3IoXCJDYW4ndCBmaW5kIGN1c3RvbSBpbnRlZ3JhdGlvbihzKTogXFxcIlwiLmNvbmNhdChyLmpvaW4oXCIsIFwiKSwnXCInKSksdGhpcyk6KHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzdG9wLWN1c3RvbS1pbnRlZ3JhdGlvbnNcIixpZHM6bn0pLHRoaXMpfX0se2tleTpcImN1c3RvbVRyYXlCdXR0b25zXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gQnModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJjdXN0b21UcmF5QnV0dG9ucygpXCIpLFVzKCksdGhpcy5fY3VzdG9tVHJheUJ1dHRvbnN9fSx7a2V5OlwidXBkYXRlQ3VzdG9tVHJheUJ1dHRvbnNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gQnModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJ1cGRhdGVDdXN0b21UcmF5QnV0dG9ucygpXCIpLFVzKCksTHModGhpcy5fY2FsbFN0YXRlLFwidXBkYXRlQ3VzdG9tVHJheUJ1dHRvbnMoKVwiKSxRcyhlKT8odGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInVwZGF0ZS1jdXN0b20tdHJheS1idXR0b25zXCIsYnRuczplfSksdGhpcy5fY3VzdG9tVHJheUJ1dHRvbnM9ZSx0aGlzKTooY29uc29sZS5lcnJvcihcInVwZGF0ZUN1c3RvbVRyYXlCdXR0b25zIG9ubHkgYWNjZXB0cyBhIGRpY3Rpb25hcnkgb2YgdGhlIHR5cGUgXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KFRzKSkpLHRoaXMpfX0se2tleTpcInRoZW1lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gQnModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJ0aGVtZSgpXCIpLHRoaXMucHJvcGVydGllcy50aGVtZX19LHtrZXk6XCJzZXRUaGVtZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIEJzKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic2V0VGhlbWUoKVwiKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0cnl7dC52YWxpZGF0ZVByb3BlcnRpZXMoe3RoZW1lOmV9KSx0LnByb3BlcnRpZXMudGhlbWU9ZnMoe30sZSksdC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC10aGVtZVwiLHRoZW1lOnQucHJvcGVydGllcy50aGVtZX0pO3RyeXt0LmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpGaSx0aGVtZTp0LnByb3BlcnRpZXMudGhlbWV9KX1jYXRjaChlKXtjb25zb2xlLmxvZyhcImNvdWxkIG5vdCBlbWl0ICd0aGVtZS11cGRhdGVkJ1wiLGUpfW4odC5wcm9wZXJ0aWVzLnRoZW1lKX1jYXRjaChlKXtyKGUpfX0pKX19LHtrZXk6XCJyZXF1ZXN0RnVsbHNjcmVlblwiLHZhbHVlOihwPWgoKGZ1bmN0aW9uKigpe2lmKFVzKCksdGhpcy5faWZyYW1lJiYhZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQmJm9hKCkpdHJ5eyh5aWVsZCB0aGlzLl9pZnJhbWUucmVxdWVzdEZ1bGxzY3JlZW4pP3RoaXMuX2lmcmFtZS5yZXF1ZXN0RnVsbHNjcmVlbigpOnRoaXMuX2lmcmFtZS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpfWNhdGNoKGUpe2NvbnNvbGUubG9nKFwiY291bGQgbm90IG1ha2UgdmlkZW8gY2FsbCBmdWxsc2NyZWVuXCIsZSl9fSkpLGZ1bmN0aW9uKCl7cmV0dXJuIHAuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJleGl0RnVsbHNjcmVlblwiLHZhbHVlOmZ1bmN0aW9uKCl7VXMoKSxkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudD9kb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOmRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50JiZkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpfX0se2tleTpcImdldFNpZGViYXJWaWV3XCIsdmFsdWU6KHU9aCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fY2FsbE9iamVjdE1vZGU/KGNvbnNvbGUuZXJyb3IoXCJnZXRTaWRlYmFyVmlldyBpcyBub3QgYXZhaWxhYmxlIGluIGNhbGxPYmplY3QgbW9kZVwiKSxQcm9taXNlLnJlc29sdmUobnVsbCkpOm5ldyBQcm9taXNlKChmdW5jdGlvbih0KXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZ2V0LXNpZGViYXItdmlld1wifSwoZnVuY3Rpb24oZSl7dChlLnZpZXcpfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzZXRTaWRlYmFyVmlld1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jYWxsT2JqZWN0TW9kZT8oY29uc29sZS5lcnJvcihcInNldFNpZGViYXJWaWV3IGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbE9iamVjdCBtb2RlXCIpLHRoaXMpOih0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LXNpZGViYXItdmlld1wiLHZpZXc6ZX0pLHRoaXMpfX0se2tleTpcInJvb21cIix2YWx1ZToobD1oKChmdW5jdGlvbiooKXt2YXIgZT10aGlzLHQ9KGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSkuaW5jbHVkZVJvb21Db25maWdEZWZhdWx0cyxuPXZvaWQgMD09PXR8fHQ7cmV0dXJuIHRoaXMuX2FjY2Vzc1N0YXRlLmFjY2Vzcz09PXBpfHx0aGlzLm5lZWRzTG9hZCgpP3RoaXMucHJvcGVydGllcy51cmw/e3Jvb21VcmxQZW5kaW5nSm9pbjp0aGlzLnByb3BlcnRpZXMudXJsfTpudWxsOm5ldyBQcm9taXNlKChmdW5jdGlvbih0KXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwibGliLXJvb20taW5mb1wiLGluY2x1ZGVSb29tQ29uZmlnRGVmYXVsdHM6bn0sKGZ1bmN0aW9uKGUpe2RlbGV0ZSBlLmFjdGlvbixkZWxldGUgZS5jYWxsYmFja1N0YW1wLHQoZSl9KSl9KSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gbC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImdlb1wiLHZhbHVlOihzPWgoKGZ1bmN0aW9uKigpe3RyeXt2YXIgZT15aWVsZCBmZXRjaChcImh0dHBzOi8vZ3MuZGFpbHkuY28vX2tzXy94LXN3c2wvOlwiKTtyZXR1cm57Y3VycmVudDooeWllbGQgZS5qc29uKCkpLmdlb319Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJnZW8gbG9va3VwIGZhaWxlZFwiLGUpLHtjdXJyZW50OlwiXCJ9fX0pKSxmdW5jdGlvbigpe3JldHVybiBzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5Olwic2V0TmV0d29ya1RvcG9sb2d5XCIsdmFsdWU6KGk9aCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXM7cmV0dXJuIFVzKCksTHModGhpcy5fY2FsbFN0YXRlLFwic2V0TmV0d29ya1RvcG9sb2d5KClcIiksbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1uZXR3b3JrLXRvcG9sb2d5XCIsb3B0czplfSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9yKHtlcnJvcjplLmVycm9yfSk6bih7d29ya2VySWQ6ZS53b3JrZXJJZH0pfSkpfSkpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiZ2V0TmV0d29ya1RvcG9sb2d5XCIsdmFsdWU6KHI9aCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7ZS5uZWVkc0xvYWQoKSYmdCh7dG9wb2xvZ3k6XCJub25lXCJ9KSxlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZ2V0LW5ldHdvcmstdG9wb2xvZ3lcIn0sKGZ1bmN0aW9uKGUpe2UuZXJyb3I/bih7ZXJyb3I6ZS5lcnJvcn0pOnQoe3RvcG9sb2d5OmUudG9wb2xvZ3l9KX0pKX0pKX0pKSxmdW5jdGlvbigpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5Olwic2V0UGxheU5ld1BhcnRpY2lwYW50U291bmRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihVcygpLFwibnVtYmVyXCIhPXR5cGVvZiBlJiYhMCE9PWUmJiExIT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJhcmd1bWVudCB0byBzZXRTaG91bGRQbGF5TmV3UGFydGljaXBhbnRTb3VuZCBzaG91bGQgYmUgdHJ1ZSwgZmFsc2UsIG9yIGEgbnVtYmVyLCBidXQgaXMgXCIuY29uY2F0KGUpKTt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXNldC1wbGF5LWRpbmdcIixhcmc6ZX0pfX0se2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZy5wcm90b3R5cGUub24uY2FsbCh0aGlzLGUsdCl9fSx7a2V5Olwib25jZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGcucHJvdG90eXBlLm9uY2UuY2FsbCh0aGlzLGUsdCl9fSx7a2V5Olwib2ZmXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZy5wcm90b3R5cGUub2ZmLmNhbGwodGhpcyxlLHQpfX0se2tleTpcInZhbGlkYXRlUHJvcGVydGllc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXtpZighT3NbdF0pdGhyb3cgbmV3IEVycm9yKFwidW5yZWNvZ25pemVkIHByb3BlcnR5ICdcIi5jb25jYXQodCxcIidcIikpO2lmKE9zW3RdLnZhbGlkYXRlJiYhT3NbdF0udmFsaWRhdGUoZVt0XSx0aGlzKSl0aHJvdyBuZXcgRXJyb3IoXCJwcm9wZXJ0eSAnXCIuY29uY2F0KHQsXCInOiBcIikuY29uY2F0KE9zW3RdLmhlbHApKX19fSx7a2V5OlwiYXNzZW1ibGVNZWV0aW5nVXJsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSx0LG49ZnMoZnMoe30sdGhpcy5wcm9wZXJ0aWVzKSx7fSx7ZW1iOnRoaXMuY2FsbENsaWVudElkLGVtYkhyZWY6ZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSxwcm94eTpudWxsIT09KGU9dGhpcy5wcm9wZXJ0aWVzLmRhaWx5Q29uZmlnKSYmdm9pZCAwIT09ZSYmZS5wcm94eVVybD9lbmNvZGVVUklDb21wb25lbnQobnVsbD09PSh0PXRoaXMucHJvcGVydGllcy5kYWlseUNvbmZpZyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucHJveHlVcmwpOnZvaWQgMH0pLHI9bi51cmwubWF0Y2goL1xcPy8pP1wiJlwiOlwiP1wiO3JldHVybiBuLnVybCtyK09iamVjdC5rZXlzKE9zKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBPc1tlXS5xdWVyeVN0cmluZyYmdm9pZCAwIT09bltlXX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KE9zW2VdLnF1ZXJ5U3RyaW5nLFwiPVwiKS5jb25jYXQobltlXSl9KSkuam9pbihcIiZcIil9fSx7a2V5OlwibmVlZHNMb2FkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5bWnIsZWksaWksb2ldLmluY2x1ZGVzKHRoaXMuX2NhbGxTdGF0ZSl9fSx7a2V5Olwic2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9kZXN0cm95ZWQmJih0aGlzLl9sb2dVc2VBZnRlckRlc3Ryb3koKSx0aGlzLnN0cmljdE1vZGUpKXRocm93IG5ldyBFcnJvcihcIlVzZSBhZnRlciBkZXN0cm95XCIpO3RoaXMuX21lc3NhZ2VDaGFubmVsLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShlLHQsdGhpcy5jYWxsQ2xpZW50SWQsdGhpcy5faWZyYW1lKX19LHtrZXk6XCJmb3J3YXJkUGFja2FnZWRNZXNzYWdlVG9DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX21lc3NhZ2VDaGFubmVsLmZvcndhcmRQYWNrYWdlZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKGUsdGhpcy5faWZyYW1lLHRoaXMuY2FsbENsaWVudElkKX19LHtrZXk6XCJhZGRMaXN0ZW5lckZvclBhY2thZ2VkTWVzc2FnZXNGcm9tQ2FsbE1hY2hpbmVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUNoYW5uZWwuYWRkTGlzdGVuZXJGb3JQYWNrYWdlZE1lc3NhZ2VzRnJvbUNhbGxNYWNoaW5lKGUsdGhpcy5jYWxsQ2xpZW50SWQpfX0se2tleTpcInJlbW92ZUxpc3RlbmVyRm9yUGFja2FnZWRNZXNzYWdlc0Zyb21DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX21lc3NhZ2VDaGFubmVsLnJlbW92ZUxpc3RlbmVyRm9yUGFja2FnZWRNZXNzYWdlc0Zyb21DYWxsTWFjaGluZShlKX19LHtrZXk6XCJoYW5kbGVNZXNzYWdlRnJvbUNhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24odCl7c3dpdGNoKHQuYWN0aW9uKXtjYXNlIE5pOnRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKGZzKHthY3Rpb246Uml9LHRoaXMucHJvcGVydGllcykpO2JyZWFrO2Nhc2VcImNhbGwtbWFjaGluZS1pbml0aWFsaXplZFwiOnRoaXMuX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQ9ITA7dmFyIG49e2FjdGlvbjp6byxsZXZlbDpcImxvZ1wiLGNvZGU6MTAxMSxzdGF0czp7ZXZlbnQ6XCJidW5kbGUgbG9hZFwiLHRpbWU6XCJuby1vcFwiPT09dGhpcy5fYnVuZGxlTG9hZFRpbWU/MDp0aGlzLl9idW5kbGVMb2FkVGltZSxwcmVMb2FkZWQ6XCJuby1vcFwiPT09dGhpcy5fYnVuZGxlTG9hZFRpbWUsdXJsOlgodGhpcy5wcm9wZXJ0aWVzLmRhaWx5Q29uZmlnKX19O3RoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKG4pLHRoaXMuX2RlbGF5RHVwbGljYXRlSW5zdGFuY2VMb2cmJnRoaXMuX2xvZ0R1cGxpY2F0ZUluc3RhbmNlQXR0ZW1wdCgpO2JyZWFrO2Nhc2UgVmk6dGhpcy5fbG9hZGVkQ2FsbGJhY2smJih0aGlzLl9sb2FkZWRDYWxsYmFjaygpLHRoaXMuX2xvYWRlZENhbGxiYWNrPW51bGwpLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIFdpOnZhciByLGk9ZnMoe30sdCk7ZGVsZXRlIGkuaW50ZXJuYWwsdGhpcy5fbWF4QXBwTWVzc2FnZVNpemU9KG51bGw9PT0ocj10LmludGVybmFsKXx8dm9pZCAwPT09cj92b2lkIDA6ci5fbWF4QXBwTWVzc2FnZVNpemUpfHxWbyx0aGlzLl9qb2luZWRDYWxsYmFjayYmKHRoaXMuX2pvaW5lZENhbGxiYWNrKHQucGFydGljaXBhbnRzKSx0aGlzLl9qb2luZWRDYWxsYmFjaz1udWxsKSx0aGlzLmVtaXREYWlseUpTRXZlbnQoaSk7YnJlYWs7Y2FzZSBIaTpjYXNlIEdpOmlmKHRoaXMuX2NhbGxTdGF0ZT09PWlpKXJldHVybjtpZih0LnBhcnRpY2lwYW50JiZ0LnBhcnRpY2lwYW50LnNlc3Npb25faWQpe3ZhciBvPXQucGFydGljaXBhbnQubG9jYWw/XCJsb2NhbFwiOnQucGFydGljaXBhbnQuc2Vzc2lvbl9pZDtpZih0aGlzLl9jYWxsT2JqZWN0TW9kZSl7dmFyIGE9dGhpcy5fY2FsbE1hY2hpbmUoKS5zdG9yZTtHYSh0LnBhcnRpY2lwYW50LGEpLFFhKHQucGFydGljaXBhbnQsYSksWWEodC5wYXJ0aWNpcGFudCx0aGlzLl9wYXJ0aWNpcGFudHNbb10sYSl9dHJ5e3RoaXMubWF5YmVQYXJ0aWNpcGFudFRyYWNrc1N0b3BwZWQodGhpcy5fcGFydGljaXBhbnRzW29dLHQucGFydGljaXBhbnQpLHRoaXMubWF5YmVQYXJ0aWNpcGFudFRyYWNrc1N0YXJ0ZWQodGhpcy5fcGFydGljaXBhbnRzW29dLHQucGFydGljaXBhbnQpLHRoaXMubWF5YmVFdmVudFJlY29yZGluZ1N0b3BwZWQodGhpcy5fcGFydGljaXBhbnRzW29dLHQucGFydGljaXBhbnQpLHRoaXMubWF5YmVFdmVudFJlY29yZGluZ1N0YXJ0ZWQodGhpcy5fcGFydGljaXBhbnRzW29dLHQucGFydGljaXBhbnQpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJ0cmFjayBldmVudHMgZXJyb3JcIixlKX10aGlzLmNvbXBhcmVFcXVhbEZvclBhcnRpY2lwYW50VXBkYXRlRXZlbnQodC5wYXJ0aWNpcGFudCx0aGlzLl9wYXJ0aWNpcGFudHNbb10pfHwodGhpcy5fcGFydGljaXBhbnRzW29dPWZzKHt9LHQucGFydGljaXBhbnQpLHRoaXMudG9nZ2xlUGFydGljaXBhbnRBdWRpb0Jhc2VkT25OYXRpdmVBdWRpb0ZvY3VzKCksdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpKX1icmVhaztjYXNlIFFpOmlmKHQucGFydGljaXBhbnQmJnQucGFydGljaXBhbnQuc2Vzc2lvbl9pZCl7dmFyIHM9dGhpcy5fcGFydGljaXBhbnRzW3QucGFydGljaXBhbnQuc2Vzc2lvbl9pZF07cyYmdGhpcy5tYXliZVBhcnRpY2lwYW50VHJhY2tzU3RvcHBlZChzLG51bGwpLGRlbGV0ZSB0aGlzLl9wYXJ0aWNpcGFudHNbdC5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkXSx0aGlzLmVtaXREYWlseUpTRXZlbnQodCl9YnJlYWs7Y2FzZSBLaTpEKHRoaXMuX3BhcnRpY2lwYW50Q291bnRzLHQucGFydGljaXBhbnRDb3VudHMpfHwodGhpcy5fcGFydGljaXBhbnRDb3VudHM9dC5wYXJ0aWNpcGFudENvdW50cyx0aGlzLmVtaXREYWlseUpTRXZlbnQodCkpO2JyZWFrO2Nhc2UgWWk6dmFyIGM9e2FjY2Vzczp0LmFjY2Vzc307dC5hd2FpdGluZ0FjY2VzcyYmKGMuYXdhaXRpbmdBY2Nlc3M9dC5hd2FpdGluZ0FjY2VzcyksRCh0aGlzLl9hY2Nlc3NTdGF0ZSxjKXx8KHRoaXMuX2FjY2Vzc1N0YXRlPWMsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpKTticmVhaztjYXNlIFhpOmlmKHQubWVldGluZ1Nlc3Npb24pe3RoaXMuX21lZXRpbmdTZXNzaW9uU3VtbWFyeT10Lm1lZXRpbmdTZXNzaW9uLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTt2YXIgbD1mcyhmcyh7fSx0KSx7fSx7YWN0aW9uOlwibWVldGluZy1zZXNzaW9uLXVwZGF0ZWRcIn0pO3RoaXMuZW1pdERhaWx5SlNFdmVudChsKX1icmVhaztjYXNlIFVvOnZhciB1O3RoaXMuX2lmcmFtZSYmIXQucHJlc2VydmVJZnJhbWUmJih0aGlzLl9pZnJhbWUuc3JjPVwiXCIpLHRoaXMuX3VwZGF0ZUNhbGxTdGF0ZShvaSksdGhpcy5yZXNldE1lZXRpbmdEZXBlbmRlbnRWYXJzKCksdGhpcy5fbG9hZGVkQ2FsbGJhY2smJih0aGlzLl9sb2FkZWRDYWxsYmFjayh0LmVycm9yTXNnKSx0aGlzLl9sb2FkZWRDYWxsYmFjaz1udWxsKSx0LnByZXNlcnZlSWZyYW1lO3ZhciBkPWUodCxwcyk7bnVsbCE9ZCYmbnVsbCE9PSh1PWQuZXJyb3IpJiZ2b2lkIDAhPT11JiZ1LmRldGFpbHMmJihkLmVycm9yLmRldGFpbHM9SlNPTi5wYXJzZShkLmVycm9yLmRldGFpbHMpKSx0aGlzLl9tYXliZVNlbmRUb1NlbnRyeSh0KSx0aGlzLl9qb2luZWRDYWxsYmFjayYmKHRoaXMuX2pvaW5lZENhbGxiYWNrKG51bGwsZCksdGhpcy5fam9pbmVkQ2FsbGJhY2s9bnVsbCksdGhpcy5lbWl0RGFpbHlKU0V2ZW50KGQpO2JyZWFrO2Nhc2Ugemk6dGhpcy5fY2FsbFN0YXRlIT09b2kmJnRoaXMuX3VwZGF0ZUNhbGxTdGF0ZShpaSksdGhpcy5yZXNldE1lZXRpbmdEZXBlbmRlbnRWYXJzKCksdGhpcy5fcmVzb2x2ZUxlYXZlJiYodGhpcy5fcmVzb2x2ZUxlYXZlKCksdGhpcy5fcmVzb2x2ZUxlYXZlPW51bGwpLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlXCJzZWxlY3RlZC1kZXZpY2VzLXVwZGF0ZWRcIjp0LmRldmljZXMmJnRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIEVvOnZhciBwPXQudGhyZXNob2xkLGg9dC5xdWFsaXR5O3A9PT10aGlzLl9uZXR3b3JrLnRocmVzaG9sZCYmaD09PXRoaXMuX25ldHdvcmsucXVhbGl0eXx8KHRoaXMuX25ldHdvcmsucXVhbGl0eT1oLHRoaXMuX25ldHdvcmsudGhyZXNob2xkPXAsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpKTticmVhaztjYXNlIFBvOnQmJnQuY3B1TG9hZFN0YXRlJiZ0aGlzLmVtaXREYWlseUpTRXZlbnQodCk7YnJlYWs7Y2FzZSBPbzp0JiZ2b2lkIDAhPT10LmZhY2VDb3VudHMmJnRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIE1vOnZhciBmPXQuYWN0aXZlU3BlYWtlcjt0aGlzLl9hY3RpdmVTcGVha2VyLnBlZXJJZCE9PWYucGVlcklkJiYodGhpcy5fYWN0aXZlU3BlYWtlci5wZWVySWQ9Zi5wZWVySWQsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246dC5hY3Rpb24sYWN0aXZlU3BlYWtlcjp0aGlzLl9hY3RpdmVTcGVha2VyfSkpO2JyZWFrO2Nhc2VcInNob3ctbG9jYWwtdmlkZW8tY2hhbmdlZFwiOmlmKHRoaXMuX2NhbGxPYmplY3RNb2RlKXJldHVybjt2YXIgdj10LnNob3c7dGhpcy5fc2hvd0xvY2FsVmlkZW89dix0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjp0LmFjdGlvbixzaG93OnZ9KTticmVhaztjYXNlIENvOnZhciBtPXQuZW5hYmxlZDt0aGlzLl9hY3RpdmVTcGVha2VyTW9kZSE9PW0mJih0aGlzLl9hY3RpdmVTcGVha2VyTW9kZT1tLHRoaXMuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOnQuYWN0aW9uLGVuYWJsZWQ6dGhpcy5fYWN0aXZlU3BlYWtlck1vZGV9KSk7YnJlYWs7Y2FzZSB0bzpjYXNlIG5vOmNhc2Ugcm86dGhpcy5fd2FpdGluZ1BhcnRpY2lwYW50cz10LmFsbFdhaXRpbmdQYXJ0aWNpcGFudHMsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246dC5hY3Rpb24scGFydGljaXBhbnQ6dC5wYXJ0aWNpcGFudH0pO2JyZWFrO2Nhc2UgUm86RCh0aGlzLl9yZWNlaXZlU2V0dGluZ3MsdC5yZWNlaXZlU2V0dGluZ3MpfHwodGhpcy5fcmVjZWl2ZVNldHRpbmdzPXQucmVjZWl2ZVNldHRpbmdzLHRoaXMuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOnQuYWN0aW9uLHJlY2VpdmVTZXR0aW5nczp0LnJlY2VpdmVTZXR0aW5nc30pKTticmVhaztjYXNlIEZvOmlmKCFEKHRoaXMuX2lucHV0U2V0dGluZ3MsdC5pbnB1dFNldHRpbmdzKSl7dmFyIGc9dGhpcy5fZ2V0SW5wdXRTZXR0aW5ncygpO3RoaXMuX2lucHV0U2V0dGluZ3M9dC5pbnB1dFNldHRpbmdzLHRoaXMuX3ByZWxvYWRDYWNoZS5pbnB1dFNldHRpbmdzPXt9LEQoZyx0aGlzLl9nZXRJbnB1dFNldHRpbmdzKCkpfHx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjp0LmFjdGlvbixpbnB1dFNldHRpbmdzOnRoaXMuX2dldElucHV0U2V0dGluZ3MoKX0pfWJyZWFrO2Nhc2VcInNlbmQtc2V0dGluZ3MtdXBkYXRlZFwiOkQodGhpcy5fc2VuZFNldHRpbmdzLHQuc2VuZFNldHRpbmdzKXx8KHRoaXMuX3NlbmRTZXR0aW5ncz10LnNlbmRTZXR0aW5ncyx0aGlzLl9wcmVsb2FkQ2FjaGUuc2VuZFNldHRpbmdzPW51bGwsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246dC5hY3Rpb24sc2VuZFNldHRpbmdzOnQuc2VuZFNldHRpbmdzfSkpO2JyZWFrO2Nhc2VcImxvY2FsLWF1ZGlvLWxldmVsXCI6dGhpcy5fbG9jYWxBdWRpb0xldmVsPXQuYXVkaW9MZXZlbCx0aGlzLl9wcmVsb2FkQ2FjaGUubG9jYWxBdWRpb0xldmVsT2JzZXJ2ZXI9bnVsbCx0aGlzLmVtaXREYWlseUpTRXZlbnQodCk7YnJlYWs7Y2FzZVwicmVtb3RlLXBhcnRpY2lwYW50cy1hdWRpby1sZXZlbFwiOnRoaXMuX3JlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWw9dC5wYXJ0aWNpcGFudHNBdWRpb0xldmVsLHRoaXMuX3ByZWxvYWRDYWNoZS5yZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXI9bnVsbCx0aGlzLmVtaXREYWlseUpTRXZlbnQodCk7YnJlYWs7Y2FzZSB5bzp2YXIgeT10LnNlc3Npb25faWQ7dGhpcy5fcm1wUGxheWVyU3RhdGVbeV09dC5wbGF5ZXJTdGF0ZSx0aGlzLmVtaXREYWlseUpTRXZlbnQodCk7YnJlYWs7Y2FzZSBibzpkZWxldGUgdGhpcy5fcm1wUGxheWVyU3RhdGVbdC5zZXNzaW9uX2lkXSx0aGlzLmVtaXREYWlseUpTRXZlbnQodCk7YnJlYWs7Y2FzZSBfbzp2YXIgXz10LnNlc3Npb25faWQsYj10aGlzLl9ybXBQbGF5ZXJTdGF0ZVtfXTtiJiZ0aGlzLmNvbXBhcmVFcXVhbEZvclJNUFVwZGF0ZUV2ZW50KGIsdC5yZW1vdGVNZWRpYVBsYXllclN0YXRlKXx8KHRoaXMuX3JtcFBsYXllclN0YXRlW19dPXQucmVtb3RlTWVkaWFQbGF5ZXJTdGF0ZSx0aGlzLmVtaXREYWlseUpTRXZlbnQodCkpO2JyZWFrO2Nhc2VcImN1c3RvbS1idXR0b24tY2xpY2tcIjpjYXNlXCJzaWRlYmFyLXZpZXctY2hhbmdlZFwiOnRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIFppOnZhciB3PXRoaXMuX21lZXRpbmdTZXNzaW9uU3RhdGUudG9wb2xvZ3khPT0odC5tZWV0aW5nU2Vzc2lvblN0YXRlJiZ0Lm1lZXRpbmdTZXNzaW9uU3RhdGUudG9wb2xvZ3kpO3RoaXMuX21lZXRpbmdTZXNzaW9uU3RhdGU9dGModC5tZWV0aW5nU2Vzc2lvblN0YXRlLHRoaXMuX2NhbGxPYmplY3RNb2RlKSwodGhpcy5fY2FsbE9iamVjdE1vZGV8fHcpJiZ0aGlzLmVtaXREYWlseUpTRXZlbnQodCk7YnJlYWs7Y2FzZSB3bzp0aGlzLl9pc1NjcmVlblNoYXJpbmc9ITAsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO2JyZWFrO2Nhc2UgU286Y2FzZSBrbzp0aGlzLl9pc1NjcmVlblNoYXJpbmc9ITEsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO2JyZWFrO2Nhc2UgbG86Y2FzZSB1bzpjYXNlIHBvOmNhc2UgaG86Y2FzZSBmbzpjYXNlIGFvOmNhc2Ugc286Y2FzZSBjbzpjYXNlIEppOmNhc2UgJGk6Y2FzZSBtbzpjYXNlIGdvOmNhc2VcInRlc3QtY29tcGxldGVkXCI6Y2FzZSBUbzpjYXNlIHZvOmNhc2UgeG86Y2FzZSBMbzpjYXNlIElvOmNhc2UgRG86Y2FzZSBCbzpjYXNlIE5vOmNhc2VcImRpYWxpbi1yZWFkeVwiOmNhc2VcImRpYWxpbi1jb25uZWN0ZWRcIjpjYXNlXCJkaWFsaW4tZXJyb3JcIjpjYXNlXCJkaWFsaW4tc3RvcHBlZFwiOmNhc2VcImRpYWxpbi13YXJuaW5nXCI6Y2FzZVwiZGlhbG91dC1jb25uZWN0ZWRcIjpjYXNlXCJkaWFsb3V0LWFuc3dlcmVkXCI6Y2FzZVwiZGlhbG91dC1lcnJvclwiOmNhc2VcImRpYWxvdXQtc3RvcHBlZFwiOmNhc2VcImRpYWxvdXQtd2FybmluZ1wiOnRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlXCJyZXF1ZXN0LWZ1bGxzY3JlZW5cIjp0aGlzLnJlcXVlc3RGdWxsc2NyZWVuKCk7YnJlYWs7Y2FzZVwicmVxdWVzdC1leGl0LWZ1bGxzY3JlZW5cIjp0aGlzLmV4aXRGdWxsc2NyZWVuKCl9fX0se2tleTpcIm1heWJlRXZlbnRSZWNvcmRpbmdTdG9wcGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cInJlY29yZFwiO2UmJih0LmxvY2FsfHwhMSE9PXRbbl18fGVbbl09PT10W25dfHx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjp1b30pKX19LHtrZXk6XCJtYXliZUV2ZW50UmVjb3JkaW5nU3RhcnRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJyZWNvcmRcIjtlJiYodC5sb2NhbHx8ITAhPT10W25dfHxlW25dPT09dFtuXXx8dGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246bG99KSl9fSx7a2V5OlwibWF5YmVFdmVudFRyYWNrU3RvcHBlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLHIpe2UmJihcImVuZGVkXCIhPT1lLnJlYWR5U3RhdGUmJnQmJmUuaWQ9PT10LmlkfHx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpvbyx0cmFjazplLHBhcnRpY2lwYW50Om4sdHlwZTpyfSkpfX0se2tleTpcIm1heWJlRXZlbnRUcmFja1N0YXJ0ZWRcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixyKXt0JiYoZSYmXCJlbmRlZFwiIT09ZS5yZWFkeVN0YXRlJiZ0LmlkPT09ZS5pZHx8dGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246aW8sdHJhY2s6dCxwYXJ0aWNpcGFudDpuLHR5cGU6cn0pKX19LHtrZXk6XCJtYXliZVBhcnRpY2lwYW50VHJhY2tzU3RvcHBlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoZSlmb3IodmFyIG4gaW4gZS50cmFja3MpdGhpcy5tYXliZUV2ZW50VHJhY2tTdG9wcGVkKGUudHJhY2tzW25dLnRyYWNrLHQmJnQudHJhY2tzW25dP3QudHJhY2tzW25dLnRyYWNrOm51bGwsdCxuKX19LHtrZXk6XCJtYXliZVBhcnRpY2lwYW50VHJhY2tzU3RhcnRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodClmb3IodmFyIG4gaW4gdC50cmFja3MpdGhpcy5tYXliZUV2ZW50VHJhY2tTdGFydGVkKGUmJmUudHJhY2tzW25dP2UudHJhY2tzW25dLnRyYWNrOm51bGwsdC50cmFja3Nbbl0udHJhY2ssdCxuKX19LHtrZXk6XCJjb21wYXJlRXF1YWxGb3JSTVBVcGRhdGVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scjtyZXR1cm4gZS5zdGF0ZT09PXQuc3RhdGUmJihudWxsPT09KG49ZS5zZXR0aW5ncyl8fHZvaWQgMD09PW4/dm9pZCAwOm4udm9sdW1lKT09PShudWxsPT09KHI9dC5zZXR0aW5ncyl8fHZvaWQgMD09PXI/dm9pZCAwOnIudm9sdW1lKX19LHtrZXk6XCJlbWl0RGFpbHlKU0V2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dHJ5e2UuY2FsbENsaWVudElkPXRoaXMuY2FsbENsaWVudElkLHRoaXMuZW1pdChlLmFjdGlvbixlKX1jYXRjaCh0KXtjb25zb2xlLmxvZyhcImNvdWxkIG5vdCBlbWl0XCIsZSx0KX19fSx7a2V5OlwiY29tcGFyZUVxdWFsRm9yUGFydGljaXBhbnRVcGRhdGVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISFEKGUsdCkmJigoIWUudmlkZW9UcmFja3x8IXQudmlkZW9UcmFja3x8ZS52aWRlb1RyYWNrLmlkPT09dC52aWRlb1RyYWNrLmlkJiZlLnZpZGVvVHJhY2subXV0ZWQ9PT10LnZpZGVvVHJhY2subXV0ZWQmJmUudmlkZW9UcmFjay5lbmFibGVkPT09dC52aWRlb1RyYWNrLmVuYWJsZWQpJiYoIWUuYXVkaW9UcmFja3x8IXQuYXVkaW9UcmFja3x8ZS5hdWRpb1RyYWNrLmlkPT09dC5hdWRpb1RyYWNrLmlkJiZlLmF1ZGlvVHJhY2subXV0ZWQ9PT10LmF1ZGlvVHJhY2subXV0ZWQmJmUuYXVkaW9UcmFjay5lbmFibGVkPT09dC5hdWRpb1RyYWNrLmVuYWJsZWQpKX19LHtrZXk6XCJuYXRpdmVVdGlsc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5hKCk/XCJ1bmRlZmluZWRcIj09dHlwZW9mIERhaWx5TmF0aXZlVXRpbHM/KGNvbnNvbGUud2FybihcImluIFJlYWN0IE5hdGl2ZSwgRGFpbHlOYXRpdmVVdGlscyBpcyBleHBlY3RlZCB0byBiZSBhdmFpbGFibGVcIiksbnVsbCk6RGFpbHlOYXRpdmVVdGlsczpudWxsfX0se2tleTpcInVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdXBkYXRlQ2FsbFN0YXRlKHRoaXMuX2NhbGxTdGF0ZSxlKX19LHtrZXk6XCJfdXBkYXRlQ2FsbFN0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnRoaXMuX2lzUHJlcGFyaW5nVG9Kb2luO2lmKGUhPT10aGlzLl9jYWxsU3RhdGV8fHQhPT10aGlzLl9pc1ByZXBhcmluZ1RvSm9pbil7dmFyIG49dGhpcy5fY2FsbFN0YXRlLHI9dGhpcy5faXNQcmVwYXJpbmdUb0pvaW47dGhpcy5fY2FsbFN0YXRlPWUsdGhpcy5faXNQcmVwYXJpbmdUb0pvaW49dDt2YXIgaT10aGlzLl9jYWxsU3RhdGU9PT1yaTt0aGlzLnVwZGF0ZVNob3dBbmRyb2lkT25nb2luZ01lZXRpbmdOb3RpZmljYXRpb24oaSk7dmFyIG89SXMobixyKSxhPUlzKHRoaXMuX2NhbGxTdGF0ZSx0aGlzLl9pc1ByZXBhcmluZ1RvSm9pbik7byE9PWEmJih0aGlzLnVwZGF0ZUtlZXBEZXZpY2VBd2FrZShhKSx0aGlzLnVwZGF0ZURldmljZUF1ZGlvTW9kZShhKSx0aGlzLnVwZGF0ZU5vT3BSZWNvcmRpbmdFbnN1cmluZ0JhY2tncm91bmRDb250aW51aXR5KGEpKX19fSx7a2V5OlwicmVzZXRNZWV0aW5nRGVwZW5kZW50VmFyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcGFydGljaXBhbnRzPXt9LHRoaXMuX3BhcnRpY2lwYW50Q291bnRzPVNzLHRoaXMuX3dhaXRpbmdQYXJ0aWNpcGFudHM9e30sdGhpcy5fYWN0aXZlU3BlYWtlcj17fSx0aGlzLl9hY3RpdmVTcGVha2VyTW9kZT0hMSx0aGlzLl9kaWRQcmVBdXRoPSExLHRoaXMuX2FjY2Vzc1N0YXRlPXthY2Nlc3M6cGl9LHRoaXMuX2ZpbmFsU3VtbWFyeU9mUHJldlNlc3Npb249dGhpcy5fbWVldGluZ1Nlc3Npb25TdW1tYXJ5LHRoaXMuX21lZXRpbmdTZXNzaW9uU3VtbWFyeT17fSx0aGlzLl9tZWV0aW5nU2Vzc2lvblN0YXRlPXRjKHdzLHRoaXMuX2NhbGxPYmplY3RNb2RlKSx0aGlzLl9pc1NjcmVlblNoYXJpbmc9ITEsdGhpcy5fcmVjZWl2ZVNldHRpbmdzPXt9LHRoaXMuX2lucHV0U2V0dGluZ3M9dm9pZCAwLHRoaXMuX3NlbmRTZXR0aW5ncz17fSx0aGlzLl9sb2NhbEF1ZGlvTGV2ZWw9MCx0aGlzLl9pc0xvY2FsQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMSx0aGlzLl9yZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsPXt9LHRoaXMuX2lzUmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMSx0aGlzLl9tYXhBcHBNZXNzYWdlU2l6ZT1Wbyx0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkPSExLHRoaXMuX2J1bmRsZUxvYWRUaW1lPXZvaWQgMCx0aGlzLl9wcmVsb2FkQ2FjaGV9fSx7a2V5OlwidXBkYXRlS2VlcERldmljZUF3YWtlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7bmEoKSYmdGhpcy5uYXRpdmVVdGlscygpLnNldEtlZXBEZXZpY2VBd2FrZShlLHRoaXMuY2FsbENsaWVudElkKX19LHtrZXk6XCJ1cGRhdGVEZXZpY2VBdWRpb01vZGVcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihuYSgpJiYhdGhpcy5kaXNhYmxlUmVhY3ROYXRpdmVBdXRvRGV2aWNlTWFuYWdlbWVudChcImF1ZGlvXCIpKXt2YXIgdD1lP3RoaXMuX25hdGl2ZUluQ2FsbEF1ZGlvTW9kZTpcImlkbGVcIjt0aGlzLm5hdGl2ZVV0aWxzKCkuc2V0QXVkaW9Nb2RlKHQpfX19LHtrZXk6XCJ1cGRhdGVTaG93QW5kcm9pZE9uZ29pbmdNZWV0aW5nTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYobmEoKSYmdGhpcy5uYXRpdmVVdGlscygpLnNldFNob3dPbmdvaW5nTWVldGluZ05vdGlmaWNhdGlvbil7dmFyIHQsbixyLGk7aWYodGhpcy5wcm9wZXJ0aWVzLnJlYWN0TmF0aXZlQ29uZmlnJiZ0aGlzLnByb3BlcnRpZXMucmVhY3ROYXRpdmVDb25maWcuYW5kcm9pZEluQ2FsbE5vdGlmaWNhdGlvbil7dmFyIG89dGhpcy5wcm9wZXJ0aWVzLnJlYWN0TmF0aXZlQ29uZmlnLmFuZHJvaWRJbkNhbGxOb3RpZmljYXRpb247dD1vLnRpdGxlLG49by5zdWJ0aXRsZSxyPW8uaWNvbk5hbWUsaT1vLmRpc2FibGVGb3JDdXN0b21PdmVycmlkZX1pJiYoZT0hMSksdGhpcy5uYXRpdmVVdGlscygpLnNldFNob3dPbmdvaW5nTWVldGluZ05vdGlmaWNhdGlvbihlLHQsbixyLHRoaXMuY2FsbENsaWVudElkKX19fSx7a2V5OlwidXBkYXRlTm9PcFJlY29yZGluZ0Vuc3VyaW5nQmFja2dyb3VuZENvbnRpbnVpdHlcIix2YWx1ZTpmdW5jdGlvbihlKXtuYSgpJiZ0aGlzLm5hdGl2ZVV0aWxzKCkuZW5hYmxlTm9PcFJlY29yZGluZ0Vuc3VyaW5nQmFja2dyb3VuZENvbnRpbnVpdHkmJnRoaXMubmF0aXZlVXRpbHMoKS5lbmFibGVOb09wUmVjb3JkaW5nRW5zdXJpbmdCYWNrZ3JvdW5kQ29udGludWl0eShlKX19LHtrZXk6XCJ0b2dnbGVQYXJ0aWNpcGFudEF1ZGlvQmFzZWRPbk5hdGl2ZUF1ZGlvRm9jdXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQ7aWYobmEoKSl7dmFyIG49bnVsbD09PShlPXRoaXMuX2NhbGxNYWNoaW5lKCkpfHx2b2lkIDA9PT1lfHxudWxsPT09KHQ9ZS5zdG9yZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0U3RhdGUoKTtmb3IodmFyIHIgaW4gbnVsbD09bj92b2lkIDA6bi5zdHJlYW1zKXt2YXIgaT1uLnN0cmVhbXNbcl07aSYmaS5wZW5kaW5nVHJhY2smJlwiYXVkaW9cIj09PWkucGVuZGluZ1RyYWNrLmtpbmQmJihpLnBlbmRpbmdUcmFjay5lbmFibGVkPXRoaXMuX2hhc05hdGl2ZUF1ZGlvRm9jdXMpfX19fSx7a2V5OlwiZGlzYWJsZVJlYWN0TmF0aXZlQXV0b0RldmljZU1hbmFnZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLnJlYWN0TmF0aXZlQ29uZmlnJiZ0aGlzLnByb3BlcnRpZXMucmVhY3ROYXRpdmVDb25maWcuZGlzYWJsZUF1dG9EZXZpY2VNYW5hZ2VtZW50JiZ0aGlzLnByb3BlcnRpZXMucmVhY3ROYXRpdmVDb25maWcuZGlzYWJsZUF1dG9EZXZpY2VNYW5hZ2VtZW50W2VdfX0se2tleTpcImFic29sdXRlVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7cmV0dXJuIHQuaHJlZj1lLHQuaHJlZn19fSx7a2V5Olwic2F5SGVsbG9cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVwiaGVsbG8sIHdvcmxkLlwiO3JldHVybiBjb25zb2xlLmxvZyhlKSxlfX0se2tleTpcIl9sb2dVc2VBZnRlckRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPU9iamVjdC52YWx1ZXMoeXMpWzBdO2lmKHRoaXMubmVlZHNMb2FkKCkpe2lmKGUmJiFlLm5lZWRzTG9hZCgpKXt2YXIgdD17YWN0aW9uOnpvLGxldmVsOlwiZXJyb3JcIixjb2RlOnRoaXMuc3RyaWN0TW9kZT85OTk1Ojk5OTd9O2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHQpfWVsc2UgaWYoIXRoaXMuc3RyaWN0TW9kZSl7Y29uc29sZS5lcnJvcihcIllvdSBhcmUgYXJlIGF0dGVtcHRpbmcgdG8gdXNlIGEgY2FsbCBpbnN0YW5jZSB0aGF0IHdhcyBwcmV2aW91c2x5IGRlc3Ryb3llZCwgd2hpY2ggaXMgdW5zdXBwb3J0ZWQuIFBsZWFzZSByZW1vdmUgYHN0cmljdE1vZGU6IGZhbHNlYCBmcm9tIHlvdXIgY29uc3RydWN0b3IgcHJvcGVydGllcyB0byBlbmFibGUgc3RyaWN0IG1vZGUgdG8gdHJhY2sgZG93biBhbmQgZml4IHRoaXMgdW5zdXBwb3J0ZWQgdXNhZ2UuXCIpfX1lbHNle3ZhciBuPXthY3Rpb246em8sbGV2ZWw6XCJlcnJvclwiLGNvZGU6dGhpcy5zdHJpY3RNb2RlPzk5OTU6OTk5N307dGhpcy5fbWVzc2FnZUNoYW5uZWwuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKG4sbnVsbCx0aGlzLmNhbGxDbGllbnRJZCx0aGlzLl9pZnJhbWUpfX19LHtrZXk6XCJfbG9nRHVwbGljYXRlSW5zdGFuY2VBdHRlbXB0XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PU9iamVjdC52YWx1ZXMoeXMpO2U8dC5sZW5ndGg7ZSsrKXt2YXIgbj10W2VdO24uX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQ/KG4uc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246em8sbGV2ZWw6XCJ3YXJuXCIsY29kZTp0aGlzLmFsbG93TXVsdGlwbGVDYWxsSW5zdGFuY2VzPzk5OTM6OTk5Mn0pLG4uX2RlbGF5RHVwbGljYXRlSW5zdGFuY2VMb2c9ITEpOm4uX2RlbGF5RHVwbGljYXRlSW5zdGFuY2VMb2c9ITB9fX0se2tleTpcIl9tYXliZVNlbmRUb1NlbnRyeVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8sYTtpZihudWxsIT09KHQ9ZS5lcnJvcikmJnZvaWQgMCE9PXQmJnQudHlwZSl7aWYoIVtUaSxDaSxraV0uaW5jbHVkZXMoZS5lcnJvci50eXBlKSlyZXR1cm47aWYoZS5lcnJvci50eXBlPT09a2kmJmUuZXJyb3IubXNnLmluY2x1ZGVzKFwiZGVsZXRlZFwiKSlyZXR1cm59dmFyIHM9bnVsbCE9PShuPXRoaXMucHJvcGVydGllcykmJnZvaWQgMCE9PW4mJm4udXJsP25ldyBVUkwodGhpcy5wcm9wZXJ0aWVzLnVybCk6dm9pZCAwLGM9XCJwcm9kdWN0aW9uXCI7cyYmcy5ob3N0LmluY2x1ZGVzKFwiLnN0YWdpbmcuZGFpbHlcIikmJihjPVwic3RhZ2luZ1wiKTt2YXIgbCx1LGQscCxoLGY9W1luKCksUW4oKSwkcigpLFZyKCksR3IoKSxYcigpLFpuKCksWXIoKV0uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hW1wiQnJvd3NlckFwaUVycm9yc1wiLFwiQnJlYWRjcnVtYnNcIixcIkdsb2JhbEhhbmRsZXJzXCJdLmluY2x1ZGVzKGUubmFtZSl9KSksdj1uZXcgZ3Ioe2RzbjpcImh0dHBzOi8vZjEwZjFjODFlNWQ0NGE0MDk4NDE2YzA4NjdhOGI3NDBAbzc3OTA2LmluZ2VzdC5zZW50cnkuaW8vMTY4ODQ0XCIsdHJhbnNwb3J0OmpyLHN0YWNrUGFyc2VyOkZyLGludGVncmF0aW9uczpmLGVudmlyb25tZW50OmN9KSxtPW5ldyBvbjtpZihtLnNldENsaWVudCh2KSx2LmluaXQoKSx0aGlzLnNlc3Npb25faWQmJm0uc2V0RXh0cmEoXCJzZXNzaW9uSWRcIix0aGlzLnNlc3Npb25faWQpLHRoaXMucHJvcGVydGllcyl7dmFyIGc9ZnMoe30sdGhpcy5wcm9wZXJ0aWVzKTtnLnVzZXJOYW1lPWcudXNlck5hbWU/XCJbRmlsdGVyZWRdXCI6dm9pZCAwLGcudXNlckRhdGE9Zy51c2VyRGF0YT9cIltGaWx0ZXJlZF1cIjp2b2lkIDAsZy50b2tlbj1nLnRva2VuP1wiW0ZpbHRlcmVkXVwiOnZvaWQgMCxtLnNldEV4dHJhKFwicHJvcGVydGllc1wiLGcpfWlmKHMpe3ZhciB5PXMuc2VhcmNoUGFyYW1zLmdldChcImRvbWFpblwiKTtpZigheSl7dmFyIF89cy5ob3N0Lm1hdGNoKC8oLio/KVxcLi8pO3k9XyYmX1sxXXx8XCJcIn15JiZtLnNldFRhZyhcImRvbWFpblwiLHkpfWUuZXJyb3ImJihtLnNldFRhZyhcImZhdGFsRXJyb3JUeXBlXCIsZS5lcnJvci50eXBlKSxtLnNldEV4dHJhKFwiZXJyb3JEZXRhaWxzXCIsZS5lcnJvci5kZXRhaWxzKSwobnVsbD09PShsPWUuZXJyb3IuZGV0YWlscyl8fHZvaWQgMD09PWw/dm9pZCAwOmwudXJpKSYmbS5zZXRUYWcoXCJzZXJ2ZXJBZGRyZXNzXCIsZS5lcnJvci5kZXRhaWxzLnVyaSksKG51bGw9PT0odT1lLmVycm9yLmRldGFpbHMpfHx2b2lkIDA9PT11P3ZvaWQgMDp1Lndvcmtlckdyb3VwKSYmbS5zZXRUYWcoXCJ3b3JrZXJHcm91cFwiLGUuZXJyb3IuZGV0YWlscy53b3JrZXJHcm91cCksKG51bGw9PT0oZD1lLmVycm9yLmRldGFpbHMpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLmdlb0dyb3VwKSYmbS5zZXRUYWcoXCJnZW9Hcm91cFwiLGUuZXJyb3IuZGV0YWlscy5nZW9Hcm91cCksKG51bGw9PT0ocD1lLmVycm9yLmRldGFpbHMpfHx2b2lkIDA9PT1wP3ZvaWQgMDpwLm9uKSYmbS5zZXRUYWcoXCJjb25uZWN0aW9uQXR0ZW1wdFwiLGUuZXJyb3IuZGV0YWlscy5vbiksbnVsbCE9PShoPWUuZXJyb3IuZGV0YWlscykmJnZvaWQgMCE9PWgmJmguYnVuZGxlVXJsJiYobS5zZXRUYWcoXCJidW5kbGVVcmxcIixlLmVycm9yLmRldGFpbHMuYnVuZGxlVXJsKSxtLnNldFRhZyhcImJ1bmRsZUVycm9yXCIsZS5lcnJvci5kZXRhaWxzLnNvdXJjZUVycm9yLnR5cGUpKSk7bS5zZXRUYWdzKHtjYWxsTW9kZTp0aGlzLl9jYWxsT2JqZWN0TW9kZT9uYSgpP1wicmVhY3ROYXRpdmVcIjpudWxsIT09KHI9dGhpcy5wcm9wZXJ0aWVzKSYmdm9pZCAwIT09ciYmbnVsbCE9PShpPXIuZGFpbHlDb25maWcpJiZ2b2lkIDAhPT1pJiZudWxsIT09KG89aS5jYWxsTW9kZSkmJnZvaWQgMCE9PW8mJm8uaW5jbHVkZXMoXCJwcmVidWlsdFwiKT90aGlzLnByb3BlcnRpZXMuZGFpbHlDb25maWcuY2FsbE1vZGU6XCJjdXN0b21cIjpcInByZWJ1aWx0LWZyYW1lXCIsdmVyc2lvbjplZS52ZXJzaW9uKCl9KTt2YXIgYj0obnVsbD09PShhPWUuZXJyb3IpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLm1zZyl8fGUuZXJyb3JNc2c7bS5jYXB0dXJlRXhjZXB0aW9uKG5ldyBFcnJvcihiKSl9fSx7a2V5OlwiX2NhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSx0LG47cmV0dXJuIG51bGw9PT0oZT13aW5kb3cuX2RhaWx5KXx8dm9pZCAwPT09ZXx8bnVsbD09PSh0PWUuaW5zdGFuY2VzKXx8dm9pZCAwPT09dHx8bnVsbD09PShuPXRbdGhpcy5jYWxsQ2xpZW50SWRdKXx8dm9pZCAwPT09bj92b2lkIDA6bi5jYWxsTWFjaGluZX19XSxbe2tleTpcInN1cHBvcnRlZEJyb3dzZXJcIix2YWx1ZTpmdW5jdGlvbigpe2lmKG5hKCkpcmV0dXJue3N1cHBvcnRlZDohMCxtb2JpbGU6ITAsbmFtZTpcIlJlYWN0IE5hdGl2ZVwiLHZlcnNpb246bnVsbCxzdXBwb3J0c1NjcmVlblNoYXJlOiEwLHN1cHBvcnRzU2Z1OiEwLHN1cHBvcnRzVmlkZW9Qcm9jZXNzaW5nOiExLHN1cHBvcnRzQXVkaW9Qcm9jZXNzaW5nOiExfTt2YXIgZT1HLmdldFBhcnNlcih0YSgpKTtyZXR1cm57c3VwcG9ydGVkOiEhbGEoKSxtb2JpbGU6XCJtb2JpbGVcIj09PWUuZ2V0UGxhdGZvcm1UeXBlKCksbmFtZTplLmdldEJyb3dzZXJOYW1lKCksdmVyc2lvbjplLmdldEJyb3dzZXJWZXJzaW9uKCksc3VwcG9ydHNGdWxsc2NyZWVuOiEhb2EoKSxzdXBwb3J0c1NjcmVlblNoYXJlOiEhaWEoKSxzdXBwb3J0c1NmdTohIWxhKCksc3VwcG9ydHNWaWRlb1Byb2Nlc3Npbmc6c2EoKSxzdXBwb3J0c0F1ZGlvUHJvY2Vzc2luZzpjYSgpfX19LHtrZXk6XCJ2ZXJzaW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cIjAuNzQuMFwifX0se2tleTpcImNyZWF0ZUNhbGxPYmplY3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gZS5sYXlvdXQ9XCJub25lXCIsbmV3IGVlKG51bGwsZSl9fSx7a2V5Olwid3JhcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihVcygpLCFlfHwhZS5jb250ZW50V2luZG93fHxcInN0cmluZ1wiIT10eXBlb2YgZS5zcmMpdGhyb3cgbmV3IEVycm9yKFwiRGFpbHlJZnJhbWU6OldyYXAgbmVlZHMgYW4gaWZyYW1lLWxpa2UgZmlyc3QgYXJndW1lbnRcIik7cmV0dXJuIHQubGF5b3V0fHwodC5jdXN0b21MYXlvdXQ/dC5sYXlvdXQ9XCJjdXN0b20tdjFcIjp0LmxheW91dD1cImJyb3dzZXJcIiksbmV3IGVlKGUsdCl9fSx7a2V5OlwiY3JlYXRlRnJhbWVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI7VXMoKSxlJiZ0PyhuPWUscj10KTplJiZlLmFwcGVuZD8obj1lLHI9e30pOihuPWRvY3VtZW50LmJvZHkscj1lfHx7fSk7dmFyIGk9ci5pZnJhbWVTdHlsZTtpfHwoaT1uPT09ZG9jdW1lbnQuYm9keT97cG9zaXRpb246XCJmaXhlZFwiLGJvcmRlcjpcIjFweCBzb2xpZCBibGFja1wiLGJhY2tncm91bmRDb2xvcjpcIndoaXRlXCIsd2lkdGg6XCIzNzVweFwiLGhlaWdodDpcIjQ1MHB4XCIscmlnaHQ6XCIxZW1cIixib3R0b206XCIxZW1cIn06e2JvcmRlcjowLHdpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIn0pO3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7d2luZG93Lm5hdmlnYXRvciYmd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tZVxcLzYxXFwuLyk/by5hbGxvdz1cIm1pY3JvcGhvbmUsIGNhbWVyYVwiOm8uYWxsb3c9XCJtaWNyb3Bob25lOyBjYW1lcmE7IGF1dG9wbGF5OyBkaXNwbGF5LWNhcHR1cmU7IHNjcmVlbi13YWtlLWxvY2tcIixvLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixuLmFwcGVuZENoaWxkKG8pLG8uc3R5bGUudmlzaWJpbGl0eT1udWxsLE9iamVjdC5rZXlzKGkpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBvLnN0eWxlW2VdPWlbZV19KSksci5sYXlvdXR8fChyLmN1c3RvbUxheW91dD9yLmxheW91dD1cImN1c3RvbS12MVwiOnIubGF5b3V0PVwiYnJvd3NlclwiKTt0cnl7cmV0dXJuIG5ldyBlZShvLHIpfWNhdGNoKGUpe3Rocm93IG4ucmVtb3ZlQ2hpbGQobyksZX19fSx7a2V5OlwiY3JlYXRlVHJhbnNwYXJlbnRGcmFtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O1VzKCk7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtyZXR1cm4gdC5hbGxvdz1cIm1pY3JvcGhvbmU7IGNhbWVyYTsgYXV0b3BsYXlcIix0LnN0eWxlLmNzc1RleHQ9XCJcXG4gICAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgICAgdG9wOiAwO1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgICAgd2lkdGg6IDEwMCU7XFxuICAgICAgaGVpZ2h0OiAxMDAlO1xcbiAgICAgIGJvcmRlcjogMDtcXG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gICAgXCIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0KSxlLmxheW91dHx8KGUubGF5b3V0PVwiY3VzdG9tLXYxXCIpLGVlLndyYXAodCxlKX19LHtrZXk6XCJnZXRDYWxsSW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp2b2lkIDA7cmV0dXJuIGU/eXNbZV06T2JqZWN0LnZhbHVlcyh5cylbMF19fV0pLGVlfSgpO2Z1bmN0aW9uIHhzKGUsdCl7dmFyIG49e307Zm9yKHZhciByIGluIGUpaWYoZVtyXWluc3RhbmNlb2YgTWVkaWFTdHJlYW1UcmFjayluW3JdPUhvO2Vsc2UgaWYoXCJkYWlseUNvbmZpZ1wiPT09cil7aWYoZVtyXS5tb2RpZnlMb2NhbFNkcEhvb2spe3ZhciBpPXdpbmRvdy5fZGFpbHkuaW5zdGFuY2VzW3RdLmN1c3RvbUNhbGxiYWNrc3x8e307aS5tb2RpZnlMb2NhbFNkcEhvb2s9ZVtyXS5tb2RpZnlMb2NhbFNkcEhvb2ssd2luZG93Ll9kYWlseS5pbnN0YW5jZXNbdF0uY3VzdG9tQ2FsbGJhY2tzPWksZGVsZXRlIGVbcl0ubW9kaWZ5TG9jYWxTZHBIb29rfWlmKGVbcl0ubW9kaWZ5UmVtb3RlU2RwSG9vayl7dmFyIG89d2luZG93Ll9kYWlseS5pbnN0YW5jZXNbdF0uY3VzdG9tQ2FsbGJhY2tzfHx7fTtvLm1vZGlmeVJlbW90ZVNkcEhvb2s9ZVtyXS5tb2RpZnlSZW1vdGVTZHBIb29rLHdpbmRvdy5fZGFpbHkuaW5zdGFuY2VzW3RdLmN1c3RvbUNhbGxiYWNrcz1vLGRlbGV0ZSBlW3JdLm1vZGlmeVJlbW90ZVNkcEhvb2t9bltyXT1lW3JdfWVsc2UgbltyXT1lW3JdO3JldHVybiBufWZ1bmN0aW9uIExzKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwO2lmKGUhPT1yaSl7dmFyIG49XCJcIi5jb25jYXQoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiVGhpcyBkYWlseS1qcyBtZXRob2RcIixcIiBvbmx5IHN1cHBvcnRlZCBhZnRlciBqb2luLlwiKTt0aHJvdyB0JiYobis9XCIgXCIuY29uY2F0KHQpKSxjb25zb2xlLmVycm9yKG4pLG5ldyBFcnJvcihuKX19ZnVuY3Rpb24gSXMoZSx0KXtyZXR1cm5bbmkscmldLmluY2x1ZGVzKGUpfHx0fWZ1bmN0aW9uIERzKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOlwiVGhpcyBkYWlseS1qcyBtZXRob2RcIixyPWFyZ3VtZW50cy5sZW5ndGg+Mz9hcmd1bWVudHNbM106dm9pZCAwO2lmKElzKGUsdCkpe3ZhciBpPVwiXCIuY29uY2F0KG4sXCIgbm90IHN1cHBvcnRlZCBhZnRlciBqb2luaW5nIGEgbWVldGluZy5cIik7dGhyb3cgciYmKGkrPVwiIFwiLmNvbmNhdChyKSksY29uc29sZS5lcnJvcihpKSxuZXcgRXJyb3IoaSl9fWZ1bmN0aW9uIE5zKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIlRoaXMgZGFpbHktanMgbWV0aG9kXCIsbj1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMDtpZighZSl7dmFyIHI9XCJcIi5jb25jYXQodCxhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSYmYXJndW1lbnRzWzNdP1wiIHJlcXVpcmVzIHByZUF1dGgoKSBvciBzdGFydENhbWVyYSgpIHRvIGluaXRpYWxpemUgY2FsbCBzdGF0ZS5cIjpcIiByZXF1aXJlcyBwcmVBdXRoKCksIHN0YXJ0Q2FtZXJhKCksIG9yIGpvaW4oKSB0byBpbml0aWFsaXplIGNhbGwgc3RhdGUuXCIpO3Rocm93IG4mJihyKz1cIiBcIi5jb25jYXQobikpLGNvbnNvbGUuZXJyb3IociksbmV3IEVycm9yKHIpfX1mdW5jdGlvbiBScyhlKXtpZihlKXt2YXIgdD1cIkEgcHJlLWNhbGwgcXVhbGl0eSB0ZXN0IGlzIGluIHByb2dyZXNzLiBQbGVhc2UgdHJ5IFwiLmNvbmNhdChhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJUaGlzIGRhaWx5LWpzIG1ldGhvZFwiLFwiIGFnYWluIG9uY2UgdGVzdGluZyBoYXMgY29tcGxldGVkLiBVc2Ugc3RvcFRlc3RDYWxsUXVhbGl0eSgpIHRvIGVuZCBpdCBlYXJseS5cIik7dGhyb3cgY29uc29sZS5lcnJvcih0KSxuZXcgRXJyb3IodCl9fWZ1bmN0aW9uIEZzKGUpe2lmKCFlKXt2YXIgdD1cIlwiLmNvbmNhdChhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJUaGlzIGRhaWx5LWpzIG1ldGhvZFwiLFwiIGlzIG9ubHkgc3VwcG9ydGVkIG9uIGN1c3RvbSBjYWxsT2JqZWN0IGluc3RhbmNlc1wiKTt0aHJvdyBjb25zb2xlLmVycm9yKHQpLG5ldyBFcnJvcih0KX19ZnVuY3Rpb24gQnMoZSl7aWYoZSl7dmFyIHQ9XCJcIi5jb25jYXQoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiVGhpcyBkYWlseS1qcyBtZXRob2RcIixcIiBpcyBvbmx5IHN1cHBvcnRlZCBhcyBwYXJ0IG9mIERhaWx5J3MgUHJlYnVpbHRcIik7dGhyb3cgY29uc29sZS5lcnJvcih0KSxuZXcgRXJyb3IodCl9fWZ1bmN0aW9uIFVzKCl7aWYobmEoKSl0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGRhaWx5LWpzIG1ldGhvZCBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcIil9ZnVuY3Rpb24gVnMoKXtpZighbmEoKSl0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGRhaWx5LWpzIG1ldGhvZCBpcyBvbmx5IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcIil9ZnVuY3Rpb24gSnMoZSl7aWYodm9pZCAwPT09ZSlyZXR1cm4hMDt2YXIgdDtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0PWU7ZWxzZSB0cnl7dD1KU09OLnN0cmluZ2lmeShlKSxEKEpTT04ucGFyc2UodCksZSl8fGNvbnNvbGUud2FybihcIlRoZSB1c2VyRGF0YSBwcm92aWRlZCB3aWxsIGJlIG1vZGlmaWVkIHdoZW4gc2VyaWFsaXplZC5cIil9Y2F0Y2goZSl7dGhyb3cgRXJyb3IoXCJ1c2VyRGF0YSBtdXN0IGJlIHNlcmlhbGl6YWJsZSB0byBKU09OOiBcIi5jb25jYXQoZSkpfWlmKHQubGVuZ3RoPjQwOTYpdGhyb3cgRXJyb3IoXCJ1c2VyRGF0YSBpcyB0b28gbGFyZ2UgKFwiLmNvbmNhdCh0Lmxlbmd0aCxcIiBjaGFyYWN0ZXJzKS4gTWF4aW11bSBzaXplIHN1cHBwb3J0ZWQgaXMgXCIpLmNvbmNhdCg0MDk2LFwiLlwiKSk7cmV0dXJuITB9ZnVuY3Rpb24gJHMoZSx0KXtmb3IodmFyIG49dC5hbGxvd0FsbFBhcnRpY2lwYW50c0tleSxyPWZ1bmN0aW9uKGUpe3ZhciB0PVtcImxvY2FsXCJdO3JldHVybiBufHx0LnB1c2goXCIqXCIpLGUmJiF0LmluY2x1ZGVzKGUpfSxpPWZ1bmN0aW9uKGUpe3JldHVybiEhKHZvaWQgMD09PWUubGF5ZXJ8fE51bWJlci5pc0ludGVnZXIoZS5sYXllcikmJmUubGF5ZXI+PTB8fFwiaW5oZXJpdFwiPT09ZS5sYXllcil9LG89ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYoIShlLnZpZGVvJiYhaShlLnZpZGVvKSkmJiEoZS5zY3JlZW5WaWRlbyYmIWkoZS5zY3JlZW5WaWRlbykpKX0sYT0wLHM9T2JqZWN0LmVudHJpZXMoZSk7YTxzLmxlbmd0aDthKyspe3ZhciBjPXYoc1thXSwyKSxsPWNbMF0sdT1jWzFdO2lmKCFyKGwpfHwhbyh1KSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBxcyhlKXtyZXR1cm5cIm9iamVjdFwiPT09bihlKSYmKCEoZS52aWRlbyYmKFwib2JqZWN0XCIhPT1uKGUudmlkZW8pfHwhZnVuY3Rpb24oZSl7dmFyIHQ9W1widHlwZVwiLFwiY29uZmlnXCJdO2lmKCFlKXJldHVybiExO2lmKFwib2JqZWN0XCIhPT1uKGUpKXJldHVybiExO2lmKCFmdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4hMTtpZighT2JqZWN0LnZhbHVlcyhHbykuaW5jbHVkZXMoZSkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJpbnB1dFNldHRpbmdzIHZpZGVvIHByb2Nlc3NvciB0eXBlIGludmFsaWRcIiksITE7cmV0dXJuITB9KGUudHlwZSkpcmV0dXJuITE7aWYoZS5jb25maWcpe2lmKFwib2JqZWN0XCIhPT1uKGUuY29uZmlnKSlyZXR1cm4hMTtpZighZnVuY3Rpb24oZSx0KXt2YXIgbj1PYmplY3Qua2V5cyh0KTtpZigwPT09bi5sZW5ndGgpcmV0dXJuITA7dmFyIHI9XCJpbnZhbGlkIG9iamVjdCBpbiBpbnB1dFNldHRpbmdzIC0+IHZpZGVvIC0+IHByb2Nlc3NvciAtPiBjb25maWdcIjtzd2l0Y2goZSl7Y2FzZSBHby5CR0JMVVI6cmV0dXJuIG4ubGVuZ3RoPjF8fFwic3RyZW5ndGhcIiE9PW5bMF0/KGNvbnNvbGUuZXJyb3IociksITEpOiEoXCJudW1iZXJcIiE9dHlwZW9mIHQuc3RyZW5ndGh8fHQuc3RyZW5ndGg8PTB8fHQuc3RyZW5ndGg+MXx8aXNOYU4odC5zdHJlbmd0aCkpfHwoY29uc29sZS5lcnJvcihcIlwiLmNvbmNhdChyLFwiOyBleHBlY3RlZDogezAgPCBzdHJlbmd0aCA8PSAxfSwgZ290OiBcIikuY29uY2F0KHQuc3RyZW5ndGgpKSwhMSk7Y2FzZSBHby5CR0lNQUdFOnJldHVybiEodm9pZCAwIT09dC5zb3VyY2UmJiFmdW5jdGlvbihlKXtpZihcImRlZmF1bHRcIj09PWUuc291cmNlKXJldHVybiBlLnR5cGU9XCJkZWZhdWx0XCIsITA7aWYoZS5zb3VyY2UgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilyZXR1cm4hMDtpZihaKGUuc291cmNlKSlyZXR1cm4gZS50eXBlPVwidXJsXCIsISFmdW5jdGlvbihlKXt2YXIgdD1uZXcgVVJMKGUpLG49dC5wYXRobmFtZTtpZihcImRhdGE6XCI9PT10LnByb3RvY29sKXRyeXt2YXIgcj1uLnN1YnN0cmluZyhuLmluZGV4T2YoXCI6XCIpKzEsbi5pbmRleE9mKFwiO1wiKSkuc3BsaXQoXCIvXCIpWzFdO3JldHVybiBZby5pbmNsdWRlcyhyKX1jYXRjaChlKXtyZXR1cm4gY29uc29sZS5lcnJvcihcImZhaWxlZCB0byBkZWR1Y2UgYmxvYiBjb250ZW50IHR5cGVcIixlKSwhMX12YXIgaT1uLnNwbGl0KFwiLlwiKS5hdCgtMSkudG9Mb3dlckNhc2UoKS50cmltKCk7cmV0dXJuIFlvLmluY2x1ZGVzKGkpfShlLnNvdXJjZSl8fChjb25zb2xlLmVycm9yKFwiaW52YWxpZCBpbWFnZSB0eXBlOyBzdXBwb3J0ZWQgdHlwZXM6IFtcIi5jb25jYXQoWW8uam9pbihcIiwgXCIpLFwiXVwiKSksITEpO3JldHVybiB0PWUuc291cmNlLG49TnVtYmVyKHQpLGlzTmFOKG4pfHwhTnVtYmVyLmlzSW50ZWdlcihuKXx8bjw9MHx8bj4xMD8oY29uc29sZS5lcnJvcihcImludmFsaWQgaW1hZ2Ugc2VsZWN0aW9uOyBtdXN0IGJlIGFuIGludCwgPiAwLCA8PSBcIi5jb25jYXQoMTApKSwhMSk6KGUudHlwZT1cImRhaWx5LXByZXNlbGVjdFwiLCEwKTt2YXIgdCxufSh0KSk7ZGVmYXVsdDpyZXR1cm4hMH19KGUudHlwZSxlLmNvbmZpZykpcmV0dXJuITF9cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIXQuaW5jbHVkZXMoZSl9KSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiaW52YWxpZCBrZXkgaW5wdXRTZXR0aW5ncyAtPiB2aWRlbyAtPiBwcm9jZXNzb3IgOiBcIi5jb25jYXQodCkpLGRlbGV0ZSBlW3RdfSkpLCEwfShlLnZpZGVvLnByb2Nlc3NvcikpKSYmIShlLmF1ZGlvJiYoXCJvYmplY3RcIiE9PW4oZS5hdWRpbyl8fChyPWUuYXVkaW8ucHJvY2Vzc29yLGk9W1widHlwZVwiXSwhcnx8XCJvYmplY3RcIiE9PW4ocil8fChPYmplY3Qua2V5cyhyKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiFpLmluY2x1ZGVzKGUpfSkpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcImludmFsaWQga2V5IGlucHV0U2V0dGluZ3MgLT4gYXVkaW8gLT4gcHJvY2Vzc29yIDogXCIuY29uY2F0KGUpKSxkZWxldGUgcltlXX0pKSx0PXIudHlwZSxcInN0cmluZ1wiIT10eXBlb2YgdHx8IU9iamVjdC52YWx1ZXMoUW8pLmluY2x1ZGVzKHQpJiYoY29uc29sZS5lcnJvcihcImlucHV0U2V0dGluZ3MgYXVkaW8gcHJvY2Vzc29yIHR5cGUgaW52YWxpZFwiKSwxKSkpKSkpO3ZhciB0LHIsaX1mdW5jdGlvbiBXcyhlLHQpe3ZhciBuLHI9W107ZS52aWRlbyYmIXNhKG51bGwhPT0obj1udWxsPT10P3ZvaWQgMDp0LnVzZUxlZ2FjeVZpZGVvUHJvY2Vzc29yKSYmdm9pZCAwIT09biYmbikmJihkZWxldGUgZS52aWRlbyxyLnB1c2goXCJ2aWRlb1wiKSksZS5hdWRpbyYmIWNhKCkmJihkZWxldGUgZS5hdWRpbyxyLnB1c2goXCJhdWRpb1wiKSksci5sZW5ndGg+MCYmY29uc29sZS5lcnJvcihcIklnbm9yaW5nIHNldHRpbmdzIGZvciBicm93c2VyLSBvciBwbGF0Zm9ybS11bnN1cHBvcnRlZCBpbnB1dCBwcm9jZXNzb3Iocyk6IFwiLmNvbmNhdChyLmpvaW4oXCIsIFwiKSkpfWZ1bmN0aW9uIHpzKCl7dmFyIGU9T2JqZWN0LnZhbHVlcyhHbykuam9pbihcIiB8IFwiKSx0PU9iamVjdC52YWx1ZXMoUW8pLmpvaW4oXCIgfCBcIik7cmV0dXJuXCJpbnB1dFNldHRpbmdzIG11c3QgYmUgb2YgdGhlIGZvcm06IHsgdmlkZW8/OiB7IHByb2Nlc3NvcjogeyB0eXBlOiBbIFwiLmNvbmNhdChlLFwiIF0sIGNvbmZpZz86IHt9IH0gfSwgYXVkaW8/OiB7IHByb2Nlc3Nvcjoge3R5cGU6IFsgXCIpLmNvbmNhdCh0LFwiIF0gfSB9IH1cIil9ZnVuY3Rpb24gSHMoZSl7dmFyIHQ9ZS5hbGxvd0FsbFBhcnRpY2lwYW50c0tleTtyZXR1cm5cInJlY2VpdmVTZXR0aW5ncyBtdXN0IGJlIG9mIHRoZSBmb3JtIHsgWzxyZW1vdGUgcGFydGljaXBhbnQgaWQ+IHwgXCIuY29uY2F0KG1pKS5jb25jYXQodD8nIHwgXCInLmNvbmNhdChcIipcIiwnXCInKTpcIlwiLFwiXTogXCIpKyd7IFt2aWRlbzogW3sgbGF5ZXI6IFs8bm9uLW5lZ2F0aXZlIGludGVnZXI+IHwgXCJpbmhlcml0XCJdIH0gfCBcImluaGVyaXRcIl1dLCBbc2NyZWVuVmlkZW86IFt7IGxheWVyOiBbPG5vbi1uZWdhdGl2ZSBpbnRlZ2VyPiB8IFwiaW5oZXJpdFwiXSB9IHwgXCJpbmhlcml0XCJdXSB9fX0nfWZ1bmN0aW9uIEdzKCl7cmV0dXJuXCJjdXN0b21JbnRlZ3JhdGlvbnMgc2hvdWxkIGJlIGFuIG9iamVjdCBvZiB0eXBlIFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShQcyksXCIuXCIpfWZ1bmN0aW9uIFFzKGUpe2lmKGUmJlwib2JqZWN0XCIhPT1uKGUpfHxBcnJheS5pc0FycmF5KGUpKXJldHVybiBjb25zb2xlLmVycm9yKFwiY3VzdG9tVHJheUJ1dHRvbnMgc2hvdWxkIGJlIGFuIE9iamVjdCBvZiB0aGUgdHlwZSBcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoVHMpLFwiLlwiKSksITE7aWYoZSlmb3IodmFyIHQ9MCxyPU9iamVjdC5lbnRyaWVzKGUpO3Q8ci5sZW5ndGg7dCsrKWZvcih2YXIgaT12KHJbdF0sMSlbMF0sbz0wLGE9T2JqZWN0LmVudHJpZXMoZVtpXSk7bzxhLmxlbmd0aDtvKyspe3ZhciBzPXYoYVtvXSwyKSxjPXNbMF0sbD1zWzFdLHU9VHMuaWRbY107aWYoIXUpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJjdXN0b21UcmF5QnV0dG9uIGRvZXMgbm90IHN1cHBvcnQga2V5IFwiLmNvbmNhdChjKSksITE7c3dpdGNoKGMpe2Nhc2VcImljb25QYXRoXCI6Y2FzZVwiaWNvblBhdGhEYXJrTW9kZVwiOmlmKCFaKGwpKXJldHVybiBjb25zb2xlLmVycm9yKFwiY3VzdG9tVHJheUJ1dHRvbiBcIi5jb25jYXQoYyxcIiBzaG91bGQgYmUgYSB1cmwuXCIpKSwhMTticmVhaztjYXNlXCJ2aXN1YWxTdGF0ZVwiOmlmKCFbXCJkZWZhdWx0XCIsXCJzaWRlYmFyLW9wZW5cIixcImFjdGl2ZVwiXS5pbmNsdWRlcyhsKSlyZXR1cm4gY29uc29sZS5lcnJvcihcImN1c3RvbVRyYXlCdXR0b24gXCIuY29uY2F0KGMsXCIgc2hvdWxkIGJlIFwiKS5jb25jYXQodSxcIi4gR290OiBcIikuY29uY2F0KGwpKSwhMTticmVhaztkZWZhdWx0OmlmKG4obCkhPT11KXJldHVybiBjb25zb2xlLmVycm9yKFwiY3VzdG9tVHJheUJ1dHRvbiBcIi5jb25jYXQoYyxcIiBzaG91bGQgYmUgYSBcIikuY29uY2F0KHUsXCIuXCIpKSwhMX19cmV0dXJuITB9ZnVuY3Rpb24gS3MoZSl7aWYoIWV8fGUmJlwib2JqZWN0XCIhPT1uKGUpfHxBcnJheS5pc0FycmF5KGUpKXJldHVybiBjb25zb2xlLmVycm9yKEdzKCkpLCExO2Zvcih2YXIgdD1mdW5jdGlvbihlKXtyZXR1cm5cIlwiLmNvbmNhdChlLFwiIHNob3VsZCBiZSBcIikuY29uY2F0KFBzLmlkW2VdKX0scj1mdW5jdGlvbihlLHQpe3JldHVybiBjb25zb2xlLmVycm9yKFwiY3VzdG9tSW50ZWdyYXRpb24gXCIuY29uY2F0KGUsXCI6IFwiKS5jb25jYXQodCkpfSxpPTAsbz1PYmplY3QuZW50cmllcyhlKTtpPG8ubGVuZ3RoO2krKyl7dmFyIGE9dihvW2ldLDEpWzBdO2lmKCEoXCJsYWJlbFwiaW4gZVthXSkpcmV0dXJuIHIoYSxcImxhYmVsIGlzIHJlcXVpcmVkXCIpLCExO2lmKCEoXCJsb2NhdGlvblwiaW4gZVthXSkpcmV0dXJuIHIoYSxcImxvY2F0aW9uIGlzIHJlcXVpcmVkXCIpLCExO2lmKCEoXCJzcmNcImluIGVbYV0pJiYhKFwic3JjZG9jXCJpbiBlW2FdKSlyZXR1cm4gcihhLFwic3JjIG9yIHNyY2RvYyBpcyByZXF1aXJlZFwiKSwhMTtmb3IodmFyIHM9MCxjPU9iamVjdC5lbnRyaWVzKGVbYV0pO3M8Yy5sZW5ndGg7cysrKXt2YXIgbD12KGNbc10sMiksdT1sWzBdLGQ9bFsxXTtzd2l0Y2godSl7Y2FzZVwiYWxsb3dcIjpjYXNlXCJjc3BcIjpjYXNlXCJuYW1lXCI6Y2FzZVwicmVmZXJyZXJQb2xpY3lcIjpjYXNlXCJzYW5kYm94XCI6aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGQpcmV0dXJuIHIoYSx0KHUpKSwhMTticmVhaztjYXNlXCJpY29uVVJMXCI6aWYoIVooZCkpcmV0dXJuIHIoYSxcIlwiLmNvbmNhdCh1LFwiIHNob3VsZCBiZSBhIHVybFwiKSksITE7YnJlYWs7Y2FzZVwic3JjXCI6aWYoXCJzcmNkb2NcImluIGVbYV0pcmV0dXJuIHIoYSxcImNhbm5vdCBoYXZlIGJvdGggc3JjIGFuZCBzcmNkb2NcIiksITE7aWYoIVooZCkpcmV0dXJuIHIoYSwnc3JjIFwiJy5jb25jYXQoZCwnXCIgaXMgbm90IGEgdmFsaWQgVVJMJykpLCExO2JyZWFrO2Nhc2VcInNyY2RvY1wiOmlmKFwic3JjXCJpbiBlW2FdKXJldHVybiByKGEsXCJjYW5ub3QgaGF2ZSBib3RoIHNyYyBhbmQgc3JjZG9jXCIpLCExO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBkKXJldHVybiByKGEsdCh1KSksITE7YnJlYWs7Y2FzZVwibG9jYXRpb25cIjppZighW1wibWFpblwiLFwic2lkZWJhclwiXS5pbmNsdWRlcyhkKSlyZXR1cm4gcihhLHQodSkpLCExO2JyZWFrO2Nhc2VcImNvbnRyb2xsZWRCeVwiOmlmKFwiKlwiIT09ZCYmXCJvd25lcnNcIiE9PWQmJighQXJyYXkuaXNBcnJheShkKXx8ZC5zb21lKChmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZX0pKSkpcmV0dXJuIHIoYSx0KHUpKSwhMTticmVhaztjYXNlXCJzaGFyZWRcIjppZigoIUFycmF5LmlzQXJyYXkoZCl8fGQuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGV9KSkpJiZcIm93bmVyc1wiIT09ZCYmXCJib29sZWFuXCIhPXR5cGVvZiBkKXJldHVybiByKGEsdCh1KSksITE7YnJlYWs7ZGVmYXVsdDppZighUHMuaWRbdV0pcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJjdXN0b21JbnRlZ3JhdGlvbiBkb2VzIG5vdCBzdXBwb3J0IGtleSBcIi5jb25jYXQodSkpLCExfX19cmV0dXJuITB9ZnVuY3Rpb24gWXMoZSx0KXtpZih2b2lkIDA9PT10KXJldHVybiExO3N3aXRjaChuKHQpKXtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gbihlKT09PXQ7Y2FzZVwib2JqZWN0XCI6aWYoXCJvYmplY3RcIiE9PW4oZSkpcmV0dXJuITE7Zm9yKHZhciByIGluIGUpaWYoIVlzKGVbcl0sdFtyXSkpcmV0dXJuITE7cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19ZnVuY3Rpb24gWHMoZSx0KXt2YXIgbj1lLnNlc3Npb25JZCxyPWUudG9FbmRQb2ludCxpPWUudXNlU2lwUmVmZXI7aWYoIW58fCFyKXRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdCh0LFwiKCkgcmVxdWlyZXMgYSBzZXNzaW9uSWQgYW5kIHRvRW5kUG9pbnRcIikpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBufHxcInN0cmluZ1wiIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtYXRlcjogc2Vzc2lvbklkIGFuZCB0b0VuZFBvaW50IG11c3QgYmUgb2YgdHlwZSBzdHJpbmdcIik7aWYoaSYmIXIuc3RhcnRzV2l0aChcInNpcDpcIikpdGhyb3cgbmV3IEVycm9yKCdcInRvRW5kUG9pbnRcIiBtdXN0IGJlIGEgXCJzaXBcIiBhZGRyZXNzJyk7aWYoIXIuc3RhcnRzV2l0aChcInNpcDpcIikmJiFyLnN0YXJ0c1dpdGgoXCIrXCIpKXRocm93IG5ldyBFcnJvcihcInRvRW5kUG9pbnQ6IFwiLmNvbmNhdChyLCcgbXVzdCBzdGFydHMgd2l0aCBlaXRoZXIgXCJzaXA6XCIgb3IgXCIrXCInKSl9ZnVuY3Rpb24gWnMoZSl7aWYoXCJvYmplY3RcIiE9PW4oZSkpdGhyb3cgbmV3IEVycm9yKCdSZW1vdGVNZWRpYVBsYXllclNldHRpbmdzOiBtdXN0IGJlIFwib2JqZWN0XCIgdHlwZScpO2lmKGUuc3RhdGUmJiFPYmplY3QudmFsdWVzKEtvKS5pbmNsdWRlcyhlLnN0YXRlKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBSZW1vdGVNZWRpYVBsYXllclNldHRpbmdzLnN0YXRlLCB2YWxpZCB2YWx1ZXMgYXJlOiBcIitKU09OLnN0cmluZ2lmeShLbykpO2lmKGUudm9sdW1lKXtpZihcIm51bWJlclwiIT10eXBlb2YgZS52b2x1bWUpdGhyb3cgbmV3IEVycm9yKCdSZW1vdGVNZWRpYVBsYXllclNldHRpbmdzLnZvbHVtZTogbXVzdCBiZSBcIm51bWJlclwiIHR5cGUnKTtpZihlLnZvbHVtZTwwfHxlLnZvbHVtZT4yKXRocm93IG5ldyBFcnJvcihcIlJlbW90ZU1lZGlhUGxheWVyU2V0dGluZ3Mudm9sdW1lOiBtdXN0IGJlIGJldHdlZW4gMC4wIC0gMi4wXCIpfX1mdW5jdGlvbiBlYyhlLHQsbil7cmV0dXJuIShcIm51bWJlclwiIT10eXBlb2YgZXx8ZTx0fHxlPm4pfWZ1bmN0aW9uIHRjKGUsdCl7cmV0dXJuIGUmJiF0JiZkZWxldGUgZS5kYXRhLGV9ZXhwb3J0e2hpIGFzIERBSUxZX0FDQ0VTU19MRVZFTF9GVUxMLGZpIGFzIERBSUxZX0FDQ0VTU19MRVZFTF9MT0JCWSx2aSBhcyBEQUlMWV9BQ0NFU1NfTEVWRUxfTk9ORSxwaSBhcyBEQUlMWV9BQ0NFU1NfVU5LTk9XTixBaSBhcyBEQUlMWV9DQU1FUkFfRVJST1JfQ0FNX0FORF9NSUNfSU5fVVNFLFBpIGFzIERBSUxZX0NBTUVSQV9FUlJPUl9DQU1fSU5fVVNFLElpIGFzIERBSUxZX0NBTUVSQV9FUlJPUl9DT05TVFJBSU5UUyxPaSBhcyBEQUlMWV9DQU1FUkFfRVJST1JfTUlDX0lOX1VTRSxMaSBhcyBEQUlMWV9DQU1FUkFfRVJST1JfTk9UX0ZPVU5ELGppIGFzIERBSUxZX0NBTUVSQV9FUlJPUl9QRVJNSVNTSU9OUyx4aSBhcyBEQUlMWV9DQU1FUkFfRVJST1JfVU5ERUZfTUVESUFERVZJQ0VTLERpIGFzIERBSUxZX0NBTUVSQV9FUlJPUl9VTktOT1dOLFlpIGFzIERBSUxZX0VWRU5UX0FDQ0VTU19TVEFURV9VUERBVEVELE1vIGFzIERBSUxZX0VWRU5UX0FDVElWRV9TUEVBS0VSX0NIQU5HRSxDbyBhcyBEQUlMWV9FVkVOVF9BQ1RJVkVfU1BFQUtFUl9NT0RFX0NIQU5HRSxtbyBhcyBEQUlMWV9FVkVOVF9BUFBfTVNHLCRpIGFzIERBSUxZX0VWRU5UX0NBTUVSQV9FUlJPUixQbyBhcyBEQUlMWV9FVkVOVF9DUFVfTE9BRF9DSEFOR0UsVW8gYXMgREFJTFlfRVZFTlRfRVJST1Isam8gYXMgREFJTFlfRVZFTlRfRVhJVF9GVUxMU0NSRUVOLE9vIGFzIERBSUxZX0VWRU5UX0ZBQ0VfQ09VTlRTX1VQREFURUQsQW8gYXMgREFJTFlfRVZFTlRfRlVMTFNDUkVFTixSaSBhcyBEQUlMWV9FVkVOVF9JRlJBTUVfTEFVTkNIX0NPTkZJRyxOaSBhcyBEQUlMWV9FVkVOVF9JRlJBTUVfUkVBRFlfRk9SX0xBVU5DSF9DT05GSUcsRm8gYXMgREFJTFlfRVZFTlRfSU5QVVRfU0VUVElOR1NfVVBEQVRFRCxXaSBhcyBEQUlMWV9FVkVOVF9KT0lORURfTUVFVElORyxxaSBhcyBEQUlMWV9FVkVOVF9KT0lOSU5HX01FRVRJTkcsTm8gYXMgREFJTFlfRVZFTlRfTEFOR19VUERBVEVELHppIGFzIERBSUxZX0VWRU5UX0xFRlRfTUVFVElORyxEbyBhcyBEQUlMWV9FVkVOVF9MSVZFX1NUUkVBTUlOR19FUlJPUix4byBhcyBEQUlMWV9FVkVOVF9MSVZFX1NUUkVBTUlOR19TVEFSVEVELElvIGFzIERBSUxZX0VWRU5UX0xJVkVfU1RSRUFNSU5HX1NUT1BQRUQsTG8gYXMgREFJTFlfRVZFTlRfTElWRV9TVFJFQU1JTkdfVVBEQVRFRCxWaSBhcyBEQUlMWV9FVkVOVF9MT0FERUQsQmkgYXMgREFJTFlfRVZFTlRfTE9BRElORyxVaSBhcyBEQUlMWV9FVkVOVF9MT0FEX0FUVEVNUFRfRkFJTEVELGtvIGFzIERBSUxZX0VWRU5UX0xPQ0FMX1NDUkVFTl9TSEFSRV9DQU5DRUxFRCx3byBhcyBEQUlMWV9FVkVOVF9MT0NBTF9TQ1JFRU5fU0hBUkVfU1RBUlRFRCxTbyBhcyBEQUlMWV9FVkVOVF9MT0NBTF9TQ1JFRU5fU0hBUkVfU1RPUFBFRCxlbyBhcyBEQUlMWV9FVkVOVF9NRUVUSU5HX1NFU1NJT05fREFUQV9FUlJPUixaaSBhcyBEQUlMWV9FVkVOVF9NRUVUSU5HX1NFU1NJT05fU1RBVEVfVVBEQVRFRCxYaSBhcyBEQUlMWV9FVkVOVF9NRUVUSU5HX1NFU1NJT05fU1VNTUFSWV9VUERBVEVELFRvIGFzIERBSUxZX0VWRU5UX05FVFdPUktfQ09OTkVDVElPTixFbyBhcyBEQUlMWV9FVkVOVF9ORVRXT1JLX1FVQUxJVFlfQ0hBTkdFLEJvIGFzIERBSUxZX0VWRU5UX05PTkZBVEFMX0VSUk9SLEtpIGFzIERBSUxZX0VWRU5UX1BBUlRJQ0lQQU5UX0NPVU5UU19VUERBVEVELEhpIGFzIERBSUxZX0VWRU5UX1BBUlRJQ0lQQU5UX0pPSU5FRCxRaSBhcyBEQUlMWV9FVkVOVF9QQVJUSUNJUEFOVF9MRUZULEdpIGFzIERBSUxZX0VWRU5UX1BBUlRJQ0lQQU5UX1VQREFURUQsUm8gYXMgREFJTFlfRVZFTlRfUkVDRUlWRV9TRVRUSU5HU19VUERBVEVELHZvIGFzIERBSUxZX0VWRU5UX1JFQ09SRElOR19EQVRBLGhvIGFzIERBSUxZX0VWRU5UX1JFQ09SRElOR19FUlJPUixsbyBhcyBEQUlMWV9FVkVOVF9SRUNPUkRJTkdfU1RBUlRFRCxwbyBhcyBEQUlMWV9FVkVOVF9SRUNPUkRJTkdfU1RBVFMsdW8gYXMgREFJTFlfRVZFTlRfUkVDT1JESU5HX1NUT1BQRUQsZm8gYXMgREFJTFlfRVZFTlRfUkVDT1JESU5HX1VQTE9BRF9DT01QTEVURUQseW8gYXMgREFJTFlfRVZFTlRfUkVNT1RFX01FRElBX1BMQVlFUl9TVEFSVEVELGJvIGFzIERBSUxZX0VWRU5UX1JFTU9URV9NRURJQV9QTEFZRVJfU1RPUFBFRCxfbyBhcyBEQUlMWV9FVkVOVF9SRU1PVEVfTUVESUFfUExBWUVSX1VQREFURUQsSmkgYXMgREFJTFlfRVZFTlRfU1RBUlRFRF9DQU1FUkEsRmkgYXMgREFJTFlfRVZFTlRfVEhFTUVfVVBEQVRFRCxpbyBhcyBEQUlMWV9FVkVOVF9UUkFDS19TVEFSVEVELG9vIGFzIERBSUxZX0VWRU5UX1RSQUNLX1NUT1BQRUQsY28gYXMgREFJTFlfRVZFTlRfVFJBTlNDUklQVElPTl9FUlJPUixnbyBhcyBEQUlMWV9FVkVOVF9UUkFOU0NSSVBUSU9OX01TRyxhbyBhcyBEQUlMWV9FVkVOVF9UUkFOU0NSSVBUSU9OX1NUQVJURUQsc28gYXMgREFJTFlfRVZFTlRfVFJBTlNDUklQVElPTl9TVE9QUEVELHRvIGFzIERBSUxZX0VWRU5UX1dBSVRJTkdfUEFSVElDSVBBTlRfQURERUQscm8gYXMgREFJTFlfRVZFTlRfV0FJVElOR19QQVJUSUNJUEFOVF9SRU1PVkVELG5vIGFzIERBSUxZX0VWRU5UX1dBSVRJTkdfUEFSVElDSVBBTlRfVVBEQVRFRCxUaSBhcyBEQUlMWV9GQVRBTF9FUlJPUl9DT05ORUNUSU9OLHlpIGFzIERBSUxZX0ZBVEFMX0VSUk9SX0VKRUNURUQsQ2kgYXMgREFJTFlfRkFUQUxfRVJST1JfRU9MLHdpIGFzIERBSUxZX0ZBVEFMX0VSUk9SX0VYUF9ST09NLFNpIGFzIERBSUxZX0ZBVEFMX0VSUk9SX0VYUF9UT0tFTixNaSBhcyBEQUlMWV9GQVRBTF9FUlJPUl9NRUVUSU5HX0ZVTEwsX2kgYXMgREFJTFlfRkFUQUxfRVJST1JfTkJGX1JPT00sYmkgYXMgREFJTFlfRkFUQUxfRVJST1JfTkJGX1RPS0VOLEVpIGFzIERBSUxZX0ZBVEFMX0VSUk9SX05PVF9BTExPV0VELGtpIGFzIERBSUxZX0ZBVEFMX0VSUk9SX05PX1JPT00sZ2kgYXMgREFJTFlfUkVDRUlWRV9TRVRUSU5HU19BTExfUEFSVElDSVBBTlRTX0tFWSxtaSBhcyBEQUlMWV9SRUNFSVZFX1NFVFRJTkdTX0JBU0VfS0VZLG9pIGFzIERBSUxZX1NUQVRFX0VSUk9SLHJpIGFzIERBSUxZX1NUQVRFX0pPSU5FRCxuaSBhcyBEQUlMWV9TVEFURV9KT0lOSU5HLGlpIGFzIERBSUxZX1NUQVRFX0xFRlQsWnIgYXMgREFJTFlfU1RBVEVfTkVXLGFpIGFzIERBSUxZX1RSQUNLX1NUQVRFX0JMT0NLRUQsdWkgYXMgREFJTFlfVFJBQ0tfU1RBVEVfSU5URVJSVVBURUQsbGkgYXMgREFJTFlfVFJBQ0tfU1RBVEVfTE9BRElORyxzaSBhcyBEQUlMWV9UUkFDS19TVEFURV9PRkYsZGkgYXMgREFJTFlfVFJBQ0tfU1RBVEVfUExBWUFCTEUsY2kgYXMgREFJTFlfVFJBQ0tfU1RBVEVfU0VOREFCTEUsanMgYXMgZGVmYXVsdH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@daily-co/daily-js/dist/daily-esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@daily-co/daily-react/dist/daily-react.esm.js":
/*!********************************************************************!*\
  !*** ./node_modules/@daily-co/daily-react/dist/daily-react.esm.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DailyAudio: () => (/* binding */ DailyAudio),\n/* harmony export */   DailyAudioTrack: () => (/* binding */ DailyAudioTrack),\n/* harmony export */   DailyProvider: () => (/* binding */ DailyProvider),\n/* harmony export */   DailyVideo: () => (/* binding */ DailyVideo),\n/* harmony export */   useActiveParticipant: () => (/* binding */ useActiveParticipant),\n/* harmony export */   useActiveSpeakerId: () => (/* binding */ useActiveSpeakerId),\n/* harmony export */   useAppMessage: () => (/* binding */ useAppMessage),\n/* harmony export */   useAudioLevel: () => (/* binding */ useAudioLevel),\n/* harmony export */   useAudioLevelObserver: () => (/* binding */ useAudioLevelObserver),\n/* harmony export */   useAudioTrack: () => (/* binding */ useAudioTrack),\n/* harmony export */   useCPULoad: () => (/* binding */ useCPULoad),\n/* harmony export */   useCallFrame: () => (/* binding */ useCallFrame),\n/* harmony export */   useCallObject: () => (/* binding */ useCallObject),\n/* harmony export */   useDaily: () => (/* binding */ useDaily),\n/* harmony export */   useDailyError: () => (/* binding */ useDailyError),\n/* harmony export */   useDailyEvent: () => (/* binding */ useDailyEvent),\n/* harmony export */   useDevices: () => (/* binding */ useDevices),\n/* harmony export */   useInputSettings: () => (/* binding */ useInputSettings),\n/* harmony export */   useLiveStreaming: () => (/* binding */ useLiveStreaming),\n/* harmony export */   useLocalParticipant: () => (/* binding */ useLocalParticipant),\n/* harmony export */   useLocalSessionId: () => (/* binding */ useLocalSessionId),\n/* harmony export */   useMediaTrack: () => (/* binding */ useMediaTrack),\n/* harmony export */   useMeetingSessionState: () => (/* binding */ useMeetingSessionState),\n/* harmony export */   useMeetingState: () => (/* binding */ useMeetingState),\n/* harmony export */   useNetwork: () => (/* binding */ useNetwork),\n/* harmony export */   useParticipant: () => (/* binding */ useParticipant),\n/* harmony export */   useParticipantCounts: () => (/* binding */ useParticipantCounts),\n/* harmony export */   useParticipantIds: () => (/* binding */ useParticipantIds),\n/* harmony export */   useParticipantProperty: () => (/* binding */ useParticipantProperty),\n/* harmony export */   usePermissions: () => (/* binding */ usePermissions),\n/* harmony export */   useReceiveSettings: () => (/* binding */ useReceiveSettings),\n/* harmony export */   useRecording: () => (/* binding */ useRecording),\n/* harmony export */   useRoom: () => (/* binding */ useRoom),\n/* harmony export */   useRoomExp: () => (/* binding */ useRoomExp),\n/* harmony export */   useScreenAudioTrack: () => (/* binding */ useScreenAudioTrack),\n/* harmony export */   useScreenShare: () => (/* binding */ useScreenShare),\n/* harmony export */   useScreenVideoTrack: () => (/* binding */ useScreenVideoTrack),\n/* harmony export */   useSendSettings: () => (/* binding */ useSendSettings),\n/* harmony export */   useThrottledDailyEvent: () => (/* binding */ useThrottledDailyEvent),\n/* harmony export */   useTranscription: () => (/* binding */ useTranscription),\n/* harmony export */   useVideoTrack: () => (/* binding */ useVideoTrack),\n/* harmony export */   useWaitingParticipants: () => (/* binding */ useWaitingParticipants)\n/* harmony export */ });\n/* harmony import */ var jotai_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jotai/utils */ \"(ssr)/./node_modules/jotai/esm/vanilla/utils.mjs\");\n/* harmony import */ var jotai_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jotai/utils */ \"(ssr)/./node_modules/jotai/esm/react/utils.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jotai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jotai */ \"(ssr)/./node_modules/jotai/esm/vanilla.mjs\");\n/* harmony import */ var jotai__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jotai */ \"(ssr)/./node_modules/jotai/esm/react.mjs\");\n/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash.throttle */ \"(ssr)/./node_modules/lodash.throttle/index.js\");\n/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_throttle__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @daily-co/daily-js */ \"(ssr)/./node_modules/@daily-co/daily-js/dist/daily-esm.js\");\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fast-deep-equal */ \"(ssr)/./node_modules/fast-deep-equal/index.js\");\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\n\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar DailyContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null);\n\n/**\r\n * Returns callObject instance passed to or created by closest <DailyProvider>.\r\n */\nvar useDaily = function useDaily() {\n  var daily = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DailyContext);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(daily);\n  return daily;\n};\n\nvar DailyEventContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({\n  on: function on() {},\n  off: function off() {}\n});\n\nvar priorityCounter = -1;\nvar getPriorityUnique = function getPriorityUnique() {\n  return priorityCounter--;\n};\nvar uniqueCounter = 1;\nvar getUnique = function getUnique() {\n  return uniqueCounter++;\n};\n/**\r\n * Sets up a daily event listener using [on](https://docs.daily.co/reference/daily-js/instance-methods/on) method.\r\n * When this hook is unmounted the event listener is unregistered using [off](https://docs.daily.co/reference/daily-js/instance-methods/off).\r\n *\r\n * Warning: callback has to be a memoized reference (e.g. via [useCallback](https://reactjs.org/docs/hooks-reference.html#usecallback)).\r\n * Otherwise a console error might be thrown indicating a re-render loop issue.\r\n *\r\n * @param ev The DailyEvent to register.\r\n * @param callback A memoized callback reference to run when the event is emitted.\r\n */\nvar useDailyEvent = function useDailyEvent(ev, callback, INTERNAL_priority) {\n  if (INTERNAL_priority === void 0) {\n    INTERNAL_priority = false;\n  }\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DailyEventContext),\n    off = _useContext.off,\n    on = _useContext.on;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n    isBlocked = _useState[0],\n    setIsBlocked = _useState[1];\n  var reassignCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n  var eventId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return INTERNAL_priority ? getPriorityUnique() : getUnique();\n  }, [INTERNAL_priority]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!ev || isBlocked) return;\n    /**\r\n     * Check if callback has been reassigned often enough without hitting the 50ms timeout.\r\n     */\n    if (reassignCount.current > 100000) {\n      console.error(\"useDailyEvent called with potentially non-memoized event callback or due to too many re-renders.\\n        Memoize using useCallback to avoid re-render loop or reduce the amount of state transitions the callback depends on.\\n        Passed callback for '\" + ev + \"' event is NOT registered.\", callback);\n      setIsBlocked(true);\n      return;\n    }\n    reassignCount.current++;\n    var timeout = setTimeout(function () {\n      reassignCount.current = 0;\n    }, 50);\n    on(ev, callback, eventId);\n    return function () {\n      clearTimeout(timeout);\n      off(ev, eventId);\n    };\n  }, [callback, ev, eventId, isBlocked, off, on]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)({\n    event: ev,\n    eventId: eventId,\n    isBlocked: isBlocked,\n    callback: callback\n  });\n};\n\n/**\r\n * Compares two variables for deep equality.\r\n * Gracefully handles equality checks on MediaStreamTracks by comparing their ids.\r\n */\nfunction customDeepEqual(a, b) {\n  if (a === b) return true;\n  // Handle arrays separately\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) return false;\n    for (var i = 0; i < a.length; i++) {\n      if (!customDeepEqual(a[i], b[i])) return false;\n    }\n    return true;\n  }\n  // Handle specific cases like MediaStream, MediaStreamTrack, Date, etc.\n  if (MediaStream) {\n    if (a instanceof MediaStream && b instanceof MediaStream) {\n      return a.id === b.id && a.active === b.active && a.getTracks().length === b.getTracks().length && a.getTracks().every(function (track, idx) {\n        return customDeepEqual(track, b.getTracks()[idx]);\n      });\n    }\n  }\n  // Handle special case for MediaStreamTrack\n  if (MediaStreamTrack) {\n    if (a instanceof MediaStreamTrack && b instanceof MediaStreamTrack) {\n      return a.id === b.id && a.kind === b.kind && a.readyState === b.readyState;\n    }\n  }\n  // Handle special case for Date\n  if (a instanceof Date && b instanceof Date) {\n    return a.getTime() === b.getTime();\n  }\n  // Handle special case for RegExp\n  if (a instanceof RegExp && b instanceof RegExp) {\n    return a.source === b.source && a.flags === b.flags;\n  }\n  // Handle Set comparisons\n  if (a instanceof Set && b instanceof Set) {\n    if (a.size !== b.size) return false;\n    var arrA = Array.from(a).sort();\n    var arrB = Array.from(b).sort();\n    return arrA.every(function (val, idx) {\n      return customDeepEqual(val, arrB[idx]);\n    });\n  }\n  // Handle Map comparisons\n  if (a instanceof Map && b instanceof Map) {\n    if (a.size !== b.size) return false;\n    for (var _iterator = _createForOfIteratorHelperLoose(a.entries()), _step; !(_step = _iterator()).done;) {\n      var _step$value = _step.value,\n        key = _step$value[0],\n        value = _step$value[1];\n      if (!b.has(key) || !customDeepEqual(value, b.get(key))) return false;\n    }\n    return true;\n  }\n  // Primitive types and null checks\n  if (typeof a !== 'object' || a === null || typeof b !== 'object' || b === null) {\n    return false;\n  }\n  // Generic object handling\n  var keysA = Object.keys(a);\n  var keysB = Object.keys(b);\n  if (keysA.length !== keysB.length) return false;\n  for (var _i = 0; _i < keysA.length; _i++) {\n    var _key = keysA[_i];\n    if (!Object.prototype.hasOwnProperty.call(b, _key) || !customDeepEqual(a[_key], b[_key])) {\n      return false;\n    }\n  }\n  // All keys and values match -> the objects are deeply equal\n  return true;\n}\n/**\r\n * Comparison function optimized for comparing arrays.\r\n */\nfunction arraysDeepEqual(a, b) {\n  // Check for reference equality\n  if (a === b) return true;\n  // Check if both arrays are of the same length\n  if (a.length !== b.length) return false;\n  // Compare each element in the array\n  for (var i = 0; i < a.length; i++) {\n    var valueA = a[i];\n    var valueB = b[i];\n    var isComplexTypeA = valueA !== null && typeof valueA === 'object';\n    var isComplexTypeB = valueB !== null && typeof valueB === 'object';\n    // Use customDeepEqual only if either value is a complex type\n    if (isComplexTypeA || isComplexTypeB) {\n      if (!customDeepEqual(valueA, valueB)) return false;\n    } else if (valueA !== valueB) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction jotaiDebugLabel(label) {\n  return 'daily-react-' + label;\n}\nfunction equalAtomFamily(options) {\n  var atomCache = new Map();\n  var priorValues = new Map();\n  return function (param) {\n    if (!atomCache.has(param)) {\n      var baseAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(function (get) {\n        var derivedValue = options.get(param)(get);\n        var prior = priorValues.get(param);\n        if (prior != null && options.equals(derivedValue, prior)) {\n          return prior;\n        }\n        priorValues.set(param, derivedValue);\n        return derivedValue;\n      });\n      atomCache.set(param, baseAtom);\n    }\n    return atomCache.get(param);\n  };\n}\n\nvar DELIM = '::';\nvar PATHS_DELIM = ';';\nvar getPropertyParam = function getPropertyParam(id, property) {\n  return id + DELIM + property;\n};\nvar getPropertiesParam = function getPropertiesParam(id, properties) {\n  return id + DELIM + properties.join(PATHS_DELIM);\n};\nvar getParticipantPropertyAtom = function getParticipantPropertyAtom(id, property) {\n  return participantPropertyState(getPropertyParam(id, property));\n};\n/**\r\n * Stores all property paths for a given participant.\r\n */\nvar participantPropertyPathsState = /*#__PURE__*/(0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.atomFamily)(function (id) {\n  var participantPropertyPathsAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)([]);\n  participantPropertyPathsAtom.debugLabel = jotaiDebugLabel(\"participant-property-paths-\" + id);\n  return participantPropertyPathsAtom;\n});\n/**\r\n * Stores resolved values for each participant and property path.\r\n */\nvar participantPropertyState = /*#__PURE__*/(0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.atomFamily)(function (param) {\n  var participantPropertyAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\n  participantPropertyAtom.debugLabel = jotaiDebugLabel(\"participant-property-\" + param);\n  return participantPropertyAtom;\n});\n/**\r\n * Stores resolved values for each participant and property path.\r\n */\nvar participantPropertiesState = /*#__PURE__*/equalAtomFamily({\n  equals: arraysDeepEqual,\n  get: function get(param) {\n    return function (get) {\n      var _param$split = param.split(DELIM),\n        id = _param$split[0],\n        paths = _param$split[1];\n      var properties = paths.split(PATHS_DELIM);\n      return properties.map(function (path) {\n        return get(getParticipantPropertyAtom(id, path));\n      });\n    };\n  }\n});\n/**\r\n * Returns a participant's property that you subscribe to.\r\n * @param participantId The participant's session_id.\r\n * @param propertyPaths the array of participant property that you want to subscribe to.\r\n */\nvar useParticipantProperty = function useParticipantProperty(participantId, propertyPaths) {\n  var _ref;\n  var properties = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(Array.isArray(propertyPaths) ? participantPropertiesState(getPropertiesParam(participantId, propertyPaths)) : participantPropertyState(getPropertyParam(participantId, propertyPaths)));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(Array.isArray(propertyPaths) ? propertyPaths.reduce(function (o, path, i) {\n    o[path] = properties[i];\n    return o;\n  }, {}) : (_ref = {}, _ref[propertyPaths] = properties, _ref));\n  return properties;\n};\n\n/**\r\n * Sets up a throttled daily event listener using [on](https://docs.daily.co/reference/daily-js/instance-methods/on) method.\r\n * When this hook is unmounted the event listener is unregistered using [off](https://docs.daily.co/reference/daily-js/instance-methods/off).\r\n *\r\n * In comparison to useDailyEvent the callback passed here will be called with an array of event objects.\r\n *\r\n * You can pass an array of DailyEvents to register multiple daily events with a single callback handler.\r\n * The events returned in the callback parameter are guaranteed to be in the same order as they were emitted.\r\n *\r\n * @param ev The DailyEvent to register or an array of DailyEvent to register.\r\n * @param callback A memoized callback reference to run when throttled events are emitted.\r\n * @param throttleTimeout The minimum waiting time until the callback is called again. Default: 500\r\n */\nvar useThrottledDailyEvent = function useThrottledDailyEvent(ev, callback, throttleTimeout, INTERNAL_priority) {\n  if (throttleTimeout === void 0) {\n    throttleTimeout = 500;\n  }\n  if (INTERNAL_priority === void 0) {\n    INTERNAL_priority = false;\n  }\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DailyEventContext),\n    off = _useContext.off,\n    on = _useContext.on;\n  var eventId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    var _ref;\n    if (Array.isArray(ev)) return ev.reduce(function (r, e) {\n      r[e] = INTERNAL_priority ? getPriorityUnique() : getUnique();\n      return r;\n    }, {});\n    return _ref = {}, _ref[ev] = INTERNAL_priority ? getPriorityUnique() : getUnique(), _ref;\n  }, [ev, INTERNAL_priority]);\n  var throttledEvents = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  useDailyEvent('call-instance-destroyed', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    throttledEvents.current.length = 0;\n  }, []));\n  var emitEvents = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return lodash_throttle__WEBPACK_IMPORTED_MODULE_1___default()(function () {\n      if (throttledEvents.current.length === 0) return;\n      callback(throttledEvents.current);\n      throttledEvents.current.length = 0;\n    }, throttleTimeout, {\n      trailing: true\n    });\n  }, [callback, throttleTimeout]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!ev) return;\n    var addEvent = function addEvent(ev) {\n      throttledEvents.current.push(ev);\n      emitEvents();\n    };\n    if (Array.isArray(ev)) {\n      ev.forEach(function (e) {\n        return on(e, addEvent, eventId[e]);\n      });\n    } else {\n      on(ev, addEvent, eventId[ev]);\n    }\n    return function () {\n      if (Array.isArray(ev)) {\n        ev.forEach(function (e) {\n          return off(e, eventId[e]);\n        });\n      } else {\n        off(ev, eventId[ev]);\n      }\n    };\n  }, [emitEvents, ev, eventId, off, on]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)({\n    event: ev,\n    eventId: eventId\n  });\n};\n\n/**\r\n * Returns all property paths for an object.\r\n */\nvar getPaths = function getPaths(o, currentPath, visited) {\n  if (currentPath === void 0) {\n    currentPath = '';\n  }\n  if (visited === void 0) {\n    visited = new Set();\n  }\n  if (typeof o !== 'object' || o === null || visited.has(o)) {\n    return [currentPath];\n  }\n  visited.add(o);\n  var paths = [];\n  for (var key in o) {\n    if (Object.prototype.hasOwnProperty.call(o, key)) {\n      var newPath = currentPath ? currentPath + \".\" + key : key;\n      paths.push.apply(paths, [newPath].concat(getPaths(o[key], newPath, visited)));\n    }\n  }\n  visited[\"delete\"](o);\n  return paths;\n};\n/**\r\n * Returns all property paths for a given participant object.\r\n */\nvar getParticipantPaths = function getParticipantPaths(p) {\n  return getPaths(p);\n};\n\nvar resolvePath = function resolvePath(participant, path) {\n  return String(path).split('.').filter(function (key) {\n    return key.length;\n  }).reduce(function (p, key) {\n    return p && p[key];\n  }, participant);\n};\nvar resolveParticipantPaths = function resolveParticipantPaths(participant, paths) {\n  return paths.map(function (path) {\n    return resolvePath(participant, path);\n  });\n};\n\n/**\r\n * Stores the most recent peerId as reported from [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\r\n */\nvar activeIdState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\nactiveIdState.debugLabel = /*#__PURE__*/jotaiDebugLabel('active-id');\nvar localIdState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)('');\nlocalIdState.debugLabel = /*#__PURE__*/jotaiDebugLabel('local-id');\nvar localJoinDateState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\nlocalJoinDateState.debugLabel = /*#__PURE__*/jotaiDebugLabel('local-join-date');\nvar participantIdsState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)([]);\nparticipantIdsState.debugLabel = /*#__PURE__*/jotaiDebugLabel('participant-ids');\nvar participantState = /*#__PURE__*/(0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.atomFamily)(function (id) {\n  var participantAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\n  participantAtom.debugLabel = jotaiDebugLabel(\"participant-\" + id);\n  return participantAtom;\n});\nvar waitingParticipantsState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)([]);\nwaitingParticipantsState.debugLabel = /*#__PURE__*/jotaiDebugLabel('waiting-participants');\nvar waitingParticipantState = /*#__PURE__*/(0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.atomFamily)(function (id) {\n  var waitingParticipantAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)({\n    awaitingAccess: {\n      level: 'full'\n    },\n    id: id,\n    name: ''\n  });\n  waitingParticipantAtom.debugLabel = jotaiDebugLabel(\"waiting-participant-\" + id);\n  return waitingParticipantAtom;\n});\nvar allWaitingParticipantsSelector = /*#__PURE__*/equalAtomFamily({\n  equals: arraysDeepEqual,\n  get: function get() {\n    return function (get) {\n      var ids = get(waitingParticipantsState);\n      return ids.map(function (id) {\n        return get(waitingParticipantState(id));\n      });\n    };\n  }\n});\nvar DailyParticipants = function DailyParticipants(_ref) {\n  var children = _ref.children;\n  var daily = useDaily();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n    initialized = _useState[0],\n    setInitialized = _useState[1];\n  var initParticipants = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, participants) {\n    set(localIdState, participants.local.session_id);\n    var participantsArray = Object.values(participants);\n    var ids = participantsArray.map(function (p) {\n      return p.session_id;\n    });\n    set(participantIdsState, ids);\n    participantsArray.forEach(function (p) {\n      set(participantState(p.session_id), p);\n      var paths = getParticipantPaths(p);\n      set(participantPropertyPathsState(p.session_id), paths);\n      paths.forEach(function (property) {\n        var _resolveParticipantPa = resolveParticipantPaths(p, [property]),\n          value = _resolveParticipantPa[0];\n        set(getParticipantPropertyAtom(p.session_id, property), value);\n      });\n    });\n    setInitialized(true);\n  }, []));\n  /**\r\n   * Initialize participants state based on daily.participants().\r\n   * Retries every 100ms to initialize the state, until daily is ready.\r\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || initialized) return;\n    var interval = setInterval(function () {\n      var participants = daily.participants();\n      if (!('local' in participants)) return;\n      initParticipants(participants);\n      clearInterval(interval);\n    }, 100);\n    return function () {\n      clearInterval(interval);\n    };\n  }, [daily, initialized, initParticipants]);\n  var handleInitEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    var participants = daily == null ? void 0 : daily.participants();\n    if (!participants.local) return;\n    initParticipants(participants);\n  }, [daily, initParticipants]);\n  useDailyEvent('started-camera', handleInitEvent, true);\n  useDailyEvent('access-state-updated', handleInitEvent, true);\n  useDailyEvent('joining-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(localJoinDateState, new Date());\n    handleInitEvent();\n  }, [handleInitEvent])), true);\n  useDailyEvent('joined-meeting', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    initParticipants(ev.participants);\n  }, [initParticipants]), true);\n  /**\r\n   * Reset stored participants, when meeting has ended.\r\n   */\n  var handleCleanup = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set) {\n    set(localIdState, '');\n    set(activeIdState, null);\n    var ids = get(participantIdsState);\n    ids.forEach(function (id) {\n      return participantState.remove(id);\n    });\n    set(participantIdsState, []);\n  }, []));\n  useDailyEvent('call-instance-destroyed', handleCleanup, true);\n  useDailyEvent('left-meeting', handleCleanup, true);\n  useThrottledDailyEvent(['active-speaker-change', 'participant-joined', 'participant-updated', 'participant-left'], (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set, evts) {\n    if (!evts.length) return;\n    evts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'active-speaker-change':\n          {\n            set(activeIdState, ev.activeSpeaker.peerId);\n            set(participantState(ev.activeSpeaker.peerId), function (prev) {\n              if (!prev) return null;\n              return _extends({}, prev, {\n                last_active: new Date()\n              });\n            });\n            break;\n          }\n        case 'participant-joined':\n          {\n            // Update list of ids\n            set(participantIdsState, function (prevIds) {\n              return prevIds.includes(ev.participant.session_id) ? prevIds : [].concat(prevIds, [ev.participant.session_id]);\n            });\n            // Store entire object\n            set(participantState(ev.participant.session_id), ev.participant);\n            var paths = getParticipantPaths(ev.participant);\n            // Set list of property paths\n            set(participantPropertyPathsState(ev.participant.session_id), paths);\n            // Set all property path values\n            paths.forEach(function (property) {\n              var _resolveParticipantPa2 = resolveParticipantPaths(ev.participant, [property]),\n                value = _resolveParticipantPa2[0];\n              set(getParticipantPropertyAtom(ev.participant.session_id, property), value);\n            });\n            break;\n          }\n        case 'participant-updated':\n          {\n            // Update entire object\n            set(participantState(ev.participant.session_id), ev.participant);\n            // Update local session_id\n            if (ev.participant.local) {\n              set(localIdState, ev.participant.session_id);\n            }\n            var _paths = getParticipantPaths(ev.participant);\n            var oldPaths = get(participantPropertyPathsState(ev.participant.session_id));\n            var pathsChanged = _paths.length !== oldPaths.length || _paths.some(function (path) {\n              return !oldPaths.includes(path);\n            });\n            // Set list of property paths\n            if (pathsChanged) {\n              set(participantPropertyPathsState(ev.participant.session_id), _paths);\n            }\n            // Create a Set of oldPaths for quick lookup\n            var oldPathSet = new Set(oldPaths);\n            // Resolve all path values in one call\n            var resolvedValues = resolveParticipantPaths(ev.participant, _paths);\n            _paths.forEach(function (property, idx) {\n              var value = resolvedValues[idx];\n              // Remove property from oldPathSet to mark it as processed\n              oldPathSet[\"delete\"](property);\n              // Only update if the new value differs from the current one\n              set(getParticipantPropertyAtom(ev.participant.session_id, property), function (prev) {\n                return customDeepEqual(prev, value) ? prev : value;\n              });\n            });\n            // Set any remaining paths in oldPathSet to null\n            oldPathSet.forEach(function (property) {\n              set(getParticipantPropertyAtom(ev.participant.session_id, property), null);\n            });\n            break;\n          }\n        case 'participant-left':\n          {\n            // Remove from list of ids\n            set(participantIdsState, function (prevIds) {\n              return prevIds.includes(ev.participant.session_id) ? prevIds.filter(function (id) {\n                return id !== ev.participant.session_id;\n              }) : prevIds;\n            });\n            // Remove entire object\n            participantState.remove(ev.participant.session_id);\n            var _oldPaths = get(participantPropertyPathsState(ev.participant.session_id));\n            // Remove property path values\n            _oldPaths.forEach(function (property) {\n              participantPropertyState.remove(getPropertyParam(ev.participant.session_id, property));\n            });\n            // Remove all property paths\n            participantPropertyPathsState.remove(ev.participant.session_id);\n            break;\n          }\n      }\n    });\n  }, [])), 100, true);\n  useThrottledDailyEvent(['waiting-participant-added', 'waiting-participant-updated', 'waiting-participant-removed'], (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, evts) {\n    evts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'waiting-participant-added':\n          set(waitingParticipantsState, function (wps) {\n            return wps.includes(ev.participant.id) ? wps : [].concat(wps, [ev.participant.id]);\n          });\n          set(waitingParticipantState(ev.participant.id), ev.participant);\n          break;\n        case 'waiting-participant-updated':\n          set(waitingParticipantState(ev.participant.id), ev.participant);\n          break;\n        case 'waiting-participant-removed':\n          set(waitingParticipantsState, function (wps) {\n            return wps.filter(function (wp) {\n              return wp !== ev.participant.id;\n            });\n          });\n          waitingParticipantState.remove(ev.participant.id);\n          break;\n      }\n    });\n  }, [])), 100, true);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\n/**\r\n * Returns the local participant's session_id or empty string '',\r\n * if the local participant doesn't exist.\r\n */\nvar useLocalSessionId = function useLocalSessionId() {\n  var localId = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(localIdState);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(localId);\n  return localId;\n};\n\nvar noopFilter = function noopFilter() {\n  return true;\n};\n/**\r\n * Returns the most recent speaker id mentioned in an [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\r\n */\nvar useActiveSpeakerId = function useActiveSpeakerId(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    _ref$filter = _ref.filter,\n    filter = _ref$filter === void 0 ? noopFilter : _ref$filter,\n    _ref$ignoreLocal = _ref.ignoreLocal,\n    ignoreLocal = _ref$ignoreLocal === void 0 ? false : _ref$ignoreLocal;\n  var localSessionId = useLocalSessionId();\n  var recentActiveId = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(activeIdState);\n  var isIgnoredLocalId = ignoreLocal && recentActiveId === localSessionId;\n  var isFilteredOut = !(filter != null && filter(recentActiveId));\n  var isRecentIdRelevant = !isIgnoredLocalId && !isFilteredOut;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(isRecentIdRelevant ? recentActiveId : null),\n    activeId = _useState[0],\n    setActiveId = _useState[1];\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (isIgnoredLocalId || isFilteredOut) return;\n    setActiveId(recentActiveId);\n  }, [isFilteredOut, isIgnoredLocalId, recentActiveId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(activeId);\n  return activeId;\n};\n\nvar isTrackOff = function isTrackOff(trackState) {\n  return ['blocked', 'off'].includes(trackState);\n};\n\nvar SERIALIZABLE_DELIM = ';';\nvar getParticipantIdsFilterSortParam = function getParticipantIdsFilterSortParam(filter, sort) {\n  return \"\" + filter + SERIALIZABLE_DELIM + sort;\n};\n/**\r\n * Short-cut state selector for useParticipantIds({ filter: 'local' })\r\n */\nvar participantIdsFilteredAndSortedState = /*#__PURE__*/equalAtomFamily({\n  equals: customDeepEqual,\n  get: function get(param) {\n    return function (get) {\n      var _param$split = param.split(SERIALIZABLE_DELIM),\n        filter = _param$split[0],\n        sort = _param$split[1];\n      var ids = get(participantIdsState);\n      return ids.filter(function (id) {\n        switch (filter) {\n          /**\r\n           * Simple boolean fields first.\r\n           */\n          case 'local':\n          case 'owner':\n          case 'record':\n            {\n              return get(getParticipantPropertyAtom(id, filter));\n            }\n          case 'remote':\n            {\n              return !get(getParticipantPropertyAtom(id, 'local'));\n            }\n          case 'screen':\n            {\n              var screenAudioState = get(getParticipantPropertyAtom(id, 'tracks.screenAudio.state'));\n              var screenVideoState = get(getParticipantPropertyAtom(id, 'tracks.screenVideo.state'));\n              return !isTrackOff(screenAudioState) || !isTrackOff(screenVideoState);\n            }\n          default:\n            return true;\n        }\n      }).sort(function (idA, idB) {\n        switch (sort) {\n          case 'joined_at':\n          case 'session_id':\n          case 'user_id':\n          case 'user_name':\n            {\n              var aSort = get(getParticipantPropertyAtom(idA, sort));\n              var bSort = get(getParticipantPropertyAtom(idB, sort));\n              if (aSort !== undefined || bSort !== undefined) {\n                if (aSort === undefined) return -1;\n                if (bSort === undefined) return 1;\n                if (aSort > bSort) return 1;\n                if (aSort < bSort) return -1;\n              }\n              return 0;\n            }\n          default:\n            return 0;\n        }\n      });\n    };\n  }\n});\n/**\r\n * Returns a list of participant ids (= session_id).\r\n * The list can optionally be filtered and sorted, using the filter and sort options.\r\n */\nvar useParticipantIds = function useParticipantIds(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    filter = _ref.filter,\n    onActiveSpeakerChange = _ref.onActiveSpeakerChange,\n    onParticipantJoined = _ref.onParticipantJoined,\n    onParticipantLeft = _ref.onParticipantLeft,\n    onParticipantUpdated = _ref.onParticipantUpdated,\n    sort = _ref.sort;\n  /**\r\n   * For instances of useParticipantIds with string-based filter and sort,\r\n   * we can immediately return the correct ids from Jotai's state.\r\n   */\n  var preFilteredSortedIds = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(participantIdsFilteredAndSortedState(getParticipantIdsFilterSortParam(typeof filter === 'string' ? filter : null, typeof sort === 'string' ? sort : null)));\n  var shouldUseCustomIds = typeof filter === 'function' || typeof sort === 'function';\n  var getCustomFilteredIds = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get) {\n    if (\n    // Ignore if both filter and sort are not functions.\n    typeof filter !== 'function' && typeof sort !== 'function') return [];\n    var participants = preFilteredSortedIds.map(function (id) {\n      return get(participantState(id));\n    });\n    return participants\n    // Make sure we don't accidentally try to filter/sort `null` participants\n    // This can happen when a participant's id is already present in store\n    // but the participant object is not stored, yet.\n    .filter(function (p) {\n      return Boolean(p);\n    })\n    // Run custom filter, if it's a function. Otherwise don't filter any participants.\n    .filter(typeof filter === 'function' ? filter : function () {\n      return true;\n    })\n    // Run custom sort, if it's a function. Otherwise don't sort.\n    .sort(typeof sort === 'function' ? sort : function () {\n      return 0;\n    })\n    // Map back to session_id.\n    .map(function (p) {\n      return p.session_id;\n    })\n    // Filter any potential null/undefined ids.\n    // This shouldn't really happen, but better safe than sorry.\n    .filter(Boolean);\n  }, [filter, preFilteredSortedIds, sort]);\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),\n    customIds = _useState[0],\n    setCustomIds = _useState[1];\n  var maybeUpdateCustomIds = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get) {\n    if (!shouldUseCustomIds) return;\n    var newIds = getCustomFilteredIds(get);\n    if (customDeepEqual(newIds, customIds)) return;\n    setCustomIds(newIds);\n  }, [customIds, getCustomFilteredIds, shouldUseCustomIds]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    maybeUpdateCustomIds();\n  }, [maybeUpdateCustomIds]);\n  useThrottledDailyEvent(['participant-joined', 'participant-updated', 'active-speaker-change', 'participant-left'], (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (evts) {\n    if (!evts.length) return;\n    evts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'participant-joined':\n          onParticipantJoined == null ? void 0 : onParticipantJoined(ev);\n          break;\n        case 'participant-updated':\n          onParticipantUpdated == null ? void 0 : onParticipantUpdated(ev);\n          break;\n        case 'active-speaker-change':\n          onActiveSpeakerChange == null ? void 0 : onActiveSpeakerChange(ev);\n          break;\n        case 'participant-left':\n          onParticipantLeft == null ? void 0 : onParticipantLeft(ev);\n          break;\n      }\n    });\n    maybeUpdateCustomIds();\n  }, [maybeUpdateCustomIds, onActiveSpeakerChange, onParticipantJoined, onParticipantLeft, onParticipantUpdated]));\n  var result = typeof filter === 'function' || typeof sort === 'function' ? customIds : preFilteredSortedIds;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar screenSharesState = /*#__PURE__*/equalAtomFamily({\n  equals: arraysDeepEqual,\n  get: function get() {\n    return function (get) {\n      var screenIds = get(participantIdsFilteredAndSortedState(getParticipantIdsFilterSortParam('screen', null)));\n      return screenIds.map(function (id) {\n        return {\n          local: get(getParticipantPropertyAtom(id, 'local')),\n          screenAudio: get(getParticipantPropertyAtom(id, 'tracks.screenAudio')),\n          screenVideo: get(getParticipantPropertyAtom(id, 'tracks.screenVideo')),\n          screenId: id + \"-screen\",\n          session_id: id\n        };\n      });\n    };\n  }\n});\n/**\r\n * Allows access to information about shared screens, and methods to start or stop a local screen share.\r\n */\nvar useScreenShare = function useScreenShare(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onError = _ref.onError,\n    onLocalScreenShareStarted = _ref.onLocalScreenShareStarted,\n    onLocalScreenShareStopped = _ref.onLocalScreenShareStopped;\n  var daily = useDaily();\n  var startScreenShare = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    daily == null ? void 0 : daily.startScreenShare.apply(daily, args);\n  }, [daily]);\n  var stopScreenShare = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    daily == null ? void 0 : daily.stopScreenShare.apply(daily, args);\n  }, [daily]);\n  useDailyEvent('local-screen-share-started', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    return onLocalScreenShareStarted == null ? void 0 : onLocalScreenShareStarted();\n  }, [onLocalScreenShareStarted]));\n  useDailyEvent('local-screen-share-stopped', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    return onLocalScreenShareStopped == null ? void 0 : onLocalScreenShareStopped();\n  }, [onLocalScreenShareStopped]));\n  useDailyEvent('nonfatal-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (ev.type !== 'screen-share-error') return;\n    onError == null ? void 0 : onError(ev);\n  }, [onError]));\n  var screens = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(screenSharesState(undefined));\n  var result = {\n    isSharingScreen: screens.some(function (s) {\n      return s.local;\n    }),\n    screens: screens,\n    startScreenShare: startScreenShare,\n    stopScreenShare: stopScreenShare\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * Returns a participant's track and state, based on the given MediaType.\r\n *\r\n * Equivalent to daily.participants()[participantId].tracks[type].\r\n *\r\n * @param participantId The participant's session_id.\r\n * @param type The track type. Default: \"video\"\r\n */\nvar useMediaTrack = function useMediaTrack(participantId, type) {\n  if (type === void 0) {\n    type = 'video';\n  }\n  var trackState = useParticipantProperty(participantId, \"tracks.\" + type);\n  var result = trackState ? _extends({}, trackState, {\n    isOff: isTrackOff(trackState.state)\n  }) : {\n    isOff: true,\n    persistentTrack: undefined,\n    state: 'off',\n    subscribed: false\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * Original source: https://github.com/jaredLunde/react-hook/blob/master/packages/merged-ref/src/index.tsx\r\n * Original author: Jared Lunde (https://github.com/jaredLunde)\r\n * Originally published under the MIT license: https://github.com/jaredLunde/react-hook/blob/master/LICENSE\r\n */\nfunction useMergedRef() {\n  for (var _len = arguments.length, refs = new Array(_len), _key = 0; _key < _len; _key++) {\n    refs[_key] = arguments[_key];\n  }\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (element) {\n    for (var i = 0; i < refs.length; i++) {\n      var ref = refs[i];\n      if (typeof ref === 'function') ref(element);else if (ref && typeof ref === 'object') ref.current = element;\n    }\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  refs);\n}\n\nvar _excluded = [\"onPlayFailed\", \"sessionId\", \"type\"];\nvar DailyAudioTrack = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)( /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function (_ref, ref) {\n  var onPlayFailed = _ref.onPlayFailed,\n    sessionId = _ref.sessionId,\n    _ref$type = _ref.type,\n    type = _ref$type === void 0 ? 'audio' : _ref$type,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var audioEl = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var audio = useMediaTrack(sessionId, type);\n  var audioRef = useMergedRef(audioEl, ref);\n  var subscribedState = audio == null ? void 0 : audio.subscribed;\n  /**\r\n   * Setup audio tag.\r\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var audioTag = audioEl.current;\n    if (!audioTag || !(audio != null && audio.persistentTrack)) return;\n    var playTimeout;\n    var handleCanPlay = function handleCanPlay() {\n      audioTag.play()[\"catch\"](function (e) {\n        onPlayFailed == null ? void 0 : onPlayFailed({\n          sessionId: sessionId,\n          target: audioTag,\n          type: type,\n          message: e.message,\n          name: e.name\n        });\n      });\n    };\n    var handlePlay = function handlePlay() {\n      clearTimeout(playTimeout);\n    };\n    if (!MediaStream) {\n      console.warn(\"MediaStream API not available. Can't setup \" + type + \" for \" + sessionId);\n      onPlayFailed == null ? void 0 : onPlayFailed({\n        sessionId: sessionId,\n        target: audioTag,\n        type: type,\n        message: 'MediaStream API not available',\n        name: 'MediaStream API not available'\n      });\n      return;\n    }\n    audioTag.addEventListener('canplay', handleCanPlay);\n    audioTag.addEventListener('play', handlePlay);\n    audioTag.srcObject = new MediaStream([audio == null ? void 0 : audio.persistentTrack]);\n    return function () {\n      audioTag == null ? void 0 : audioTag.removeEventListener('canplay', handleCanPlay);\n      audioTag == null ? void 0 : audioTag.removeEventListener('play', handlePlay);\n    };\n  }, [audio == null ? void 0 : audio.persistentTrack, onPlayFailed, sessionId, type]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"audio\", Object.assign({\n    autoPlay: true,\n    ref: audioRef\n  }, props, {\n    \"data-session-id\": sessionId,\n    \"data-audio-type\": type,\n    \"data-subscribed\": subscribedState\n  }));\n}));\nDailyAudioTrack.displayName = 'DailyAudioTrack';\n\nvar DailyAudio = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)( /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function (_ref, ref) {\n  var _ref$autoSubscribeAct = _ref.autoSubscribeActiveSpeaker,\n    autoSubscribeActiveSpeaker = _ref$autoSubscribeAct === void 0 ? false : _ref$autoSubscribeAct,\n    _ref$maxSpeakers = _ref.maxSpeakers,\n    maxSpeakers = _ref$maxSpeakers === void 0 ? 5 : _ref$maxSpeakers,\n    onPlayFailed = _ref.onPlayFailed,\n    _ref$playLocalScreenA = _ref.playLocalScreenAudio,\n    playLocalScreenAudio = _ref$playLocalScreenA === void 0 ? false : _ref$playLocalScreenA;\n  var daily = useDaily();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Array(maxSpeakers).fill('')),\n    speakers = _useState[0],\n    setSpeakers = _useState[1];\n  var _useScreenShare = useScreenShare(),\n    screens = _useScreenShare.screens;\n  var localSessionId = useLocalSessionId();\n  var activeSpeakerId = useActiveSpeakerId({\n    ignoreLocal: true\n  });\n  var containerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, function () {\n    return {\n      getActiveSpeakerAudio: function getActiveSpeakerAudio() {\n        var _containerRef$current, _containerRef$current2;\n        return (_containerRef$current = (_containerRef$current2 = containerRef.current) == null ? void 0 : _containerRef$current2.querySelector(\"audio[data-session-id=\\\"\" + activeSpeakerId + \"\\\"][data-audio-type=\\\"audio\\\"]\")) != null ? _containerRef$current : null;\n      },\n      getAllAudio: function getAllAudio() {\n        var _containerRef$current3, _containerRef$current4;\n        return Array.from((_containerRef$current3 = (_containerRef$current4 = containerRef.current) == null ? void 0 : _containerRef$current4.querySelectorAll('audio')) != null ? _containerRef$current3 : []);\n      },\n      getAudioBySessionId: function getAudioBySessionId(id) {\n        var _containerRef$current5, _containerRef$current6;\n        return (_containerRef$current5 = (_containerRef$current6 = containerRef.current) == null ? void 0 : _containerRef$current6.querySelector(\"audio[data-session-id=\\\"\" + id + \"\\\"][data-audio-type=\\\"audio\\\"]\")) != null ? _containerRef$current5 : null;\n      },\n      getRmpAudio: function getRmpAudio() {\n        var _containerRef$current7, _containerRef$current8;\n        return Array.from((_containerRef$current7 = (_containerRef$current8 = containerRef.current) == null ? void 0 : _containerRef$current8.querySelectorAll('audio[data-audio-type=\"rmpAudio\"]')) != null ? _containerRef$current7 : []);\n      },\n      getScreenAudio: function getScreenAudio() {\n        var _containerRef$current9, _containerRef$current10;\n        return Array.from((_containerRef$current9 = (_containerRef$current10 = containerRef.current) == null ? void 0 : _containerRef$current10.querySelectorAll('audio[data-audio-type=\"screenAudio\"]')) != null ? _containerRef$current9 : []);\n      },\n      getRmpAudioBySessionId: function getRmpAudioBySessionId(id) {\n        var _containerRef$current11, _containerRef$current12;\n        return (_containerRef$current11 = (_containerRef$current12 = containerRef.current) == null ? void 0 : _containerRef$current12.querySelector(\"audio[data-session-id=\\\"\" + id + \"\\\"][data-audio-type=\\\"rmpAudio\\\"]\")) != null ? _containerRef$current11 : null;\n      },\n      getScreenAudioBySessionId: function getScreenAudioBySessionId(id) {\n        var _containerRef$current13, _containerRef$current14;\n        return (_containerRef$current13 = (_containerRef$current14 = containerRef.current) == null ? void 0 : _containerRef$current14.querySelector(\"audio[data-session-id=\\\"\" + id + \"\\\"][data-audio-type=\\\"screenAudio\\\"]\")) != null ? _containerRef$current13 : null;\n      }\n    };\n  }, [activeSpeakerId]);\n  var assignSpeaker = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (get, _set, sessionId) {\n      var _daily$participants;\n      /**\r\n       * Only consider remote participants with subscribed or staged audio.\r\n       */\n      var subscribedParticipants = Object.values((_daily$participants = daily == null ? void 0 : daily.participants()) != null ? _daily$participants : {}).filter(function (p) {\n        return !p.local && Boolean(p.tracks.audio.subscribed);\n      });\n      var isSubscribed = function isSubscribed(id) {\n        return subscribedParticipants.some(function (p) {\n          return p.session_id === id;\n        });\n      };\n      if (!isSubscribed(sessionId)) {\n        if (daily && !daily.isDestroyed() && autoSubscribeActiveSpeaker && !daily.subscribeToTracksAutomatically()) {\n          daily.updateParticipant(sessionId, {\n            setSubscribedTracks: {\n              audio: true\n            }\n          });\n        } else {\n          return;\n        }\n      }\n      setSpeakers(function (prevSpeakers) {\n        var _speakerObjects$;\n        // New speaker is already present\n        if (prevSpeakers.includes(sessionId)) return prevSpeakers;\n        // Try to find a free slot: either unassigned or unsubscribed\n        var freeSlotCheck = function freeSlotCheck(id) {\n          return !id || !isSubscribed(id);\n        };\n        if (prevSpeakers.some(freeSlotCheck)) {\n          var idx = prevSpeakers.findIndex(freeSlotCheck);\n          prevSpeakers[idx] = sessionId;\n          return [].concat(prevSpeakers);\n        }\n        // From here on we can assume that all assigned audio tracks are subscribed.\n        // Try to find muted recent speaker\n        var mutedIdx = prevSpeakers.findIndex(function (id) {\n          return subscribedParticipants.some(function (p) {\n            return p.session_id === id && isTrackOff(p.tracks.audio.state);\n          });\n        });\n        if (mutedIdx >= 0) {\n          prevSpeakers[mutedIdx] = sessionId;\n          return [].concat(prevSpeakers);\n        }\n        // Find least recent non-active speaker and replace with new speaker\n        var speakerObjects = subscribedParticipants.filter(function (p) {\n          return (\n            // Only consider participants currently assigned to speaker slots\n            prevSpeakers.includes(p.session_id) &&\n            // Don't replace current active participant, to avoid audio drop-outs\n            p.session_id !== activeSpeakerId\n          );\n        }).sort(function (a, b) {\n          var _get, _get2;\n          var lastActiveA = (_get = get(getParticipantPropertyAtom(a.session_id, 'last_active'))) != null ? _get : new Date('1970-01-01');\n          var lastActiveB = (_get2 = get(getParticipantPropertyAtom(b.session_id, 'last_active'))) != null ? _get2 : new Date('1970-01-01');\n          if (lastActiveA > lastActiveB) return 1;\n          if (lastActiveA < lastActiveB) return -1;\n          return 0;\n        });\n        // No previous speaker in call anymore. Assign first free slot.\n        if (!speakerObjects.length) {\n          // Don't replace the active speaker. Instead find first non-active speaker slot.\n          var _replaceIdx = prevSpeakers.findIndex(function (id) {\n            return id !== activeSpeakerId;\n          });\n          prevSpeakers[_replaceIdx] = sessionId;\n          return [].concat(prevSpeakers);\n        }\n        // Replace least recent speaker with new speaker\n        var replaceIdx = prevSpeakers.indexOf((_speakerObjects$ = speakerObjects[0]) == null ? void 0 : _speakerObjects$.session_id);\n        prevSpeakers[replaceIdx] = sessionId;\n        return [].concat(prevSpeakers);\n      });\n    });\n    return function (_x, _x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [activeSpeakerId, autoSubscribeActiveSpeaker, daily]));\n  /**\r\n   * Unassigns speaker from speaker slot, e.g. because participant left the call.\r\n   */\n  var removeSpeaker = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (sessionId) {\n    setSpeakers(function (prevSpeakers) {\n      if (!prevSpeakers.includes(sessionId)) return prevSpeakers;\n      var newSpeakers = [].concat(prevSpeakers);\n      var idx = newSpeakers.indexOf(sessionId);\n      newSpeakers[idx] = '';\n      return newSpeakers;\n    });\n  }, []);\n  useThrottledDailyEvent(['active-speaker-change', 'track-started', 'participant-left'], (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (evts) {\n    evts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'active-speaker-change':\n          if (ev.activeSpeaker.peerId === localSessionId) return;\n          assignSpeaker(ev.activeSpeaker.peerId);\n          break;\n        case 'track-started':\n          if (ev.track.kind === 'audio' && ev.participant && !ev.participant.local) {\n            assignSpeaker(ev.participant.session_id);\n          }\n          break;\n        case 'participant-left':\n          removeSpeaker(ev.participant.session_id);\n          break;\n      }\n    });\n  }, [assignSpeaker, localSessionId, removeSpeaker]), 200);\n  var rmpAudioIds = useParticipantIds({\n    filter: (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (p) {\n      var _p$tracks;\n      return Boolean(p == null ? void 0 : (_p$tracks = p.tracks) == null ? void 0 : _p$tracks.rmpAudio);\n    }, [])\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: containerRef\n  }, speakers.map(function (sessionId, idx) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyAudioTrack, {\n      key: \"speaker-slot-\" + idx,\n      onPlayFailed: onPlayFailed,\n      sessionId: sessionId,\n      type: \"audio\"\n    });\n  }), screens.filter(function (screen) {\n    return playLocalScreenAudio ? true : !screen.local;\n  }).map(function (screen) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyAudioTrack, {\n      key: screen.screenId,\n      onPlayFailed: onPlayFailed,\n      sessionId: screen.session_id,\n      type: \"screenAudio\"\n    });\n  }), rmpAudioIds.map(function (id) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyAudioTrack, {\n      key: id + \"-rmp\",\n      onPlayFailed: onPlayFailed,\n      sessionId: id,\n      type: \"rmpAudio\"\n    });\n  }));\n}));\nDailyAudio.displayName = 'DailyAudio';\n\nvar _excluded$1 = [\"automirror\", \"fit\", \"mirror\", \"onResize\", \"playableStyle\", \"sessionId\", \"style\", \"type\"];\nvar DailyVideo = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function DailyVideo(_ref, ref) {\n  var automirror = _ref.automirror,\n    _ref$fit = _ref.fit,\n    fit = _ref$fit === void 0 ? 'contain' : _ref$fit,\n    mirror = _ref.mirror,\n    onResize = _ref.onResize,\n    _ref$playableStyle = _ref.playableStyle,\n    playableStyle = _ref$playableStyle === void 0 ? {} : _ref$playableStyle,\n    sessionId = _ref.sessionId,\n    _ref$style = _ref.style,\n    style = _ref$style === void 0 ? {} : _ref$style,\n    _ref$type = _ref.type,\n    type = _ref$type === void 0 ? 'video' : _ref$type,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n  var localSessionId = useLocalSessionId();\n  var isLocal = localSessionId === sessionId;\n  var isScreen = type === 'screenVideo';\n  var isLocalCam = isLocal && !isScreen;\n  var videoEl = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var videoRef = useMergedRef(videoEl, ref);\n  var videoState = useMediaTrack(sessionId, type);\n  var videoTrack = videoState.persistentTrack;\n  /**\r\n   * Considered as playable video:\r\n   * - local cam feed\r\n   * - any screen share\r\n   * - remote cam feed that is subscribed and reported as playable\r\n   */\n  var isPlayable = isLocalCam || isScreen || !videoState.isOff;\n  var trackState = useParticipantProperty(sessionId, \"tracks.\" + type);\n  var subscribedState = trackState == null ? void 0 : trackState.subscribed;\n  /**\r\n   * Determine if video needs to be mirrored.\r\n   */\n  var isMirrored = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    if (typeof mirror === 'boolean') return mirror;\n    if (!automirror) return false;\n    if (!videoTrack) return isLocalCam;\n    var videoTrackSettings = videoTrack.getSettings();\n    var isUsersFrontCamera = 'facingMode' in videoTrackSettings ? isLocalCam && videoTrackSettings.facingMode === 'user' : isLocalCam;\n    // only apply mirror effect to user facing camera\n    return isUsersFrontCamera;\n  }, [automirror, isLocalCam, mirror, videoTrack]);\n  /**\r\n   * Handle canplay & picture-in-picture events.\r\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function setupVideoEvents() {\n    var video = videoEl.current;\n    if (!video) return;\n    var playVideo = function playVideo() {\n      var promise = video.play();\n      if (promise !== undefined) {\n        promise.then(function () {\n          // All good, playback started.\n          video.controls = false;\n        })[\"catch\"](function (error) {\n          // Auto-play was prevented. Show video controls, so user can play video manually.\n          video.controls = true;\n          console.warn('Failed to play video', error);\n        });\n      }\n    };\n    var handleCanPlay = function handleCanPlay() {\n      if (!video.paused) return;\n      playVideo();\n    };\n    var handleEnterPIP = function handleEnterPIP() {\n      video.style.transform = 'scale(1)';\n    };\n    var handleLeavePIP = function handleLeavePIP() {\n      video.style.transform = '';\n      setTimeout(function () {\n        if (video.paused) playVideo();\n      }, 100);\n    };\n    var handleVisibilityChange = function handleVisibilityChange() {\n      if (document.visibilityState === 'hidden') return;\n      if (!video.paused) return;\n      playVideo();\n    };\n    video.addEventListener('canplay', handleCanPlay);\n    video.addEventListener('enterpictureinpicture', handleEnterPIP);\n    video.addEventListener('leavepictureinpicture', handleLeavePIP);\n    // Videos can be paused if media was played in another app on iOS.\n    // Resuming here, when returning back to Daily call.\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return function () {\n      video.removeEventListener('canplay', handleCanPlay);\n      video.removeEventListener('enterpictureinpicture', handleEnterPIP);\n      video.removeEventListener('leavepictureinpicture', handleLeavePIP);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, []);\n  /**\r\n   * Update srcObject.\r\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function updateSrcObject() {\n    var video = videoEl.current;\n    if (!video || !videoTrack) return;\n    if (!MediaStream) {\n      console.warn(\"MediaStream API not available. Can't setup \" + type + \" for \" + sessionId);\n      return;\n    }\n    video.srcObject = new MediaStream([videoTrack]);\n    video.load();\n    return function () {\n      // clean up when unmounted\n      video.srcObject = null;\n      video.load();\n    };\n  }, [sessionId, type, videoTrack, videoTrack == null ? void 0 : videoTrack.id]);\n  /**\r\n   * Add optional event listener for resize event so the parent component\r\n   * can know the video's native aspect ratio.\r\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function reportVideoDimensions() {\n    var video = videoEl.current;\n    if (!onResize || !video) return;\n    var frame;\n    function handleResize() {\n      if (frame) cancelAnimationFrame(frame);\n      frame = requestAnimationFrame(function () {\n        var video = videoEl.current;\n        if (!video || document.hidden) return;\n        var videoWidth = video.videoWidth;\n        var videoHeight = video.videoHeight;\n        if (videoWidth && videoHeight) {\n          onResize == null ? void 0 : onResize({\n            aspectRatio: videoWidth / videoHeight,\n            height: videoHeight,\n            width: videoWidth\n          });\n        }\n      });\n    }\n    handleResize();\n    video.addEventListener('loadedmetadata', handleResize);\n    video.addEventListener('resize', handleResize);\n    return function () {\n      if (frame) cancelAnimationFrame(frame);\n      video.removeEventListener('loadedmetadata', handleResize);\n      video.removeEventListener('resize', handleResize);\n    };\n  }, [onResize]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"video\", Object.assign({\n    autoPlay: true,\n    muted: true,\n    playsInline: true,\n    ref: videoRef,\n    \"data-local\": isLocal,\n    \"data-mirrored\": isMirrored || undefined,\n    \"data-playable\": isPlayable || undefined,\n    \"data-session-id\": sessionId,\n    \"data-subscribed\": subscribedState,\n    \"data-video-type\": type,\n    style: _extends({\n      objectFit: fit,\n      transform: isMirrored ? 'scale(-1, 1)' : ''\n    }, style, isPlayable ? playableStyle : {})\n  }, props));\n});\nDailyVideo.displayName = 'DailyVideo';\n\nvar DailyDevicesContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({\n  refreshDevices: function refreshDevices() {\n    return Promise.resolve();\n  }\n});\n\nvar generalCameraState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)('idle');\ngeneralCameraState.debugLabel = /*#__PURE__*/jotaiDebugLabel('camera-state');\nvar generalMicrophoneState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)('idle');\ngeneralMicrophoneState.debugLabel = /*#__PURE__*/jotaiDebugLabel('microphone-state');\nvar cameraDevicesState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)([]);\ncameraDevicesState.debugLabel = /*#__PURE__*/jotaiDebugLabel('camera-devices');\nvar microphoneDevicesState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)([]);\nmicrophoneDevicesState.debugLabel = /*#__PURE__*/jotaiDebugLabel('microphone-devices');\nvar speakerDevicesState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)([]);\nspeakerDevicesState.debugLabel = /*#__PURE__*/jotaiDebugLabel('speaker-devices');\nvar lastCameraErrorState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\nlastCameraErrorState.debugLabel = /*#__PURE__*/jotaiDebugLabel('last-camera-error');\nvar DailyDevices = function DailyDevices(_ref) {\n  var children = _ref.children;\n  var daily = useDaily();\n  /**\r\n   * Refreshes list of available devices using enumerateDevices.\r\n   * Previous device states are kept in place, otherwise states are initialized as 'granted'.\r\n   */\n  var refreshDevices = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (_get, set) {\n      var _navigator, _navigator$mediaDevic, _navigator2, _navigator2$mediaDevi;\n      /**\r\n       * Check for legacy browsers.\r\n       */\n      if (typeof ((_navigator = navigator) == null ? void 0 : (_navigator$mediaDevic = _navigator.mediaDevices) == null ? void 0 : _navigator$mediaDevic.getUserMedia) === 'undefined' || typeof ((_navigator2 = navigator) == null ? void 0 : (_navigator2$mediaDevi = _navigator2.mediaDevices) == null ? void 0 : _navigator2$mediaDevi.enumerateDevices) === 'undefined') {\n        set(generalCameraState, 'not-supported');\n        set(generalMicrophoneState, 'not-supported');\n        return;\n      }\n      if (!daily) return;\n      try {\n        var _yield$daily$enumerat = yield daily.enumerateDevices(),\n          devices = _yield$daily$enumerat.devices;\n        /**\r\n         * Filter out \"empty\" devices for when device access has not been granted (yet).\r\n         */\n        var cams = devices.filter(function (d) {\n          return d.kind === 'videoinput' && d.deviceId !== '';\n        });\n        var mics = devices.filter(function (d) {\n          return d.kind === 'audioinput' && d.deviceId !== '';\n        });\n        var speakers = devices.filter(function (d) {\n          return d.kind === 'audiooutput' && d.deviceId !== '';\n        });\n        var _yield$daily$getInput = yield daily.getInputDevices(),\n          camera = _yield$daily$getInput.camera,\n          mic = _yield$daily$getInput.mic,\n          speaker = _yield$daily$getInput.speaker;\n        var mapDevice = function mapDevice(device, d, prevDevices) {\n          var _prevDevices$find$sta, _prevDevices$find;\n          return {\n            device: d,\n            selected: 'deviceId' in device && d.deviceId === device.deviceId,\n            state: (_prevDevices$find$sta = (_prevDevices$find = prevDevices.find(function (p) {\n              return p.device.deviceId === d.deviceId;\n            })) == null ? void 0 : _prevDevices$find.state) != null ? _prevDevices$find$sta : 'granted'\n          };\n        };\n        var sortDeviceByLabel = function sortDeviceByLabel(a, b) {\n          if (a.device.deviceId === 'default') return -1;\n          if (b.device.deviceId === 'default') return 1;\n          if (a.device.label < b.device.label) return -1;\n          if (a.device.label > b.device.label) return 1;\n          return 0;\n        };\n        set(cameraDevicesState, function (prevCams) {\n          return cams.filter(Boolean).map(function (d) {\n            return mapDevice(camera, d, prevCams);\n          }).sort(sortDeviceByLabel);\n        });\n        set(microphoneDevicesState, function (prevMics) {\n          return mics.filter(Boolean).map(function (d) {\n            return mapDevice(mic, d, prevMics);\n          }).sort(sortDeviceByLabel);\n        });\n        set(speakerDevicesState, function (prevSpeakers) {\n          return speakers.filter(Boolean).map(function (d) {\n            return mapDevice(speaker, d, prevSpeakers);\n          }).sort(sortDeviceByLabel);\n        });\n      } catch (e) {\n        set(generalCameraState, 'not-supported');\n        set(generalMicrophoneState, 'not-supported');\n      }\n    });\n    return function (_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [daily]));\n  /**\r\n   * Updates general and specific device states, based on blocked status.\r\n   */\n  var updateDeviceStates = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(function* (get, set) {\n      var _tracks$video$off, _tracks$audio$off, _tracks$audio, _tracks$audio$blocked, _tracks$audio2, _tracks$audio2$blocke, _tracks$audio3, _tracks$audio3$blocke, _tracks$video, _tracks$video$blocked, _tracks$video2, _tracks$video2$blocke, _tracks$video3, _tracks$video3$blocke;\n      if (!daily) return;\n      var currentCamState = get(generalCameraState);\n      var currentMicState = get(generalMicrophoneState);\n      var participants = daily.participants();\n      // Guard against potentially uninitialized local participant\n      if (!participants.local) return;\n      var tracks = participants.local.tracks;\n      var camPermissionState = 'prompt';\n      var micPermissionState = 'prompt';\n      if (navigator.permissions) {\n        try {\n          var camPermission = yield navigator.permissions.query({\n            // @ts-ignore\n            name: 'camera'\n          });\n          camPermissionState = camPermission.state;\n          var micPermission = yield navigator.permissions.query({\n            // @ts-ignore\n            name: 'microphone'\n          });\n          micPermissionState = micPermission.state;\n        } catch (_unused) {\n          // Permissions query not available\n        }\n      }\n      var awaitingCamAccess = camPermissionState === 'prompt' && ['idle', 'pending'].includes(currentCamState) && tracks.video.state === 'interrupted' && !tracks.video.persistentTrack;\n      var initialCamOff = ['idle', 'pending'].includes(currentCamState) && !tracks.video.persistentTrack && Boolean((_tracks$video$off = tracks.video.off) == null ? void 0 : _tracks$video$off.byUser);\n      var awaitingMicAccess = micPermissionState === 'prompt' && ['idle', 'pending'].includes(currentMicState) && tracks.audio.state === 'interrupted' && !tracks.audio.persistentTrack;\n      var initialMicOff = ['idle', 'pending'].includes(currentMicState) && !tracks.audio.persistentTrack && Boolean((_tracks$audio$off = tracks.audio.off) == null ? void 0 : _tracks$audio$off.byUser);\n      if ((_tracks$audio = tracks.audio) != null && (_tracks$audio$blocked = _tracks$audio.blocked) != null && _tracks$audio$blocked.byDeviceInUse) {\n        set(generalMicrophoneState, 'in-use');\n        set(microphoneDevicesState, function (mics) {\n          return mics.map(function (m) {\n            return m.selected ? _extends({}, m, {\n              state: 'in-use'\n            }) : m;\n          });\n        });\n      } else if ((_tracks$audio2 = tracks.audio) != null && (_tracks$audio2$blocke = _tracks$audio2.blocked) != null && _tracks$audio2$blocke.byDeviceMissing) {\n        set(generalMicrophoneState, 'not-found');\n      } else if ((_tracks$audio3 = tracks.audio) != null && (_tracks$audio3$blocke = _tracks$audio3.blocked) != null && _tracks$audio3$blocke.byPermissions || micPermissionState === 'denied') {\n        set(generalMicrophoneState, 'blocked');\n      } else if (awaitingMicAccess) {\n        set(generalMicrophoneState, 'pending');\n      } else if (initialMicOff) {\n        set(generalMicrophoneState, 'idle');\n      } else {\n        set(generalMicrophoneState, 'granted');\n        set(microphoneDevicesState, function (mics) {\n          return mics.map(function (m) {\n            return m.selected ? _extends({}, m, {\n              state: 'granted'\n            }) : m;\n          });\n        });\n      }\n      if ((_tracks$video = tracks.video) != null && (_tracks$video$blocked = _tracks$video.blocked) != null && _tracks$video$blocked.byDeviceInUse) {\n        set(generalCameraState, 'in-use');\n        set(cameraDevicesState, function (cams) {\n          return cams.map(function (m) {\n            return m.selected ? _extends({}, m, {\n              state: 'in-use'\n            }) : m;\n          });\n        });\n      } else if ((_tracks$video2 = tracks.video) != null && (_tracks$video2$blocke = _tracks$video2.blocked) != null && _tracks$video2$blocke.byDeviceMissing) {\n        set(generalCameraState, 'not-found');\n      } else if ((_tracks$video3 = tracks.video) != null && (_tracks$video3$blocke = _tracks$video3.blocked) != null && _tracks$video3$blocke.byPermissions || camPermissionState === 'denied') {\n        set(generalCameraState, 'blocked');\n      } else if (awaitingCamAccess) {\n        set(generalCameraState, 'pending');\n      } else if (initialCamOff) {\n        set(generalCameraState, 'idle');\n      } else {\n        set(generalCameraState, 'granted');\n        set(cameraDevicesState, function (cams) {\n          return cams.map(function (m) {\n            return m.selected ? _extends({}, m, {\n              state: 'granted'\n            }) : m;\n          });\n        });\n      }\n      refreshDevices();\n    });\n    return function (_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [daily, refreshDevices]));\n  useDailyEvent('participant-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (!ev.participant.local) return;\n    updateDeviceStates();\n  }, [updateDeviceStates]));\n  useDailyEvent('available-devices-updated', refreshDevices);\n  useDailyEvent('selected-devices-updated', refreshDevices);\n  useDailyEvent('camera-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    var _ev$error, _ev$error2, _ev$error3, _ev$error4, _ev$error5, _ev$error6, _ev$error7;\n    set(lastCameraErrorState, ev.error);\n    switch ((_ev$error = ev.error) == null ? void 0 : _ev$error.type) {\n      case 'cam-in-use':\n        set(generalCameraState, 'in-use');\n        break;\n      case 'mic-in-use':\n        set(generalMicrophoneState, 'in-use');\n        break;\n      case 'cam-mic-in-use':\n        set(generalCameraState, 'in-use');\n        set(generalMicrophoneState, 'in-use');\n        break;\n      case 'not-found':\n        if ((_ev$error2 = ev.error) != null && _ev$error2.missingMedia.includes('video')) set(generalCameraState, 'not-found');\n        if ((_ev$error3 = ev.error) != null && _ev$error3.missingMedia.includes('audio')) set(generalMicrophoneState, 'not-found');\n        break;\n      case 'permissions':\n        if ((_ev$error4 = ev.error) != null && _ev$error4.blockedMedia.includes('video')) set(generalCameraState, 'blocked');\n        if ((_ev$error5 = ev.error) != null && _ev$error5.blockedMedia.includes('audio')) set(generalMicrophoneState, 'blocked');\n        break;\n      case 'constraints':\n        if (((_ev$error6 = ev.error) == null ? void 0 : _ev$error6.reason) === 'invalid') {\n          set(generalCameraState, 'constraints-invalid');\n          set(generalMicrophoneState, 'constraints-invalid');\n        } else if (((_ev$error7 = ev.error) == null ? void 0 : _ev$error7.reason) === 'none-specified') {\n          set(generalCameraState, 'constraints-none-specified');\n          set(generalMicrophoneState, 'constraints-none-specified');\n        }\n        break;\n      case 'undefined-mediadevices':\n        set(generalCameraState, 'undefined-mediadevices');\n        set(generalMicrophoneState, 'undefined-mediadevices');\n        break;\n      case 'unknown':\n      default:\n        set(generalCameraState, 'unknown');\n        set(generalMicrophoneState, 'unknown');\n        break;\n    }\n  }, [])));\n  /**\r\n   * Update all device state, when camera is started.\r\n   */\n  useDailyEvent('started-camera', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(generalCameraState, 'granted');\n    set(generalMicrophoneState, 'granted');\n    updateDeviceStates();\n  }, [updateDeviceStates])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyDevicesContext.Provider, {\n    value: {\n      refreshDevices: refreshDevices\n    }\n  }, children);\n};\n\nvar liveStreamingState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)({\n  errorMsg: undefined,\n  isLiveStreaming: false,\n  layout: undefined\n});\nliveStreamingState.debugLabel = /*#__PURE__*/jotaiDebugLabel('live-streaming');\nvar DailyLiveStreaming = function DailyLiveStreaming(_ref) {\n  var children = _ref.children;\n  useDailyEvent('live-streaming-started', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(liveStreamingState, {\n      isLiveStreaming: true,\n      layout: ev == null ? void 0 : ev.layout\n    });\n  }, [])));\n  useDailyEvent('live-streaming-stopped', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(liveStreamingState, function (prevState) {\n      return _extends({}, prevState, {\n        isLiveStreaming: false,\n        layout: undefined\n      });\n    });\n  }, [])));\n  useDailyEvent('live-streaming-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(liveStreamingState, function (prevState) {\n      return _extends({}, prevState, {\n        errorMsg: ev.errorMsg\n      });\n    });\n  }, [])));\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(liveStreamingState, {\n      errorMsg: undefined,\n      isLiveStreaming: false,\n      layout: undefined\n    });\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar meetingStateState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)('new');\nmeetingStateState.debugLabel = /*#__PURE__*/jotaiDebugLabel('meeting-state');\nvar meetingErrorState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\nmeetingErrorState.debugLabel = /*#__PURE__*/jotaiDebugLabel('meeting-error');\nvar nonFatalErrorState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\nnonFatalErrorState.debugLabel = /*#__PURE__*/jotaiDebugLabel('non-fatal-error');\nvar meetingSessionDataState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)({\n  data: undefined,\n  topology: 'none'\n});\nmeetingSessionDataState.debugLabel = /*#__PURE__*/jotaiDebugLabel('meeting-session-data');\nvar DailyMeeting = function DailyMeeting(_ref) {\n  var children = _ref.children;\n  var daily = useDaily();\n  /**\r\n   * Updates meeting state.\r\n   */\n  var updateMeetingState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    if (!daily) return;\n    var meetingState = daily.meetingState();\n    set(meetingStateState, meetingState);\n    return meetingState;\n  }, [daily]));\n  useDailyEvent('loading', updateMeetingState);\n  useDailyEvent('loaded', updateMeetingState);\n  useDailyEvent('joining-meeting', updateMeetingState);\n  useDailyEvent('joined-meeting', updateMeetingState);\n  useDailyEvent('left-meeting', updateMeetingState);\n  useDailyEvent('error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(meetingErrorState, ev);\n    updateMeetingState();\n  }, [updateMeetingState])));\n  useDailyEvent('nonfatal-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(nonFatalErrorState, ev);\n  }, [])));\n  /**\r\n   * Updates meeting session state.\r\n   */\n  var initMeetingSessionState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    if (!daily) return;\n    set(meetingSessionDataState, daily.meetingSessionState());\n  }, [daily]));\n  /**\r\n   * Initialize state when joined meeting or setting up the hook.\r\n   */\n  useDailyEvent('joined-meeting', initMeetingSessionState);\n  /**\r\n   * Update Jotai state whenever meeting session state is updated.\r\n   */\n  useDailyEvent('meeting-session-state-updated', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(meetingSessionDataState, ev.meetingSessionState);\n  }, [])));\n  /**\r\n   * Reset Jotai state when meeting ends.\r\n   */\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(meetingSessionDataState, {\n      data: undefined,\n      topology: 'none'\n    });\n  }, [])));\n  /**\r\n   * Reset Jotai state when call instance is destroyed.\r\n   */\n  useDailyEvent('call-instance-destroyed', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(meetingStateState, 'new');\n    set(meetingErrorState, null);\n    set(nonFatalErrorState, null);\n    set(meetingSessionDataState, {\n      data: undefined,\n      topology: 'none'\n    });\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar topologyState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)('none');\ntopologyState.debugLabel = /*#__PURE__*/jotaiDebugLabel('topology');\nvar networkQualityState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(100);\nnetworkQualityState.debugLabel = /*#__PURE__*/jotaiDebugLabel('network-quality');\nvar networkThresholdState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)('good');\nnetworkThresholdState.debugLabel = /*#__PURE__*/jotaiDebugLabel('network-threshold');\nvar DailyNetwork = function DailyNetwork(_ref) {\n  var children = _ref.children;\n  var daily = useDaily();\n  var topology = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(topologyState);\n  var initTopology = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (_get, set) {\n      if (!daily) return;\n      var topology = yield daily.getNetworkTopology();\n      if (!topology || (topology == null ? void 0 : topology.topology) === 'none') return;\n      set(topologyState, topology.topology);\n    });\n    return function (_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [daily]));\n  useDailyEvent('joined-meeting', initTopology);\n  useDailyEvent('network-connection', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    switch (ev.event) {\n      case 'connected':\n        if (ev.type === 'peer-to-peer') set(topologyState, 'peer');\n        if (ev.type === 'sfu') set(topologyState, 'sfu');\n        break;\n    }\n  }, [])));\n  useDailyEvent('network-quality-change', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(networkQualityState, function (prevQuality) {\n      return prevQuality !== ev.quality ? ev.quality : prevQuality;\n    });\n    set(networkThresholdState, function (prevThreshold) {\n      return prevThreshold !== ev.threshold ? ev.threshold : prevThreshold;\n    });\n  }, [])));\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(topologyState, 'none');\n    set(networkQualityState, 100);\n    set(networkThresholdState, 'good');\n  }, [])));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || topology !== 'none') return;\n    initTopology();\n  }, [daily, initTopology, topology]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar recordingState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)({\n  isLocalParticipantRecorded: false,\n  isRecording: false\n});\nrecordingState.debugLabel = /*#__PURE__*/jotaiDebugLabel('recording-state');\nvar DailyRecordings = function DailyRecordings(_ref) {\n  var children = _ref.children;\n  var localSessionId = useLocalSessionId();\n  var recordingParticipantIds = useParticipantIds({\n    filter: 'record'\n  });\n  var maybeUpdateRecordingState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set, hasRecordingParticipants, isLocalParticipantRecording) {\n    var oldState = get(recordingState);\n    var s = {\n      isLocalParticipantRecorded: oldState.isLocalParticipantRecorded,\n      isRecording: oldState.isRecording,\n      local: oldState.local,\n      type: oldState.type\n    };\n    var newState = {\n      // In case type is local or not set, determine based on recording participants\n      isLocalParticipantRecorded: (s == null ? void 0 : s.type) === 'local' || !(s != null && s.type) ? hasRecordingParticipants : s.isLocalParticipantRecorded,\n      isRecording: (s == null ? void 0 : s.type) === 'local' || !(s != null && s.type) ? hasRecordingParticipants : s.isRecording,\n      local: ((s == null ? void 0 : s.type) === 'local' || !(s != null && s.type)) && hasRecordingParticipants ? isLocalParticipantRecording : s == null ? void 0 : s.local,\n      /**\r\n       * Set type in case recording participants are detected.\r\n       * We only set `record` on participants, when recording type is 'local'.\r\n       */\n      type: hasRecordingParticipants ? 'local' : oldState == null ? void 0 : oldState.type\n    };\n    if (customDeepEqual(s, newState)) return;\n    set(recordingState, _extends({}, s, newState));\n  }, []));\n  /**\r\n   * Update recording state, whenever amount of recording participants changes.\r\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var hasRecordingParticipants = recordingParticipantIds.length > 0;\n    var isLocalParticipantRecording = recordingParticipantIds.includes(localSessionId || 'local');\n    maybeUpdateRecordingState(hasRecordingParticipants, isLocalParticipantRecording);\n  }, [localSessionId, maybeUpdateRecordingState, recordingParticipantIds]);\n  useDailyEvent('recording-started', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    var isLocalParticipantRecorded = true;\n    switch (ev.type) {\n      case 'cloud-beta':\n      case 'cloud':\n        {\n          var _ev$layout;\n          if (localSessionId && ((_ev$layout = ev.layout) == null ? void 0 : _ev$layout.preset) === 'single-participant' && ev.layout.session_id !== localSessionId) {\n            isLocalParticipantRecorded = false;\n          }\n          break;\n        }\n    }\n    set(recordingState, {\n      error: false,\n      isLocalParticipantRecorded: isLocalParticipantRecorded,\n      isRecording: true,\n      layout: ev == null ? void 0 : ev.layout,\n      local: ev == null ? void 0 : ev.local,\n      recordingId: ev == null ? void 0 : ev.recordingId,\n      recordingStartedDate: new Date(),\n      startedBy: ev == null ? void 0 : ev.startedBy,\n      type: ev == null ? void 0 : ev.type\n    });\n  }, [localSessionId])));\n  useDailyEvent('recording-stopped', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(recordingState, function (prevState) {\n      return _extends({}, prevState, {\n        isLocalParticipantRecorded: false,\n        isRecording: false\n      });\n    });\n  }, [])));\n  useDailyEvent('recording-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(recordingState, function (prevState) {\n      return _extends({}, prevState, {\n        error: true,\n        isLocalParticipantRecorded: false,\n        isRecording: false\n      });\n    });\n  }, [])));\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(recordingState, {\n      isLocalParticipantRecorded: false,\n      isRecording: false\n    });\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\n/**\r\n * Returns a meeting's current state.\r\n */\nvar useMeetingState = function useMeetingState() {\n  var meetingState = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(meetingStateState);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(meetingState);\n  return meetingState;\n};\n\nvar roomState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\nroomState.debugLabel = /*#__PURE__*/jotaiDebugLabel('room-state');\nvar DailyRoom = function DailyRoom(_ref) {\n  var children = _ref.children;\n  var daily = useDaily();\n  var meetingState = useMeetingState();\n  var updateRoom = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (_get, set) {\n      if (!daily || meetingState === 'left-meeting') return;\n      var room = yield daily.room();\n      if (room && 'id' in room) {\n        set(roomState, room);\n      }\n      return room;\n    });\n    return function (_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [daily, meetingState]));\n  useDailyEvent('access-state-updated', updateRoom);\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    return function () {\n      set(roomState, null);\n    };\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar transcriptionState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)({\n  isTranscribing: false,\n  model: 'general',\n  language: 'en',\n  transcriptions: []\n});\ntranscriptionState.debugLabel = /*#__PURE__*/jotaiDebugLabel('transcription-state');\nvar DailyTranscriptions = function DailyTranscriptions(_ref) {\n  var children = _ref.children;\n  useDailyEvent('transcription-started', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(transcriptionState, {\n      error: false,\n      transcriptionStartDate: new Date(),\n      isTranscribing: true,\n      transcriptions: [],\n      endpointing: ev.endpointing,\n      extra: ev.extra,\n      includeRawResponse: ev.includeRawResponse,\n      instanceId: ev.instanceId,\n      language: ev.language,\n      model: ev.model,\n      profanity_filter: ev.profanity_filter,\n      punctuate: ev.punctuate,\n      redact: ev.redact,\n      startedBy: ev.startedBy,\n      tier: ev.tier\n    });\n  }, [])));\n  useDailyEvent('transcription-stopped', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(transcriptionState, function (prevState) {\n      return _extends({}, prevState, {\n        updatedBy: ev.updatedBy,\n        isTranscribing: false\n      });\n    });\n  }, [])));\n  useDailyEvent('transcription-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(transcriptionState, function (prevState) {\n      return _extends({}, prevState, {\n        error: true,\n        isTranscribing: false\n      });\n    });\n  }, [])));\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(transcriptionState, function (prevState) {\n      return _extends({}, prevState, {\n        isTranscribing: false\n      });\n    });\n  }, [])));\n  useDailyEvent('app-message', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    if ((ev == null ? void 0 : ev.fromId) === 'transcription') {\n      set(transcriptionState, function (prevState) {\n        return _extends({}, prevState, {\n          // setting it to true whenever a new message is received\n          // as the participants who joined after the transcription-started event\n          // won't be knowing if transcription is started or not\n          isTranscribing: true,\n          transcriptions: [].concat(prevState.transcriptions, [ev.data])\n        });\n      });\n    }\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar defaultOptions = {};\nvar defaultShouldCreateInstance = function defaultShouldCreateInstance() {\n  return true;\n};\nvar defaultProps = {\n  options: defaultOptions,\n  shouldCreateInstance: defaultShouldCreateInstance\n};\n/**\r\n * Helper hook to maintain custom call instances in React codebases.\r\n */\nvar useCallInstance = function useCallInstance(type, _temp) {\n  var _ref = _temp === void 0 ? defaultProps : _temp,\n    parentElRef = _ref.parentElRef,\n    _ref$options = _ref.options,\n    options = _ref$options === void 0 ? defaultOptions : _ref$options,\n    _ref$shouldCreateInst = _ref.shouldCreateInstance,\n    shouldCreateInstance = _ref$shouldCreateInst === void 0 ? defaultShouldCreateInstance : _ref$shouldCreateInst;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),\n    callInstance = _useState[0],\n    setCallInstance = _useState[1];\n  /**\r\n   * Holds last used props when callObject instance was created.\r\n   */\n  var lastUsedOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    /**\r\n     * Call frame instances with a defined parentEl likely pass a ref.\r\n     * Typically a DOM ref is initialized with useRef(null).\r\n     * We'll want to wait until parentEl is defined, meaning that the ref is\r\n     * correctly wired up with a DOM element.\r\n     * Otherwise we'll just check shouldCreateInstance().\r\n     */\n    if (type === 'callFrame' && (parentElRef == null ? void 0 : parentElRef.current) === null || !shouldCreateInstance()) return;\n    function destroyCallInstance(_x) {\n      return _destroyCallInstance.apply(this, arguments);\n    }\n    /**\r\n     * Once instance is destroyed, nullify callInstance, so a new one can be created.\r\n     */\n    function _destroyCallInstance() {\n      _destroyCallInstance = _asyncToGenerator(function* (co) {\n        yield co.destroy();\n      });\n      return _destroyCallInstance.apply(this, arguments);\n    }\n    var handleDestroyedInstance = function handleDestroyedInstance() {\n      /**\r\n       * Setting a timeout makes sure the destruction and creation\r\n       * of call instances happen in separate call stacks.\r\n       * Otherwise there's a risk for duplicate call instances.\r\n       */\n      setTimeout(function () {\n        return setCallInstance(null);\n      }, 0);\n    };\n    var co = _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getCallInstance();\n    /**\r\n     * In case a call instance exists outside of this hook instance's knowledge,\r\n     * store it in state.\r\n     */\n    if (!callInstance && co && !co.isDestroyed()) {\n      co.once('call-instance-destroyed', handleDestroyedInstance);\n      setCallInstance(co);\n      return;\n    }\n    /**\r\n     * callInstance exists.\r\n     */\n    if (callInstance) {\n      /**\r\n       * Props have changed. Destroy current instance, so a new one can be created.\r\n       */\n      if (!customDeepEqual(lastUsedOptions.current, options)) {\n        destroyCallInstance(callInstance);\n      }\n      /**\r\n       * Return early.\r\n       */\n      return;\n    }\n    if (!co || co.isDestroyed()) {\n      /**\r\n       * callInstance doesn't exist or is destroyed (TODO: Check why getCallInstance() can return a destroyed instance),\r\n       * but should be created.\r\n       * Important to spread props, because createCallObject/createFrame alters the passed object (adds layout and dailyJsVersion).\r\n       */\n      switch (type) {\n        case 'callFrame':\n          co = parentElRef != null && parentElRef.current ? _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createFrame(parentElRef.current, _extends({}, options)) : _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createFrame(_extends({}, options));\n          break;\n        case 'callObject':\n          co = _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createCallObject(_extends({}, options));\n          break;\n      }\n      lastUsedOptions.current = options;\n    }\n    setCallInstance(co);\n    co.once('call-instance-destroyed', handleDestroyedInstance);\n    /**\r\n     * No cleanup phase here, because callObject.destroy() returns a Promise.\r\n     * We can't have asynchronous cleanups in a useEffect.\r\n     * To avoid infinite render loops we compare the props when creating call object instances.\r\n     */\n  }, [callInstance, options, parentElRef, shouldCreateInstance, type]);\n  return callInstance;\n};\n\n/**\r\n * Helper hook to maintain custom callObject instances in React codebases.\r\n */\nvar useCallObject = function useCallObject(props) {\n  return useCallInstance('callObject', props);\n};\n\nvar _excluded$2 = [\"children\", \"jotaiStore\"];\nvar DailyProvider = function DailyProvider(_ref) {\n  var children = _ref.children,\n    jotaiStore = _ref.jotaiStore,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n  var eventsMap = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\n  /**\r\n   * Generic event handler to loop through registered event callbacks.\r\n   */\n  var handleEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    var _eventsMap$current$ev, _eventsMap$current;\n    if (!('action' in ev)) return;\n    var event = ev.action;\n    var allHandlers = Array.from((_eventsMap$current$ev = (_eventsMap$current = eventsMap.current) == null ? void 0 : _eventsMap$current[event]) != null ? _eventsMap$current$ev : []);\n    var priorityHandlers = allHandlers.filter(function (_ref2) {\n      var key = _ref2[0];\n      return key < 0;\n    });\n    var normalHandlers = allHandlers.filter(function (_ref3) {\n      var key = _ref3[0];\n      return key > 0;\n    });\n    var sortedHandlers = [].concat(priorityHandlers, normalHandlers);\n    for (var _iterator = _createForOfIteratorHelperLoose(sortedHandlers), _step; !(_step = _iterator()).done;) {\n      var _step$value = _step.value,\n        cb = _step$value[1];\n      cb(ev);\n    }\n  }, []);\n  /**\r\n   * In case events are set up via useDailyEvent before a DailyCall instance is available,\r\n   * we'll register the events whenever daily is set.\r\n   */\n  var initEventHandlers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (daily) {\n    if (!daily) return;\n    Object.keys(eventsMap.current).forEach(function (event) {\n      daily.off(event, handleEvent);\n      if (!daily.isDestroyed()) {\n        daily.on(event, handleEvent);\n      }\n    });\n  }, [handleEvent]);\n  var externalCallObject = 'callObject' in props ? props.callObject : null;\n  var memoizedOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return 'callObject' in props ? {} : props;\n  }, [props]);\n  var internalCallObject = useCallObject({\n    options: memoizedOptions,\n    shouldCreateInstance: (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n      return !('callObject' in props);\n    }, [props])\n  });\n  var callObject = externalCallObject != null ? externalCallObject : internalCallObject;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!callObject) return;\n    initEventHandlers(callObject);\n  }, [callObject, initEventHandlers]);\n  /**\r\n   * Registers event callback.\r\n   */\n  var on = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev, cb, key) {\n    var _eventsMap$current$ev2;\n    if (!eventsMap.current[ev]) {\n      eventsMap.current[ev] = new Map();\n      if (callObject) {\n        /**\r\n         * Make sure only 1 event listener is registered at any time for handleEvent.\r\n         * Otherwise, events sent from daily-js might be handled multiple times.\r\n         */\n        callObject.off(ev, handleEvent);\n        if (!callObject.isDestroyed()) {\n          callObject.on(ev, handleEvent);\n        }\n      }\n    }\n    if (!((_eventsMap$current$ev2 = eventsMap.current[ev]) != null && _eventsMap$current$ev2.has(key))) {\n      var _eventsMap$current$ev3;\n      (_eventsMap$current$ev3 = eventsMap.current[ev]) == null ? void 0 : _eventsMap$current$ev3.set(key, cb);\n    }\n  }, [callObject, handleEvent]);\n  /**\r\n   * Unregisters event callback.\r\n   */\n  var off = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev, key) {\n    var _eventsMap$current$ev4, _eventsMap$current$ev5;\n    (_eventsMap$current$ev4 = eventsMap.current[ev]) == null ? void 0 : _eventsMap$current$ev4[\"delete\"](key);\n    if (((_eventsMap$current$ev5 = eventsMap.current[ev]) == null ? void 0 : _eventsMap$current$ev5.size) === 0) {\n      callObject == null ? void 0 : callObject.off(ev, handleEvent);\n      delete eventsMap.current[ev];\n    }\n  }, [callObject, handleEvent]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(jotai__WEBPACK_IMPORTED_MODULE_6__.Provider, {\n    store: jotaiStore\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyContext.Provider, {\n    value: callObject\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyEventContext.Provider, {\n    value: {\n      on: on,\n      off: off\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyRoom, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyMeeting, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyNetwork, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyParticipants, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyRecordings, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyLiveStreaming, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyTranscriptions, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyDevices, null, children)))))))))));\n};\n\n/**\r\n * Returns the participant identified by the given sessionId.\r\n * @param sessionId  The participant's session_id or \"local\".\r\n * @deprecated Use [useParticipantProperty](https://docs.daily.co/reference/daily-react/use-participant-property) instead to only subscribe to required participant properties.\r\n */\nvar useParticipant = function useParticipant(sessionId, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onParticipantLeft = _ref.onParticipantLeft,\n    onParticipantUpdated = _ref.onParticipantUpdated;\n  var participant = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(participantState(sessionId));\n  useThrottledDailyEvent(['participant-updated', 'participant-left'], (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (evts) {\n    var filteredEvts = evts.filter(function (ev) {\n      return ev.participant.session_id === sessionId;\n    });\n    if (!filteredEvts.length) return;\n    filteredEvts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'participant-updated':\n          onParticipantUpdated == null ? void 0 : onParticipantUpdated(ev);\n          break;\n        case 'participant-left':\n          onParticipantLeft == null ? void 0 : onParticipantLeft(ev);\n          break;\n      }\n    });\n  }, [onParticipantLeft, onParticipantUpdated, sessionId]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(participant);\n  return participant;\n};\n\n/**\r\n * Returns the most recent participant mentioned in an [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\r\n * @deprecated Use [useActiveSpeakerId](https://docs.daily.co/reference/daily-react/use-active-speaker-id) instead.\r\n */\nvar useActiveParticipant = function useActiveParticipant(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    _ref$ignoreLocal = _ref.ignoreLocal,\n    ignoreLocal = _ref$ignoreLocal === void 0 ? false : _ref$ignoreLocal,\n    onActiveSpeakerChange = _ref.onActiveSpeakerChange;\n  var daily = useDaily();\n  var recentActiveId = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(activeIdState);\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''),\n    activeId = _useState[0],\n    setActiveId = _useState[1];\n  var activeParticipant = useParticipant(activeId);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var _daily$participants;\n    if (!daily) return;\n    var local = daily == null ? void 0 : (_daily$participants = daily.participants()) == null ? void 0 : _daily$participants.local;\n    if (ignoreLocal && recentActiveId === (local == null ? void 0 : local.session_id)) return;\n    // setting activeId as string to avoid passing null to useParticipant hook\n    setActiveId(recentActiveId != null ? recentActiveId : '');\n  }, [daily, ignoreLocal, recentActiveId]);\n  useDailyEvent('active-speaker-change', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onActiveSpeakerChange == null ? void 0 : onActiveSpeakerChange(ev);\n  }, [onActiveSpeakerChange]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(activeParticipant);\n  return activeParticipant;\n};\n\n/**\r\n * React hook to setup [app-message](https://docs.daily.co/reference/daily-js/events/participant-events#app-message) listeners and\r\n * to send messages via [sendAppMessage](https://docs.daily.co/reference/daily-js/instance-methods/send-app-message).\r\n */\nvar useAppMessage = function useAppMessage(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onAppMessage = _ref.onAppMessage;\n  var daily = useDaily();\n  var sendAppMessage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (data, to) {\n    if (to === void 0) {\n      to = '*';\n    }\n    if (!daily) return;\n    daily.sendAppMessage(data, to);\n  }, [daily]);\n  var handleAppMessage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onAppMessage == null ? void 0 : onAppMessage(ev, sendAppMessage);\n  }, [onAppMessage, sendAppMessage]);\n  useDailyEvent('app-message', handleAppMessage);\n  return sendAppMessage;\n};\n\nvar audioLevelProcessor = \"\\n    class AudioLevelProcessor extends AudioWorkletProcessor {\\n    volume;\\n    interval;\\n    nextFrame;\\n    \\n    constructor() {\\n      super();\\n      this.volume = 0;\\n      this.interval = 25;\\n      this.nextFrame = this.interval;\\n    }\\n    \\n    get intervalInFrames() {\\n      // sampleRate is globally defined in AudioWorklets.\\n      // See https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletGlobalScope\\n      // eslint-disable-next-line no-undef\\n      return (this.interval / 1000) * sampleRate;\\n    }\\n    \\n    process(inputList) {\\n      const firstInput = inputList[0];\\n    \\n      if (firstInput.length > 0) {\\n        const inputData = firstInput[0];\\n        let total = 0;\\n    \\n        for (let i = 0; i < inputData.length; ++i) {\\n          total += Math.abs(inputData[i]);\\n        }\\n    \\n        const rms = Math.sqrt(total / inputData.length);\\n        this.volume = Math.max(0, Math.min(1, rms));\\n    \\n        this.nextFrame -= inputData.length;\\n        if (this.nextFrame < 0) {\\n          this.nextFrame += this.intervalInFrames;\\n          this.port.postMessage({ volume: this.volume });\\n        }\\n      }\\n    \\n      return true;\\n    }\\n    }\\n    \\n    registerProcessor('audiolevel', AudioLevelProcessor);              \\n\";\nvar inlineAudioWorklet = \"data:application/javascript;charset=utf8,\" + /*#__PURE__*/encodeURIComponent(audioLevelProcessor);\n\n/**\r\n * Returns the volume level of a given MediaStreamTrack.\r\n * @param mediaTrack The MediaStreamTrack to be analysed.\r\n * @param onVolumeChange The function to execute when the volume changes. Can be used to visualise audio output.\r\n * @deprecated Use useAudioLevelObserver() instead.\r\n */\nvar useAudioLevel = function useAudioLevel(mediaTrack, onVolumeChange) {\n  var audioCtx = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function setupStreamAndStartProcessing() {\n    // No mediaTrack. Stop immediately.\n    if (!mediaTrack) return;\n    var AudioCtx = typeof AudioContext !== 'undefined' ? AudioContext : typeof window.webkitAudioContext !== 'undefined' ? window.webkitAudioContext : null;\n    // No AudioContext available in browser. Can't measure audio volume.\n    if (!AudioCtx) return;\n    if (!audioCtx.current) {\n      // No audio context initialized. Initializing now.\n      audioCtx.current = new AudioCtx();\n    }\n    var audioContext = audioCtx.current;\n    // Audio context could not be initialized. Stopping.\n    if (!audioContext) return;\n    // No MediaStream API available (e.g. WebRTC disabled)\n    if (!MediaStream) return;\n    var mediaStreamSource = audioContext.createMediaStreamSource(new MediaStream([mediaTrack]));\n    var node;\n    var gainNode;\n    var startProcessing = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* () {\n        /**\r\n         * Try to add the module only once.\r\n         * In case it's not added to the audio context, yet, trying to initialize it will fail.\r\n         * There's only one real reason for `new AudioWorkletNode` to fail and that is\r\n         * when the corresponding module isn't added to the audio context, yet.\r\n         * This makes sure we only add the module once.\r\n         *\r\n         * We're inlining the worklet instead of loading it via a URL as not to complicate bundling\r\n         * this package.\r\n         */\n        try {\n          node = new AudioWorkletNode(audioContext, 'audiolevel');\n          gainNode = audioContext.createGain();\n        } catch (_unused) {\n          try {\n            yield audioContext.audioWorklet.addModule(inlineAudioWorklet);\n            node = new AudioWorkletNode(audioContext, 'audiolevel');\n            gainNode = audioContext.createGain();\n          } catch (e) {\n            console.error(e);\n          }\n        }\n        if (!(node && gainNode)) return;\n        node.port.onmessage = function (event) {\n          var volume = 0;\n          if (event.data.volume) volume = event.data.volume;\n          if (!node) return;\n          onVolumeChange(volume);\n        };\n        gainNode.gain.value = 0;\n        try {\n          mediaStreamSource.connect(node).connect(gainNode).connect(audioContext.destination);\n        } catch (e) {\n          console.warn(e);\n        }\n      });\n      return function startProcessing() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    startProcessing();\n    return function () {\n      var _node;\n      (_node = node) == null ? void 0 : _node.disconnect();\n      node = null;\n      mediaStreamSource == null ? void 0 : mediaStreamSource.disconnect();\n    };\n  }, [onVolumeChange, mediaTrack]);\n};\n\n/**\r\n * Observes the volume level for a given participant.\r\n * @param id The session_id of the participant to observe.\r\n * @param cb The function to execute when the volume changes. Can be used to visualise audio output.\r\n * @param errorCb Error callback. Called when local audio level observer is not available in browser.\r\n */\nvar useAudioLevelObserver = function useAudioLevelObserver(id, cb, errorCb) {\n  var daily = useDaily();\n  var localSessionId = useLocalSessionId();\n  var isLocal = id === localSessionId;\n  useDailyEvent('local-audio-level', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (!isLocal) return;\n    cb(ev.audioLevel);\n  }, [cb, isLocal]));\n  useDailyEvent('remote-participants-audio-level', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (isLocal) return;\n    cb(ev.participantsAudioLevel[id]);\n  }, [cb, id, isLocal]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function maybeStartLocalAudioObserver() {\n    if (!daily || daily.isDestroyed() || !isLocal) return;\n    if (daily.isLocalAudioLevelObserverRunning()) return;\n    try {\n      daily.startLocalAudioLevelObserver();\n    } catch (_unused) {\n      errorCb == null ? void 0 : errorCb('Local audio level observer not supported in this browser');\n    }\n  }, [daily, errorCb, isLocal]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function maybeStartRemoteAudioObserver() {\n    if (!daily || daily.isDestroyed() || isLocal) return;\n    if (daily.isRemoteParticipantsAudioLevelObserverRunning()) return;\n    daily.startRemoteParticipantsAudioLevelObserver();\n  }, [daily, isLocal]);\n};\n\n/**\r\n * Returns a participant's audio track and state.\r\n * @param participantId The participant's session_id.\r\n */\nvar useAudioTrack = function useAudioTrack(participantId) {\n  return useMediaTrack(participantId, 'audio');\n};\n\n/**\r\n * Helper hook to maintain custom callFrame instances in React codebases.\r\n */\nvar useCallFrame = function useCallFrame(props) {\n  return useCallInstance('callFrame', props);\n};\n\nvar CPULoadState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)({\n  state: 'low',\n  reason: 'none'\n});\nCPULoadState.debugLabel = /*#__PURE__*/jotaiDebugLabel('cpu-load');\n/**\r\n * Returns the current CPU load as reported by daily-js [cpu-load-change](https://docs.daily.co/reference/daily-js/events/quality-events#cpu-load-change) events\r\n * and [getCpuLoadStats](https://docs.daily.co/reference/daily-js/instance-methods/get-cpu-load-stats).\r\n */\nvar useCPULoad = function useCPULoad(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onCPULoadChange = _ref.onCPULoadChange;\n  var cpu = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(CPULoadState);\n  var daily = useDaily();\n  var meetingState = useMeetingState();\n  var updateCPULoadState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set, cpu) {\n    var prev = get(CPULoadState); // Get the current CPU load state\n    if (fast_deep_equal__WEBPACK_IMPORTED_MODULE_3___default()(prev, cpu)) return; // Check if the previous state is equal to the current one\n    set(CPULoadState, cpu); // Update the state if different\n  }, []));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var mounted = true;\n    if (!daily || daily.isDestroyed() || meetingState !== 'joined-meeting') return;\n    daily.getCpuLoadStats().then(function (stats) {\n      if (!mounted) return;\n      updateCPULoadState({\n        state: stats.cpuLoadState,\n        reason: stats.cpuLoadStateReason\n      });\n    });\n    return function () {\n      mounted = false;\n    };\n  }, [daily, meetingState, updateCPULoadState]);\n  useDailyEvent('cpu-load-change', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    updateCPULoadState({\n      state: ev.cpuLoadState,\n      reason: ev.cpuLoadStateReason\n    });\n    onCPULoadChange == null ? void 0 : onCPULoadChange(ev);\n  }, [onCPULoadChange, updateCPULoadState]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(cpu);\n  return cpu;\n};\n\n/**\r\n * Returns a meeting's last known errors.\r\n */\nvar useDailyError = function useDailyError() {\n  var meetingError = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(meetingErrorState);\n  var nonFatalError = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(nonFatalErrorState);\n  var result = {\n    meetingError: meetingError,\n    nonFatalError: nonFatalError\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * This hook allows access to information about the user's devices and their state.\r\n */\nvar useDevices = function useDevices() {\n  var daily = useDaily();\n  var camState = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(generalCameraState);\n  var micState = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(generalMicrophoneState);\n  var camDevices = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(cameraDevicesState);\n  var micDevices = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(microphoneDevicesState);\n  var speakerDevices = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(speakerDevicesState);\n  var cameraError = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(lastCameraErrorState);\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DailyDevicesContext),\n    refreshDevices = _useContext.refreshDevices;\n  /**\r\n   * Sets video input device to given deviceId.\r\n   */\n  var setCamera = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (deviceId) {\n      yield daily == null ? void 0 : daily.setInputDevicesAsync({\n        audioDeviceId: null,\n        videoDeviceId: deviceId\n      });\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [daily]);\n  /**\r\n   * Sets audio input device to given deviceId.\r\n   */\n  var setMicrophone = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (deviceId) {\n      yield daily == null ? void 0 : daily.setInputDevicesAsync({\n        audioDeviceId: deviceId,\n        videoDeviceId: null\n      });\n    });\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [daily]);\n  /**\r\n   * Sets audio output device to given deviceId.\r\n   */\n  var setSpeaker = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(function* (deviceId) {\n      yield daily == null ? void 0 : daily.setOutputDeviceAsync({\n        outputDeviceId: deviceId\n      });\n    });\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [daily]);\n  var errorStates = ['blocked', 'in-use', 'not-found', 'constraints-invalid', 'constraints-none-specified', 'undefined-mediadevices', 'unknown'];\n  var result = {\n    /**\r\n     * Most recent error object emitted via [camera-error event](https://docs.daily.co/reference/daily-js/events/meeting-events#camera-error).\r\n     */\n    cameraError: cameraError,\n    /**\r\n     * A list of the user's camera (videoinput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\r\n     */\n    cameras: camDevices,\n    /**\r\n     * The general state for camera access.\r\n     */\n    camState: camState,\n    /**\r\n     * Holds the currently selected camera.\r\n     */\n    currentCam: camDevices.find(function (cam) {\n      return cam.selected;\n    }),\n    /**\r\n     * Holds the currently selected microphone.\r\n     */\n    currentMic: micDevices.find(function (mic) {\n      return mic.selected;\n    }),\n    /**\r\n     * Holds the currently selected speaker.\r\n     */\n    currentSpeaker: speakerDevices.find(function (speaker) {\n      return speaker.selected;\n    }),\n    /**\r\n     * Indicates that there's an issue with camera devices.\r\n     */\n    hasCamError: errorStates.includes(camState),\n    /**\r\n     * Indicates that there's an issue with microphone devices.\r\n     */\n    hasMicError: errorStates.includes(micState),\n    /**\r\n     * A list of the user's microphone (audioinput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\r\n     */\n    microphones: micDevices,\n    /**\r\n     * The general state for microphone access.\r\n     */\n    micState: micState,\n    /**\r\n     * Refreshes the list of devices using [enumerateDevices](https://docs.daily.co/reference/daily-js/instance-methods/enumerate-devices).\r\n     */\n    refreshDevices: refreshDevices,\n    /**\r\n     * Allows to switch to the camera with the specified deviceId. Calls [setInputDevicesAsync](https://docs.daily.co/reference/daily-js/instance-methods/set-input-devices-async) internally.\r\n     */\n    setCamera: setCamera,\n    /**\r\n     * Allows to switch to the microphone with the specified deviceId. Calls [setInputDevicesAsync](https://docs.daily.co/reference/daily-js/instance-methods/set-input-devices-async) internally.\r\n     */\n    setMicrophone: setMicrophone,\n    /**\r\n     * Allows to switch to the speaker with the specified deviceId. Calls [setOutputDevice](https://docs.daily.co/reference/daily-js/instance-methods/set-output-device) internally.\r\n     */\n    setSpeaker: setSpeaker,\n    /**\r\n     * A list of the user's speaker (audiooutput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\r\n     */\n    speakers: speakerDevices\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar inputSettingsState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\ninputSettingsState.debugLabel = /*#__PURE__*/jotaiDebugLabel('input-settings');\nvar useInputSettings = function useInputSettings(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onError = _ref.onError,\n    onInputSettingsUpdated = _ref.onInputSettingsUpdated;\n  var inputSettings = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(inputSettingsState);\n  var _useDailyError = useDailyError(),\n    nonFatalError = _useDailyError.nonFatalError;\n  var daily = useDaily();\n  var updateInputSettingsState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, inputSettings) {\n    set(inputSettingsState, inputSettings);\n  }, []));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily) return;\n    daily.getInputSettings().then(updateInputSettingsState);\n  }, [daily, updateInputSettingsState]);\n  /**\r\n   * Handle 'input-settings-updated' events.\r\n   */\n  useDailyEvent('input-settings-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    updateInputSettingsState(ev.inputSettings);\n    onInputSettingsUpdated == null ? void 0 : onInputSettingsUpdated(ev);\n  }, [onInputSettingsUpdated, updateInputSettingsState]));\n  /**\r\n   * Handle nonfatal errors of type 'input-settings-error'.\r\n   */\n  useDailyEvent('nonfatal-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (ev.type !== 'input-settings-error') return;\n    onError == null ? void 0 : onError(ev);\n  }, [onError]));\n  /**\r\n   * Calls daily.updateInputSettings internally.\r\n   */\n  var updateInputSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return daily == null ? void 0 : daily.updateInputSettings.apply(daily, args);\n  }, [daily]);\n  var result = {\n    errorMsg: (nonFatalError == null ? void 0 : nonFatalError.type) === 'input-settings-error' ? nonFatalError.errorMsg : null,\n    inputSettings: inputSettings,\n    updateInputSettings: updateInputSettings\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * This hook allows to setup [live streaming events](https://docs.daily.co/reference/daily-js/events/live-streaming-events),\r\n * as well as starting, stopping and updating live streams.\r\n *\r\n * Returns the current live streaming state, incl. the current layout and potential errorMsg.\r\n */\nvar useLiveStreaming = function useLiveStreaming(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onLiveStreamingError = _ref.onLiveStreamingError,\n    onLiveStreamingStarted = _ref.onLiveStreamingStarted,\n    onLiveStreamingStopped = _ref.onLiveStreamingStopped,\n    onLiveStreamingUpdated = _ref.onLiveStreamingUpdated,\n    onLiveStreamingWarning = _ref.onLiveStreamingWarning;\n  var daily = useDaily();\n  var state = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(liveStreamingState);\n  useDailyEvent('live-streaming-started', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onLiveStreamingStarted == null ? void 0 : onLiveStreamingStarted(ev);\n  }, [onLiveStreamingStarted]));\n  useDailyEvent('live-streaming-stopped', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onLiveStreamingStopped == null ? void 0 : onLiveStreamingStopped(ev);\n  }, [onLiveStreamingStopped]));\n  useDailyEvent('live-streaming-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onLiveStreamingUpdated == null ? void 0 : onLiveStreamingUpdated(ev);\n  }, [onLiveStreamingUpdated]));\n  useDailyEvent('live-streaming-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onLiveStreamingError == null ? void 0 : onLiveStreamingError(ev);\n  }, [onLiveStreamingError]));\n  useDailyEvent('nonfatal-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (ev.type !== 'live-streaming-warning') return;\n    onLiveStreamingWarning == null ? void 0 : onLiveStreamingWarning(ev);\n  }, [onLiveStreamingWarning]));\n  var startLiveStreaming = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    daily.startLiveStreaming.apply(daily, arguments);\n  }, [daily]);\n  var stopLiveStreaming = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    daily.stopLiveStreaming.apply(daily, arguments);\n  }, [daily]);\n  var updateLiveStreaming = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    daily.updateLiveStreaming.apply(daily, arguments);\n  }, [daily]);\n  var result = _extends({}, state, {\n    startLiveStreaming: startLiveStreaming,\n    stopLiveStreaming: stopLiveStreaming,\n    updateLiveStreaming: updateLiveStreaming\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * Returns the [participants() object](https://docs.daily.co/reference/daily-js/instance-methods/participants) for the local user.\r\n * @deprecated Use [useLocalSessionId](https://docs.daily.co/reference/daily-react/use-local-session-id) instead.\r\n */\nvar useLocalParticipant = function useLocalParticipant() {\n  var localId = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(localIdState);\n  var localParticipant = useParticipant(localId);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(localParticipant);\n  return localParticipant;\n};\n\n/**\r\n * Returns a meeting's current session data and topology.\r\n */\nvar useMeetingSessionState = function useMeetingSessionState(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onError = _ref.onError;\n  var meetingSessionState = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(meetingSessionDataState);\n  useDailyEvent('nonfatal-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (ev.type !== 'meeting-session-data-error') return;\n    onError == null ? void 0 : onError(ev);\n  }, [onError]));\n  var result = {\n    data: meetingSessionState == null ? void 0 : meetingSessionState.data,\n    topology: meetingSessionState == null ? void 0 : meetingSessionState.topology\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * Returns current information about network quality and topology.\r\n * Allows to setup event listeners for daily's [network events](https://docs.daily.co/reference/daily-js/events/network-events).\r\n */\nvar useNetwork = function useNetwork(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onNetworkConnection = _ref.onNetworkConnection,\n    onNetworkQualityChange = _ref.onNetworkQualityChange;\n  var daily = useDaily();\n  var topology = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(topologyState);\n  var quality = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(networkQualityState);\n  var threshold = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(networkThresholdState);\n  useDailyEvent('network-connection', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onNetworkConnection == null ? void 0 : onNetworkConnection(ev);\n  }, [onNetworkConnection]));\n  useDailyEvent('network-quality-change', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onNetworkQualityChange == null ? void 0 : onNetworkQualityChange(ev);\n  }, [onNetworkQualityChange]));\n  var getStats = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/_asyncToGenerator(function* () {\n    var newStats = yield daily == null ? void 0 : daily.getNetworkStats();\n    return newStats == null ? void 0 : newStats.stats;\n  }), [daily]);\n  var result = {\n    getStats: getStats,\n    quality: quality,\n    threshold: threshold,\n    topology: topology\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar participantCountsState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)({\n  hidden: 0,\n  present: 0\n});\nparticipantCountsState.debugLabel = /*#__PURE__*/jotaiDebugLabel('participant-counts');\n/**\r\n * Returns participant counts for hidden and present participants.\r\n */\nvar useParticipantCounts = function useParticipantCounts(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onParticipantCountsUpdated = _ref.onParticipantCountsUpdated;\n  var daily = useDaily();\n  var participantCounts = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(participantCountsState);\n  var updateCounts = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, counts) {\n    set(participantCountsState, counts);\n  }, []));\n  useDailyEvent('participant-counts-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    updateCounts(ev.participantCounts);\n    onParticipantCountsUpdated == null ? void 0 : onParticipantCountsUpdated(ev);\n  }, [onParticipantCountsUpdated, updateCounts]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || daily.isDestroyed()) return;\n    updateCounts(daily.participantCounts());\n  }, [daily, updateCounts]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(participantCounts);\n  return participantCounts;\n};\n\n/**\r\n * Returns parsed permissions for a given participant.\r\n * In case no `sessionId` is passed, the hook returns permissions for the local participant.\r\n * @param sessionId The participant's session_id (optional)\r\n */\nvar usePermissions = function usePermissions(sessionId) {\n  var _permissions$canSend, _permissions$canSend2, _permissions$canSend3, _permissions$canSend4, _permissions$canSend5, _permissions$canSend6, _permissions$canAdmin, _permissions$canAdmin2, _permissions$canAdmin3;\n  var localSessionId = useLocalSessionId();\n  var permissions = useParticipantProperty(sessionId != null ? sessionId : localSessionId, 'permissions');\n  var canSendAudio = typeof (permissions == null ? void 0 : permissions.canSend) === 'boolean' ? permissions == null ? void 0 : permissions.canSend : Boolean(permissions == null ? void 0 : (_permissions$canSend = permissions.canSend) == null ? void 0 : _permissions$canSend.has('audio'));\n  var canSendVideo = typeof (permissions == null ? void 0 : permissions.canSend) === 'boolean' ? permissions == null ? void 0 : permissions.canSend : Boolean(permissions == null ? void 0 : (_permissions$canSend2 = permissions.canSend) == null ? void 0 : _permissions$canSend2.has('video'));\n  var canSendCustomAudio = typeof (permissions == null ? void 0 : permissions.canSend) === 'boolean' ? permissions == null ? void 0 : permissions.canSend : Boolean(permissions == null ? void 0 : (_permissions$canSend3 = permissions.canSend) == null ? void 0 : _permissions$canSend3.has('customAudio'));\n  var canSendCustomVideo = typeof (permissions == null ? void 0 : permissions.canSend) === 'boolean' ? permissions == null ? void 0 : permissions.canSend : Boolean(permissions == null ? void 0 : (_permissions$canSend4 = permissions.canSend) == null ? void 0 : _permissions$canSend4.has('customVideo'));\n  var canSendScreenAudio = typeof (permissions == null ? void 0 : permissions.canSend) === 'boolean' ? permissions == null ? void 0 : permissions.canSend : Boolean(permissions == null ? void 0 : (_permissions$canSend5 = permissions.canSend) == null ? void 0 : _permissions$canSend5.has('screenAudio'));\n  var canSendScreenVideo = typeof (permissions == null ? void 0 : permissions.canSend) === 'boolean' ? permissions == null ? void 0 : permissions.canSend : Boolean(permissions == null ? void 0 : (_permissions$canSend6 = permissions.canSend) == null ? void 0 : _permissions$canSend6.has('screenVideo'));\n  var canAdminParticipants = typeof (permissions == null ? void 0 : permissions.canAdmin) === 'boolean' ? permissions == null ? void 0 : permissions.canAdmin : Boolean(permissions == null ? void 0 : (_permissions$canAdmin = permissions.canAdmin) == null ? void 0 : _permissions$canAdmin.has('participants'));\n  var canAdminStreaming = typeof (permissions == null ? void 0 : permissions.canAdmin) === 'boolean' ? permissions == null ? void 0 : permissions.canAdmin : Boolean(permissions == null ? void 0 : (_permissions$canAdmin2 = permissions.canAdmin) == null ? void 0 : _permissions$canAdmin2.has('streaming'));\n  var canAdminTranscription = typeof (permissions == null ? void 0 : permissions.canAdmin) === 'boolean' ? permissions == null ? void 0 : permissions.canAdmin : Boolean(permissions == null ? void 0 : (_permissions$canAdmin3 = permissions.canAdmin) == null ? void 0 : _permissions$canAdmin3.has('transcription'));\n  var result = {\n    canAdminParticipants: canAdminParticipants,\n    canAdminStreaming: canAdminStreaming,\n    canAdminTranscription: canAdminTranscription,\n    canSendAudio: canSendAudio,\n    canSendCustomAudio: canSendCustomAudio,\n    canSendCustomVideo: canSendCustomVideo,\n    canSendScreenAudio: canSendScreenAudio,\n    canSendScreenVideo: canSendScreenVideo,\n    canSendVideo: canSendVideo,\n    hasPresence: permissions == null ? void 0 : permissions.hasPresence,\n    permissions: permissions\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar participantReceiveSettingsState = /*#__PURE__*/(0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.atomFamily)(function (id) {\n  var participantReceiveSettingsAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)({}, function (_get, set, newValue) {\n    set(participantReceiveSettingsState(id), newValue);\n  });\n  participantReceiveSettingsAtom.debugLabel = jotaiDebugLabel(\"participant-receive-settings-\" + id);\n  return participantReceiveSettingsAtom;\n});\n/**\r\n * Allows to read and set receiveSettings.\r\n * In case receiveSettings for participant specified by id are empty, not set or 'inherit',\r\n * base receiveSettings will be returned.\r\n * In case meeting is not in joined state, calls to updateReceiveSettings will be silently ignored.\r\n */\nvar useReceiveSettings = function useReceiveSettings(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    _ref$id = _ref.id,\n    id = _ref$id === void 0 ? 'base' : _ref$id,\n    onReceiveSettingsUpdated = _ref.onReceiveSettingsUpdated;\n  var _useAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtom)(participantReceiveSettingsState('base')),\n    baseSettings = _useAtom[0];\n  var _useAtom2 = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtom)(participantReceiveSettingsState(id)),\n    receiveSettings = _useAtom2[0];\n  var daily = useDaily();\n  var meetingState = useMeetingState();\n  var updateReceiveSettingsState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_7__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, receiveSettings) {\n    var ids = _extends({}, receiveSettings);\n    for (var _i = 0, _Object$entries = Object.entries(ids); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _Object$entries[_i],\n        _id = _Object$entries$_i[0],\n        settings = _Object$entries$_i[1];\n      set(participantReceiveSettingsState(_id), settings);\n    }\n    if (!(id in ids)) {\n      participantReceiveSettingsState.remove(id);\n    }\n  }, [id] // Dependencies\n  ));\n\n  useDailyEvent('receive-settings-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    updateReceiveSettingsState(ev.receiveSettings);\n    onReceiveSettingsUpdated == null ? void 0 : onReceiveSettingsUpdated(ev);\n  }, [onReceiveSettingsUpdated, updateReceiveSettingsState]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || daily.isDestroyed()) return;\n    daily.getReceiveSettings().then(updateReceiveSettingsState);\n  }, [daily, updateReceiveSettingsState]);\n  var updateReceiveSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily || meetingState !== 'joined-meeting') return;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    daily == null ? void 0 : daily.updateReceiveSettings == null ? void 0 : daily.updateReceiveSettings.apply(daily, args);\n  }, [daily, meetingState]);\n  var result = {\n    receiveSettings: id === 'base' || Object.keys(receiveSettings).length === 0 ? baseSettings : receiveSettings,\n    updateReceiveSettings: updateReceiveSettings\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar useRecording = function useRecording(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onRecordingData = _ref.onRecordingData,\n    onRecordingError = _ref.onRecordingError,\n    onRecordingStarted = _ref.onRecordingStarted,\n    onRecordingStopped = _ref.onRecordingStopped;\n  var daily = useDaily();\n  var state = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(recordingState);\n  useDailyEvent('recording-started', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onRecordingStarted == null ? void 0 : onRecordingStarted(ev);\n  }, [onRecordingStarted]));\n  useDailyEvent('recording-stopped', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onRecordingStopped == null ? void 0 : onRecordingStopped(ev);\n  }, [onRecordingStopped]));\n  useDailyEvent('recording-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onRecordingError == null ? void 0 : onRecordingError(ev);\n  }, [onRecordingError]));\n  useDailyEvent('recording-data', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onRecordingData == null ? void 0 : onRecordingData(ev);\n  }, [onRecordingData]));\n  /**\r\n   * Starts the recording with the given optional options.\r\n   */\n  var startRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    daily.startRecording.apply(daily, arguments);\n  }, [daily]);\n  /**\r\n   * Stops a recording.\r\n   */\n  var stopRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    daily.stopRecording.apply(daily, arguments);\n  }, [daily]);\n  /**\r\n   * Updates a running recording's layout configuration.\r\n   */\n  var updateRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    daily.updateRecording.apply(daily, arguments);\n  }, [daily]);\n  var result = _extends({}, state, {\n    startRecording: startRecording,\n    stopRecording: stopRecording,\n    updateRecording: updateRecording\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * Stateful hook to work with room, domain and token configuration for a daily room.\r\n * Includes room default values.\r\n */\nvar useRoom = function useRoom() {\n  var room = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(roomState);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(room);\n  return room;\n};\n\nvar useRoomExp = function useRoomExp(_temp) {\n  var _room$config4, _room$config5, _room$config6, _room$tokenConfig4, _room$tokenConfig5, _room$tokenConfig6;\n  var _ref = _temp === void 0 ? {} : _temp,\n    onCountdown = _ref.onCountdown;\n  var localJoinDate = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(localJoinDateState);\n  var room = useRoom();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),\n    ejectDate = _useState[0],\n    setEjectDate = _useState[1];\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var _ref2, _room$tokenConfig$eje, _room$tokenConfig, _room$config, _room$tokenConfig2, _room$tokenConfig3, _room$config2, _room$config3;\n    var expCandidates = [];\n    var ejectAfterElapsed = (_ref2 = (_room$tokenConfig$eje = room == null ? void 0 : (_room$tokenConfig = room.tokenConfig) == null ? void 0 : _room$tokenConfig.eject_after_elapsed) != null ? _room$tokenConfig$eje : room == null ? void 0 : (_room$config = room.config) == null ? void 0 : _room$config.eject_after_elapsed) != null ? _ref2 : 0;\n    if (ejectAfterElapsed && localJoinDate) {\n      expCandidates.push(localJoinDate.getTime() + 1000 * ejectAfterElapsed);\n    }\n    if (room != null && (_room$tokenConfig2 = room.tokenConfig) != null && _room$tokenConfig2.exp && room != null && (_room$tokenConfig3 = room.tokenConfig) != null && _room$tokenConfig3.eject_at_token_exp) {\n      expCandidates.push(room.tokenConfig.exp * 1000);\n    }\n    if (room != null && (_room$config2 = room.config) != null && _room$config2.exp && room != null && (_room$config3 = room.config) != null && _room$config3.eject_at_room_exp) {\n      expCandidates.push(room.config.exp * 1000);\n    }\n    var newEjectDate = expCandidates.length > 0 ? new Date(Math.min.apply(Math, expCandidates)) : new Date(0);\n    if (newEjectDate.getTime() === 0) return;\n    setEjectDate(function (oldEjectDate) {\n      return (oldEjectDate == null ? void 0 : oldEjectDate.getTime()) !== newEjectDate.getTime() ? newEjectDate : oldEjectDate;\n    });\n  }, [localJoinDate, room == null ? void 0 : (_room$config4 = room.config) == null ? void 0 : _room$config4.eject_after_elapsed, room == null ? void 0 : (_room$config5 = room.config) == null ? void 0 : _room$config5.eject_at_room_exp, room == null ? void 0 : (_room$config6 = room.config) == null ? void 0 : _room$config6.exp, room == null ? void 0 : (_room$tokenConfig4 = room.tokenConfig) == null ? void 0 : _room$tokenConfig4.eject_after_elapsed, room == null ? void 0 : (_room$tokenConfig5 = room.tokenConfig) == null ? void 0 : _room$tokenConfig5.eject_at_token_exp, room == null ? void 0 : (_room$tokenConfig6 = room.tokenConfig) == null ? void 0 : _room$tokenConfig6.exp]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!ejectDate || ejectDate.getTime() === 0) return;\n    var interval = setInterval(function () {\n      var _ejectDate$getTime;\n      var eject = ((_ejectDate$getTime = ejectDate == null ? void 0 : ejectDate.getTime()) != null ? _ejectDate$getTime : 0) / 1000;\n      var now = Date.now() / 1000;\n      var diff = eject - now;\n      if (diff < 0) return;\n      var hours = Math.max(0, Math.floor(diff / 3600));\n      var minutes = Math.max(0, Math.floor(diff % 3600 / 60));\n      var seconds = Math.max(0, Math.floor(diff % 60));\n      onCountdown == null ? void 0 : onCountdown({\n        hours: hours,\n        minutes: minutes,\n        seconds: seconds\n      });\n    }, 1000);\n    return function () {\n      clearInterval(interval);\n    };\n  }, [ejectDate, onCountdown]);\n  var result = {\n    ejectDate: ejectDate\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * Returns a participant's screenAudio track and state.\r\n * @param participantId The participant's session_id.\r\n */\nvar useScreenAudioTrack = function useScreenAudioTrack(participantId) {\n  return useMediaTrack(participantId, 'screenAudio');\n};\n\n/**\r\n * Returns a participant's screenVideo track and state.\r\n * @param participantId The participant's session_id.\r\n */\nvar useScreenVideoTrack = function useScreenVideoTrack(participantId) {\n  return useMediaTrack(participantId, 'screenVideo');\n};\n\nvar sendSettingsState = /*#__PURE__*/(0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null);\nsendSettingsState.debugLabel = /*#__PURE__*/jotaiDebugLabel('send-settings');\n/**\r\n * Returns the current media send settings and an updater function to change the settings.\r\n */\nvar useSendSettings = function useSendSettings(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onSendSettingsUpdated = _ref.onSendSettingsUpdated;\n  var daily = useDaily();\n  var _useAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtom)(sendSettingsState),\n    sendSettings = _useAtom[0],\n    setSendSettings = _useAtom[1];\n  useDailyEvent('send-settings-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    setSendSettings(ev.sendSettings);\n    onSendSettingsUpdated == null ? void 0 : onSendSettingsUpdated(ev);\n  }, [onSendSettingsUpdated, setSendSettings]));\n  var storeSendSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (sendSettings) {\n    setSendSettings(sendSettings);\n  }, [setSendSettings]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || daily.isDestroyed()) return;\n    storeSendSettings(daily.getSendSettings());\n  }, [daily, storeSendSettings]);\n  /**\r\n   * Updates the local clients send settings.\r\n   * See https://docs.daily.co/reference/daily-js/instance-methods/update-send-settings for details.\r\n   */\n  var updateSendSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)( /*#__PURE__*/_asyncToGenerator(function* () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var newSendSettings = yield daily == null ? void 0 : daily.updateSendSettings.apply(daily, args);\n    if (!newSendSettings) return;\n    storeSendSettings(newSendSettings);\n    return newSendSettings;\n  }), [daily, storeSendSettings]);\n  var result = {\n    sendSettings: sendSettings,\n    updateSendSettings: updateSendSettings\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar useTranscription = function useTranscription(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onTranscriptionAppData = _ref.onTranscriptionAppData,\n    onTranscriptionError = _ref.onTranscriptionError,\n    onTranscriptionMessage = _ref.onTranscriptionMessage,\n    onTranscriptionStarted = _ref.onTranscriptionStarted,\n    onTranscriptionStopped = _ref.onTranscriptionStopped;\n  var daily = useDaily();\n  var state = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(transcriptionState);\n  useDailyEvent('transcription-started', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onTranscriptionStarted == null ? void 0 : onTranscriptionStarted(ev);\n  }, [onTranscriptionStarted]));\n  useDailyEvent('transcription-stopped', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onTranscriptionStopped == null ? void 0 : onTranscriptionStopped(ev);\n  }, [onTranscriptionStopped]));\n  useDailyEvent('transcription-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onTranscriptionError == null ? void 0 : onTranscriptionError(ev);\n  }, [onTranscriptionError]));\n  useDailyEvent('transcription-message', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onTranscriptionMessage == null ? void 0 : onTranscriptionMessage(ev);\n  }, [onTranscriptionMessage]));\n  useDailyEvent('app-message', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if ((ev == null ? void 0 : ev.fromId) === 'transcription') {\n      onTranscriptionAppData == null ? void 0 : onTranscriptionAppData(ev);\n    }\n  }, [onTranscriptionAppData]));\n  /**\r\n   * Starts the transcription with the given optional options.\r\n   */\n  var startTranscription = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    daily.startTranscription.apply(daily, arguments);\n  }, [daily]);\n  /**\r\n   * Stops a transcription.\r\n   */\n  var stopTranscription = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    daily.stopTranscription.apply(daily, arguments);\n  }, [daily]);\n  var result = _extends({}, state, {\n    startTranscription: startTranscription,\n    stopTranscription: stopTranscription\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\r\n * Returns a participant's video track and state.\r\n * @param participantId The participant's session_id.\r\n */\nvar useVideoTrack = function useVideoTrack(participantId) {\n  return useMediaTrack(participantId, 'video');\n};\n\n/**\r\n * Hook to access and manage waiting participants.\r\n */\nvar useWaitingParticipants = function useWaitingParticipants(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n    onWaitingParticipantAdded = _ref.onWaitingParticipantAdded,\n    onWaitingParticipantRemoved = _ref.onWaitingParticipantRemoved,\n    onWaitingParticipantUpdated = _ref.onWaitingParticipantUpdated;\n  var daily = useDaily();\n  var waitingParticipants = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.useAtomValue)(allWaitingParticipantsSelector(undefined));\n  useDailyEvent('waiting-participant-added', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onWaitingParticipantAdded == null ? void 0 : onWaitingParticipantAdded(ev);\n  }, [onWaitingParticipantAdded]));\n  useDailyEvent('waiting-participant-removed', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onWaitingParticipantRemoved == null ? void 0 : onWaitingParticipantRemoved(ev);\n  }, [onWaitingParticipantRemoved]));\n  useDailyEvent('waiting-participant-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onWaitingParticipantUpdated == null ? void 0 : onWaitingParticipantUpdated(ev);\n  }, [onWaitingParticipantUpdated]));\n  var updateWaitingParticipantAccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (id, grantRequestedAccess) {\n    if (id === '*') {\n      daily == null ? void 0 : daily.updateWaitingParticipants({\n        '*': {\n          grantRequestedAccess: grantRequestedAccess\n        }\n      });\n      return;\n    }\n    daily == null ? void 0 : daily.updateWaitingParticipant(id, {\n      grantRequestedAccess: grantRequestedAccess\n    });\n  }, [daily]);\n  var grantAccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (id) {\n    updateWaitingParticipantAccess(id, true);\n  }, [updateWaitingParticipantAccess]);\n  var denyAccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (id) {\n    updateWaitingParticipantAccess(id, false);\n  }, [updateWaitingParticipantAccess]);\n  var result = {\n    waitingParticipants: waitingParticipants,\n    grantAccess: grantAccess,\n    denyAccess: denyAccess\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n\n//# sourceMappingURL=daily-react.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRhaWx5LWNvL2RhaWx5LXJlYWN0L2Rpc3QvZGFpbHktcmVhY3QuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBEO0FBQ3dHO0FBQ3BHO0FBQ3ZCO0FBQ0E7QUFDQzs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHVCQUF1QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxTQUFTO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0NBQWdDLG9EQUFhOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaURBQVU7QUFDeEIsRUFBRSxvREFBYTtBQUNmO0FBQ0E7O0FBRUEscUNBQXFDLG9EQUFhO0FBQ2xELHNCQUFzQjtBQUN0QjtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxtREFBWTtBQUMxQix5Q0FBeUMsa0RBQVc7QUFDcEQ7QUFDQSxHQUFHO0FBQ0gseUNBQXlDLGtEQUFXO0FBQ3BEO0FBQ0EsR0FBRztBQUNILHVDQUF1QyxrREFBVztBQUNsRDtBQUNBLEdBQUc7QUFDSCx5Q0FBeUMsa0RBQVc7QUFDcEQ7QUFDQSxHQUFHO0FBQ0gsK0JBQStCLGtEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0RBQVc7QUFDdEM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0RBQVc7QUFDckM7QUFDQTtBQUNBLEdBQUc7QUFDSCwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLG9EQUFhO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixtREFBWTtBQUN4Qyw2Q0FBNkMsa0RBQVc7QUFDeEQ7QUFDQSxHQUFHO0FBQ0gsK0NBQStDLGtEQUFXO0FBQzFEO0FBQ0EsR0FBRztBQUNILCtDQUErQyxrREFBVztBQUMxRDtBQUNBLEdBQUc7QUFDSCx1Q0FBdUMsa0RBQVc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsb0JBQW9CLGtEQUFXO0FBQy9CO0FBQ0EsR0FBRztBQUNILG1CQUFtQixrREFBVztBQUM5QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxvREFBYTtBQUNmO0FBQ0E7O0FBRWl0QjtBQUNqdEIiLCJzb3VyY2VzIjpbIi9ob21lL3JndGVjaDAwOC9hY2FkZW1pYy1jb25uZWN0LXByb2plY3Qvbm9kZV9tb2R1bGVzL0BkYWlseS1jby9kYWlseS1yZWFjdC9kaXN0L2RhaWx5LXJlYWN0LmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tRmFtaWx5LCB1c2VBdG9tQ2FsbGJhY2sgfSBmcm9tICdqb3RhaS91dGlscyc7XG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRGVidWdWYWx1ZSwgdXNlU3RhdGUsIHVzZVJlZiwgdXNlTWVtbywgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgbWVtbywgZm9yd2FyZFJlZiwgdXNlSW1wZXJhdGl2ZUhhbmRsZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGF0b20sIHVzZUF0b21WYWx1ZSwgUHJvdmlkZXIsIHVzZUF0b20gfSBmcm9tICdqb3RhaSc7XG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnbG9kYXNoLnRocm90dGxlJztcbmltcG9ydCBEYWlseSBmcm9tICdAZGFpbHktY28vZGFpbHktanMnO1xuaW1wb3J0IGRlZXBFcXVhbCBmcm9tICdmYXN0LWRlZXAtZXF1YWwnO1xuXG5mdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGluZm8uZG9uZSkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTtcbiAgfVxufVxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG4gIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07XG4gIHJldHVybiBhcnIyO1xufVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkge1xuICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKGl0KSByZXR1cm4gKGl0ID0gaXQuY2FsbChvKSkubmV4dC5iaW5kKGl0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmIChpdCkgbyA9IGl0O1xuICAgIHZhciBpID0gMDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgIGRvbmU6IHRydWVcbiAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IG9baSsrXVxuICAgICAgfTtcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxudmFyIERhaWx5Q29udGV4dCA9IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KG51bGwpO1xuXG4vKipcclxuICogUmV0dXJucyBjYWxsT2JqZWN0IGluc3RhbmNlIHBhc3NlZCB0byBvciBjcmVhdGVkIGJ5IGNsb3Nlc3QgPERhaWx5UHJvdmlkZXI+LlxyXG4gKi9cbnZhciB1c2VEYWlseSA9IGZ1bmN0aW9uIHVzZURhaWx5KCkge1xuICB2YXIgZGFpbHkgPSB1c2VDb250ZXh0KERhaWx5Q29udGV4dCk7XG4gIHVzZURlYnVnVmFsdWUoZGFpbHkpO1xuICByZXR1cm4gZGFpbHk7XG59O1xuXG52YXIgRGFpbHlFdmVudENvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dCh7XG4gIG9uOiBmdW5jdGlvbiBvbigpIHt9LFxuICBvZmY6IGZ1bmN0aW9uIG9mZigpIHt9XG59KTtcblxudmFyIHByaW9yaXR5Q291bnRlciA9IC0xO1xudmFyIGdldFByaW9yaXR5VW5pcXVlID0gZnVuY3Rpb24gZ2V0UHJpb3JpdHlVbmlxdWUoKSB7XG4gIHJldHVybiBwcmlvcml0eUNvdW50ZXItLTtcbn07XG52YXIgdW5pcXVlQ291bnRlciA9IDE7XG52YXIgZ2V0VW5pcXVlID0gZnVuY3Rpb24gZ2V0VW5pcXVlKCkge1xuICByZXR1cm4gdW5pcXVlQ291bnRlcisrO1xufTtcbi8qKlxyXG4gKiBTZXRzIHVwIGEgZGFpbHkgZXZlbnQgbGlzdGVuZXIgdXNpbmcgW29uXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2luc3RhbmNlLW1ldGhvZHMvb24pIG1ldGhvZC5cclxuICogV2hlbiB0aGlzIGhvb2sgaXMgdW5tb3VudGVkIHRoZSBldmVudCBsaXN0ZW5lciBpcyB1bnJlZ2lzdGVyZWQgdXNpbmcgW29mZl0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL29mZikuXHJcbiAqXHJcbiAqIFdhcm5pbmc6IGNhbGxiYWNrIGhhcyB0byBiZSBhIG1lbW9pemVkIHJlZmVyZW5jZSAoZS5nLiB2aWEgW3VzZUNhbGxiYWNrXShodHRwczovL3JlYWN0anMub3JnL2RvY3MvaG9va3MtcmVmZXJlbmNlLmh0bWwjdXNlY2FsbGJhY2spKS5cclxuICogT3RoZXJ3aXNlIGEgY29uc29sZSBlcnJvciBtaWdodCBiZSB0aHJvd24gaW5kaWNhdGluZyBhIHJlLXJlbmRlciBsb29wIGlzc3VlLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXYgVGhlIERhaWx5RXZlbnQgdG8gcmVnaXN0ZXIuXHJcbiAqIEBwYXJhbSBjYWxsYmFjayBBIG1lbW9pemVkIGNhbGxiYWNrIHJlZmVyZW5jZSB0byBydW4gd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC5cclxuICovXG52YXIgdXNlRGFpbHlFdmVudCA9IGZ1bmN0aW9uIHVzZURhaWx5RXZlbnQoZXYsIGNhbGxiYWNrLCBJTlRFUk5BTF9wcmlvcml0eSkge1xuICBpZiAoSU5URVJOQUxfcHJpb3JpdHkgPT09IHZvaWQgMCkge1xuICAgIElOVEVSTkFMX3ByaW9yaXR5ID0gZmFsc2U7XG4gIH1cbiAgdmFyIF91c2VDb250ZXh0ID0gdXNlQ29udGV4dChEYWlseUV2ZW50Q29udGV4dCksXG4gICAgb2ZmID0gX3VzZUNvbnRleHQub2ZmLFxuICAgIG9uID0gX3VzZUNvbnRleHQub247XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgaXNCbG9ja2VkID0gX3VzZVN0YXRlWzBdLFxuICAgIHNldElzQmxvY2tlZCA9IF91c2VTdGF0ZVsxXTtcbiAgdmFyIHJlYXNzaWduQ291bnQgPSB1c2VSZWYoMCk7XG4gIHZhciBldmVudElkID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIElOVEVSTkFMX3ByaW9yaXR5ID8gZ2V0UHJpb3JpdHlVbmlxdWUoKSA6IGdldFVuaXF1ZSgpO1xuICB9LCBbSU5URVJOQUxfcHJpb3JpdHldKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWV2IHx8IGlzQmxvY2tlZCkgcmV0dXJuO1xuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgY2FsbGJhY2sgaGFzIGJlZW4gcmVhc3NpZ25lZCBvZnRlbiBlbm91Z2ggd2l0aG91dCBoaXR0aW5nIHRoZSA1MG1zIHRpbWVvdXQuXHJcbiAgICAgKi9cbiAgICBpZiAocmVhc3NpZ25Db3VudC5jdXJyZW50ID4gMTAwMDAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwidXNlRGFpbHlFdmVudCBjYWxsZWQgd2l0aCBwb3RlbnRpYWxseSBub24tbWVtb2l6ZWQgZXZlbnQgY2FsbGJhY2sgb3IgZHVlIHRvIHRvbyBtYW55IHJlLXJlbmRlcnMuXFxuICAgICAgICBNZW1vaXplIHVzaW5nIHVzZUNhbGxiYWNrIHRvIGF2b2lkIHJlLXJlbmRlciBsb29wIG9yIHJlZHVjZSB0aGUgYW1vdW50IG9mIHN0YXRlIHRyYW5zaXRpb25zIHRoZSBjYWxsYmFjayBkZXBlbmRzIG9uLlxcbiAgICAgICAgUGFzc2VkIGNhbGxiYWNrIGZvciAnXCIgKyBldiArIFwiJyBldmVudCBpcyBOT1QgcmVnaXN0ZXJlZC5cIiwgY2FsbGJhY2spO1xuICAgICAgc2V0SXNCbG9ja2VkKHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZWFzc2lnbkNvdW50LmN1cnJlbnQrKztcbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgcmVhc3NpZ25Db3VudC5jdXJyZW50ID0gMDtcbiAgICB9LCA1MCk7XG4gICAgb24oZXYsIGNhbGxiYWNrLCBldmVudElkKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgb2ZmKGV2LCBldmVudElkKTtcbiAgICB9O1xuICB9LCBbY2FsbGJhY2ssIGV2LCBldmVudElkLCBpc0Jsb2NrZWQsIG9mZiwgb25dKTtcbiAgdXNlRGVidWdWYWx1ZSh7XG4gICAgZXZlbnQ6IGV2LFxuICAgIGV2ZW50SWQ6IGV2ZW50SWQsXG4gICAgaXNCbG9ja2VkOiBpc0Jsb2NrZWQsXG4gICAgY2FsbGJhY2s6IGNhbGxiYWNrXG4gIH0pO1xufTtcblxuLyoqXHJcbiAqIENvbXBhcmVzIHR3byB2YXJpYWJsZXMgZm9yIGRlZXAgZXF1YWxpdHkuXHJcbiAqIEdyYWNlZnVsbHkgaGFuZGxlcyBlcXVhbGl0eSBjaGVja3Mgb24gTWVkaWFTdHJlYW1UcmFja3MgYnkgY29tcGFyaW5nIHRoZWlyIGlkcy5cclxuICovXG5mdW5jdGlvbiBjdXN0b21EZWVwRXF1YWwoYSwgYikge1xuICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG4gIC8vIEhhbmRsZSBhcnJheXMgc2VwYXJhdGVseVxuICBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFjdXN0b21EZWVwRXF1YWwoYVtpXSwgYltpXSkpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gSGFuZGxlIHNwZWNpZmljIGNhc2VzIGxpa2UgTWVkaWFTdHJlYW0sIE1lZGlhU3RyZWFtVHJhY2ssIERhdGUsIGV0Yy5cbiAgaWYgKE1lZGlhU3RyZWFtKSB7XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbSAmJiBiIGluc3RhbmNlb2YgTWVkaWFTdHJlYW0pIHtcbiAgICAgIHJldHVybiBhLmlkID09PSBiLmlkICYmIGEuYWN0aXZlID09PSBiLmFjdGl2ZSAmJiBhLmdldFRyYWNrcygpLmxlbmd0aCA9PT0gYi5nZXRUcmFja3MoKS5sZW5ndGggJiYgYS5nZXRUcmFja3MoKS5ldmVyeShmdW5jdGlvbiAodHJhY2ssIGlkeCkge1xuICAgICAgICByZXR1cm4gY3VzdG9tRGVlcEVxdWFsKHRyYWNrLCBiLmdldFRyYWNrcygpW2lkeF0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8vIEhhbmRsZSBzcGVjaWFsIGNhc2UgZm9yIE1lZGlhU3RyZWFtVHJhY2tcbiAgaWYgKE1lZGlhU3RyZWFtVHJhY2spIHtcbiAgICBpZiAoYSBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtVHJhY2sgJiYgYiBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtVHJhY2spIHtcbiAgICAgIHJldHVybiBhLmlkID09PSBiLmlkICYmIGEua2luZCA9PT0gYi5raW5kICYmIGEucmVhZHlTdGF0ZSA9PT0gYi5yZWFkeVN0YXRlO1xuICAgIH1cbiAgfVxuICAvLyBIYW5kbGUgc3BlY2lhbCBjYXNlIGZvciBEYXRlXG4gIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIHJldHVybiBhLmdldFRpbWUoKSA9PT0gYi5nZXRUaW1lKCk7XG4gIH1cbiAgLy8gSGFuZGxlIHNwZWNpYWwgY2FzZSBmb3IgUmVnRXhwXG4gIGlmIChhIGluc3RhbmNlb2YgUmVnRXhwICYmIGIgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICByZXR1cm4gYS5zb3VyY2UgPT09IGIuc291cmNlICYmIGEuZmxhZ3MgPT09IGIuZmxhZ3M7XG4gIH1cbiAgLy8gSGFuZGxlIFNldCBjb21wYXJpc29uc1xuICBpZiAoYSBpbnN0YW5jZW9mIFNldCAmJiBiIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGFyckEgPSBBcnJheS5mcm9tKGEpLnNvcnQoKTtcbiAgICB2YXIgYXJyQiA9IEFycmF5LmZyb20oYikuc29ydCgpO1xuICAgIHJldHVybiBhcnJBLmV2ZXJ5KGZ1bmN0aW9uICh2YWwsIGlkeCkge1xuICAgICAgcmV0dXJuIGN1c3RvbURlZXBFcXVhbCh2YWwsIGFyckJbaWR4XSk7XG4gICAgfSk7XG4gIH1cbiAgLy8gSGFuZGxlIE1hcCBjb21wYXJpc29uc1xuICBpZiAoYSBpbnN0YW5jZW9mIE1hcCAmJiBiIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShhLmVudHJpZXMoKSksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgX3N0ZXAkdmFsdWUgPSBfc3RlcC52YWx1ZSxcbiAgICAgICAga2V5ID0gX3N0ZXAkdmFsdWVbMF0sXG4gICAgICAgIHZhbHVlID0gX3N0ZXAkdmFsdWVbMV07XG4gICAgICBpZiAoIWIuaGFzKGtleSkgfHwgIWN1c3RvbURlZXBFcXVhbCh2YWx1ZSwgYi5nZXQoa2V5KSkpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGFuZCBudWxsIGNoZWNrc1xuICBpZiAodHlwZW9mIGEgIT09ICdvYmplY3QnIHx8IGEgPT09IG51bGwgfHwgdHlwZW9mIGIgIT09ICdvYmplY3QnIHx8IGIgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gR2VuZXJpYyBvYmplY3QgaGFuZGxpbmdcbiAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoYSk7XG4gIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKGIpO1xuICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGtleXNBLmxlbmd0aDsgX2krKykge1xuICAgIHZhciBfa2V5ID0ga2V5c0FbX2ldO1xuICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIF9rZXkpIHx8ICFjdXN0b21EZWVwRXF1YWwoYVtfa2V5XSwgYltfa2V5XSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLy8gQWxsIGtleXMgYW5kIHZhbHVlcyBtYXRjaCAtPiB0aGUgb2JqZWN0cyBhcmUgZGVlcGx5IGVxdWFsXG4gIHJldHVybiB0cnVlO1xufVxuLyoqXHJcbiAqIENvbXBhcmlzb24gZnVuY3Rpb24gb3B0aW1pemVkIGZvciBjb21wYXJpbmcgYXJyYXlzLlxyXG4gKi9cbmZ1bmN0aW9uIGFycmF5c0RlZXBFcXVhbChhLCBiKSB7XG4gIC8vIENoZWNrIGZvciByZWZlcmVuY2UgZXF1YWxpdHlcbiAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuICAvLyBDaGVjayBpZiBib3RoIGFycmF5cyBhcmUgb2YgdGhlIHNhbWUgbGVuZ3RoXG4gIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgLy8gQ29tcGFyZSBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB2YWx1ZUEgPSBhW2ldO1xuICAgIHZhciB2YWx1ZUIgPSBiW2ldO1xuICAgIHZhciBpc0NvbXBsZXhUeXBlQSA9IHZhbHVlQSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWVBID09PSAnb2JqZWN0JztcbiAgICB2YXIgaXNDb21wbGV4VHlwZUIgPSB2YWx1ZUIgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlQiA9PT0gJ29iamVjdCc7XG4gICAgLy8gVXNlIGN1c3RvbURlZXBFcXVhbCBvbmx5IGlmIGVpdGhlciB2YWx1ZSBpcyBhIGNvbXBsZXggdHlwZVxuICAgIGlmIChpc0NvbXBsZXhUeXBlQSB8fCBpc0NvbXBsZXhUeXBlQikge1xuICAgICAgaWYgKCFjdXN0b21EZWVwRXF1YWwodmFsdWVBLCB2YWx1ZUIpKSByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh2YWx1ZUEgIT09IHZhbHVlQikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gam90YWlEZWJ1Z0xhYmVsKGxhYmVsKSB7XG4gIHJldHVybiAnZGFpbHktcmVhY3QtJyArIGxhYmVsO1xufVxuZnVuY3Rpb24gZXF1YWxBdG9tRmFtaWx5KG9wdGlvbnMpIHtcbiAgdmFyIGF0b21DYWNoZSA9IG5ldyBNYXAoKTtcbiAgdmFyIHByaW9yVmFsdWVzID0gbmV3IE1hcCgpO1xuICByZXR1cm4gZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgaWYgKCFhdG9tQ2FjaGUuaGFzKHBhcmFtKSkge1xuICAgICAgdmFyIGJhc2VBdG9tID0gYXRvbShmdW5jdGlvbiAoZ2V0KSB7XG4gICAgICAgIHZhciBkZXJpdmVkVmFsdWUgPSBvcHRpb25zLmdldChwYXJhbSkoZ2V0KTtcbiAgICAgICAgdmFyIHByaW9yID0gcHJpb3JWYWx1ZXMuZ2V0KHBhcmFtKTtcbiAgICAgICAgaWYgKHByaW9yICE9IG51bGwgJiYgb3B0aW9ucy5lcXVhbHMoZGVyaXZlZFZhbHVlLCBwcmlvcikpIHtcbiAgICAgICAgICByZXR1cm4gcHJpb3I7XG4gICAgICAgIH1cbiAgICAgICAgcHJpb3JWYWx1ZXMuc2V0KHBhcmFtLCBkZXJpdmVkVmFsdWUpO1xuICAgICAgICByZXR1cm4gZGVyaXZlZFZhbHVlO1xuICAgICAgfSk7XG4gICAgICBhdG9tQ2FjaGUuc2V0KHBhcmFtLCBiYXNlQXRvbSk7XG4gICAgfVxuICAgIHJldHVybiBhdG9tQ2FjaGUuZ2V0KHBhcmFtKTtcbiAgfTtcbn1cblxudmFyIERFTElNID0gJzo6JztcbnZhciBQQVRIU19ERUxJTSA9ICc7JztcbnZhciBnZXRQcm9wZXJ0eVBhcmFtID0gZnVuY3Rpb24gZ2V0UHJvcGVydHlQYXJhbShpZCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIGlkICsgREVMSU0gKyBwcm9wZXJ0eTtcbn07XG52YXIgZ2V0UHJvcGVydGllc1BhcmFtID0gZnVuY3Rpb24gZ2V0UHJvcGVydGllc1BhcmFtKGlkLCBwcm9wZXJ0aWVzKSB7XG4gIHJldHVybiBpZCArIERFTElNICsgcHJvcGVydGllcy5qb2luKFBBVEhTX0RFTElNKTtcbn07XG52YXIgZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20gPSBmdW5jdGlvbiBnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIHBhcnRpY2lwYW50UHJvcGVydHlTdGF0ZShnZXRQcm9wZXJ0eVBhcmFtKGlkLCBwcm9wZXJ0eSkpO1xufTtcbi8qKlxyXG4gKiBTdG9yZXMgYWxsIHByb3BlcnR5IHBhdGhzIGZvciBhIGdpdmVuIHBhcnRpY2lwYW50LlxyXG4gKi9cbnZhciBwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNTdGF0ZSA9IC8qI19fUFVSRV9fKi9hdG9tRmFtaWx5KGZ1bmN0aW9uIChpZCkge1xuICB2YXIgcGFydGljaXBhbnRQcm9wZXJ0eVBhdGhzQXRvbSA9IGF0b20oW10pO1xuICBwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNBdG9tLmRlYnVnTGFiZWwgPSBqb3RhaURlYnVnTGFiZWwoXCJwYXJ0aWNpcGFudC1wcm9wZXJ0eS1wYXRocy1cIiArIGlkKTtcbiAgcmV0dXJuIHBhcnRpY2lwYW50UHJvcGVydHlQYXRoc0F0b207XG59KTtcbi8qKlxyXG4gKiBTdG9yZXMgcmVzb2x2ZWQgdmFsdWVzIGZvciBlYWNoIHBhcnRpY2lwYW50IGFuZCBwcm9wZXJ0eSBwYXRoLlxyXG4gKi9cbnZhciBwYXJ0aWNpcGFudFByb3BlcnR5U3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbUZhbWlseShmdW5jdGlvbiAocGFyYW0pIHtcbiAgdmFyIHBhcnRpY2lwYW50UHJvcGVydHlBdG9tID0gYXRvbShudWxsKTtcbiAgcGFydGljaXBhbnRQcm9wZXJ0eUF0b20uZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbChcInBhcnRpY2lwYW50LXByb3BlcnR5LVwiICsgcGFyYW0pO1xuICByZXR1cm4gcGFydGljaXBhbnRQcm9wZXJ0eUF0b207XG59KTtcbi8qKlxyXG4gKiBTdG9yZXMgcmVzb2x2ZWQgdmFsdWVzIGZvciBlYWNoIHBhcnRpY2lwYW50IGFuZCBwcm9wZXJ0eSBwYXRoLlxyXG4gKi9cbnZhciBwYXJ0aWNpcGFudFByb3BlcnRpZXNTdGF0ZSA9IC8qI19fUFVSRV9fKi9lcXVhbEF0b21GYW1pbHkoe1xuICBlcXVhbHM6IGFycmF5c0RlZXBFcXVhbCxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQocGFyYW0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGdldCkge1xuICAgICAgdmFyIF9wYXJhbSRzcGxpdCA9IHBhcmFtLnNwbGl0KERFTElNKSxcbiAgICAgICAgaWQgPSBfcGFyYW0kc3BsaXRbMF0sXG4gICAgICAgIHBhdGhzID0gX3BhcmFtJHNwbGl0WzFdO1xuICAgICAgdmFyIHByb3BlcnRpZXMgPSBwYXRocy5zcGxpdChQQVRIU19ERUxJTSk7XG4gICAgICByZXR1cm4gcHJvcGVydGllcy5tYXAoZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgcGF0aCkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxufSk7XG4vKipcclxuICogUmV0dXJucyBhIHBhcnRpY2lwYW50J3MgcHJvcGVydHkgdGhhdCB5b3Ugc3Vic2NyaWJlIHRvLlxyXG4gKiBAcGFyYW0gcGFydGljaXBhbnRJZCBUaGUgcGFydGljaXBhbnQncyBzZXNzaW9uX2lkLlxyXG4gKiBAcGFyYW0gcHJvcGVydHlQYXRocyB0aGUgYXJyYXkgb2YgcGFydGljaXBhbnQgcHJvcGVydHkgdGhhdCB5b3Ugd2FudCB0byBzdWJzY3JpYmUgdG8uXHJcbiAqL1xudmFyIHVzZVBhcnRpY2lwYW50UHJvcGVydHkgPSBmdW5jdGlvbiB1c2VQYXJ0aWNpcGFudFByb3BlcnR5KHBhcnRpY2lwYW50SWQsIHByb3BlcnR5UGF0aHMpIHtcbiAgdmFyIF9yZWY7XG4gIHZhciBwcm9wZXJ0aWVzID0gdXNlQXRvbVZhbHVlKEFycmF5LmlzQXJyYXkocHJvcGVydHlQYXRocykgPyBwYXJ0aWNpcGFudFByb3BlcnRpZXNTdGF0ZShnZXRQcm9wZXJ0aWVzUGFyYW0ocGFydGljaXBhbnRJZCwgcHJvcGVydHlQYXRocykpIDogcGFydGljaXBhbnRQcm9wZXJ0eVN0YXRlKGdldFByb3BlcnR5UGFyYW0ocGFydGljaXBhbnRJZCwgcHJvcGVydHlQYXRocykpKTtcbiAgdXNlRGVidWdWYWx1ZShBcnJheS5pc0FycmF5KHByb3BlcnR5UGF0aHMpID8gcHJvcGVydHlQYXRocy5yZWR1Y2UoZnVuY3Rpb24gKG8sIHBhdGgsIGkpIHtcbiAgICBvW3BhdGhdID0gcHJvcGVydGllc1tpXTtcbiAgICByZXR1cm4gbztcbiAgfSwge30pIDogKF9yZWYgPSB7fSwgX3JlZltwcm9wZXJ0eVBhdGhzXSA9IHByb3BlcnRpZXMsIF9yZWYpKTtcbiAgcmV0dXJuIHByb3BlcnRpZXM7XG59O1xuXG4vKipcclxuICogU2V0cyB1cCBhIHRocm90dGxlZCBkYWlseSBldmVudCBsaXN0ZW5lciB1c2luZyBbb25dKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvaW5zdGFuY2UtbWV0aG9kcy9vbikgbWV0aG9kLlxyXG4gKiBXaGVuIHRoaXMgaG9vayBpcyB1bm1vdW50ZWQgdGhlIGV2ZW50IGxpc3RlbmVyIGlzIHVucmVnaXN0ZXJlZCB1c2luZyBbb2ZmXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2luc3RhbmNlLW1ldGhvZHMvb2ZmKS5cclxuICpcclxuICogSW4gY29tcGFyaXNvbiB0byB1c2VEYWlseUV2ZW50IHRoZSBjYWxsYmFjayBwYXNzZWQgaGVyZSB3aWxsIGJlIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IG9iamVjdHMuXHJcbiAqXHJcbiAqIFlvdSBjYW4gcGFzcyBhbiBhcnJheSBvZiBEYWlseUV2ZW50cyB0byByZWdpc3RlciBtdWx0aXBsZSBkYWlseSBldmVudHMgd2l0aCBhIHNpbmdsZSBjYWxsYmFjayBoYW5kbGVyLlxyXG4gKiBUaGUgZXZlbnRzIHJldHVybmVkIGluIHRoZSBjYWxsYmFjayBwYXJhbWV0ZXIgYXJlIGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhleSB3ZXJlIGVtaXR0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBldiBUaGUgRGFpbHlFdmVudCB0byByZWdpc3RlciBvciBhbiBhcnJheSBvZiBEYWlseUV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gKiBAcGFyYW0gY2FsbGJhY2sgQSBtZW1vaXplZCBjYWxsYmFjayByZWZlcmVuY2UgdG8gcnVuIHdoZW4gdGhyb3R0bGVkIGV2ZW50cyBhcmUgZW1pdHRlZC5cclxuICogQHBhcmFtIHRocm90dGxlVGltZW91dCBUaGUgbWluaW11bSB3YWl0aW5nIHRpbWUgdW50aWwgdGhlIGNhbGxiYWNrIGlzIGNhbGxlZCBhZ2Fpbi4gRGVmYXVsdDogNTAwXHJcbiAqL1xudmFyIHVzZVRocm90dGxlZERhaWx5RXZlbnQgPSBmdW5jdGlvbiB1c2VUaHJvdHRsZWREYWlseUV2ZW50KGV2LCBjYWxsYmFjaywgdGhyb3R0bGVUaW1lb3V0LCBJTlRFUk5BTF9wcmlvcml0eSkge1xuICBpZiAodGhyb3R0bGVUaW1lb3V0ID09PSB2b2lkIDApIHtcbiAgICB0aHJvdHRsZVRpbWVvdXQgPSA1MDA7XG4gIH1cbiAgaWYgKElOVEVSTkFMX3ByaW9yaXR5ID09PSB2b2lkIDApIHtcbiAgICBJTlRFUk5BTF9wcmlvcml0eSA9IGZhbHNlO1xuICB9XG4gIHZhciBfdXNlQ29udGV4dCA9IHVzZUNvbnRleHQoRGFpbHlFdmVudENvbnRleHQpLFxuICAgIG9mZiA9IF91c2VDb250ZXh0Lm9mZixcbiAgICBvbiA9IF91c2VDb250ZXh0Lm9uO1xuICB2YXIgZXZlbnRJZCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGV2KSkgcmV0dXJuIGV2LnJlZHVjZShmdW5jdGlvbiAociwgZSkge1xuICAgICAgcltlXSA9IElOVEVSTkFMX3ByaW9yaXR5ID8gZ2V0UHJpb3JpdHlVbmlxdWUoKSA6IGdldFVuaXF1ZSgpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfSwge30pO1xuICAgIHJldHVybiBfcmVmID0ge30sIF9yZWZbZXZdID0gSU5URVJOQUxfcHJpb3JpdHkgPyBnZXRQcmlvcml0eVVuaXF1ZSgpIDogZ2V0VW5pcXVlKCksIF9yZWY7XG4gIH0sIFtldiwgSU5URVJOQUxfcHJpb3JpdHldKTtcbiAgdmFyIHRocm90dGxlZEV2ZW50cyA9IHVzZVJlZihbXSk7XG4gIHVzZURhaWx5RXZlbnQoJ2NhbGwtaW5zdGFuY2UtZGVzdHJveWVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHRocm90dGxlZEV2ZW50cy5jdXJyZW50Lmxlbmd0aCA9IDA7XG4gIH0sIFtdKSk7XG4gIHZhciBlbWl0RXZlbnRzID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRocm90dGxlKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aHJvdHRsZWRFdmVudHMuY3VycmVudC5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgIGNhbGxiYWNrKHRocm90dGxlZEV2ZW50cy5jdXJyZW50KTtcbiAgICAgIHRocm90dGxlZEV2ZW50cy5jdXJyZW50Lmxlbmd0aCA9IDA7XG4gICAgfSwgdGhyb3R0bGVUaW1lb3V0LCB7XG4gICAgICB0cmFpbGluZzogdHJ1ZVxuICAgIH0pO1xuICB9LCBbY2FsbGJhY2ssIHRocm90dGxlVGltZW91dF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghZXYpIHJldHVybjtcbiAgICB2YXIgYWRkRXZlbnQgPSBmdW5jdGlvbiBhZGRFdmVudChldikge1xuICAgICAgdGhyb3R0bGVkRXZlbnRzLmN1cnJlbnQucHVzaChldik7XG4gICAgICBlbWl0RXZlbnRzKCk7XG4gICAgfTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShldikpIHtcbiAgICAgIGV2LmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIG9uKGUsIGFkZEV2ZW50LCBldmVudElkW2VdKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbihldiwgYWRkRXZlbnQsIGV2ZW50SWRbZXZdKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGV2KSkge1xuICAgICAgICBldi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIG9mZihlLCBldmVudElkW2VdKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvZmYoZXYsIGV2ZW50SWRbZXZdKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbZW1pdEV2ZW50cywgZXYsIGV2ZW50SWQsIG9mZiwgb25dKTtcbiAgdXNlRGVidWdWYWx1ZSh7XG4gICAgZXZlbnQ6IGV2LFxuICAgIGV2ZW50SWQ6IGV2ZW50SWRcbiAgfSk7XG59O1xuXG4vKipcclxuICogUmV0dXJucyBhbGwgcHJvcGVydHkgcGF0aHMgZm9yIGFuIG9iamVjdC5cclxuICovXG52YXIgZ2V0UGF0aHMgPSBmdW5jdGlvbiBnZXRQYXRocyhvLCBjdXJyZW50UGF0aCwgdmlzaXRlZCkge1xuICBpZiAoY3VycmVudFBhdGggPT09IHZvaWQgMCkge1xuICAgIGN1cnJlbnRQYXRoID0gJyc7XG4gIH1cbiAgaWYgKHZpc2l0ZWQgPT09IHZvaWQgMCkge1xuICAgIHZpc2l0ZWQgPSBuZXcgU2V0KCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBvICE9PSAnb2JqZWN0JyB8fCBvID09PSBudWxsIHx8IHZpc2l0ZWQuaGFzKG8pKSB7XG4gICAgcmV0dXJuIFtjdXJyZW50UGF0aF07XG4gIH1cbiAgdmlzaXRlZC5hZGQobyk7XG4gIHZhciBwYXRocyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gbykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywga2V5KSkge1xuICAgICAgdmFyIG5ld1BhdGggPSBjdXJyZW50UGF0aCA/IGN1cnJlbnRQYXRoICsgXCIuXCIgKyBrZXkgOiBrZXk7XG4gICAgICBwYXRocy5wdXNoLmFwcGx5KHBhdGhzLCBbbmV3UGF0aF0uY29uY2F0KGdldFBhdGhzKG9ba2V5XSwgbmV3UGF0aCwgdmlzaXRlZCkpKTtcbiAgICB9XG4gIH1cbiAgdmlzaXRlZFtcImRlbGV0ZVwiXShvKTtcbiAgcmV0dXJuIHBhdGhzO1xufTtcbi8qKlxyXG4gKiBSZXR1cm5zIGFsbCBwcm9wZXJ0eSBwYXRocyBmb3IgYSBnaXZlbiBwYXJ0aWNpcGFudCBvYmplY3QuXHJcbiAqL1xudmFyIGdldFBhcnRpY2lwYW50UGF0aHMgPSBmdW5jdGlvbiBnZXRQYXJ0aWNpcGFudFBhdGhzKHApIHtcbiAgcmV0dXJuIGdldFBhdGhzKHApO1xufTtcblxudmFyIHJlc29sdmVQYXRoID0gZnVuY3Rpb24gcmVzb2x2ZVBhdGgocGFydGljaXBhbnQsIHBhdGgpIHtcbiAgcmV0dXJuIFN0cmluZyhwYXRoKS5zcGxpdCgnLicpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5sZW5ndGg7XG4gIH0pLnJlZHVjZShmdW5jdGlvbiAocCwga2V5KSB7XG4gICAgcmV0dXJuIHAgJiYgcFtrZXldO1xuICB9LCBwYXJ0aWNpcGFudCk7XG59O1xudmFyIHJlc29sdmVQYXJ0aWNpcGFudFBhdGhzID0gZnVuY3Rpb24gcmVzb2x2ZVBhcnRpY2lwYW50UGF0aHMocGFydGljaXBhbnQsIHBhdGhzKSB7XG4gIHJldHVybiBwYXRocy5tYXAoZnVuY3Rpb24gKHBhdGgpIHtcbiAgICByZXR1cm4gcmVzb2x2ZVBhdGgocGFydGljaXBhbnQsIHBhdGgpO1xuICB9KTtcbn07XG5cbi8qKlxyXG4gKiBTdG9yZXMgdGhlIG1vc3QgcmVjZW50IHBlZXJJZCBhcyByZXBvcnRlZCBmcm9tIFthY3RpdmUtc3BlYWtlci1jaGFuZ2VdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvZXZlbnRzL21lZXRpbmctZXZlbnRzI2FjdGl2ZS1zcGVha2VyLWNoYW5nZSkgZXZlbnQuXHJcbiAqL1xudmFyIGFjdGl2ZUlkU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShudWxsKTtcbmFjdGl2ZUlkU3RhdGUuZGVidWdMYWJlbCA9IC8qI19fUFVSRV9fKi9qb3RhaURlYnVnTGFiZWwoJ2FjdGl2ZS1pZCcpO1xudmFyIGxvY2FsSWRTdGF0ZSA9IC8qI19fUFVSRV9fKi9hdG9tKCcnKTtcbmxvY2FsSWRTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnbG9jYWwtaWQnKTtcbnZhciBsb2NhbEpvaW5EYXRlU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShudWxsKTtcbmxvY2FsSm9pbkRhdGVTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnbG9jYWwtam9pbi1kYXRlJyk7XG52YXIgcGFydGljaXBhbnRJZHNTdGF0ZSA9IC8qI19fUFVSRV9fKi9hdG9tKFtdKTtcbnBhcnRpY2lwYW50SWRzU3RhdGUuZGVidWdMYWJlbCA9IC8qI19fUFVSRV9fKi9qb3RhaURlYnVnTGFiZWwoJ3BhcnRpY2lwYW50LWlkcycpO1xudmFyIHBhcnRpY2lwYW50U3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbUZhbWlseShmdW5jdGlvbiAoaWQpIHtcbiAgdmFyIHBhcnRpY2lwYW50QXRvbSA9IGF0b20obnVsbCk7XG4gIHBhcnRpY2lwYW50QXRvbS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKFwicGFydGljaXBhbnQtXCIgKyBpZCk7XG4gIHJldHVybiBwYXJ0aWNpcGFudEF0b207XG59KTtcbnZhciB3YWl0aW5nUGFydGljaXBhbnRzU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShbXSk7XG53YWl0aW5nUGFydGljaXBhbnRzU3RhdGUuZGVidWdMYWJlbCA9IC8qI19fUFVSRV9fKi9qb3RhaURlYnVnTGFiZWwoJ3dhaXRpbmctcGFydGljaXBhbnRzJyk7XG52YXIgd2FpdGluZ1BhcnRpY2lwYW50U3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbUZhbWlseShmdW5jdGlvbiAoaWQpIHtcbiAgdmFyIHdhaXRpbmdQYXJ0aWNpcGFudEF0b20gPSBhdG9tKHtcbiAgICBhd2FpdGluZ0FjY2Vzczoge1xuICAgICAgbGV2ZWw6ICdmdWxsJ1xuICAgIH0sXG4gICAgaWQ6IGlkLFxuICAgIG5hbWU6ICcnXG4gIH0pO1xuICB3YWl0aW5nUGFydGljaXBhbnRBdG9tLmRlYnVnTGFiZWwgPSBqb3RhaURlYnVnTGFiZWwoXCJ3YWl0aW5nLXBhcnRpY2lwYW50LVwiICsgaWQpO1xuICByZXR1cm4gd2FpdGluZ1BhcnRpY2lwYW50QXRvbTtcbn0pO1xudmFyIGFsbFdhaXRpbmdQYXJ0aWNpcGFudHNTZWxlY3RvciA9IC8qI19fUFVSRV9fKi9lcXVhbEF0b21GYW1pbHkoe1xuICBlcXVhbHM6IGFycmF5c0RlZXBFcXVhbCxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChnZXQpIHtcbiAgICAgIHZhciBpZHMgPSBnZXQod2FpdGluZ1BhcnRpY2lwYW50c1N0YXRlKTtcbiAgICAgIHJldHVybiBpZHMubWFwKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gZ2V0KHdhaXRpbmdQYXJ0aWNpcGFudFN0YXRlKGlkKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG59KTtcbnZhciBEYWlseVBhcnRpY2lwYW50cyA9IGZ1bmN0aW9uIERhaWx5UGFydGljaXBhbnRzKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICBpbml0aWFsaXplZCA9IF91c2VTdGF0ZVswXSxcbiAgICBzZXRJbml0aWFsaXplZCA9IF91c2VTdGF0ZVsxXTtcbiAgdmFyIGluaXRQYXJ0aWNpcGFudHMgPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgcGFydGljaXBhbnRzKSB7XG4gICAgc2V0KGxvY2FsSWRTdGF0ZSwgcGFydGljaXBhbnRzLmxvY2FsLnNlc3Npb25faWQpO1xuICAgIHZhciBwYXJ0aWNpcGFudHNBcnJheSA9IE9iamVjdC52YWx1ZXMocGFydGljaXBhbnRzKTtcbiAgICB2YXIgaWRzID0gcGFydGljaXBhbnRzQXJyYXkubWFwKGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gcC5zZXNzaW9uX2lkO1xuICAgIH0pO1xuICAgIHNldChwYXJ0aWNpcGFudElkc1N0YXRlLCBpZHMpO1xuICAgIHBhcnRpY2lwYW50c0FycmF5LmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgIHNldChwYXJ0aWNpcGFudFN0YXRlKHAuc2Vzc2lvbl9pZCksIHApO1xuICAgICAgdmFyIHBhdGhzID0gZ2V0UGFydGljaXBhbnRQYXRocyhwKTtcbiAgICAgIHNldChwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNTdGF0ZShwLnNlc3Npb25faWQpLCBwYXRocyk7XG4gICAgICBwYXRocy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICB2YXIgX3Jlc29sdmVQYXJ0aWNpcGFudFBhID0gcmVzb2x2ZVBhcnRpY2lwYW50UGF0aHMocCwgW3Byb3BlcnR5XSksXG4gICAgICAgICAgdmFsdWUgPSBfcmVzb2x2ZVBhcnRpY2lwYW50UGFbMF07XG4gICAgICAgIHNldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShwLnNlc3Npb25faWQsIHByb3BlcnR5KSwgdmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgc2V0SW5pdGlhbGl6ZWQodHJ1ZSk7XG4gIH0sIFtdKSk7XG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgcGFydGljaXBhbnRzIHN0YXRlIGJhc2VkIG9uIGRhaWx5LnBhcnRpY2lwYW50cygpLlxyXG4gICAqIFJldHJpZXMgZXZlcnkgMTAwbXMgdG8gaW5pdGlhbGl6ZSB0aGUgc3RhdGUsIHVudGlsIGRhaWx5IGlzIHJlYWR5LlxyXG4gICAqL1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGFpbHkgfHwgaW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFydGljaXBhbnRzID0gZGFpbHkucGFydGljaXBhbnRzKCk7XG4gICAgICBpZiAoISgnbG9jYWwnIGluIHBhcnRpY2lwYW50cykpIHJldHVybjtcbiAgICAgIGluaXRQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKTtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgIH0sIDEwMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgIH07XG4gIH0sIFtkYWlseSwgaW5pdGlhbGl6ZWQsIGluaXRQYXJ0aWNpcGFudHNdKTtcbiAgdmFyIGhhbmRsZUluaXRFdmVudCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgdmFyIHBhcnRpY2lwYW50cyA9IGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS5wYXJ0aWNpcGFudHMoKTtcbiAgICBpZiAoIXBhcnRpY2lwYW50cy5sb2NhbCkgcmV0dXJuO1xuICAgIGluaXRQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKTtcbiAgfSwgW2RhaWx5LCBpbml0UGFydGljaXBhbnRzXSk7XG4gIHVzZURhaWx5RXZlbnQoJ3N0YXJ0ZWQtY2FtZXJhJywgaGFuZGxlSW5pdEV2ZW50LCB0cnVlKTtcbiAgdXNlRGFpbHlFdmVudCgnYWNjZXNzLXN0YXRlLXVwZGF0ZWQnLCBoYW5kbGVJbml0RXZlbnQsIHRydWUpO1xuICB1c2VEYWlseUV2ZW50KCdqb2luaW5nLW1lZXRpbmcnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHNldChsb2NhbEpvaW5EYXRlU3RhdGUsIG5ldyBEYXRlKCkpO1xuICAgIGhhbmRsZUluaXRFdmVudCgpO1xuICB9LCBbaGFuZGxlSW5pdEV2ZW50XSkpLCB0cnVlKTtcbiAgdXNlRGFpbHlFdmVudCgnam9pbmVkLW1lZXRpbmcnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBpbml0UGFydGljaXBhbnRzKGV2LnBhcnRpY2lwYW50cyk7XG4gIH0sIFtpbml0UGFydGljaXBhbnRzXSksIHRydWUpO1xuICAvKipcclxuICAgKiBSZXNldCBzdG9yZWQgcGFydGljaXBhbnRzLCB3aGVuIG1lZXRpbmcgaGFzIGVuZGVkLlxyXG4gICAqL1xuICB2YXIgaGFuZGxlQ2xlYW51cCA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoZ2V0LCBzZXQpIHtcbiAgICBzZXQobG9jYWxJZFN0YXRlLCAnJyk7XG4gICAgc2V0KGFjdGl2ZUlkU3RhdGUsIG51bGwpO1xuICAgIHZhciBpZHMgPSBnZXQocGFydGljaXBhbnRJZHNTdGF0ZSk7XG4gICAgaWRzLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICByZXR1cm4gcGFydGljaXBhbnRTdGF0ZS5yZW1vdmUoaWQpO1xuICAgIH0pO1xuICAgIHNldChwYXJ0aWNpcGFudElkc1N0YXRlLCBbXSk7XG4gIH0sIFtdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2NhbGwtaW5zdGFuY2UtZGVzdHJveWVkJywgaGFuZGxlQ2xlYW51cCwgdHJ1ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xlZnQtbWVldGluZycsIGhhbmRsZUNsZWFudXAsIHRydWUpO1xuICB1c2VUaHJvdHRsZWREYWlseUV2ZW50KFsnYWN0aXZlLXNwZWFrZXItY2hhbmdlJywgJ3BhcnRpY2lwYW50LWpvaW5lZCcsICdwYXJ0aWNpcGFudC11cGRhdGVkJywgJ3BhcnRpY2lwYW50LWxlZnQnXSwgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChnZXQsIHNldCwgZXZ0cykge1xuICAgIGlmICghZXZ0cy5sZW5ndGgpIHJldHVybjtcbiAgICBldnRzLmZvckVhY2goZnVuY3Rpb24gKGV2KSB7XG4gICAgICBzd2l0Y2ggKGV2LmFjdGlvbikge1xuICAgICAgICBjYXNlICdhY3RpdmUtc3BlYWtlci1jaGFuZ2UnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNldChhY3RpdmVJZFN0YXRlLCBldi5hY3RpdmVTcGVha2VyLnBlZXJJZCk7XG4gICAgICAgICAgICBzZXQocGFydGljaXBhbnRTdGF0ZShldi5hY3RpdmVTcGVha2VyLnBlZXJJZCksIGZ1bmN0aW9uIChwcmV2KSB7XG4gICAgICAgICAgICAgIGlmICghcHJldikgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcHJldiwge1xuICAgICAgICAgICAgICAgIGxhc3RfYWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3BhcnRpY2lwYW50LWpvaW5lZCc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gVXBkYXRlIGxpc3Qgb2YgaWRzXG4gICAgICAgICAgICBzZXQocGFydGljaXBhbnRJZHNTdGF0ZSwgZnVuY3Rpb24gKHByZXZJZHMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHByZXZJZHMuaW5jbHVkZXMoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCkgPyBwcmV2SWRzIDogW10uY29uY2F0KHByZXZJZHMsIFtldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFN0b3JlIGVudGlyZSBvYmplY3RcbiAgICAgICAgICAgIHNldChwYXJ0aWNpcGFudFN0YXRlKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQpLCBldi5wYXJ0aWNpcGFudCk7XG4gICAgICAgICAgICB2YXIgcGF0aHMgPSBnZXRQYXJ0aWNpcGFudFBhdGhzKGV2LnBhcnRpY2lwYW50KTtcbiAgICAgICAgICAgIC8vIFNldCBsaXN0IG9mIHByb3BlcnR5IHBhdGhzXG4gICAgICAgICAgICBzZXQocGFydGljaXBhbnRQcm9wZXJ0eVBhdGhzU3RhdGUoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCksIHBhdGhzKTtcbiAgICAgICAgICAgIC8vIFNldCBhbGwgcHJvcGVydHkgcGF0aCB2YWx1ZXNcbiAgICAgICAgICAgIHBhdGhzLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgIHZhciBfcmVzb2x2ZVBhcnRpY2lwYW50UGEyID0gcmVzb2x2ZVBhcnRpY2lwYW50UGF0aHMoZXYucGFydGljaXBhbnQsIFtwcm9wZXJ0eV0pLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gX3Jlc29sdmVQYXJ0aWNpcGFudFBhMlswXTtcbiAgICAgICAgICAgICAgc2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQsIHByb3BlcnR5KSwgdmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3BhcnRpY2lwYW50LXVwZGF0ZWQnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBlbnRpcmUgb2JqZWN0XG4gICAgICAgICAgICBzZXQocGFydGljaXBhbnRTdGF0ZShldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSwgZXYucGFydGljaXBhbnQpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsIHNlc3Npb25faWRcbiAgICAgICAgICAgIGlmIChldi5wYXJ0aWNpcGFudC5sb2NhbCkge1xuICAgICAgICAgICAgICBzZXQobG9jYWxJZFN0YXRlLCBldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfcGF0aHMgPSBnZXRQYXJ0aWNpcGFudFBhdGhzKGV2LnBhcnRpY2lwYW50KTtcbiAgICAgICAgICAgIHZhciBvbGRQYXRocyA9IGdldChwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNTdGF0ZShldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSk7XG4gICAgICAgICAgICB2YXIgcGF0aHNDaGFuZ2VkID0gX3BhdGhzLmxlbmd0aCAhPT0gb2xkUGF0aHMubGVuZ3RoIHx8IF9wYXRocy5zb21lKGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgICAgICAgIHJldHVybiAhb2xkUGF0aHMuaW5jbHVkZXMocGF0aCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNldCBsaXN0IG9mIHByb3BlcnR5IHBhdGhzXG4gICAgICAgICAgICBpZiAocGF0aHNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgIHNldChwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNTdGF0ZShldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSwgX3BhdGhzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIFNldCBvZiBvbGRQYXRocyBmb3IgcXVpY2sgbG9va3VwXG4gICAgICAgICAgICB2YXIgb2xkUGF0aFNldCA9IG5ldyBTZXQob2xkUGF0aHMpO1xuICAgICAgICAgICAgLy8gUmVzb2x2ZSBhbGwgcGF0aCB2YWx1ZXMgaW4gb25lIGNhbGxcbiAgICAgICAgICAgIHZhciByZXNvbHZlZFZhbHVlcyA9IHJlc29sdmVQYXJ0aWNpcGFudFBhdGhzKGV2LnBhcnRpY2lwYW50LCBfcGF0aHMpO1xuICAgICAgICAgICAgX3BhdGhzLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5LCBpZHgpIHtcbiAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcmVzb2x2ZWRWYWx1ZXNbaWR4XTtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHByb3BlcnR5IGZyb20gb2xkUGF0aFNldCB0byBtYXJrIGl0IGFzIHByb2Nlc3NlZFxuICAgICAgICAgICAgICBvbGRQYXRoU2V0W1wiZGVsZXRlXCJdKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdGhlIG5ldyB2YWx1ZSBkaWZmZXJzIGZyb20gdGhlIGN1cnJlbnQgb25lXG4gICAgICAgICAgICAgIHNldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkLCBwcm9wZXJ0eSksIGZ1bmN0aW9uIChwcmV2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbURlZXBFcXVhbChwcmV2LCB2YWx1ZSkgPyBwcmV2IDogdmFsdWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTZXQgYW55IHJlbWFpbmluZyBwYXRocyBpbiBvbGRQYXRoU2V0IHRvIG51bGxcbiAgICAgICAgICAgIG9sZFBhdGhTZXQuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgc2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQsIHByb3BlcnR5KSwgbnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSAncGFydGljaXBhbnQtbGVmdCc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gbGlzdCBvZiBpZHNcbiAgICAgICAgICAgIHNldChwYXJ0aWNpcGFudElkc1N0YXRlLCBmdW5jdGlvbiAocHJldklkcykge1xuICAgICAgICAgICAgICByZXR1cm4gcHJldklkcy5pbmNsdWRlcyhldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSA/IHByZXZJZHMuZmlsdGVyKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpZCAhPT0gZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZDtcbiAgICAgICAgICAgICAgfSkgOiBwcmV2SWRzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZW50aXJlIG9iamVjdFxuICAgICAgICAgICAgcGFydGljaXBhbnRTdGF0ZS5yZW1vdmUoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCk7XG4gICAgICAgICAgICB2YXIgX29sZFBhdGhzID0gZ2V0KHBhcnRpY2lwYW50UHJvcGVydHlQYXRoc1N0YXRlKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQpKTtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBwcm9wZXJ0eSBwYXRoIHZhbHVlc1xuICAgICAgICAgICAgX29sZFBhdGhzLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50UHJvcGVydHlTdGF0ZS5yZW1vdmUoZ2V0UHJvcGVydHlQYXJhbShldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkLCBwcm9wZXJ0eSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYWxsIHByb3BlcnR5IHBhdGhzXG4gICAgICAgICAgICBwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNTdGF0ZS5yZW1vdmUoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtdKSksIDEwMCwgdHJ1ZSk7XG4gIHVzZVRocm90dGxlZERhaWx5RXZlbnQoWyd3YWl0aW5nLXBhcnRpY2lwYW50LWFkZGVkJywgJ3dhaXRpbmctcGFydGljaXBhbnQtdXBkYXRlZCcsICd3YWl0aW5nLXBhcnRpY2lwYW50LXJlbW92ZWQnXSwgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2dHMpIHtcbiAgICBldnRzLmZvckVhY2goZnVuY3Rpb24gKGV2KSB7XG4gICAgICBzd2l0Y2ggKGV2LmFjdGlvbikge1xuICAgICAgICBjYXNlICd3YWl0aW5nLXBhcnRpY2lwYW50LWFkZGVkJzpcbiAgICAgICAgICBzZXQod2FpdGluZ1BhcnRpY2lwYW50c1N0YXRlLCBmdW5jdGlvbiAod3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gd3BzLmluY2x1ZGVzKGV2LnBhcnRpY2lwYW50LmlkKSA/IHdwcyA6IFtdLmNvbmNhdCh3cHMsIFtldi5wYXJ0aWNpcGFudC5pZF0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldCh3YWl0aW5nUGFydGljaXBhbnRTdGF0ZShldi5wYXJ0aWNpcGFudC5pZCksIGV2LnBhcnRpY2lwYW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2FpdGluZy1wYXJ0aWNpcGFudC11cGRhdGVkJzpcbiAgICAgICAgICBzZXQod2FpdGluZ1BhcnRpY2lwYW50U3RhdGUoZXYucGFydGljaXBhbnQuaWQpLCBldi5wYXJ0aWNpcGFudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3dhaXRpbmctcGFydGljaXBhbnQtcmVtb3ZlZCc6XG4gICAgICAgICAgc2V0KHdhaXRpbmdQYXJ0aWNpcGFudHNTdGF0ZSwgZnVuY3Rpb24gKHdwcykge1xuICAgICAgICAgICAgcmV0dXJuIHdwcy5maWx0ZXIoZnVuY3Rpb24gKHdwKSB7XG4gICAgICAgICAgICAgIHJldHVybiB3cCAhPT0gZXYucGFydGljaXBhbnQuaWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3YWl0aW5nUGFydGljaXBhbnRTdGF0ZS5yZW1vdmUoZXYucGFydGljaXBhbnQuaWQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbXSkpLCAxMDAsIHRydWUpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY2hpbGRyZW4pO1xufTtcblxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGxvY2FsIHBhcnRpY2lwYW50J3Mgc2Vzc2lvbl9pZCBvciBlbXB0eSBzdHJpbmcgJycsXHJcbiAqIGlmIHRoZSBsb2NhbCBwYXJ0aWNpcGFudCBkb2Vzbid0IGV4aXN0LlxyXG4gKi9cbnZhciB1c2VMb2NhbFNlc3Npb25JZCA9IGZ1bmN0aW9uIHVzZUxvY2FsU2Vzc2lvbklkKCkge1xuICB2YXIgbG9jYWxJZCA9IHVzZUF0b21WYWx1ZShsb2NhbElkU3RhdGUpO1xuICB1c2VEZWJ1Z1ZhbHVlKGxvY2FsSWQpO1xuICByZXR1cm4gbG9jYWxJZDtcbn07XG5cbnZhciBub29wRmlsdGVyID0gZnVuY3Rpb24gbm9vcEZpbHRlcigpIHtcbiAgcmV0dXJuIHRydWU7XG59O1xuLyoqXHJcbiAqIFJldHVybnMgdGhlIG1vc3QgcmVjZW50IHNwZWFrZXIgaWQgbWVudGlvbmVkIGluIGFuIFthY3RpdmUtc3BlYWtlci1jaGFuZ2VdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvZXZlbnRzL21lZXRpbmctZXZlbnRzI2FjdGl2ZS1zcGVha2VyLWNoYW5nZSkgZXZlbnQuXHJcbiAqL1xudmFyIHVzZUFjdGl2ZVNwZWFrZXJJZCA9IGZ1bmN0aW9uIHVzZUFjdGl2ZVNwZWFrZXJJZChfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIF9yZWYkZmlsdGVyID0gX3JlZi5maWx0ZXIsXG4gICAgZmlsdGVyID0gX3JlZiRmaWx0ZXIgPT09IHZvaWQgMCA/IG5vb3BGaWx0ZXIgOiBfcmVmJGZpbHRlcixcbiAgICBfcmVmJGlnbm9yZUxvY2FsID0gX3JlZi5pZ25vcmVMb2NhbCxcbiAgICBpZ25vcmVMb2NhbCA9IF9yZWYkaWdub3JlTG9jYWwgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRpZ25vcmVMb2NhbDtcbiAgdmFyIGxvY2FsU2Vzc2lvbklkID0gdXNlTG9jYWxTZXNzaW9uSWQoKTtcbiAgdmFyIHJlY2VudEFjdGl2ZUlkID0gdXNlQXRvbVZhbHVlKGFjdGl2ZUlkU3RhdGUpO1xuICB2YXIgaXNJZ25vcmVkTG9jYWxJZCA9IGlnbm9yZUxvY2FsICYmIHJlY2VudEFjdGl2ZUlkID09PSBsb2NhbFNlc3Npb25JZDtcbiAgdmFyIGlzRmlsdGVyZWRPdXQgPSAhKGZpbHRlciAhPSBudWxsICYmIGZpbHRlcihyZWNlbnRBY3RpdmVJZCkpO1xuICB2YXIgaXNSZWNlbnRJZFJlbGV2YW50ID0gIWlzSWdub3JlZExvY2FsSWQgJiYgIWlzRmlsdGVyZWRPdXQ7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShpc1JlY2VudElkUmVsZXZhbnQgPyByZWNlbnRBY3RpdmVJZCA6IG51bGwpLFxuICAgIGFjdGl2ZUlkID0gX3VzZVN0YXRlWzBdLFxuICAgIHNldEFjdGl2ZUlkID0gX3VzZVN0YXRlWzFdO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChpc0lnbm9yZWRMb2NhbElkIHx8IGlzRmlsdGVyZWRPdXQpIHJldHVybjtcbiAgICBzZXRBY3RpdmVJZChyZWNlbnRBY3RpdmVJZCk7XG4gIH0sIFtpc0ZpbHRlcmVkT3V0LCBpc0lnbm9yZWRMb2NhbElkLCByZWNlbnRBY3RpdmVJZF0pO1xuICB1c2VEZWJ1Z1ZhbHVlKGFjdGl2ZUlkKTtcbiAgcmV0dXJuIGFjdGl2ZUlkO1xufTtcblxudmFyIGlzVHJhY2tPZmYgPSBmdW5jdGlvbiBpc1RyYWNrT2ZmKHRyYWNrU3RhdGUpIHtcbiAgcmV0dXJuIFsnYmxvY2tlZCcsICdvZmYnXS5pbmNsdWRlcyh0cmFja1N0YXRlKTtcbn07XG5cbnZhciBTRVJJQUxJWkFCTEVfREVMSU0gPSAnOyc7XG52YXIgZ2V0UGFydGljaXBhbnRJZHNGaWx0ZXJTb3J0UGFyYW0gPSBmdW5jdGlvbiBnZXRQYXJ0aWNpcGFudElkc0ZpbHRlclNvcnRQYXJhbShmaWx0ZXIsIHNvcnQpIHtcbiAgcmV0dXJuIFwiXCIgKyBmaWx0ZXIgKyBTRVJJQUxJWkFCTEVfREVMSU0gKyBzb3J0O1xufTtcbi8qKlxyXG4gKiBTaG9ydC1jdXQgc3RhdGUgc2VsZWN0b3IgZm9yIHVzZVBhcnRpY2lwYW50SWRzKHsgZmlsdGVyOiAnbG9jYWwnIH0pXHJcbiAqL1xudmFyIHBhcnRpY2lwYW50SWRzRmlsdGVyZWRBbmRTb3J0ZWRTdGF0ZSA9IC8qI19fUFVSRV9fKi9lcXVhbEF0b21GYW1pbHkoe1xuICBlcXVhbHM6IGN1c3RvbURlZXBFcXVhbCxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQocGFyYW0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGdldCkge1xuICAgICAgdmFyIF9wYXJhbSRzcGxpdCA9IHBhcmFtLnNwbGl0KFNFUklBTElaQUJMRV9ERUxJTSksXG4gICAgICAgIGZpbHRlciA9IF9wYXJhbSRzcGxpdFswXSxcbiAgICAgICAgc29ydCA9IF9wYXJhbSRzcGxpdFsxXTtcbiAgICAgIHZhciBpZHMgPSBnZXQocGFydGljaXBhbnRJZHNTdGF0ZSk7XG4gICAgICByZXR1cm4gaWRzLmZpbHRlcihmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgc3dpdGNoIChmaWx0ZXIpIHtcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIFNpbXBsZSBib29sZWFuIGZpZWxkcyBmaXJzdC5cclxuICAgICAgICAgICAqL1xuICAgICAgICAgIGNhc2UgJ2xvY2FsJzpcbiAgICAgICAgICBjYXNlICdvd25lcic6XG4gICAgICAgICAgY2FzZSAncmVjb3JkJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgZmlsdGVyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAncmVtb3RlJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcmV0dXJuICFnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oaWQsICdsb2NhbCcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdzY3JlZW4nOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB2YXIgc2NyZWVuQXVkaW9TdGF0ZSA9IGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgJ3RyYWNrcy5zY3JlZW5BdWRpby5zdGF0ZScpKTtcbiAgICAgICAgICAgICAgdmFyIHNjcmVlblZpZGVvU3RhdGUgPSBnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oaWQsICd0cmFja3Muc2NyZWVuVmlkZW8uc3RhdGUnKSk7XG4gICAgICAgICAgICAgIHJldHVybiAhaXNUcmFja09mZihzY3JlZW5BdWRpb1N0YXRlKSB8fCAhaXNUcmFja09mZihzY3JlZW5WaWRlb1N0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGlkQSwgaWRCKSB7XG4gICAgICAgIHN3aXRjaCAoc29ydCkge1xuICAgICAgICAgIGNhc2UgJ2pvaW5lZF9hdCc6XG4gICAgICAgICAgY2FzZSAnc2Vzc2lvbl9pZCc6XG4gICAgICAgICAgY2FzZSAndXNlcl9pZCc6XG4gICAgICAgICAgY2FzZSAndXNlcl9uYW1lJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdmFyIGFTb3J0ID0gZ2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGlkQSwgc29ydCkpO1xuICAgICAgICAgICAgICB2YXIgYlNvcnQgPSBnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oaWRCLCBzb3J0KSk7XG4gICAgICAgICAgICAgIGlmIChhU29ydCAhPT0gdW5kZWZpbmVkIHx8IGJTb3J0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoYVNvcnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIGlmIChiU29ydCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAoYVNvcnQgPiBiU29ydCkgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKGFTb3J0IDwgYlNvcnQpIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbn0pO1xuLyoqXHJcbiAqIFJldHVybnMgYSBsaXN0IG9mIHBhcnRpY2lwYW50IGlkcyAoPSBzZXNzaW9uX2lkKS5cclxuICogVGhlIGxpc3QgY2FuIG9wdGlvbmFsbHkgYmUgZmlsdGVyZWQgYW5kIHNvcnRlZCwgdXNpbmcgdGhlIGZpbHRlciBhbmQgc29ydCBvcHRpb25zLlxyXG4gKi9cbnZhciB1c2VQYXJ0aWNpcGFudElkcyA9IGZ1bmN0aW9uIHVzZVBhcnRpY2lwYW50SWRzKF90ZW1wKSB7XG4gIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgZmlsdGVyID0gX3JlZi5maWx0ZXIsXG4gICAgb25BY3RpdmVTcGVha2VyQ2hhbmdlID0gX3JlZi5vbkFjdGl2ZVNwZWFrZXJDaGFuZ2UsXG4gICAgb25QYXJ0aWNpcGFudEpvaW5lZCA9IF9yZWYub25QYXJ0aWNpcGFudEpvaW5lZCxcbiAgICBvblBhcnRpY2lwYW50TGVmdCA9IF9yZWYub25QYXJ0aWNpcGFudExlZnQsXG4gICAgb25QYXJ0aWNpcGFudFVwZGF0ZWQgPSBfcmVmLm9uUGFydGljaXBhbnRVcGRhdGVkLFxuICAgIHNvcnQgPSBfcmVmLnNvcnQ7XG4gIC8qKlxyXG4gICAqIEZvciBpbnN0YW5jZXMgb2YgdXNlUGFydGljaXBhbnRJZHMgd2l0aCBzdHJpbmctYmFzZWQgZmlsdGVyIGFuZCBzb3J0LFxyXG4gICAqIHdlIGNhbiBpbW1lZGlhdGVseSByZXR1cm4gdGhlIGNvcnJlY3QgaWRzIGZyb20gSm90YWkncyBzdGF0ZS5cclxuICAgKi9cbiAgdmFyIHByZUZpbHRlcmVkU29ydGVkSWRzID0gdXNlQXRvbVZhbHVlKHBhcnRpY2lwYW50SWRzRmlsdGVyZWRBbmRTb3J0ZWRTdGF0ZShnZXRQYXJ0aWNpcGFudElkc0ZpbHRlclNvcnRQYXJhbSh0eXBlb2YgZmlsdGVyID09PSAnc3RyaW5nJyA/IGZpbHRlciA6IG51bGwsIHR5cGVvZiBzb3J0ID09PSAnc3RyaW5nJyA/IHNvcnQgOiBudWxsKSkpO1xuICB2YXIgc2hvdWxkVXNlQ3VzdG9tSWRzID0gdHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2Ygc29ydCA9PT0gJ2Z1bmN0aW9uJztcbiAgdmFyIGdldEN1c3RvbUZpbHRlcmVkSWRzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGdldCkge1xuICAgIGlmIChcbiAgICAvLyBJZ25vcmUgaWYgYm90aCBmaWx0ZXIgYW5kIHNvcnQgYXJlIG5vdCBmdW5jdGlvbnMuXG4gICAgdHlwZW9mIGZpbHRlciAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc29ydCAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIFtdO1xuICAgIHZhciBwYXJ0aWNpcGFudHMgPSBwcmVGaWx0ZXJlZFNvcnRlZElkcy5tYXAoZnVuY3Rpb24gKGlkKSB7XG4gICAgICByZXR1cm4gZ2V0KHBhcnRpY2lwYW50U3RhdGUoaWQpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGFydGljaXBhbnRzXG4gICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGFjY2lkZW50YWxseSB0cnkgdG8gZmlsdGVyL3NvcnQgYG51bGxgIHBhcnRpY2lwYW50c1xuICAgIC8vIFRoaXMgY2FuIGhhcHBlbiB3aGVuIGEgcGFydGljaXBhbnQncyBpZCBpcyBhbHJlYWR5IHByZXNlbnQgaW4gc3RvcmVcbiAgICAvLyBidXQgdGhlIHBhcnRpY2lwYW50IG9iamVjdCBpcyBub3Qgc3RvcmVkLCB5ZXQuXG4gICAgLmZpbHRlcihmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4ocCk7XG4gICAgfSlcbiAgICAvLyBSdW4gY3VzdG9tIGZpbHRlciwgaWYgaXQncyBhIGZ1bmN0aW9uLiBPdGhlcndpc2UgZG9uJ3QgZmlsdGVyIGFueSBwYXJ0aWNpcGFudHMuXG4gICAgLmZpbHRlcih0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nID8gZmlsdGVyIDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSlcbiAgICAvLyBSdW4gY3VzdG9tIHNvcnQsIGlmIGl0J3MgYSBmdW5jdGlvbi4gT3RoZXJ3aXNlIGRvbid0IHNvcnQuXG4gICAgLnNvcnQodHlwZW9mIHNvcnQgPT09ICdmdW5jdGlvbicgPyBzb3J0IDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSlcbiAgICAvLyBNYXAgYmFjayB0byBzZXNzaW9uX2lkLlxuICAgIC5tYXAoZnVuY3Rpb24gKHApIHtcbiAgICAgIHJldHVybiBwLnNlc3Npb25faWQ7XG4gICAgfSlcbiAgICAvLyBGaWx0ZXIgYW55IHBvdGVudGlhbCBudWxsL3VuZGVmaW5lZCBpZHMuXG4gICAgLy8gVGhpcyBzaG91bGRuJ3QgcmVhbGx5IGhhcHBlbiwgYnV0IGJldHRlciBzYWZlIHRoYW4gc29ycnkuXG4gICAgLmZpbHRlcihCb29sZWFuKTtcbiAgfSwgW2ZpbHRlciwgcHJlRmlsdGVyZWRTb3J0ZWRJZHMsIHNvcnRdKTtcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKFtdKSxcbiAgICBjdXN0b21JZHMgPSBfdXNlU3RhdGVbMF0sXG4gICAgc2V0Q3VzdG9tSWRzID0gX3VzZVN0YXRlWzFdO1xuICB2YXIgbWF5YmVVcGRhdGVDdXN0b21JZHMgPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKGdldCkge1xuICAgIGlmICghc2hvdWxkVXNlQ3VzdG9tSWRzKSByZXR1cm47XG4gICAgdmFyIG5ld0lkcyA9IGdldEN1c3RvbUZpbHRlcmVkSWRzKGdldCk7XG4gICAgaWYgKGN1c3RvbURlZXBFcXVhbChuZXdJZHMsIGN1c3RvbUlkcykpIHJldHVybjtcbiAgICBzZXRDdXN0b21JZHMobmV3SWRzKTtcbiAgfSwgW2N1c3RvbUlkcywgZ2V0Q3VzdG9tRmlsdGVyZWRJZHMsIHNob3VsZFVzZUN1c3RvbUlkc10pKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBtYXliZVVwZGF0ZUN1c3RvbUlkcygpO1xuICB9LCBbbWF5YmVVcGRhdGVDdXN0b21JZHNdKTtcbiAgdXNlVGhyb3R0bGVkRGFpbHlFdmVudChbJ3BhcnRpY2lwYW50LWpvaW5lZCcsICdwYXJ0aWNpcGFudC11cGRhdGVkJywgJ2FjdGl2ZS1zcGVha2VyLWNoYW5nZScsICdwYXJ0aWNpcGFudC1sZWZ0J10sIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldnRzKSB7XG4gICAgaWYgKCFldnRzLmxlbmd0aCkgcmV0dXJuO1xuICAgIGV2dHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgIHN3aXRjaCAoZXYuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ3BhcnRpY2lwYW50LWpvaW5lZCc6XG4gICAgICAgICAgb25QYXJ0aWNpcGFudEpvaW5lZCA9PSBudWxsID8gdm9pZCAwIDogb25QYXJ0aWNpcGFudEpvaW5lZChldik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BhcnRpY2lwYW50LXVwZGF0ZWQnOlxuICAgICAgICAgIG9uUGFydGljaXBhbnRVcGRhdGVkID09IG51bGwgPyB2b2lkIDAgOiBvblBhcnRpY2lwYW50VXBkYXRlZChldik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2FjdGl2ZS1zcGVha2VyLWNoYW5nZSc6XG4gICAgICAgICAgb25BY3RpdmVTcGVha2VyQ2hhbmdlID09IG51bGwgPyB2b2lkIDAgOiBvbkFjdGl2ZVNwZWFrZXJDaGFuZ2UoZXYpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwYXJ0aWNpcGFudC1sZWZ0JzpcbiAgICAgICAgICBvblBhcnRpY2lwYW50TGVmdCA9PSBudWxsID8gdm9pZCAwIDogb25QYXJ0aWNpcGFudExlZnQoZXYpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG1heWJlVXBkYXRlQ3VzdG9tSWRzKCk7XG4gIH0sIFttYXliZVVwZGF0ZUN1c3RvbUlkcywgb25BY3RpdmVTcGVha2VyQ2hhbmdlLCBvblBhcnRpY2lwYW50Sm9pbmVkLCBvblBhcnRpY2lwYW50TGVmdCwgb25QYXJ0aWNpcGFudFVwZGF0ZWRdKSk7XG4gIHZhciByZXN1bHQgPSB0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBzb3J0ID09PSAnZnVuY3Rpb24nID8gY3VzdG9tSWRzIDogcHJlRmlsdGVyZWRTb3J0ZWRJZHM7XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBzY3JlZW5TaGFyZXNTdGF0ZSA9IC8qI19fUFVSRV9fKi9lcXVhbEF0b21GYW1pbHkoe1xuICBlcXVhbHM6IGFycmF5c0RlZXBFcXVhbCxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChnZXQpIHtcbiAgICAgIHZhciBzY3JlZW5JZHMgPSBnZXQocGFydGljaXBhbnRJZHNGaWx0ZXJlZEFuZFNvcnRlZFN0YXRlKGdldFBhcnRpY2lwYW50SWRzRmlsdGVyU29ydFBhcmFtKCdzY3JlZW4nLCBudWxsKSkpO1xuICAgICAgcmV0dXJuIHNjcmVlbklkcy5tYXAoZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbG9jYWw6IGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgJ2xvY2FsJykpLFxuICAgICAgICAgIHNjcmVlbkF1ZGlvOiBnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oaWQsICd0cmFja3Muc2NyZWVuQXVkaW8nKSksXG4gICAgICAgICAgc2NyZWVuVmlkZW86IGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgJ3RyYWNrcy5zY3JlZW5WaWRlbycpKSxcbiAgICAgICAgICBzY3JlZW5JZDogaWQgKyBcIi1zY3JlZW5cIixcbiAgICAgICAgICBzZXNzaW9uX2lkOiBpZFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxufSk7XG4vKipcclxuICogQWxsb3dzIGFjY2VzcyB0byBpbmZvcm1hdGlvbiBhYm91dCBzaGFyZWQgc2NyZWVucywgYW5kIG1ldGhvZHMgdG8gc3RhcnQgb3Igc3RvcCBhIGxvY2FsIHNjcmVlbiBzaGFyZS5cclxuICovXG52YXIgdXNlU2NyZWVuU2hhcmUgPSBmdW5jdGlvbiB1c2VTY3JlZW5TaGFyZShfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uRXJyb3IgPSBfcmVmLm9uRXJyb3IsXG4gICAgb25Mb2NhbFNjcmVlblNoYXJlU3RhcnRlZCA9IF9yZWYub25Mb2NhbFNjcmVlblNoYXJlU3RhcnRlZCxcbiAgICBvbkxvY2FsU2NyZWVuU2hhcmVTdG9wcGVkID0gX3JlZi5vbkxvY2FsU2NyZWVuU2hhcmVTdG9wcGVkO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgc3RhcnRTY3JlZW5TaGFyZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuICAgIGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS5zdGFydFNjcmVlblNoYXJlLmFwcGx5KGRhaWx5LCBhcmdzKTtcbiAgfSwgW2RhaWx5XSk7XG4gIHZhciBzdG9wU2NyZWVuU2hhcmUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuICAgIGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS5zdG9wU2NyZWVuU2hhcmUuYXBwbHkoZGFpbHksIGFyZ3MpO1xuICB9LCBbZGFpbHldKTtcbiAgdXNlRGFpbHlFdmVudCgnbG9jYWwtc2NyZWVuLXNoYXJlLXN0YXJ0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG9uTG9jYWxTY3JlZW5TaGFyZVN0YXJ0ZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTG9jYWxTY3JlZW5TaGFyZVN0YXJ0ZWQoKTtcbiAgfSwgW29uTG9jYWxTY3JlZW5TaGFyZVN0YXJ0ZWRdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xvY2FsLXNjcmVlbi1zaGFyZS1zdG9wcGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBvbkxvY2FsU2NyZWVuU2hhcmVTdG9wcGVkID09IG51bGwgPyB2b2lkIDAgOiBvbkxvY2FsU2NyZWVuU2hhcmVTdG9wcGVkKCk7XG4gIH0sIFtvbkxvY2FsU2NyZWVuU2hhcmVTdG9wcGVkXSkpO1xuICB1c2VEYWlseUV2ZW50KCdub25mYXRhbC1lcnJvcicsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmIChldi50eXBlICE9PSAnc2NyZWVuLXNoYXJlLWVycm9yJykgcmV0dXJuO1xuICAgIG9uRXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRXJyb3IoZXYpO1xuICB9LCBbb25FcnJvcl0pKTtcbiAgdmFyIHNjcmVlbnMgPSB1c2VBdG9tVmFsdWUoc2NyZWVuU2hhcmVzU3RhdGUodW5kZWZpbmVkKSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgaXNTaGFyaW5nU2NyZWVuOiBzY3JlZW5zLnNvbWUoZnVuY3Rpb24gKHMpIHtcbiAgICAgIHJldHVybiBzLmxvY2FsO1xuICAgIH0pLFxuICAgIHNjcmVlbnM6IHNjcmVlbnMsXG4gICAgc3RhcnRTY3JlZW5TaGFyZTogc3RhcnRTY3JlZW5TaGFyZSxcbiAgICBzdG9wU2NyZWVuU2hhcmU6IHN0b3BTY3JlZW5TaGFyZVxuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcclxuICogUmV0dXJucyBhIHBhcnRpY2lwYW50J3MgdHJhY2sgYW5kIHN0YXRlLCBiYXNlZCBvbiB0aGUgZ2l2ZW4gTWVkaWFUeXBlLlxyXG4gKlxyXG4gKiBFcXVpdmFsZW50IHRvIGRhaWx5LnBhcnRpY2lwYW50cygpW3BhcnRpY2lwYW50SWRdLnRyYWNrc1t0eXBlXS5cclxuICpcclxuICogQHBhcmFtIHBhcnRpY2lwYW50SWQgVGhlIHBhcnRpY2lwYW50J3Mgc2Vzc2lvbl9pZC5cclxuICogQHBhcmFtIHR5cGUgVGhlIHRyYWNrIHR5cGUuIERlZmF1bHQ6IFwidmlkZW9cIlxyXG4gKi9cbnZhciB1c2VNZWRpYVRyYWNrID0gZnVuY3Rpb24gdXNlTWVkaWFUcmFjayhwYXJ0aWNpcGFudElkLCB0eXBlKSB7XG4gIGlmICh0eXBlID09PSB2b2lkIDApIHtcbiAgICB0eXBlID0gJ3ZpZGVvJztcbiAgfVxuICB2YXIgdHJhY2tTdGF0ZSA9IHVzZVBhcnRpY2lwYW50UHJvcGVydHkocGFydGljaXBhbnRJZCwgXCJ0cmFja3MuXCIgKyB0eXBlKTtcbiAgdmFyIHJlc3VsdCA9IHRyYWNrU3RhdGUgPyBfZXh0ZW5kcyh7fSwgdHJhY2tTdGF0ZSwge1xuICAgIGlzT2ZmOiBpc1RyYWNrT2ZmKHRyYWNrU3RhdGUuc3RhdGUpXG4gIH0pIDoge1xuICAgIGlzT2ZmOiB0cnVlLFxuICAgIHBlcnNpc3RlbnRUcmFjazogdW5kZWZpbmVkLFxuICAgIHN0YXRlOiAnb2ZmJyxcbiAgICBzdWJzY3JpYmVkOiBmYWxzZVxuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcclxuICogT3JpZ2luYWwgc291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vamFyZWRMdW5kZS9yZWFjdC1ob29rL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL21lcmdlZC1yZWYvc3JjL2luZGV4LnRzeFxyXG4gKiBPcmlnaW5hbCBhdXRob3I6IEphcmVkIEx1bmRlIChodHRwczovL2dpdGh1Yi5jb20vamFyZWRMdW5kZSlcclxuICogT3JpZ2luYWxseSBwdWJsaXNoZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOiBodHRwczovL2dpdGh1Yi5jb20vamFyZWRMdW5kZS9yZWFjdC1ob29rL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcclxuICovXG5mdW5jdGlvbiB1c2VNZXJnZWRSZWYoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZWZzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIHJlZnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cbiAgcmV0dXJuIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmVmID0gcmVmc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKSByZWYoZWxlbWVudCk7ZWxzZSBpZiAocmVmICYmIHR5cGVvZiByZWYgPT09ICdvYmplY3QnKSByZWYuY3VycmVudCA9IGVsZW1lbnQ7XG4gICAgfVxuICB9LFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIHJlZnMpO1xufVxuXG52YXIgX2V4Y2x1ZGVkID0gW1wib25QbGF5RmFpbGVkXCIsIFwic2Vzc2lvbklkXCIsIFwidHlwZVwiXTtcbnZhciBEYWlseUF1ZGlvVHJhY2sgPSAvKiNfX1BVUkVfXyovbWVtbyggLyojX19QVVJFX18qL2ZvcndhcmRSZWYoZnVuY3Rpb24gKF9yZWYsIHJlZikge1xuICB2YXIgb25QbGF5RmFpbGVkID0gX3JlZi5vblBsYXlGYWlsZWQsXG4gICAgc2Vzc2lvbklkID0gX3JlZi5zZXNzaW9uSWQsXG4gICAgX3JlZiR0eXBlID0gX3JlZi50eXBlLFxuICAgIHR5cGUgPSBfcmVmJHR5cGUgPT09IHZvaWQgMCA/ICdhdWRpbycgOiBfcmVmJHR5cGUsXG4gICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBfZXhjbHVkZWQpO1xuICB2YXIgYXVkaW9FbCA9IHVzZVJlZihudWxsKTtcbiAgdmFyIGF1ZGlvID0gdXNlTWVkaWFUcmFjayhzZXNzaW9uSWQsIHR5cGUpO1xuICB2YXIgYXVkaW9SZWYgPSB1c2VNZXJnZWRSZWYoYXVkaW9FbCwgcmVmKTtcbiAgdmFyIHN1YnNjcmliZWRTdGF0ZSA9IGF1ZGlvID09IG51bGwgPyB2b2lkIDAgOiBhdWRpby5zdWJzY3JpYmVkO1xuICAvKipcclxuICAgKiBTZXR1cCBhdWRpbyB0YWcuXHJcbiAgICovXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF1ZGlvVGFnID0gYXVkaW9FbC5jdXJyZW50O1xuICAgIGlmICghYXVkaW9UYWcgfHwgIShhdWRpbyAhPSBudWxsICYmIGF1ZGlvLnBlcnNpc3RlbnRUcmFjaykpIHJldHVybjtcbiAgICB2YXIgcGxheVRpbWVvdXQ7XG4gICAgdmFyIGhhbmRsZUNhblBsYXkgPSBmdW5jdGlvbiBoYW5kbGVDYW5QbGF5KCkge1xuICAgICAgYXVkaW9UYWcucGxheSgpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgb25QbGF5RmFpbGVkID09IG51bGwgPyB2b2lkIDAgOiBvblBsYXlGYWlsZWQoe1xuICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxuICAgICAgICAgIHRhcmdldDogYXVkaW9UYWcsXG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXG4gICAgICAgICAgbmFtZTogZS5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICB2YXIgaGFuZGxlUGxheSA9IGZ1bmN0aW9uIGhhbmRsZVBsYXkoKSB7XG4gICAgICBjbGVhclRpbWVvdXQocGxheVRpbWVvdXQpO1xuICAgIH07XG4gICAgaWYgKCFNZWRpYVN0cmVhbSkge1xuICAgICAgY29uc29sZS53YXJuKFwiTWVkaWFTdHJlYW0gQVBJIG5vdCBhdmFpbGFibGUuIENhbid0IHNldHVwIFwiICsgdHlwZSArIFwiIGZvciBcIiArIHNlc3Npb25JZCk7XG4gICAgICBvblBsYXlGYWlsZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uUGxheUZhaWxlZCh7XG4gICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxuICAgICAgICB0YXJnZXQ6IGF1ZGlvVGFnLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBtZXNzYWdlOiAnTWVkaWFTdHJlYW0gQVBJIG5vdCBhdmFpbGFibGUnLFxuICAgICAgICBuYW1lOiAnTWVkaWFTdHJlYW0gQVBJIG5vdCBhdmFpbGFibGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXVkaW9UYWcuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsIGhhbmRsZUNhblBsYXkpO1xuICAgIGF1ZGlvVGFnLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCBoYW5kbGVQbGF5KTtcbiAgICBhdWRpb1RhZy5zcmNPYmplY3QgPSBuZXcgTWVkaWFTdHJlYW0oW2F1ZGlvID09IG51bGwgPyB2b2lkIDAgOiBhdWRpby5wZXJzaXN0ZW50VHJhY2tdKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgYXVkaW9UYWcgPT0gbnVsbCA/IHZvaWQgMCA6IGF1ZGlvVGFnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBoYW5kbGVDYW5QbGF5KTtcbiAgICAgIGF1ZGlvVGFnID09IG51bGwgPyB2b2lkIDAgOiBhdWRpb1RhZy5yZW1vdmVFdmVudExpc3RlbmVyKCdwbGF5JywgaGFuZGxlUGxheSk7XG4gICAgfTtcbiAgfSwgW2F1ZGlvID09IG51bGwgPyB2b2lkIDAgOiBhdWRpby5wZXJzaXN0ZW50VHJhY2ssIG9uUGxheUZhaWxlZCwgc2Vzc2lvbklkLCB0eXBlXSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgYXV0b1BsYXk6IHRydWUsXG4gICAgcmVmOiBhdWRpb1JlZlxuICB9LCBwcm9wcywge1xuICAgIFwiZGF0YS1zZXNzaW9uLWlkXCI6IHNlc3Npb25JZCxcbiAgICBcImRhdGEtYXVkaW8tdHlwZVwiOiB0eXBlLFxuICAgIFwiZGF0YS1zdWJzY3JpYmVkXCI6IHN1YnNjcmliZWRTdGF0ZVxuICB9KSk7XG59KSk7XG5EYWlseUF1ZGlvVHJhY2suZGlzcGxheU5hbWUgPSAnRGFpbHlBdWRpb1RyYWNrJztcblxudmFyIERhaWx5QXVkaW8gPSAvKiNfX1BVUkVfXyovbWVtbyggLyojX19QVVJFX18qL2ZvcndhcmRSZWYoZnVuY3Rpb24gKF9yZWYsIHJlZikge1xuICB2YXIgX3JlZiRhdXRvU3Vic2NyaWJlQWN0ID0gX3JlZi5hdXRvU3Vic2NyaWJlQWN0aXZlU3BlYWtlcixcbiAgICBhdXRvU3Vic2NyaWJlQWN0aXZlU3BlYWtlciA9IF9yZWYkYXV0b1N1YnNjcmliZUFjdCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGF1dG9TdWJzY3JpYmVBY3QsXG4gICAgX3JlZiRtYXhTcGVha2VycyA9IF9yZWYubWF4U3BlYWtlcnMsXG4gICAgbWF4U3BlYWtlcnMgPSBfcmVmJG1heFNwZWFrZXJzID09PSB2b2lkIDAgPyA1IDogX3JlZiRtYXhTcGVha2VycyxcbiAgICBvblBsYXlGYWlsZWQgPSBfcmVmLm9uUGxheUZhaWxlZCxcbiAgICBfcmVmJHBsYXlMb2NhbFNjcmVlbkEgPSBfcmVmLnBsYXlMb2NhbFNjcmVlbkF1ZGlvLFxuICAgIHBsYXlMb2NhbFNjcmVlbkF1ZGlvID0gX3JlZiRwbGF5TG9jYWxTY3JlZW5BID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkcGxheUxvY2FsU2NyZWVuQTtcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG5ldyBBcnJheShtYXhTcGVha2VycykuZmlsbCgnJykpLFxuICAgIHNwZWFrZXJzID0gX3VzZVN0YXRlWzBdLFxuICAgIHNldFNwZWFrZXJzID0gX3VzZVN0YXRlWzFdO1xuICB2YXIgX3VzZVNjcmVlblNoYXJlID0gdXNlU2NyZWVuU2hhcmUoKSxcbiAgICBzY3JlZW5zID0gX3VzZVNjcmVlblNoYXJlLnNjcmVlbnM7XG4gIHZhciBsb2NhbFNlc3Npb25JZCA9IHVzZUxvY2FsU2Vzc2lvbklkKCk7XG4gIHZhciBhY3RpdmVTcGVha2VySWQgPSB1c2VBY3RpdmVTcGVha2VySWQoe1xuICAgIGlnbm9yZUxvY2FsOiB0cnVlXG4gIH0pO1xuICB2YXIgY29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRBY3RpdmVTcGVha2VyQXVkaW86IGZ1bmN0aW9uIGdldEFjdGl2ZVNwZWFrZXJBdWRpbygpIHtcbiAgICAgICAgdmFyIF9jb250YWluZXJSZWYkY3VycmVudCwgX2NvbnRhaW5lclJlZiRjdXJyZW50MjtcbiAgICAgICAgcmV0dXJuIChfY29udGFpbmVyUmVmJGN1cnJlbnQgPSAoX2NvbnRhaW5lclJlZiRjdXJyZW50MiA9IGNvbnRhaW5lclJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2NvbnRhaW5lclJlZiRjdXJyZW50Mi5xdWVyeVNlbGVjdG9yKFwiYXVkaW9bZGF0YS1zZXNzaW9uLWlkPVxcXCJcIiArIGFjdGl2ZVNwZWFrZXJJZCArIFwiXFxcIl1bZGF0YS1hdWRpby10eXBlPVxcXCJhdWRpb1xcXCJdXCIpKSAhPSBudWxsID8gX2NvbnRhaW5lclJlZiRjdXJyZW50IDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBnZXRBbGxBdWRpbzogZnVuY3Rpb24gZ2V0QWxsQXVkaW8oKSB7XG4gICAgICAgIHZhciBfY29udGFpbmVyUmVmJGN1cnJlbnQzLCBfY29udGFpbmVyUmVmJGN1cnJlbnQ0O1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSgoX2NvbnRhaW5lclJlZiRjdXJyZW50MyA9IChfY29udGFpbmVyUmVmJGN1cnJlbnQ0ID0gY29udGFpbmVyUmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfY29udGFpbmVyUmVmJGN1cnJlbnQ0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2F1ZGlvJykpICE9IG51bGwgPyBfY29udGFpbmVyUmVmJGN1cnJlbnQzIDogW10pO1xuICAgICAgfSxcbiAgICAgIGdldEF1ZGlvQnlTZXNzaW9uSWQ6IGZ1bmN0aW9uIGdldEF1ZGlvQnlTZXNzaW9uSWQoaWQpIHtcbiAgICAgICAgdmFyIF9jb250YWluZXJSZWYkY3VycmVudDUsIF9jb250YWluZXJSZWYkY3VycmVudDY7XG4gICAgICAgIHJldHVybiAoX2NvbnRhaW5lclJlZiRjdXJyZW50NSA9IChfY29udGFpbmVyUmVmJGN1cnJlbnQ2ID0gY29udGFpbmVyUmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfY29udGFpbmVyUmVmJGN1cnJlbnQ2LnF1ZXJ5U2VsZWN0b3IoXCJhdWRpb1tkYXRhLXNlc3Npb24taWQ9XFxcIlwiICsgaWQgKyBcIlxcXCJdW2RhdGEtYXVkaW8tdHlwZT1cXFwiYXVkaW9cXFwiXVwiKSkgIT0gbnVsbCA/IF9jb250YWluZXJSZWYkY3VycmVudDUgOiBudWxsO1xuICAgICAgfSxcbiAgICAgIGdldFJtcEF1ZGlvOiBmdW5jdGlvbiBnZXRSbXBBdWRpbygpIHtcbiAgICAgICAgdmFyIF9jb250YWluZXJSZWYkY3VycmVudDcsIF9jb250YWluZXJSZWYkY3VycmVudDg7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKChfY29udGFpbmVyUmVmJGN1cnJlbnQ3ID0gKF9jb250YWluZXJSZWYkY3VycmVudDggPSBjb250YWluZXJSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jb250YWluZXJSZWYkY3VycmVudDgucXVlcnlTZWxlY3RvckFsbCgnYXVkaW9bZGF0YS1hdWRpby10eXBlPVwicm1wQXVkaW9cIl0nKSkgIT0gbnVsbCA/IF9jb250YWluZXJSZWYkY3VycmVudDcgOiBbXSk7XG4gICAgICB9LFxuICAgICAgZ2V0U2NyZWVuQXVkaW86IGZ1bmN0aW9uIGdldFNjcmVlbkF1ZGlvKCkge1xuICAgICAgICB2YXIgX2NvbnRhaW5lclJlZiRjdXJyZW50OSwgX2NvbnRhaW5lclJlZiRjdXJyZW50MTA7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKChfY29udGFpbmVyUmVmJGN1cnJlbnQ5ID0gKF9jb250YWluZXJSZWYkY3VycmVudDEwID0gY29udGFpbmVyUmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfY29udGFpbmVyUmVmJGN1cnJlbnQxMC5xdWVyeVNlbGVjdG9yQWxsKCdhdWRpb1tkYXRhLWF1ZGlvLXR5cGU9XCJzY3JlZW5BdWRpb1wiXScpKSAhPSBudWxsID8gX2NvbnRhaW5lclJlZiRjdXJyZW50OSA6IFtdKTtcbiAgICAgIH0sXG4gICAgICBnZXRSbXBBdWRpb0J5U2Vzc2lvbklkOiBmdW5jdGlvbiBnZXRSbXBBdWRpb0J5U2Vzc2lvbklkKGlkKSB7XG4gICAgICAgIHZhciBfY29udGFpbmVyUmVmJGN1cnJlbnQxMSwgX2NvbnRhaW5lclJlZiRjdXJyZW50MTI7XG4gICAgICAgIHJldHVybiAoX2NvbnRhaW5lclJlZiRjdXJyZW50MTEgPSAoX2NvbnRhaW5lclJlZiRjdXJyZW50MTIgPSBjb250YWluZXJSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jb250YWluZXJSZWYkY3VycmVudDEyLnF1ZXJ5U2VsZWN0b3IoXCJhdWRpb1tkYXRhLXNlc3Npb24taWQ9XFxcIlwiICsgaWQgKyBcIlxcXCJdW2RhdGEtYXVkaW8tdHlwZT1cXFwicm1wQXVkaW9cXFwiXVwiKSkgIT0gbnVsbCA/IF9jb250YWluZXJSZWYkY3VycmVudDExIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBnZXRTY3JlZW5BdWRpb0J5U2Vzc2lvbklkOiBmdW5jdGlvbiBnZXRTY3JlZW5BdWRpb0J5U2Vzc2lvbklkKGlkKSB7XG4gICAgICAgIHZhciBfY29udGFpbmVyUmVmJGN1cnJlbnQxMywgX2NvbnRhaW5lclJlZiRjdXJyZW50MTQ7XG4gICAgICAgIHJldHVybiAoX2NvbnRhaW5lclJlZiRjdXJyZW50MTMgPSAoX2NvbnRhaW5lclJlZiRjdXJyZW50MTQgPSBjb250YWluZXJSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jb250YWluZXJSZWYkY3VycmVudDE0LnF1ZXJ5U2VsZWN0b3IoXCJhdWRpb1tkYXRhLXNlc3Npb24taWQ9XFxcIlwiICsgaWQgKyBcIlxcXCJdW2RhdGEtYXVkaW8tdHlwZT1cXFwic2NyZWVuQXVkaW9cXFwiXVwiKSkgIT0gbnVsbCA/IF9jb250YWluZXJSZWYkY3VycmVudDEzIDogbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbYWN0aXZlU3BlYWtlcklkXSk7XG4gIHZhciBhc3NpZ25TcGVha2VyID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoZ2V0LCBfc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgIHZhciBfZGFpbHkkcGFydGljaXBhbnRzO1xuICAgICAgLyoqXHJcbiAgICAgICAqIE9ubHkgY29uc2lkZXIgcmVtb3RlIHBhcnRpY2lwYW50cyB3aXRoIHN1YnNjcmliZWQgb3Igc3RhZ2VkIGF1ZGlvLlxyXG4gICAgICAgKi9cbiAgICAgIHZhciBzdWJzY3JpYmVkUGFydGljaXBhbnRzID0gT2JqZWN0LnZhbHVlcygoX2RhaWx5JHBhcnRpY2lwYW50cyA9IGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS5wYXJ0aWNpcGFudHMoKSkgIT0gbnVsbCA/IF9kYWlseSRwYXJ0aWNpcGFudHMgOiB7fSkuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiAhcC5sb2NhbCAmJiBCb29sZWFuKHAudHJhY2tzLmF1ZGlvLnN1YnNjcmliZWQpO1xuICAgICAgfSk7XG4gICAgICB2YXIgaXNTdWJzY3JpYmVkID0gZnVuY3Rpb24gaXNTdWJzY3JpYmVkKGlkKSB7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVkUGFydGljaXBhbnRzLnNvbWUoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICByZXR1cm4gcC5zZXNzaW9uX2lkID09PSBpZDtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgaWYgKCFpc1N1YnNjcmliZWQoc2Vzc2lvbklkKSkge1xuICAgICAgICBpZiAoZGFpbHkgJiYgIWRhaWx5LmlzRGVzdHJveWVkKCkgJiYgYXV0b1N1YnNjcmliZUFjdGl2ZVNwZWFrZXIgJiYgIWRhaWx5LnN1YnNjcmliZVRvVHJhY2tzQXV0b21hdGljYWxseSgpKSB7XG4gICAgICAgICAgZGFpbHkudXBkYXRlUGFydGljaXBhbnQoc2Vzc2lvbklkLCB7XG4gICAgICAgICAgICBzZXRTdWJzY3JpYmVkVHJhY2tzOiB7XG4gICAgICAgICAgICAgIGF1ZGlvOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXRTcGVha2VycyhmdW5jdGlvbiAocHJldlNwZWFrZXJzKSB7XG4gICAgICAgIHZhciBfc3BlYWtlck9iamVjdHMkO1xuICAgICAgICAvLyBOZXcgc3BlYWtlciBpcyBhbHJlYWR5IHByZXNlbnRcbiAgICAgICAgaWYgKHByZXZTcGVha2Vycy5pbmNsdWRlcyhzZXNzaW9uSWQpKSByZXR1cm4gcHJldlNwZWFrZXJzO1xuICAgICAgICAvLyBUcnkgdG8gZmluZCBhIGZyZWUgc2xvdDogZWl0aGVyIHVuYXNzaWduZWQgb3IgdW5zdWJzY3JpYmVkXG4gICAgICAgIHZhciBmcmVlU2xvdENoZWNrID0gZnVuY3Rpb24gZnJlZVNsb3RDaGVjayhpZCkge1xuICAgICAgICAgIHJldHVybiAhaWQgfHwgIWlzU3Vic2NyaWJlZChpZCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcmV2U3BlYWtlcnMuc29tZShmcmVlU2xvdENoZWNrKSkge1xuICAgICAgICAgIHZhciBpZHggPSBwcmV2U3BlYWtlcnMuZmluZEluZGV4KGZyZWVTbG90Q2hlY2spO1xuICAgICAgICAgIHByZXZTcGVha2Vyc1tpZHhdID0gc2Vzc2lvbklkO1xuICAgICAgICAgIHJldHVybiBbXS5jb25jYXQocHJldlNwZWFrZXJzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGcm9tIGhlcmUgb24gd2UgY2FuIGFzc3VtZSB0aGF0IGFsbCBhc3NpZ25lZCBhdWRpbyB0cmFja3MgYXJlIHN1YnNjcmliZWQuXG4gICAgICAgIC8vIFRyeSB0byBmaW5kIG11dGVkIHJlY2VudCBzcGVha2VyXG4gICAgICAgIHZhciBtdXRlZElkeCA9IHByZXZTcGVha2Vycy5maW5kSW5kZXgoZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHN1YnNjcmliZWRQYXJ0aWNpcGFudHMuc29tZShmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgcmV0dXJuIHAuc2Vzc2lvbl9pZCA9PT0gaWQgJiYgaXNUcmFja09mZihwLnRyYWNrcy5hdWRpby5zdGF0ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobXV0ZWRJZHggPj0gMCkge1xuICAgICAgICAgIHByZXZTcGVha2Vyc1ttdXRlZElkeF0gPSBzZXNzaW9uSWQ7XG4gICAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChwcmV2U3BlYWtlcnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpbmQgbGVhc3QgcmVjZW50IG5vbi1hY3RpdmUgc3BlYWtlciBhbmQgcmVwbGFjZSB3aXRoIG5ldyBzcGVha2VyXG4gICAgICAgIHZhciBzcGVha2VyT2JqZWN0cyA9IHN1YnNjcmliZWRQYXJ0aWNpcGFudHMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcGFydGljaXBhbnRzIGN1cnJlbnRseSBhc3NpZ25lZCB0byBzcGVha2VyIHNsb3RzXG4gICAgICAgICAgICBwcmV2U3BlYWtlcnMuaW5jbHVkZXMocC5zZXNzaW9uX2lkKSAmJlxuICAgICAgICAgICAgLy8gRG9uJ3QgcmVwbGFjZSBjdXJyZW50IGFjdGl2ZSBwYXJ0aWNpcGFudCwgdG8gYXZvaWQgYXVkaW8gZHJvcC1vdXRzXG4gICAgICAgICAgICBwLnNlc3Npb25faWQgIT09IGFjdGl2ZVNwZWFrZXJJZFxuICAgICAgICAgICk7XG4gICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICB2YXIgX2dldCwgX2dldDI7XG4gICAgICAgICAgdmFyIGxhc3RBY3RpdmVBID0gKF9nZXQgPSBnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oYS5zZXNzaW9uX2lkLCAnbGFzdF9hY3RpdmUnKSkpICE9IG51bGwgPyBfZ2V0IDogbmV3IERhdGUoJzE5NzAtMDEtMDEnKTtcbiAgICAgICAgICB2YXIgbGFzdEFjdGl2ZUIgPSAoX2dldDIgPSBnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oYi5zZXNzaW9uX2lkLCAnbGFzdF9hY3RpdmUnKSkpICE9IG51bGwgPyBfZ2V0MiA6IG5ldyBEYXRlKCcxOTcwLTAxLTAxJyk7XG4gICAgICAgICAgaWYgKGxhc3RBY3RpdmVBID4gbGFzdEFjdGl2ZUIpIHJldHVybiAxO1xuICAgICAgICAgIGlmIChsYXN0QWN0aXZlQSA8IGxhc3RBY3RpdmVCKSByZXR1cm4gLTE7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBObyBwcmV2aW91cyBzcGVha2VyIGluIGNhbGwgYW55bW9yZS4gQXNzaWduIGZpcnN0IGZyZWUgc2xvdC5cbiAgICAgICAgaWYgKCFzcGVha2VyT2JqZWN0cy5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBEb24ndCByZXBsYWNlIHRoZSBhY3RpdmUgc3BlYWtlci4gSW5zdGVhZCBmaW5kIGZpcnN0IG5vbi1hY3RpdmUgc3BlYWtlciBzbG90LlxuICAgICAgICAgIHZhciBfcmVwbGFjZUlkeCA9IHByZXZTcGVha2Vycy5maW5kSW5kZXgoZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQgIT09IGFjdGl2ZVNwZWFrZXJJZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBwcmV2U3BlYWtlcnNbX3JlcGxhY2VJZHhdID0gc2Vzc2lvbklkO1xuICAgICAgICAgIHJldHVybiBbXS5jb25jYXQocHJldlNwZWFrZXJzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXBsYWNlIGxlYXN0IHJlY2VudCBzcGVha2VyIHdpdGggbmV3IHNwZWFrZXJcbiAgICAgICAgdmFyIHJlcGxhY2VJZHggPSBwcmV2U3BlYWtlcnMuaW5kZXhPZigoX3NwZWFrZXJPYmplY3RzJCA9IHNwZWFrZXJPYmplY3RzWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX3NwZWFrZXJPYmplY3RzJC5zZXNzaW9uX2lkKTtcbiAgICAgICAgcHJldlNwZWFrZXJzW3JlcGxhY2VJZHhdID0gc2Vzc2lvbklkO1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KHByZXZTcGVha2Vycyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94Mykge1xuICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSgpLCBbYWN0aXZlU3BlYWtlcklkLCBhdXRvU3Vic2NyaWJlQWN0aXZlU3BlYWtlciwgZGFpbHldKSk7XG4gIC8qKlxyXG4gICAqIFVuYXNzaWducyBzcGVha2VyIGZyb20gc3BlYWtlciBzbG90LCBlLmcuIGJlY2F1c2UgcGFydGljaXBhbnQgbGVmdCB0aGUgY2FsbC5cclxuICAgKi9cbiAgdmFyIHJlbW92ZVNwZWFrZXIgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoc2Vzc2lvbklkKSB7XG4gICAgc2V0U3BlYWtlcnMoZnVuY3Rpb24gKHByZXZTcGVha2Vycykge1xuICAgICAgaWYgKCFwcmV2U3BlYWtlcnMuaW5jbHVkZXMoc2Vzc2lvbklkKSkgcmV0dXJuIHByZXZTcGVha2VycztcbiAgICAgIHZhciBuZXdTcGVha2VycyA9IFtdLmNvbmNhdChwcmV2U3BlYWtlcnMpO1xuICAgICAgdmFyIGlkeCA9IG5ld1NwZWFrZXJzLmluZGV4T2Yoc2Vzc2lvbklkKTtcbiAgICAgIG5ld1NwZWFrZXJzW2lkeF0gPSAnJztcbiAgICAgIHJldHVybiBuZXdTcGVha2VycztcbiAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VUaHJvdHRsZWREYWlseUV2ZW50KFsnYWN0aXZlLXNwZWFrZXItY2hhbmdlJywgJ3RyYWNrLXN0YXJ0ZWQnLCAncGFydGljaXBhbnQtbGVmdCddLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXZ0cykge1xuICAgIGV2dHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgIHN3aXRjaCAoZXYuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ2FjdGl2ZS1zcGVha2VyLWNoYW5nZSc6XG4gICAgICAgICAgaWYgKGV2LmFjdGl2ZVNwZWFrZXIucGVlcklkID09PSBsb2NhbFNlc3Npb25JZCkgcmV0dXJuO1xuICAgICAgICAgIGFzc2lnblNwZWFrZXIoZXYuYWN0aXZlU3BlYWtlci5wZWVySWQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0cmFjay1zdGFydGVkJzpcbiAgICAgICAgICBpZiAoZXYudHJhY2sua2luZCA9PT0gJ2F1ZGlvJyAmJiBldi5wYXJ0aWNpcGFudCAmJiAhZXYucGFydGljaXBhbnQubG9jYWwpIHtcbiAgICAgICAgICAgIGFzc2lnblNwZWFrZXIoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwYXJ0aWNpcGFudC1sZWZ0JzpcbiAgICAgICAgICByZW1vdmVTcGVha2VyKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbYXNzaWduU3BlYWtlciwgbG9jYWxTZXNzaW9uSWQsIHJlbW92ZVNwZWFrZXJdKSwgMjAwKTtcbiAgdmFyIHJtcEF1ZGlvSWRzID0gdXNlUGFydGljaXBhbnRJZHMoe1xuICAgIGZpbHRlcjogdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHApIHtcbiAgICAgIHZhciBfcCR0cmFja3M7XG4gICAgICByZXR1cm4gQm9vbGVhbihwID09IG51bGwgPyB2b2lkIDAgOiAoX3AkdHJhY2tzID0gcC50cmFja3MpID09IG51bGwgPyB2b2lkIDAgOiBfcCR0cmFja3Mucm1wQXVkaW8pO1xuICAgIH0sIFtdKVxuICB9KTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHJlZjogY29udGFpbmVyUmVmXG4gIH0sIHNwZWFrZXJzLm1hcChmdW5jdGlvbiAoc2Vzc2lvbklkLCBpZHgpIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChEYWlseUF1ZGlvVHJhY2ssIHtcbiAgICAgIGtleTogXCJzcGVha2VyLXNsb3QtXCIgKyBpZHgsXG4gICAgICBvblBsYXlGYWlsZWQ6IG9uUGxheUZhaWxlZCxcbiAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxuICAgICAgdHlwZTogXCJhdWRpb1wiXG4gICAgfSk7XG4gIH0pLCBzY3JlZW5zLmZpbHRlcihmdW5jdGlvbiAoc2NyZWVuKSB7XG4gICAgcmV0dXJuIHBsYXlMb2NhbFNjcmVlbkF1ZGlvID8gdHJ1ZSA6ICFzY3JlZW4ubG9jYWw7XG4gIH0pLm1hcChmdW5jdGlvbiAoc2NyZWVuKSB7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlBdWRpb1RyYWNrLCB7XG4gICAgICBrZXk6IHNjcmVlbi5zY3JlZW5JZCxcbiAgICAgIG9uUGxheUZhaWxlZDogb25QbGF5RmFpbGVkLFxuICAgICAgc2Vzc2lvbklkOiBzY3JlZW4uc2Vzc2lvbl9pZCxcbiAgICAgIHR5cGU6IFwic2NyZWVuQXVkaW9cIlxuICAgIH0pO1xuICB9KSwgcm1wQXVkaW9JZHMubWFwKGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5QXVkaW9UcmFjaywge1xuICAgICAga2V5OiBpZCArIFwiLXJtcFwiLFxuICAgICAgb25QbGF5RmFpbGVkOiBvblBsYXlGYWlsZWQsXG4gICAgICBzZXNzaW9uSWQ6IGlkLFxuICAgICAgdHlwZTogXCJybXBBdWRpb1wiXG4gICAgfSk7XG4gIH0pKTtcbn0pKTtcbkRhaWx5QXVkaW8uZGlzcGxheU5hbWUgPSAnRGFpbHlBdWRpbyc7XG5cbnZhciBfZXhjbHVkZWQkMSA9IFtcImF1dG9taXJyb3JcIiwgXCJmaXRcIiwgXCJtaXJyb3JcIiwgXCJvblJlc2l6ZVwiLCBcInBsYXlhYmxlU3R5bGVcIiwgXCJzZXNzaW9uSWRcIiwgXCJzdHlsZVwiLCBcInR5cGVcIl07XG52YXIgRGFpbHlWaWRlbyA9IC8qI19fUFVSRV9fKi9mb3J3YXJkUmVmKGZ1bmN0aW9uIERhaWx5VmlkZW8oX3JlZiwgcmVmKSB7XG4gIHZhciBhdXRvbWlycm9yID0gX3JlZi5hdXRvbWlycm9yLFxuICAgIF9yZWYkZml0ID0gX3JlZi5maXQsXG4gICAgZml0ID0gX3JlZiRmaXQgPT09IHZvaWQgMCA/ICdjb250YWluJyA6IF9yZWYkZml0LFxuICAgIG1pcnJvciA9IF9yZWYubWlycm9yLFxuICAgIG9uUmVzaXplID0gX3JlZi5vblJlc2l6ZSxcbiAgICBfcmVmJHBsYXlhYmxlU3R5bGUgPSBfcmVmLnBsYXlhYmxlU3R5bGUsXG4gICAgcGxheWFibGVTdHlsZSA9IF9yZWYkcGxheWFibGVTdHlsZSA9PT0gdm9pZCAwID8ge30gOiBfcmVmJHBsYXlhYmxlU3R5bGUsXG4gICAgc2Vzc2lvbklkID0gX3JlZi5zZXNzaW9uSWQsXG4gICAgX3JlZiRzdHlsZSA9IF9yZWYuc3R5bGUsXG4gICAgc3R5bGUgPSBfcmVmJHN0eWxlID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkc3R5bGUsXG4gICAgX3JlZiR0eXBlID0gX3JlZi50eXBlLFxuICAgIHR5cGUgPSBfcmVmJHR5cGUgPT09IHZvaWQgMCA/ICd2aWRlbycgOiBfcmVmJHR5cGUsXG4gICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBfZXhjbHVkZWQkMSk7XG4gIHZhciBsb2NhbFNlc3Npb25JZCA9IHVzZUxvY2FsU2Vzc2lvbklkKCk7XG4gIHZhciBpc0xvY2FsID0gbG9jYWxTZXNzaW9uSWQgPT09IHNlc3Npb25JZDtcbiAgdmFyIGlzU2NyZWVuID0gdHlwZSA9PT0gJ3NjcmVlblZpZGVvJztcbiAgdmFyIGlzTG9jYWxDYW0gPSBpc0xvY2FsICYmICFpc1NjcmVlbjtcbiAgdmFyIHZpZGVvRWwgPSB1c2VSZWYobnVsbCk7XG4gIHZhciB2aWRlb1JlZiA9IHVzZU1lcmdlZFJlZih2aWRlb0VsLCByZWYpO1xuICB2YXIgdmlkZW9TdGF0ZSA9IHVzZU1lZGlhVHJhY2soc2Vzc2lvbklkLCB0eXBlKTtcbiAgdmFyIHZpZGVvVHJhY2sgPSB2aWRlb1N0YXRlLnBlcnNpc3RlbnRUcmFjaztcbiAgLyoqXHJcbiAgICogQ29uc2lkZXJlZCBhcyBwbGF5YWJsZSB2aWRlbzpcclxuICAgKiAtIGxvY2FsIGNhbSBmZWVkXHJcbiAgICogLSBhbnkgc2NyZWVuIHNoYXJlXHJcbiAgICogLSByZW1vdGUgY2FtIGZlZWQgdGhhdCBpcyBzdWJzY3JpYmVkIGFuZCByZXBvcnRlZCBhcyBwbGF5YWJsZVxyXG4gICAqL1xuICB2YXIgaXNQbGF5YWJsZSA9IGlzTG9jYWxDYW0gfHwgaXNTY3JlZW4gfHwgIXZpZGVvU3RhdGUuaXNPZmY7XG4gIHZhciB0cmFja1N0YXRlID0gdXNlUGFydGljaXBhbnRQcm9wZXJ0eShzZXNzaW9uSWQsIFwidHJhY2tzLlwiICsgdHlwZSk7XG4gIHZhciBzdWJzY3JpYmVkU3RhdGUgPSB0cmFja1N0YXRlID09IG51bGwgPyB2b2lkIDAgOiB0cmFja1N0YXRlLnN1YnNjcmliZWQ7XG4gIC8qKlxyXG4gICAqIERldGVybWluZSBpZiB2aWRlbyBuZWVkcyB0byBiZSBtaXJyb3JlZC5cclxuICAgKi9cbiAgdmFyIGlzTWlycm9yZWQgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIG1pcnJvciA9PT0gJ2Jvb2xlYW4nKSByZXR1cm4gbWlycm9yO1xuICAgIGlmICghYXV0b21pcnJvcikgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghdmlkZW9UcmFjaykgcmV0dXJuIGlzTG9jYWxDYW07XG4gICAgdmFyIHZpZGVvVHJhY2tTZXR0aW5ncyA9IHZpZGVvVHJhY2suZ2V0U2V0dGluZ3MoKTtcbiAgICB2YXIgaXNVc2Vyc0Zyb250Q2FtZXJhID0gJ2ZhY2luZ01vZGUnIGluIHZpZGVvVHJhY2tTZXR0aW5ncyA/IGlzTG9jYWxDYW0gJiYgdmlkZW9UcmFja1NldHRpbmdzLmZhY2luZ01vZGUgPT09ICd1c2VyJyA6IGlzTG9jYWxDYW07XG4gICAgLy8gb25seSBhcHBseSBtaXJyb3IgZWZmZWN0IHRvIHVzZXIgZmFjaW5nIGNhbWVyYVxuICAgIHJldHVybiBpc1VzZXJzRnJvbnRDYW1lcmE7XG4gIH0sIFthdXRvbWlycm9yLCBpc0xvY2FsQ2FtLCBtaXJyb3IsIHZpZGVvVHJhY2tdKTtcbiAgLyoqXHJcbiAgICogSGFuZGxlIGNhbnBsYXkgJiBwaWN0dXJlLWluLXBpY3R1cmUgZXZlbnRzLlxyXG4gICAqL1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gc2V0dXBWaWRlb0V2ZW50cygpIHtcbiAgICB2YXIgdmlkZW8gPSB2aWRlb0VsLmN1cnJlbnQ7XG4gICAgaWYgKCF2aWRlbykgcmV0dXJuO1xuICAgIHZhciBwbGF5VmlkZW8gPSBmdW5jdGlvbiBwbGF5VmlkZW8oKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IHZpZGVvLnBsYXkoKTtcbiAgICAgIGlmIChwcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBBbGwgZ29vZCwgcGxheWJhY2sgc3RhcnRlZC5cbiAgICAgICAgICB2aWRlby5jb250cm9scyA9IGZhbHNlO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIC8vIEF1dG8tcGxheSB3YXMgcHJldmVudGVkLiBTaG93IHZpZGVvIGNvbnRyb2xzLCBzbyB1c2VyIGNhbiBwbGF5IHZpZGVvIG1hbnVhbGx5LlxuICAgICAgICAgIHZpZGVvLmNvbnRyb2xzID0gdHJ1ZTtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBwbGF5IHZpZGVvJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBoYW5kbGVDYW5QbGF5ID0gZnVuY3Rpb24gaGFuZGxlQ2FuUGxheSgpIHtcbiAgICAgIGlmICghdmlkZW8ucGF1c2VkKSByZXR1cm47XG4gICAgICBwbGF5VmlkZW8oKTtcbiAgICB9O1xuICAgIHZhciBoYW5kbGVFbnRlclBJUCA9IGZ1bmN0aW9uIGhhbmRsZUVudGVyUElQKCkge1xuICAgICAgdmlkZW8uc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJztcbiAgICB9O1xuICAgIHZhciBoYW5kbGVMZWF2ZVBJUCA9IGZ1bmN0aW9uIGhhbmRsZUxlYXZlUElQKCkge1xuICAgICAgdmlkZW8uc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZpZGVvLnBhdXNlZCkgcGxheVZpZGVvKCk7XG4gICAgICB9LCAxMDApO1xuICAgIH07XG4gICAgdmFyIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCkge1xuICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ2hpZGRlbicpIHJldHVybjtcbiAgICAgIGlmICghdmlkZW8ucGF1c2VkKSByZXR1cm47XG4gICAgICBwbGF5VmlkZW8oKTtcbiAgICB9O1xuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBoYW5kbGVDYW5QbGF5KTtcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdlbnRlcnBpY3R1cmVpbnBpY3R1cmUnLCBoYW5kbGVFbnRlclBJUCk7XG4gICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbGVhdmVwaWN0dXJlaW5waWN0dXJlJywgaGFuZGxlTGVhdmVQSVApO1xuICAgIC8vIFZpZGVvcyBjYW4gYmUgcGF1c2VkIGlmIG1lZGlhIHdhcyBwbGF5ZWQgaW4gYW5vdGhlciBhcHAgb24gaU9TLlxuICAgIC8vIFJlc3VtaW5nIGhlcmUsIHdoZW4gcmV0dXJuaW5nIGJhY2sgdG8gRGFpbHkgY2FsbC5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBoYW5kbGVDYW5QbGF5KTtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VudGVycGljdHVyZWlucGljdHVyZScsIGhhbmRsZUVudGVyUElQKTtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xlYXZlcGljdHVyZWlucGljdHVyZScsIGhhbmRsZUxlYXZlUElQKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBzcmNPYmplY3QuXHJcbiAgICovXG4gIHVzZUVmZmVjdChmdW5jdGlvbiB1cGRhdGVTcmNPYmplY3QoKSB7XG4gICAgdmFyIHZpZGVvID0gdmlkZW9FbC5jdXJyZW50O1xuICAgIGlmICghdmlkZW8gfHwgIXZpZGVvVHJhY2spIHJldHVybjtcbiAgICBpZiAoIU1lZGlhU3RyZWFtKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJNZWRpYVN0cmVhbSBBUEkgbm90IGF2YWlsYWJsZS4gQ2FuJ3Qgc2V0dXAgXCIgKyB0eXBlICsgXCIgZm9yIFwiICsgc2Vzc2lvbklkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmlkZW8uc3JjT2JqZWN0ID0gbmV3IE1lZGlhU3RyZWFtKFt2aWRlb1RyYWNrXSk7XG4gICAgdmlkZW8ubG9hZCgpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBjbGVhbiB1cCB3aGVuIHVubW91bnRlZFxuICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gbnVsbDtcbiAgICAgIHZpZGVvLmxvYWQoKTtcbiAgICB9O1xuICB9LCBbc2Vzc2lvbklkLCB0eXBlLCB2aWRlb1RyYWNrLCB2aWRlb1RyYWNrID09IG51bGwgPyB2b2lkIDAgOiB2aWRlb1RyYWNrLmlkXSk7XG4gIC8qKlxyXG4gICAqIEFkZCBvcHRpb25hbCBldmVudCBsaXN0ZW5lciBmb3IgcmVzaXplIGV2ZW50IHNvIHRoZSBwYXJlbnQgY29tcG9uZW50XHJcbiAgICogY2FuIGtub3cgdGhlIHZpZGVvJ3MgbmF0aXZlIGFzcGVjdCByYXRpby5cclxuICAgKi9cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uIHJlcG9ydFZpZGVvRGltZW5zaW9ucygpIHtcbiAgICB2YXIgdmlkZW8gPSB2aWRlb0VsLmN1cnJlbnQ7XG4gICAgaWYgKCFvblJlc2l6ZSB8fCAhdmlkZW8pIHJldHVybjtcbiAgICB2YXIgZnJhbWU7XG4gICAgZnVuY3Rpb24gaGFuZGxlUmVzaXplKCkge1xuICAgICAgaWYgKGZyYW1lKSBjYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZSk7XG4gICAgICBmcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2aWRlbyA9IHZpZGVvRWwuY3VycmVudDtcbiAgICAgICAgaWYgKCF2aWRlbyB8fCBkb2N1bWVudC5oaWRkZW4pIHJldHVybjtcbiAgICAgICAgdmFyIHZpZGVvV2lkdGggPSB2aWRlby52aWRlb1dpZHRoO1xuICAgICAgICB2YXIgdmlkZW9IZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodDtcbiAgICAgICAgaWYgKHZpZGVvV2lkdGggJiYgdmlkZW9IZWlnaHQpIHtcbiAgICAgICAgICBvblJlc2l6ZSA9PSBudWxsID8gdm9pZCAwIDogb25SZXNpemUoe1xuICAgICAgICAgICAgYXNwZWN0UmF0aW86IHZpZGVvV2lkdGggLyB2aWRlb0hlaWdodCxcbiAgICAgICAgICAgIGhlaWdodDogdmlkZW9IZWlnaHQsXG4gICAgICAgICAgICB3aWR0aDogdmlkZW9XaWR0aFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlUmVzaXplKCk7XG4gICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBoYW5kbGVSZXNpemUpO1xuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVJlc2l6ZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChmcmFtZSkgY2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUpO1xuICAgICAgdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBoYW5kbGVSZXNpemUpO1xuICAgICAgdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlUmVzaXplKTtcbiAgICB9O1xuICB9LCBbb25SZXNpemVdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiLCBPYmplY3QuYXNzaWduKHtcbiAgICBhdXRvUGxheTogdHJ1ZSxcbiAgICBtdXRlZDogdHJ1ZSxcbiAgICBwbGF5c0lubGluZTogdHJ1ZSxcbiAgICByZWY6IHZpZGVvUmVmLFxuICAgIFwiZGF0YS1sb2NhbFwiOiBpc0xvY2FsLFxuICAgIFwiZGF0YS1taXJyb3JlZFwiOiBpc01pcnJvcmVkIHx8IHVuZGVmaW5lZCxcbiAgICBcImRhdGEtcGxheWFibGVcIjogaXNQbGF5YWJsZSB8fCB1bmRlZmluZWQsXG4gICAgXCJkYXRhLXNlc3Npb24taWRcIjogc2Vzc2lvbklkLFxuICAgIFwiZGF0YS1zdWJzY3JpYmVkXCI6IHN1YnNjcmliZWRTdGF0ZSxcbiAgICBcImRhdGEtdmlkZW8tdHlwZVwiOiB0eXBlLFxuICAgIHN0eWxlOiBfZXh0ZW5kcyh7XG4gICAgICBvYmplY3RGaXQ6IGZpdCxcbiAgICAgIHRyYW5zZm9ybTogaXNNaXJyb3JlZCA/ICdzY2FsZSgtMSwgMSknIDogJydcbiAgICB9LCBzdHlsZSwgaXNQbGF5YWJsZSA/IHBsYXlhYmxlU3R5bGUgOiB7fSlcbiAgfSwgcHJvcHMpKTtcbn0pO1xuRGFpbHlWaWRlby5kaXNwbGF5TmFtZSA9ICdEYWlseVZpZGVvJztcblxudmFyIERhaWx5RGV2aWNlc0NvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dCh7XG4gIHJlZnJlc2hEZXZpY2VzOiBmdW5jdGlvbiByZWZyZXNoRGV2aWNlcygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn0pO1xuXG52YXIgZ2VuZXJhbENhbWVyYVN0YXRlID0gLyojX19QVVJFX18qL2F0b20oJ2lkbGUnKTtcbmdlbmVyYWxDYW1lcmFTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnY2FtZXJhLXN0YXRlJyk7XG52YXIgZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSA9IC8qI19fUFVSRV9fKi9hdG9tKCdpZGxlJyk7XG5nZW5lcmFsTWljcm9waG9uZVN0YXRlLmRlYnVnTGFiZWwgPSAvKiNfX1BVUkVfXyovam90YWlEZWJ1Z0xhYmVsKCdtaWNyb3Bob25lLXN0YXRlJyk7XG52YXIgY2FtZXJhRGV2aWNlc1N0YXRlID0gLyojX19QVVJFX18qL2F0b20oW10pO1xuY2FtZXJhRGV2aWNlc1N0YXRlLmRlYnVnTGFiZWwgPSAvKiNfX1BVUkVfXyovam90YWlEZWJ1Z0xhYmVsKCdjYW1lcmEtZGV2aWNlcycpO1xudmFyIG1pY3JvcGhvbmVEZXZpY2VzU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShbXSk7XG5taWNyb3Bob25lRGV2aWNlc1N0YXRlLmRlYnVnTGFiZWwgPSAvKiNfX1BVUkVfXyovam90YWlEZWJ1Z0xhYmVsKCdtaWNyb3Bob25lLWRldmljZXMnKTtcbnZhciBzcGVha2VyRGV2aWNlc1N0YXRlID0gLyojX19QVVJFX18qL2F0b20oW10pO1xuc3BlYWtlckRldmljZXNTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnc3BlYWtlci1kZXZpY2VzJyk7XG52YXIgbGFzdENhbWVyYUVycm9yU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShudWxsKTtcbmxhc3RDYW1lcmFFcnJvclN0YXRlLmRlYnVnTGFiZWwgPSAvKiNfX1BVUkVfXyovam90YWlEZWJ1Z0xhYmVsKCdsYXN0LWNhbWVyYS1lcnJvcicpO1xudmFyIERhaWx5RGV2aWNlcyA9IGZ1bmN0aW9uIERhaWx5RGV2aWNlcyhfcmVmKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW47XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIC8qKlxyXG4gICAqIFJlZnJlc2hlcyBsaXN0IG9mIGF2YWlsYWJsZSBkZXZpY2VzIHVzaW5nIGVudW1lcmF0ZURldmljZXMuXHJcbiAgICogUHJldmlvdXMgZGV2aWNlIHN0YXRlcyBhcmUga2VwdCBpbiBwbGFjZSwgb3RoZXJ3aXNlIHN0YXRlcyBhcmUgaW5pdGlhbGl6ZWQgYXMgJ2dyYW50ZWQnLlxyXG4gICAqL1xuICB2YXIgcmVmcmVzaERldmljZXMgPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoZnVuY3Rpb24qIChfZ2V0LCBzZXQpIHtcbiAgICAgIHZhciBfbmF2aWdhdG9yLCBfbmF2aWdhdG9yJG1lZGlhRGV2aWMsIF9uYXZpZ2F0b3IyLCBfbmF2aWdhdG9yMiRtZWRpYURldmk7XG4gICAgICAvKipcclxuICAgICAgICogQ2hlY2sgZm9yIGxlZ2FjeSBicm93c2Vycy5cclxuICAgICAgICovXG4gICAgICBpZiAodHlwZW9mICgoX25hdmlnYXRvciA9IG5hdmlnYXRvcikgPT0gbnVsbCA/IHZvaWQgMCA6IChfbmF2aWdhdG9yJG1lZGlhRGV2aWMgPSBfbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9uYXZpZ2F0b3IkbWVkaWFEZXZpYy5nZXRVc2VyTWVkaWEpID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgKChfbmF2aWdhdG9yMiA9IG5hdmlnYXRvcikgPT0gbnVsbCA/IHZvaWQgMCA6IChfbmF2aWdhdG9yMiRtZWRpYURldmkgPSBfbmF2aWdhdG9yMi5tZWRpYURldmljZXMpID09IG51bGwgPyB2b2lkIDAgOiBfbmF2aWdhdG9yMiRtZWRpYURldmkuZW51bWVyYXRlRGV2aWNlcykgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICdub3Qtc3VwcG9ydGVkJyk7XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnbm90LXN1cHBvcnRlZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgX3lpZWxkJGRhaWx5JGVudW1lcmF0ID0geWllbGQgZGFpbHkuZW51bWVyYXRlRGV2aWNlcygpLFxuICAgICAgICAgIGRldmljZXMgPSBfeWllbGQkZGFpbHkkZW51bWVyYXQuZGV2aWNlcztcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlsdGVyIG91dCBcImVtcHR5XCIgZGV2aWNlcyBmb3Igd2hlbiBkZXZpY2UgYWNjZXNzIGhhcyBub3QgYmVlbiBncmFudGVkICh5ZXQpLlxyXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgY2FtcyA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIGQua2luZCA9PT0gJ3ZpZGVvaW5wdXQnICYmIGQuZGV2aWNlSWQgIT09ICcnO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1pY3MgPSBkZXZpY2VzLmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBkLmtpbmQgPT09ICdhdWRpb2lucHV0JyAmJiBkLmRldmljZUlkICE9PSAnJztcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzcGVha2VycyA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIGQua2luZCA9PT0gJ2F1ZGlvb3V0cHV0JyAmJiBkLmRldmljZUlkICE9PSAnJztcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfeWllbGQkZGFpbHkkZ2V0SW5wdXQgPSB5aWVsZCBkYWlseS5nZXRJbnB1dERldmljZXMoKSxcbiAgICAgICAgICBjYW1lcmEgPSBfeWllbGQkZGFpbHkkZ2V0SW5wdXQuY2FtZXJhLFxuICAgICAgICAgIG1pYyA9IF95aWVsZCRkYWlseSRnZXRJbnB1dC5taWMsXG4gICAgICAgICAgc3BlYWtlciA9IF95aWVsZCRkYWlseSRnZXRJbnB1dC5zcGVha2VyO1xuICAgICAgICB2YXIgbWFwRGV2aWNlID0gZnVuY3Rpb24gbWFwRGV2aWNlKGRldmljZSwgZCwgcHJldkRldmljZXMpIHtcbiAgICAgICAgICB2YXIgX3ByZXZEZXZpY2VzJGZpbmQkc3RhLCBfcHJldkRldmljZXMkZmluZDtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGV2aWNlOiBkLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICdkZXZpY2VJZCcgaW4gZGV2aWNlICYmIGQuZGV2aWNlSWQgPT09IGRldmljZS5kZXZpY2VJZCxcbiAgICAgICAgICAgIHN0YXRlOiAoX3ByZXZEZXZpY2VzJGZpbmQkc3RhID0gKF9wcmV2RGV2aWNlcyRmaW5kID0gcHJldkRldmljZXMuZmluZChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgICByZXR1cm4gcC5kZXZpY2UuZGV2aWNlSWQgPT09IGQuZGV2aWNlSWQ7XG4gICAgICAgICAgICB9KSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9wcmV2RGV2aWNlcyRmaW5kLnN0YXRlKSAhPSBudWxsID8gX3ByZXZEZXZpY2VzJGZpbmQkc3RhIDogJ2dyYW50ZWQnXG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHNvcnREZXZpY2VCeUxhYmVsID0gZnVuY3Rpb24gc29ydERldmljZUJ5TGFiZWwoYSwgYikge1xuICAgICAgICAgIGlmIChhLmRldmljZS5kZXZpY2VJZCA9PT0gJ2RlZmF1bHQnKSByZXR1cm4gLTE7XG4gICAgICAgICAgaWYgKGIuZGV2aWNlLmRldmljZUlkID09PSAnZGVmYXVsdCcpIHJldHVybiAxO1xuICAgICAgICAgIGlmIChhLmRldmljZS5sYWJlbCA8IGIuZGV2aWNlLmxhYmVsKSByZXR1cm4gLTE7XG4gICAgICAgICAgaWYgKGEuZGV2aWNlLmxhYmVsID4gYi5kZXZpY2UubGFiZWwpIHJldHVybiAxO1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9O1xuICAgICAgICBzZXQoY2FtZXJhRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAocHJldkNhbXMpIHtcbiAgICAgICAgICByZXR1cm4gY2Ftcy5maWx0ZXIoQm9vbGVhbikubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFwRGV2aWNlKGNhbWVyYSwgZCwgcHJldkNhbXMpO1xuICAgICAgICAgIH0pLnNvcnQoc29ydERldmljZUJ5TGFiZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0KG1pY3JvcGhvbmVEZXZpY2VzU3RhdGUsIGZ1bmN0aW9uIChwcmV2TWljcykge1xuICAgICAgICAgIHJldHVybiBtaWNzLmZpbHRlcihCb29sZWFuKS5tYXAoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXBEZXZpY2UobWljLCBkLCBwcmV2TWljcyk7XG4gICAgICAgICAgfSkuc29ydChzb3J0RGV2aWNlQnlMYWJlbCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZXQoc3BlYWtlckRldmljZXNTdGF0ZSwgZnVuY3Rpb24gKHByZXZTcGVha2Vycykge1xuICAgICAgICAgIHJldHVybiBzcGVha2Vycy5maWx0ZXIoQm9vbGVhbikubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFwRGV2aWNlKHNwZWFrZXIsIGQsIHByZXZTcGVha2Vycyk7XG4gICAgICAgICAgfSkuc29ydChzb3J0RGV2aWNlQnlMYWJlbCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnbm90LXN1cHBvcnRlZCcpO1xuICAgICAgICBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ25vdC1zdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHtcbiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0oKSwgW2RhaWx5XSkpO1xuICAvKipcclxuICAgKiBVcGRhdGVzIGdlbmVyYWwgYW5kIHNwZWNpZmljIGRldmljZSBzdGF0ZXMsIGJhc2VkIG9uIGJsb2NrZWQgc3RhdHVzLlxyXG4gICAqL1xuICB2YXIgdXBkYXRlRGV2aWNlU3RhdGVzID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoZ2V0LCBzZXQpIHtcbiAgICAgIHZhciBfdHJhY2tzJHZpZGVvJG9mZiwgX3RyYWNrcyRhdWRpbyRvZmYsIF90cmFja3MkYXVkaW8sIF90cmFja3MkYXVkaW8kYmxvY2tlZCwgX3RyYWNrcyRhdWRpbzIsIF90cmFja3MkYXVkaW8yJGJsb2NrZSwgX3RyYWNrcyRhdWRpbzMsIF90cmFja3MkYXVkaW8zJGJsb2NrZSwgX3RyYWNrcyR2aWRlbywgX3RyYWNrcyR2aWRlbyRibG9ja2VkLCBfdHJhY2tzJHZpZGVvMiwgX3RyYWNrcyR2aWRlbzIkYmxvY2tlLCBfdHJhY2tzJHZpZGVvMywgX3RyYWNrcyR2aWRlbzMkYmxvY2tlO1xuICAgICAgaWYgKCFkYWlseSkgcmV0dXJuO1xuICAgICAgdmFyIGN1cnJlbnRDYW1TdGF0ZSA9IGdldChnZW5lcmFsQ2FtZXJhU3RhdGUpO1xuICAgICAgdmFyIGN1cnJlbnRNaWNTdGF0ZSA9IGdldChnZW5lcmFsTWljcm9waG9uZVN0YXRlKTtcbiAgICAgIHZhciBwYXJ0aWNpcGFudHMgPSBkYWlseS5wYXJ0aWNpcGFudHMoKTtcbiAgICAgIC8vIEd1YXJkIGFnYWluc3QgcG90ZW50aWFsbHkgdW5pbml0aWFsaXplZCBsb2NhbCBwYXJ0aWNpcGFudFxuICAgICAgaWYgKCFwYXJ0aWNpcGFudHMubG9jYWwpIHJldHVybjtcbiAgICAgIHZhciB0cmFja3MgPSBwYXJ0aWNpcGFudHMubG9jYWwudHJhY2tzO1xuICAgICAgdmFyIGNhbVBlcm1pc3Npb25TdGF0ZSA9ICdwcm9tcHQnO1xuICAgICAgdmFyIG1pY1Blcm1pc3Npb25TdGF0ZSA9ICdwcm9tcHQnO1xuICAgICAgaWYgKG5hdmlnYXRvci5wZXJtaXNzaW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBjYW1QZXJtaXNzaW9uID0geWllbGQgbmF2aWdhdG9yLnBlcm1pc3Npb25zLnF1ZXJ5KHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIG5hbWU6ICdjYW1lcmEnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY2FtUGVybWlzc2lvblN0YXRlID0gY2FtUGVybWlzc2lvbi5zdGF0ZTtcbiAgICAgICAgICB2YXIgbWljUGVybWlzc2lvbiA9IHlpZWxkIG5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBuYW1lOiAnbWljcm9waG9uZSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBtaWNQZXJtaXNzaW9uU3RhdGUgPSBtaWNQZXJtaXNzaW9uLnN0YXRlO1xuICAgICAgICB9IGNhdGNoIChfdW51c2VkKSB7XG4gICAgICAgICAgLy8gUGVybWlzc2lvbnMgcXVlcnkgbm90IGF2YWlsYWJsZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgYXdhaXRpbmdDYW1BY2Nlc3MgPSBjYW1QZXJtaXNzaW9uU3RhdGUgPT09ICdwcm9tcHQnICYmIFsnaWRsZScsICdwZW5kaW5nJ10uaW5jbHVkZXMoY3VycmVudENhbVN0YXRlKSAmJiB0cmFja3MudmlkZW8uc3RhdGUgPT09ICdpbnRlcnJ1cHRlZCcgJiYgIXRyYWNrcy52aWRlby5wZXJzaXN0ZW50VHJhY2s7XG4gICAgICB2YXIgaW5pdGlhbENhbU9mZiA9IFsnaWRsZScsICdwZW5kaW5nJ10uaW5jbHVkZXMoY3VycmVudENhbVN0YXRlKSAmJiAhdHJhY2tzLnZpZGVvLnBlcnNpc3RlbnRUcmFjayAmJiBCb29sZWFuKChfdHJhY2tzJHZpZGVvJG9mZiA9IHRyYWNrcy52aWRlby5vZmYpID09IG51bGwgPyB2b2lkIDAgOiBfdHJhY2tzJHZpZGVvJG9mZi5ieVVzZXIpO1xuICAgICAgdmFyIGF3YWl0aW5nTWljQWNjZXNzID0gbWljUGVybWlzc2lvblN0YXRlID09PSAncHJvbXB0JyAmJiBbJ2lkbGUnLCAncGVuZGluZyddLmluY2x1ZGVzKGN1cnJlbnRNaWNTdGF0ZSkgJiYgdHJhY2tzLmF1ZGlvLnN0YXRlID09PSAnaW50ZXJydXB0ZWQnICYmICF0cmFja3MuYXVkaW8ucGVyc2lzdGVudFRyYWNrO1xuICAgICAgdmFyIGluaXRpYWxNaWNPZmYgPSBbJ2lkbGUnLCAncGVuZGluZyddLmluY2x1ZGVzKGN1cnJlbnRNaWNTdGF0ZSkgJiYgIXRyYWNrcy5hdWRpby5wZXJzaXN0ZW50VHJhY2sgJiYgQm9vbGVhbigoX3RyYWNrcyRhdWRpbyRvZmYgPSB0cmFja3MuYXVkaW8ub2ZmKSA9PSBudWxsID8gdm9pZCAwIDogX3RyYWNrcyRhdWRpbyRvZmYuYnlVc2VyKTtcbiAgICAgIGlmICgoX3RyYWNrcyRhdWRpbyA9IHRyYWNrcy5hdWRpbykgIT0gbnVsbCAmJiAoX3RyYWNrcyRhdWRpbyRibG9ja2VkID0gX3RyYWNrcyRhdWRpby5ibG9ja2VkKSAhPSBudWxsICYmIF90cmFja3MkYXVkaW8kYmxvY2tlZC5ieURldmljZUluVXNlKSB7XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIHNldChtaWNyb3Bob25lRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAobWljcykge1xuICAgICAgICAgIHJldHVybiBtaWNzLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgcmV0dXJuIG0uc2VsZWN0ZWQgPyBfZXh0ZW5kcyh7fSwgbSwge1xuICAgICAgICAgICAgICBzdGF0ZTogJ2luLXVzZSdcbiAgICAgICAgICAgIH0pIDogbTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKChfdHJhY2tzJGF1ZGlvMiA9IHRyYWNrcy5hdWRpbykgIT0gbnVsbCAmJiAoX3RyYWNrcyRhdWRpbzIkYmxvY2tlID0gX3RyYWNrcyRhdWRpbzIuYmxvY2tlZCkgIT0gbnVsbCAmJiBfdHJhY2tzJGF1ZGlvMiRibG9ja2UuYnlEZXZpY2VNaXNzaW5nKSB7XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnbm90LWZvdW5kJyk7XG4gICAgICB9IGVsc2UgaWYgKChfdHJhY2tzJGF1ZGlvMyA9IHRyYWNrcy5hdWRpbykgIT0gbnVsbCAmJiAoX3RyYWNrcyRhdWRpbzMkYmxvY2tlID0gX3RyYWNrcyRhdWRpbzMuYmxvY2tlZCkgIT0gbnVsbCAmJiBfdHJhY2tzJGF1ZGlvMyRibG9ja2UuYnlQZXJtaXNzaW9ucyB8fCBtaWNQZXJtaXNzaW9uU3RhdGUgPT09ICdkZW5pZWQnKSB7XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnYmxvY2tlZCcpO1xuICAgICAgfSBlbHNlIGlmIChhd2FpdGluZ01pY0FjY2Vzcykge1xuICAgICAgICBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ3BlbmRpbmcnKTtcbiAgICAgIH0gZWxzZSBpZiAoaW5pdGlhbE1pY09mZikge1xuICAgICAgICBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ2lkbGUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnZ3JhbnRlZCcpO1xuICAgICAgICBzZXQobWljcm9waG9uZURldmljZXNTdGF0ZSwgZnVuY3Rpb24gKG1pY3MpIHtcbiAgICAgICAgICByZXR1cm4gbWljcy5tYXAoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHJldHVybiBtLnNlbGVjdGVkID8gX2V4dGVuZHMoe30sIG0sIHtcbiAgICAgICAgICAgICAgc3RhdGU6ICdncmFudGVkJ1xuICAgICAgICAgICAgfSkgOiBtO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgoX3RyYWNrcyR2aWRlbyA9IHRyYWNrcy52aWRlbykgIT0gbnVsbCAmJiAoX3RyYWNrcyR2aWRlbyRibG9ja2VkID0gX3RyYWNrcyR2aWRlby5ibG9ja2VkKSAhPSBudWxsICYmIF90cmFja3MkdmlkZW8kYmxvY2tlZC5ieURldmljZUluVXNlKSB7XG4gICAgICAgIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICdpbi11c2UnKTtcbiAgICAgICAgc2V0KGNhbWVyYURldmljZXNTdGF0ZSwgZnVuY3Rpb24gKGNhbXMpIHtcbiAgICAgICAgICByZXR1cm4gY2Ftcy5tYXAoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHJldHVybiBtLnNlbGVjdGVkID8gX2V4dGVuZHMoe30sIG0sIHtcbiAgICAgICAgICAgICAgc3RhdGU6ICdpbi11c2UnXG4gICAgICAgICAgICB9KSA6IG07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICgoX3RyYWNrcyR2aWRlbzIgPSB0cmFja3MudmlkZW8pICE9IG51bGwgJiYgKF90cmFja3MkdmlkZW8yJGJsb2NrZSA9IF90cmFja3MkdmlkZW8yLmJsb2NrZWQpICE9IG51bGwgJiYgX3RyYWNrcyR2aWRlbzIkYmxvY2tlLmJ5RGV2aWNlTWlzc2luZykge1xuICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnbm90LWZvdW5kJyk7XG4gICAgICB9IGVsc2UgaWYgKChfdHJhY2tzJHZpZGVvMyA9IHRyYWNrcy52aWRlbykgIT0gbnVsbCAmJiAoX3RyYWNrcyR2aWRlbzMkYmxvY2tlID0gX3RyYWNrcyR2aWRlbzMuYmxvY2tlZCkgIT0gbnVsbCAmJiBfdHJhY2tzJHZpZGVvMyRibG9ja2UuYnlQZXJtaXNzaW9ucyB8fCBjYW1QZXJtaXNzaW9uU3RhdGUgPT09ICdkZW5pZWQnKSB7XG4gICAgICAgIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICdibG9ja2VkJyk7XG4gICAgICB9IGVsc2UgaWYgKGF3YWl0aW5nQ2FtQWNjZXNzKSB7XG4gICAgICAgIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICdwZW5kaW5nJyk7XG4gICAgICB9IGVsc2UgaWYgKGluaXRpYWxDYW1PZmYpIHtcbiAgICAgICAgc2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSwgJ2lkbGUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICdncmFudGVkJyk7XG4gICAgICAgIHNldChjYW1lcmFEZXZpY2VzU3RhdGUsIGZ1bmN0aW9uIChjYW1zKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbXMubWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gbS5zZWxlY3RlZCA/IF9leHRlbmRzKHt9LCBtLCB7XG4gICAgICAgICAgICAgIHN0YXRlOiAnZ3JhbnRlZCdcbiAgICAgICAgICAgIH0pIDogbTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZWZyZXNoRGV2aWNlcygpO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoX3gzLCBfeDQpIHtcbiAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0oKSwgW2RhaWx5LCByZWZyZXNoRGV2aWNlc10pKTtcbiAgdXNlRGFpbHlFdmVudCgncGFydGljaXBhbnQtdXBkYXRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmICghZXYucGFydGljaXBhbnQubG9jYWwpIHJldHVybjtcbiAgICB1cGRhdGVEZXZpY2VTdGF0ZXMoKTtcbiAgfSwgW3VwZGF0ZURldmljZVN0YXRlc10pKTtcbiAgdXNlRGFpbHlFdmVudCgnYXZhaWxhYmxlLWRldmljZXMtdXBkYXRlZCcsIHJlZnJlc2hEZXZpY2VzKTtcbiAgdXNlRGFpbHlFdmVudCgnc2VsZWN0ZWQtZGV2aWNlcy11cGRhdGVkJywgcmVmcmVzaERldmljZXMpO1xuICB1c2VEYWlseUV2ZW50KCdjYW1lcmEtZXJyb3InLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgZXYpIHtcbiAgICB2YXIgX2V2JGVycm9yLCBfZXYkZXJyb3IyLCBfZXYkZXJyb3IzLCBfZXYkZXJyb3I0LCBfZXYkZXJyb3I1LCBfZXYkZXJyb3I2LCBfZXYkZXJyb3I3O1xuICAgIHNldChsYXN0Q2FtZXJhRXJyb3JTdGF0ZSwgZXYuZXJyb3IpO1xuICAgIHN3aXRjaCAoKF9ldiRlcnJvciA9IGV2LmVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2V2JGVycm9yLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NhbS1pbi11c2UnOlxuICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbWljLWluLXVzZSc6XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2FtLW1pYy1pbi11c2UnOlxuICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbm90LWZvdW5kJzpcbiAgICAgICAgaWYgKChfZXYkZXJyb3IyID0gZXYuZXJyb3IpICE9IG51bGwgJiYgX2V2JGVycm9yMi5taXNzaW5nTWVkaWEuaW5jbHVkZXMoJ3ZpZGVvJykpIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICdub3QtZm91bmQnKTtcbiAgICAgICAgaWYgKChfZXYkZXJyb3IzID0gZXYuZXJyb3IpICE9IG51bGwgJiYgX2V2JGVycm9yMy5taXNzaW5nTWVkaWEuaW5jbHVkZXMoJ2F1ZGlvJykpIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnbm90LWZvdW5kJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGVybWlzc2lvbnMnOlxuICAgICAgICBpZiAoKF9ldiRlcnJvcjQgPSBldi5lcnJvcikgIT0gbnVsbCAmJiBfZXYkZXJyb3I0LmJsb2NrZWRNZWRpYS5pbmNsdWRlcygndmlkZW8nKSkgc2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSwgJ2Jsb2NrZWQnKTtcbiAgICAgICAgaWYgKChfZXYkZXJyb3I1ID0gZXYuZXJyb3IpICE9IG51bGwgJiYgX2V2JGVycm9yNS5ibG9ja2VkTWVkaWEuaW5jbHVkZXMoJ2F1ZGlvJykpIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnYmxvY2tlZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NvbnN0cmFpbnRzJzpcbiAgICAgICAgaWYgKCgoX2V2JGVycm9yNiA9IGV2LmVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2V2JGVycm9yNi5yZWFzb24pID09PSAnaW52YWxpZCcpIHtcbiAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnY29uc3RyYWludHMtaW52YWxpZCcpO1xuICAgICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnY29uc3RyYWludHMtaW52YWxpZCcpO1xuICAgICAgICB9IGVsc2UgaWYgKCgoX2V2JGVycm9yNyA9IGV2LmVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2V2JGVycm9yNy5yZWFzb24pID09PSAnbm9uZS1zcGVjaWZpZWQnKSB7XG4gICAgICAgICAgc2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSwgJ2NvbnN0cmFpbnRzLW5vbmUtc3BlY2lmaWVkJyk7XG4gICAgICAgICAgc2V0KGdlbmVyYWxNaWNyb3Bob25lU3RhdGUsICdjb25zdHJhaW50cy1ub25lLXNwZWNpZmllZCcpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndW5kZWZpbmVkLW1lZGlhZGV2aWNlcyc6XG4gICAgICAgIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICd1bmRlZmluZWQtbWVkaWFkZXZpY2VzJyk7XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAndW5kZWZpbmVkLW1lZGlhZGV2aWNlcycpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Vua25vd24nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSwgJ3Vua25vd24nKTtcbiAgICAgICAgc2V0KGdlbmVyYWxNaWNyb3Bob25lU3RhdGUsICd1bmtub3duJyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSwgW10pKSk7XG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBhbGwgZGV2aWNlIHN0YXRlLCB3aGVuIGNhbWVyYSBpcyBzdGFydGVkLlxyXG4gICAqL1xuICB1c2VEYWlseUV2ZW50KCdzdGFydGVkLWNhbWVyYScsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSwgJ2dyYW50ZWQnKTtcbiAgICBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ2dyYW50ZWQnKTtcbiAgICB1cGRhdGVEZXZpY2VTdGF0ZXMoKTtcbiAgfSwgW3VwZGF0ZURldmljZVN0YXRlc10pKSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5RGV2aWNlc0NvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZToge1xuICAgICAgcmVmcmVzaERldmljZXM6IHJlZnJlc2hEZXZpY2VzXG4gICAgfVxuICB9LCBjaGlsZHJlbik7XG59O1xuXG52YXIgbGl2ZVN0cmVhbWluZ1N0YXRlID0gLyojX19QVVJFX18qL2F0b20oe1xuICBlcnJvck1zZzogdW5kZWZpbmVkLFxuICBpc0xpdmVTdHJlYW1pbmc6IGZhbHNlLFxuICBsYXlvdXQ6IHVuZGVmaW5lZFxufSk7XG5saXZlU3RyZWFtaW5nU3RhdGUuZGVidWdMYWJlbCA9IC8qI19fUFVSRV9fKi9qb3RhaURlYnVnTGFiZWwoJ2xpdmUtc3RyZWFtaW5nJyk7XG52YXIgRGFpbHlMaXZlU3RyZWFtaW5nID0gZnVuY3Rpb24gRGFpbHlMaXZlU3RyZWFtaW5nKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctc3RhcnRlZCcsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCBldikge1xuICAgIHNldChsaXZlU3RyZWFtaW5nU3RhdGUsIHtcbiAgICAgIGlzTGl2ZVN0cmVhbWluZzogdHJ1ZSxcbiAgICAgIGxheW91dDogZXYgPT0gbnVsbCA/IHZvaWQgMCA6IGV2LmxheW91dFxuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctc3RvcHBlZCcsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KGxpdmVTdHJlYW1pbmdTdGF0ZSwgZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBwcmV2U3RhdGUsIHtcbiAgICAgICAgaXNMaXZlU3RyZWFtaW5nOiBmYWxzZSxcbiAgICAgICAgbGF5b3V0OiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctZXJyb3InLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgZXYpIHtcbiAgICBzZXQobGl2ZVN0cmVhbWluZ1N0YXRlLCBmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHByZXZTdGF0ZSwge1xuICAgICAgICBlcnJvck1zZzogZXYuZXJyb3JNc2dcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgdXNlRGFpbHlFdmVudCgnbGVmdC1tZWV0aW5nJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQpIHtcbiAgICBzZXQobGl2ZVN0cmVhbWluZ1N0YXRlLCB7XG4gICAgICBlcnJvck1zZzogdW5kZWZpbmVkLFxuICAgICAgaXNMaXZlU3RyZWFtaW5nOiBmYWxzZSxcbiAgICAgIGxheW91dDogdW5kZWZpbmVkXG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY2hpbGRyZW4pO1xufTtcblxudmFyIG1lZXRpbmdTdGF0ZVN0YXRlID0gLyojX19QVVJFX18qL2F0b20oJ25ldycpO1xubWVldGluZ1N0YXRlU3RhdGUuZGVidWdMYWJlbCA9IC8qI19fUFVSRV9fKi9qb3RhaURlYnVnTGFiZWwoJ21lZXRpbmctc3RhdGUnKTtcbnZhciBtZWV0aW5nRXJyb3JTdGF0ZSA9IC8qI19fUFVSRV9fKi9hdG9tKG51bGwpO1xubWVldGluZ0Vycm9yU3RhdGUuZGVidWdMYWJlbCA9IC8qI19fUFVSRV9fKi9qb3RhaURlYnVnTGFiZWwoJ21lZXRpbmctZXJyb3InKTtcbnZhciBub25GYXRhbEVycm9yU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShudWxsKTtcbm5vbkZhdGFsRXJyb3JTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnbm9uLWZhdGFsLWVycm9yJyk7XG52YXIgbWVldGluZ1Nlc3Npb25EYXRhU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbSh7XG4gIGRhdGE6IHVuZGVmaW5lZCxcbiAgdG9wb2xvZ3k6ICdub25lJ1xufSk7XG5tZWV0aW5nU2Vzc2lvbkRhdGFTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnbWVldGluZy1zZXNzaW9uLWRhdGEnKTtcbnZhciBEYWlseU1lZXRpbmcgPSBmdW5jdGlvbiBEYWlseU1lZXRpbmcoX3JlZikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICAvKipcclxuICAgKiBVcGRhdGVzIG1lZXRpbmcgc3RhdGUuXHJcbiAgICovXG4gIHZhciB1cGRhdGVNZWV0aW5nU3RhdGUgPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICB2YXIgbWVldGluZ1N0YXRlID0gZGFpbHkubWVldGluZ1N0YXRlKCk7XG4gICAgc2V0KG1lZXRpbmdTdGF0ZVN0YXRlLCBtZWV0aW5nU3RhdGUpO1xuICAgIHJldHVybiBtZWV0aW5nU3RhdGU7XG4gIH0sIFtkYWlseV0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbG9hZGluZycsIHVwZGF0ZU1lZXRpbmdTdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xvYWRlZCcsIHVwZGF0ZU1lZXRpbmdTdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2pvaW5pbmctbWVldGluZycsIHVwZGF0ZU1lZXRpbmdTdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2pvaW5lZC1tZWV0aW5nJywgdXBkYXRlTWVldGluZ1N0YXRlKTtcbiAgdXNlRGFpbHlFdmVudCgnbGVmdC1tZWV0aW5nJywgdXBkYXRlTWVldGluZ1N0YXRlKTtcbiAgdXNlRGFpbHlFdmVudCgnZXJyb3InLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgZXYpIHtcbiAgICBzZXQobWVldGluZ0Vycm9yU3RhdGUsIGV2KTtcbiAgICB1cGRhdGVNZWV0aW5nU3RhdGUoKTtcbiAgfSwgW3VwZGF0ZU1lZXRpbmdTdGF0ZV0pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ25vbmZhdGFsLWVycm9yJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc2V0KG5vbkZhdGFsRXJyb3JTdGF0ZSwgZXYpO1xuICB9LCBbXSkpKTtcbiAgLyoqXHJcbiAgICogVXBkYXRlcyBtZWV0aW5nIHNlc3Npb24gc3RhdGUuXHJcbiAgICovXG4gIHZhciBpbml0TWVldGluZ1Nlc3Npb25TdGF0ZSA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgaWYgKCFkYWlseSkgcmV0dXJuO1xuICAgIHNldChtZWV0aW5nU2Vzc2lvbkRhdGFTdGF0ZSwgZGFpbHkubWVldGluZ1Nlc3Npb25TdGF0ZSgpKTtcbiAgfSwgW2RhaWx5XSkpO1xuICAvKipcclxuICAgKiBJbml0aWFsaXplIHN0YXRlIHdoZW4gam9pbmVkIG1lZXRpbmcgb3Igc2V0dGluZyB1cCB0aGUgaG9vay5cclxuICAgKi9cbiAgdXNlRGFpbHlFdmVudCgnam9pbmVkLW1lZXRpbmcnLCBpbml0TWVldGluZ1Nlc3Npb25TdGF0ZSk7XG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBKb3RhaSBzdGF0ZSB3aGVuZXZlciBtZWV0aW5nIHNlc3Npb24gc3RhdGUgaXMgdXBkYXRlZC5cclxuICAgKi9cbiAgdXNlRGFpbHlFdmVudCgnbWVldGluZy1zZXNzaW9uLXN0YXRlLXVwZGF0ZWQnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgZXYpIHtcbiAgICBzZXQobWVldGluZ1Nlc3Npb25EYXRhU3RhdGUsIGV2Lm1lZXRpbmdTZXNzaW9uU3RhdGUpO1xuICB9LCBbXSkpKTtcbiAgLyoqXHJcbiAgICogUmVzZXQgSm90YWkgc3RhdGUgd2hlbiBtZWV0aW5nIGVuZHMuXHJcbiAgICovXG4gIHVzZURhaWx5RXZlbnQoJ2xlZnQtbWVldGluZycsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KG1lZXRpbmdTZXNzaW9uRGF0YVN0YXRlLCB7XG4gICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICB0b3BvbG9neTogJ25vbmUnXG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICAvKipcclxuICAgKiBSZXNldCBKb3RhaSBzdGF0ZSB3aGVuIGNhbGwgaW5zdGFuY2UgaXMgZGVzdHJveWVkLlxyXG4gICAqL1xuICB1c2VEYWlseUV2ZW50KCdjYWxsLWluc3RhbmNlLWRlc3Ryb3llZCcsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KG1lZXRpbmdTdGF0ZVN0YXRlLCAnbmV3Jyk7XG4gICAgc2V0KG1lZXRpbmdFcnJvclN0YXRlLCBudWxsKTtcbiAgICBzZXQobm9uRmF0YWxFcnJvclN0YXRlLCBudWxsKTtcbiAgICBzZXQobWVldGluZ1Nlc3Npb25EYXRhU3RhdGUsIHtcbiAgICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICAgIHRvcG9sb2d5OiAnbm9uZSdcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBjaGlsZHJlbik7XG59O1xuXG52YXIgdG9wb2xvZ3lTdGF0ZSA9IC8qI19fUFVSRV9fKi9hdG9tKCdub25lJyk7XG50b3BvbG9neVN0YXRlLmRlYnVnTGFiZWwgPSAvKiNfX1BVUkVfXyovam90YWlEZWJ1Z0xhYmVsKCd0b3BvbG9neScpO1xudmFyIG5ldHdvcmtRdWFsaXR5U3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbSgxMDApO1xubmV0d29ya1F1YWxpdHlTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnbmV0d29yay1xdWFsaXR5Jyk7XG52YXIgbmV0d29ya1RocmVzaG9sZFN0YXRlID0gLyojX19QVVJFX18qL2F0b20oJ2dvb2QnKTtcbm5ldHdvcmtUaHJlc2hvbGRTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnbmV0d29yay10aHJlc2hvbGQnKTtcbnZhciBEYWlseU5ldHdvcmsgPSBmdW5jdGlvbiBEYWlseU5ldHdvcmsoX3JlZikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgdG9wb2xvZ3kgPSB1c2VBdG9tVmFsdWUodG9wb2xvZ3lTdGF0ZSk7XG4gIHZhciBpbml0VG9wb2xvZ3kgPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoZnVuY3Rpb24qIChfZ2V0LCBzZXQpIHtcbiAgICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICAgIHZhciB0b3BvbG9neSA9IHlpZWxkIGRhaWx5LmdldE5ldHdvcmtUb3BvbG9neSgpO1xuICAgICAgaWYgKCF0b3BvbG9neSB8fCAodG9wb2xvZ3kgPT0gbnVsbCA/IHZvaWQgMCA6IHRvcG9sb2d5LnRvcG9sb2d5KSA9PT0gJ25vbmUnKSByZXR1cm47XG4gICAgICBzZXQodG9wb2xvZ3lTdGF0ZSwgdG9wb2xvZ3kudG9wb2xvZ3kpO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoX3gsIF94Mikge1xuICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSgpLCBbZGFpbHldKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2pvaW5lZC1tZWV0aW5nJywgaW5pdFRvcG9sb2d5KTtcbiAgdXNlRGFpbHlFdmVudCgnbmV0d29yay1jb25uZWN0aW9uJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc3dpdGNoIChldi5ldmVudCkge1xuICAgICAgY2FzZSAnY29ubmVjdGVkJzpcbiAgICAgICAgaWYgKGV2LnR5cGUgPT09ICdwZWVyLXRvLXBlZXInKSBzZXQodG9wb2xvZ3lTdGF0ZSwgJ3BlZXInKTtcbiAgICAgICAgaWYgKGV2LnR5cGUgPT09ICdzZnUnKSBzZXQodG9wb2xvZ3lTdGF0ZSwgJ3NmdScpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sIFtdKSkpO1xuICB1c2VEYWlseUV2ZW50KCduZXR3b3JrLXF1YWxpdHktY2hhbmdlJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc2V0KG5ldHdvcmtRdWFsaXR5U3RhdGUsIGZ1bmN0aW9uIChwcmV2UXVhbGl0eSkge1xuICAgICAgcmV0dXJuIHByZXZRdWFsaXR5ICE9PSBldi5xdWFsaXR5ID8gZXYucXVhbGl0eSA6IHByZXZRdWFsaXR5O1xuICAgIH0pO1xuICAgIHNldChuZXR3b3JrVGhyZXNob2xkU3RhdGUsIGZ1bmN0aW9uIChwcmV2VGhyZXNob2xkKSB7XG4gICAgICByZXR1cm4gcHJldlRocmVzaG9sZCAhPT0gZXYudGhyZXNob2xkID8gZXYudGhyZXNob2xkIDogcHJldlRocmVzaG9sZDtcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xlZnQtbWVldGluZycsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KHRvcG9sb2d5U3RhdGUsICdub25lJyk7XG4gICAgc2V0KG5ldHdvcmtRdWFsaXR5U3RhdGUsIDEwMCk7XG4gICAgc2V0KG5ldHdvcmtUaHJlc2hvbGRTdGF0ZSwgJ2dvb2QnKTtcbiAgfSwgW10pKSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFkYWlseSB8fCB0b3BvbG9neSAhPT0gJ25vbmUnKSByZXR1cm47XG4gICAgaW5pdFRvcG9sb2d5KCk7XG4gIH0sIFtkYWlseSwgaW5pdFRvcG9sb2d5LCB0b3BvbG9neV0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY2hpbGRyZW4pO1xufTtcblxudmFyIHJlY29yZGluZ1N0YXRlID0gLyojX19QVVJFX18qL2F0b20oe1xuICBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRlZDogZmFsc2UsXG4gIGlzUmVjb3JkaW5nOiBmYWxzZVxufSk7XG5yZWNvcmRpbmdTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgncmVjb3JkaW5nLXN0YXRlJyk7XG52YXIgRGFpbHlSZWNvcmRpbmdzID0gZnVuY3Rpb24gRGFpbHlSZWNvcmRpbmdzKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgdmFyIGxvY2FsU2Vzc2lvbklkID0gdXNlTG9jYWxTZXNzaW9uSWQoKTtcbiAgdmFyIHJlY29yZGluZ1BhcnRpY2lwYW50SWRzID0gdXNlUGFydGljaXBhbnRJZHMoe1xuICAgIGZpbHRlcjogJ3JlY29yZCdcbiAgfSk7XG4gIHZhciBtYXliZVVwZGF0ZVJlY29yZGluZ1N0YXRlID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChnZXQsIHNldCwgaGFzUmVjb3JkaW5nUGFydGljaXBhbnRzLCBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRpbmcpIHtcbiAgICB2YXIgb2xkU3RhdGUgPSBnZXQocmVjb3JkaW5nU3RhdGUpO1xuICAgIHZhciBzID0ge1xuICAgICAgaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkZWQ6IG9sZFN0YXRlLmlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGVkLFxuICAgICAgaXNSZWNvcmRpbmc6IG9sZFN0YXRlLmlzUmVjb3JkaW5nLFxuICAgICAgbG9jYWw6IG9sZFN0YXRlLmxvY2FsLFxuICAgICAgdHlwZTogb2xkU3RhdGUudHlwZVxuICAgIH07XG4gICAgdmFyIG5ld1N0YXRlID0ge1xuICAgICAgLy8gSW4gY2FzZSB0eXBlIGlzIGxvY2FsIG9yIG5vdCBzZXQsIGRldGVybWluZSBiYXNlZCBvbiByZWNvcmRpbmcgcGFydGljaXBhbnRzXG4gICAgICBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRlZDogKHMgPT0gbnVsbCA/IHZvaWQgMCA6IHMudHlwZSkgPT09ICdsb2NhbCcgfHwgIShzICE9IG51bGwgJiYgcy50eXBlKSA/IGhhc1JlY29yZGluZ1BhcnRpY2lwYW50cyA6IHMuaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkZWQsXG4gICAgICBpc1JlY29yZGluZzogKHMgPT0gbnVsbCA/IHZvaWQgMCA6IHMudHlwZSkgPT09ICdsb2NhbCcgfHwgIShzICE9IG51bGwgJiYgcy50eXBlKSA/IGhhc1JlY29yZGluZ1BhcnRpY2lwYW50cyA6IHMuaXNSZWNvcmRpbmcsXG4gICAgICBsb2NhbDogKChzID09IG51bGwgPyB2b2lkIDAgOiBzLnR5cGUpID09PSAnbG9jYWwnIHx8ICEocyAhPSBudWxsICYmIHMudHlwZSkpICYmIGhhc1JlY29yZGluZ1BhcnRpY2lwYW50cyA/IGlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGluZyA6IHMgPT0gbnVsbCA/IHZvaWQgMCA6IHMubG9jYWwsXG4gICAgICAvKipcclxuICAgICAgICogU2V0IHR5cGUgaW4gY2FzZSByZWNvcmRpbmcgcGFydGljaXBhbnRzIGFyZSBkZXRlY3RlZC5cclxuICAgICAgICogV2Ugb25seSBzZXQgYHJlY29yZGAgb24gcGFydGljaXBhbnRzLCB3aGVuIHJlY29yZGluZyB0eXBlIGlzICdsb2NhbCcuXHJcbiAgICAgICAqL1xuICAgICAgdHlwZTogaGFzUmVjb3JkaW5nUGFydGljaXBhbnRzID8gJ2xvY2FsJyA6IG9sZFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBvbGRTdGF0ZS50eXBlXG4gICAgfTtcbiAgICBpZiAoY3VzdG9tRGVlcEVxdWFsKHMsIG5ld1N0YXRlKSkgcmV0dXJuO1xuICAgIHNldChyZWNvcmRpbmdTdGF0ZSwgX2V4dGVuZHMoe30sIHMsIG5ld1N0YXRlKSk7XG4gIH0sIFtdKSk7XG4gIC8qKlxyXG4gICAqIFVwZGF0ZSByZWNvcmRpbmcgc3RhdGUsIHdoZW5ldmVyIGFtb3VudCBvZiByZWNvcmRpbmcgcGFydGljaXBhbnRzIGNoYW5nZXMuXHJcbiAgICovXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhhc1JlY29yZGluZ1BhcnRpY2lwYW50cyA9IHJlY29yZGluZ1BhcnRpY2lwYW50SWRzLmxlbmd0aCA+IDA7XG4gICAgdmFyIGlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGluZyA9IHJlY29yZGluZ1BhcnRpY2lwYW50SWRzLmluY2x1ZGVzKGxvY2FsU2Vzc2lvbklkIHx8ICdsb2NhbCcpO1xuICAgIG1heWJlVXBkYXRlUmVjb3JkaW5nU3RhdGUoaGFzUmVjb3JkaW5nUGFydGljaXBhbnRzLCBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRpbmcpO1xuICB9LCBbbG9jYWxTZXNzaW9uSWQsIG1heWJlVXBkYXRlUmVjb3JkaW5nU3RhdGUsIHJlY29yZGluZ1BhcnRpY2lwYW50SWRzXSk7XG4gIHVzZURhaWx5RXZlbnQoJ3JlY29yZGluZy1zdGFydGVkJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgdmFyIGlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGVkID0gdHJ1ZTtcbiAgICBzd2l0Y2ggKGV2LnR5cGUpIHtcbiAgICAgIGNhc2UgJ2Nsb3VkLWJldGEnOlxuICAgICAgY2FzZSAnY2xvdWQnOlxuICAgICAgICB7XG4gICAgICAgICAgdmFyIF9ldiRsYXlvdXQ7XG4gICAgICAgICAgaWYgKGxvY2FsU2Vzc2lvbklkICYmICgoX2V2JGxheW91dCA9IGV2LmxheW91dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9ldiRsYXlvdXQucHJlc2V0KSA9PT0gJ3NpbmdsZS1wYXJ0aWNpcGFudCcgJiYgZXYubGF5b3V0LnNlc3Npb25faWQgIT09IGxvY2FsU2Vzc2lvbklkKSB7XG4gICAgICAgICAgICBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXQocmVjb3JkaW5nU3RhdGUsIHtcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGVkOiBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRlZCxcbiAgICAgIGlzUmVjb3JkaW5nOiB0cnVlLFxuICAgICAgbGF5b3V0OiBldiA9PSBudWxsID8gdm9pZCAwIDogZXYubGF5b3V0LFxuICAgICAgbG9jYWw6IGV2ID09IG51bGwgPyB2b2lkIDAgOiBldi5sb2NhbCxcbiAgICAgIHJlY29yZGluZ0lkOiBldiA9PSBudWxsID8gdm9pZCAwIDogZXYucmVjb3JkaW5nSWQsXG4gICAgICByZWNvcmRpbmdTdGFydGVkRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIHN0YXJ0ZWRCeTogZXYgPT0gbnVsbCA/IHZvaWQgMCA6IGV2LnN0YXJ0ZWRCeSxcbiAgICAgIHR5cGU6IGV2ID09IG51bGwgPyB2b2lkIDAgOiBldi50eXBlXG4gICAgfSk7XG4gIH0sIFtsb2NhbFNlc3Npb25JZF0pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3JlY29yZGluZy1zdG9wcGVkJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQpIHtcbiAgICBzZXQocmVjb3JkaW5nU3RhdGUsIGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcHJldlN0YXRlLCB7XG4gICAgICAgIGlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGVkOiBmYWxzZSxcbiAgICAgICAgaXNSZWNvcmRpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3JlY29yZGluZy1lcnJvcicsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KHJlY29yZGluZ1N0YXRlLCBmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHByZXZTdGF0ZSwge1xuICAgICAgICBlcnJvcjogdHJ1ZSxcbiAgICAgICAgaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkZWQ6IGZhbHNlLFxuICAgICAgICBpc1JlY29yZGluZzogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgdXNlRGFpbHlFdmVudCgnbGVmdC1tZWV0aW5nJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQpIHtcbiAgICBzZXQocmVjb3JkaW5nU3RhdGUsIHtcbiAgICAgIGlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGVkOiBmYWxzZSxcbiAgICAgIGlzUmVjb3JkaW5nOiBmYWxzZVxuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNoaWxkcmVuKTtcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIGEgbWVldGluZydzIGN1cnJlbnQgc3RhdGUuXHJcbiAqL1xudmFyIHVzZU1lZXRpbmdTdGF0ZSA9IGZ1bmN0aW9uIHVzZU1lZXRpbmdTdGF0ZSgpIHtcbiAgdmFyIG1lZXRpbmdTdGF0ZSA9IHVzZUF0b21WYWx1ZShtZWV0aW5nU3RhdGVTdGF0ZSk7XG4gIHVzZURlYnVnVmFsdWUobWVldGluZ1N0YXRlKTtcbiAgcmV0dXJuIG1lZXRpbmdTdGF0ZTtcbn07XG5cbnZhciByb29tU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShudWxsKTtcbnJvb21TdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgncm9vbS1zdGF0ZScpO1xudmFyIERhaWx5Um9vbSA9IGZ1bmN0aW9uIERhaWx5Um9vbShfcmVmKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW47XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciBtZWV0aW5nU3RhdGUgPSB1c2VNZWV0aW5nU3RhdGUoKTtcbiAgdmFyIHVwZGF0ZVJvb20gPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoZnVuY3Rpb24qIChfZ2V0LCBzZXQpIHtcbiAgICAgIGlmICghZGFpbHkgfHwgbWVldGluZ1N0YXRlID09PSAnbGVmdC1tZWV0aW5nJykgcmV0dXJuO1xuICAgICAgdmFyIHJvb20gPSB5aWVsZCBkYWlseS5yb29tKCk7XG4gICAgICBpZiAocm9vbSAmJiAnaWQnIGluIHJvb20pIHtcbiAgICAgICAgc2V0KHJvb21TdGF0ZSwgcm9vbSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcm9vbTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHtcbiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0oKSwgW2RhaWx5LCBtZWV0aW5nU3RhdGVdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2FjY2Vzcy1zdGF0ZS11cGRhdGVkJywgdXBkYXRlUm9vbSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xlZnQtbWVldGluZycsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldChyb29tU3RhdGUsIG51bGwpO1xuICAgIH07XG4gIH0sIFtdKSkpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY2hpbGRyZW4pO1xufTtcblxudmFyIHRyYW5zY3JpcHRpb25TdGF0ZSA9IC8qI19fUFVSRV9fKi9hdG9tKHtcbiAgaXNUcmFuc2NyaWJpbmc6IGZhbHNlLFxuICBtb2RlbDogJ2dlbmVyYWwnLFxuICBsYW5ndWFnZTogJ2VuJyxcbiAgdHJhbnNjcmlwdGlvbnM6IFtdXG59KTtcbnRyYW5zY3JpcHRpb25TdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgndHJhbnNjcmlwdGlvbi1zdGF0ZScpO1xudmFyIERhaWx5VHJhbnNjcmlwdGlvbnMgPSBmdW5jdGlvbiBEYWlseVRyYW5zY3JpcHRpb25zKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgdXNlRGFpbHlFdmVudCgndHJhbnNjcmlwdGlvbi1zdGFydGVkJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc2V0KHRyYW5zY3JpcHRpb25TdGF0ZSwge1xuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgdHJhbnNjcmlwdGlvblN0YXJ0RGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIGlzVHJhbnNjcmliaW5nOiB0cnVlLFxuICAgICAgdHJhbnNjcmlwdGlvbnM6IFtdLFxuICAgICAgZW5kcG9pbnRpbmc6IGV2LmVuZHBvaW50aW5nLFxuICAgICAgZXh0cmE6IGV2LmV4dHJhLFxuICAgICAgaW5jbHVkZVJhd1Jlc3BvbnNlOiBldi5pbmNsdWRlUmF3UmVzcG9uc2UsXG4gICAgICBpbnN0YW5jZUlkOiBldi5pbnN0YW5jZUlkLFxuICAgICAgbGFuZ3VhZ2U6IGV2Lmxhbmd1YWdlLFxuICAgICAgbW9kZWw6IGV2Lm1vZGVsLFxuICAgICAgcHJvZmFuaXR5X2ZpbHRlcjogZXYucHJvZmFuaXR5X2ZpbHRlcixcbiAgICAgIHB1bmN0dWF0ZTogZXYucHVuY3R1YXRlLFxuICAgICAgcmVkYWN0OiBldi5yZWRhY3QsXG4gICAgICBzdGFydGVkQnk6IGV2LnN0YXJ0ZWRCeSxcbiAgICAgIHRpZXI6IGV2LnRpZXJcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3RyYW5zY3JpcHRpb24tc3RvcHBlZCcsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCBldikge1xuICAgIHNldCh0cmFuc2NyaXB0aW9uU3RhdGUsIGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcHJldlN0YXRlLCB7XG4gICAgICAgIHVwZGF0ZWRCeTogZXYudXBkYXRlZEJ5LFxuICAgICAgICBpc1RyYW5zY3JpYmluZzogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgdXNlRGFpbHlFdmVudCgndHJhbnNjcmlwdGlvbi1lcnJvcicsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KHRyYW5zY3JpcHRpb25TdGF0ZSwgZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBwcmV2U3RhdGUsIHtcbiAgICAgICAgZXJyb3I6IHRydWUsXG4gICAgICAgIGlzVHJhbnNjcmliaW5nOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICB1c2VEYWlseUV2ZW50KCdsZWZ0LW1lZXRpbmcnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHNldCh0cmFuc2NyaXB0aW9uU3RhdGUsIGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcHJldlN0YXRlLCB7XG4gICAgICAgIGlzVHJhbnNjcmliaW5nOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICB1c2VEYWlseUV2ZW50KCdhcHAtbWVzc2FnZScsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCBldikge1xuICAgIGlmICgoZXYgPT0gbnVsbCA/IHZvaWQgMCA6IGV2LmZyb21JZCkgPT09ICd0cmFuc2NyaXB0aW9uJykge1xuICAgICAgc2V0KHRyYW5zY3JpcHRpb25TdGF0ZSwgZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHByZXZTdGF0ZSwge1xuICAgICAgICAgIC8vIHNldHRpbmcgaXQgdG8gdHJ1ZSB3aGVuZXZlciBhIG5ldyBtZXNzYWdlIGlzIHJlY2VpdmVkXG4gICAgICAgICAgLy8gYXMgdGhlIHBhcnRpY2lwYW50cyB3aG8gam9pbmVkIGFmdGVyIHRoZSB0cmFuc2NyaXB0aW9uLXN0YXJ0ZWQgZXZlbnRcbiAgICAgICAgICAvLyB3b24ndCBiZSBrbm93aW5nIGlmIHRyYW5zY3JpcHRpb24gaXMgc3RhcnRlZCBvciBub3RcbiAgICAgICAgICBpc1RyYW5zY3JpYmluZzogdHJ1ZSxcbiAgICAgICAgICB0cmFuc2NyaXB0aW9uczogW10uY29uY2F0KHByZXZTdGF0ZS50cmFuc2NyaXB0aW9ucywgW2V2LmRhdGFdKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW10pKSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBjaGlsZHJlbik7XG59O1xuXG52YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcbnZhciBkZWZhdWx0U2hvdWxkQ3JlYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiBkZWZhdWx0U2hvdWxkQ3JlYXRlSW5zdGFuY2UoKSB7XG4gIHJldHVybiB0cnVlO1xufTtcbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gIG9wdGlvbnM6IGRlZmF1bHRPcHRpb25zLFxuICBzaG91bGRDcmVhdGVJbnN0YW5jZTogZGVmYXVsdFNob3VsZENyZWF0ZUluc3RhbmNlXG59O1xuLyoqXHJcbiAqIEhlbHBlciBob29rIHRvIG1haW50YWluIGN1c3RvbSBjYWxsIGluc3RhbmNlcyBpbiBSZWFjdCBjb2RlYmFzZXMuXHJcbiAqL1xudmFyIHVzZUNhbGxJbnN0YW5jZSA9IGZ1bmN0aW9uIHVzZUNhbGxJbnN0YW5jZSh0eXBlLCBfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyBkZWZhdWx0UHJvcHMgOiBfdGVtcCxcbiAgICBwYXJlbnRFbFJlZiA9IF9yZWYucGFyZW50RWxSZWYsXG4gICAgX3JlZiRvcHRpb25zID0gX3JlZi5vcHRpb25zLFxuICAgIG9wdGlvbnMgPSBfcmVmJG9wdGlvbnMgPT09IHZvaWQgMCA/IGRlZmF1bHRPcHRpb25zIDogX3JlZiRvcHRpb25zLFxuICAgIF9yZWYkc2hvdWxkQ3JlYXRlSW5zdCA9IF9yZWYuc2hvdWxkQ3JlYXRlSW5zdGFuY2UsXG4gICAgc2hvdWxkQ3JlYXRlSW5zdGFuY2UgPSBfcmVmJHNob3VsZENyZWF0ZUluc3QgPT09IHZvaWQgMCA/IGRlZmF1bHRTaG91bGRDcmVhdGVJbnN0YW5jZSA6IF9yZWYkc2hvdWxkQ3JlYXRlSW5zdDtcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG51bGwpLFxuICAgIGNhbGxJbnN0YW5jZSA9IF91c2VTdGF0ZVswXSxcbiAgICBzZXRDYWxsSW5zdGFuY2UgPSBfdXNlU3RhdGVbMV07XG4gIC8qKlxyXG4gICAqIEhvbGRzIGxhc3QgdXNlZCBwcm9wcyB3aGVuIGNhbGxPYmplY3QgaW5zdGFuY2Ugd2FzIGNyZWF0ZWQuXHJcbiAgICovXG4gIHZhciBsYXN0VXNlZE9wdGlvbnMgPSB1c2VSZWYoKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAvKipcclxuICAgICAqIENhbGwgZnJhbWUgaW5zdGFuY2VzIHdpdGggYSBkZWZpbmVkIHBhcmVudEVsIGxpa2VseSBwYXNzIGEgcmVmLlxyXG4gICAgICogVHlwaWNhbGx5IGEgRE9NIHJlZiBpcyBpbml0aWFsaXplZCB3aXRoIHVzZVJlZihudWxsKS5cclxuICAgICAqIFdlJ2xsIHdhbnQgdG8gd2FpdCB1bnRpbCBwYXJlbnRFbCBpcyBkZWZpbmVkLCBtZWFuaW5nIHRoYXQgdGhlIHJlZiBpc1xyXG4gICAgICogY29ycmVjdGx5IHdpcmVkIHVwIHdpdGggYSBET00gZWxlbWVudC5cclxuICAgICAqIE90aGVyd2lzZSB3ZSdsbCBqdXN0IGNoZWNrIHNob3VsZENyZWF0ZUluc3RhbmNlKCkuXHJcbiAgICAgKi9cbiAgICBpZiAodHlwZSA9PT0gJ2NhbGxGcmFtZScgJiYgKHBhcmVudEVsUmVmID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnRFbFJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCAhc2hvdWxkQ3JlYXRlSW5zdGFuY2UoKSkgcmV0dXJuO1xuICAgIGZ1bmN0aW9uIGRlc3Ryb3lDYWxsSW5zdGFuY2UoX3gpIHtcbiAgICAgIHJldHVybiBfZGVzdHJveUNhbGxJbnN0YW5jZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICAvKipcclxuICAgICAqIE9uY2UgaW5zdGFuY2UgaXMgZGVzdHJveWVkLCBudWxsaWZ5IGNhbGxJbnN0YW5jZSwgc28gYSBuZXcgb25lIGNhbiBiZSBjcmVhdGVkLlxyXG4gICAgICovXG4gICAgZnVuY3Rpb24gX2Rlc3Ryb3lDYWxsSW5zdGFuY2UoKSB7XG4gICAgICBfZGVzdHJveUNhbGxJbnN0YW5jZSA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoY28pIHtcbiAgICAgICAgeWllbGQgY28uZGVzdHJveSgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gX2Rlc3Ryb3lDYWxsSW5zdGFuY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgdmFyIGhhbmRsZURlc3Ryb3llZEluc3RhbmNlID0gZnVuY3Rpb24gaGFuZGxlRGVzdHJveWVkSW5zdGFuY2UoKSB7XG4gICAgICAvKipcclxuICAgICAgICogU2V0dGluZyBhIHRpbWVvdXQgbWFrZXMgc3VyZSB0aGUgZGVzdHJ1Y3Rpb24gYW5kIGNyZWF0aW9uXHJcbiAgICAgICAqIG9mIGNhbGwgaW5zdGFuY2VzIGhhcHBlbiBpbiBzZXBhcmF0ZSBjYWxsIHN0YWNrcy5cclxuICAgICAgICogT3RoZXJ3aXNlIHRoZXJlJ3MgYSByaXNrIGZvciBkdXBsaWNhdGUgY2FsbCBpbnN0YW5jZXMuXHJcbiAgICAgICAqL1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZXRDYWxsSW5zdGFuY2UobnVsbCk7XG4gICAgICB9LCAwKTtcbiAgICB9O1xuICAgIHZhciBjbyA9IERhaWx5LmdldENhbGxJbnN0YW5jZSgpO1xuICAgIC8qKlxyXG4gICAgICogSW4gY2FzZSBhIGNhbGwgaW5zdGFuY2UgZXhpc3RzIG91dHNpZGUgb2YgdGhpcyBob29rIGluc3RhbmNlJ3Mga25vd2xlZGdlLFxyXG4gICAgICogc3RvcmUgaXQgaW4gc3RhdGUuXHJcbiAgICAgKi9cbiAgICBpZiAoIWNhbGxJbnN0YW5jZSAmJiBjbyAmJiAhY28uaXNEZXN0cm95ZWQoKSkge1xuICAgICAgY28ub25jZSgnY2FsbC1pbnN0YW5jZS1kZXN0cm95ZWQnLCBoYW5kbGVEZXN0cm95ZWRJbnN0YW5jZSk7XG4gICAgICBzZXRDYWxsSW5zdGFuY2UoY28pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcclxuICAgICAqIGNhbGxJbnN0YW5jZSBleGlzdHMuXHJcbiAgICAgKi9cbiAgICBpZiAoY2FsbEluc3RhbmNlKSB7XG4gICAgICAvKipcclxuICAgICAgICogUHJvcHMgaGF2ZSBjaGFuZ2VkLiBEZXN0cm95IGN1cnJlbnQgaW5zdGFuY2UsIHNvIGEgbmV3IG9uZSBjYW4gYmUgY3JlYXRlZC5cclxuICAgICAgICovXG4gICAgICBpZiAoIWN1c3RvbURlZXBFcXVhbChsYXN0VXNlZE9wdGlvbnMuY3VycmVudCwgb3B0aW9ucykpIHtcbiAgICAgICAgZGVzdHJveUNhbGxJbnN0YW5jZShjYWxsSW5zdGFuY2UpO1xuICAgICAgfVxuICAgICAgLyoqXHJcbiAgICAgICAqIFJldHVybiBlYXJseS5cclxuICAgICAgICovXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghY28gfHwgY28uaXNEZXN0cm95ZWQoKSkge1xuICAgICAgLyoqXHJcbiAgICAgICAqIGNhbGxJbnN0YW5jZSBkb2Vzbid0IGV4aXN0IG9yIGlzIGRlc3Ryb3llZCAoVE9ETzogQ2hlY2sgd2h5IGdldENhbGxJbnN0YW5jZSgpIGNhbiByZXR1cm4gYSBkZXN0cm95ZWQgaW5zdGFuY2UpLFxyXG4gICAgICAgKiBidXQgc2hvdWxkIGJlIGNyZWF0ZWQuXHJcbiAgICAgICAqIEltcG9ydGFudCB0byBzcHJlYWQgcHJvcHMsIGJlY2F1c2UgY3JlYXRlQ2FsbE9iamVjdC9jcmVhdGVGcmFtZSBhbHRlcnMgdGhlIHBhc3NlZCBvYmplY3QgKGFkZHMgbGF5b3V0IGFuZCBkYWlseUpzVmVyc2lvbikuXHJcbiAgICAgICAqL1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NhbGxGcmFtZSc6XG4gICAgICAgICAgY28gPSBwYXJlbnRFbFJlZiAhPSBudWxsICYmIHBhcmVudEVsUmVmLmN1cnJlbnQgPyBEYWlseS5jcmVhdGVGcmFtZShwYXJlbnRFbFJlZi5jdXJyZW50LCBfZXh0ZW5kcyh7fSwgb3B0aW9ucykpIDogRGFpbHkuY3JlYXRlRnJhbWUoX2V4dGVuZHMoe30sIG9wdGlvbnMpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY2FsbE9iamVjdCc6XG4gICAgICAgICAgY28gPSBEYWlseS5jcmVhdGVDYWxsT2JqZWN0KF9leHRlbmRzKHt9LCBvcHRpb25zKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBsYXN0VXNlZE9wdGlvbnMuY3VycmVudCA9IG9wdGlvbnM7XG4gICAgfVxuICAgIHNldENhbGxJbnN0YW5jZShjbyk7XG4gICAgY28ub25jZSgnY2FsbC1pbnN0YW5jZS1kZXN0cm95ZWQnLCBoYW5kbGVEZXN0cm95ZWRJbnN0YW5jZSk7XG4gICAgLyoqXHJcbiAgICAgKiBObyBjbGVhbnVwIHBoYXNlIGhlcmUsIGJlY2F1c2UgY2FsbE9iamVjdC5kZXN0cm95KCkgcmV0dXJucyBhIFByb21pc2UuXHJcbiAgICAgKiBXZSBjYW4ndCBoYXZlIGFzeW5jaHJvbm91cyBjbGVhbnVwcyBpbiBhIHVzZUVmZmVjdC5cclxuICAgICAqIFRvIGF2b2lkIGluZmluaXRlIHJlbmRlciBsb29wcyB3ZSBjb21wYXJlIHRoZSBwcm9wcyB3aGVuIGNyZWF0aW5nIGNhbGwgb2JqZWN0IGluc3RhbmNlcy5cclxuICAgICAqL1xuICB9LCBbY2FsbEluc3RhbmNlLCBvcHRpb25zLCBwYXJlbnRFbFJlZiwgc2hvdWxkQ3JlYXRlSW5zdGFuY2UsIHR5cGVdKTtcbiAgcmV0dXJuIGNhbGxJbnN0YW5jZTtcbn07XG5cbi8qKlxyXG4gKiBIZWxwZXIgaG9vayB0byBtYWludGFpbiBjdXN0b20gY2FsbE9iamVjdCBpbnN0YW5jZXMgaW4gUmVhY3QgY29kZWJhc2VzLlxyXG4gKi9cbnZhciB1c2VDYWxsT2JqZWN0ID0gZnVuY3Rpb24gdXNlQ2FsbE9iamVjdChwcm9wcykge1xuICByZXR1cm4gdXNlQ2FsbEluc3RhbmNlKCdjYWxsT2JqZWN0JywgcHJvcHMpO1xufTtcblxudmFyIF9leGNsdWRlZCQyID0gW1wiY2hpbGRyZW5cIiwgXCJqb3RhaVN0b3JlXCJdO1xudmFyIERhaWx5UHJvdmlkZXIgPSBmdW5jdGlvbiBEYWlseVByb3ZpZGVyKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICBqb3RhaVN0b3JlID0gX3JlZi5qb3RhaVN0b3JlLFxuICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZiwgX2V4Y2x1ZGVkJDIpO1xuICB2YXIgZXZlbnRzTWFwID0gdXNlUmVmKHt9KTtcbiAgLyoqXHJcbiAgICogR2VuZXJpYyBldmVudCBoYW5kbGVyIHRvIGxvb3AgdGhyb3VnaCByZWdpc3RlcmVkIGV2ZW50IGNhbGxiYWNrcy5cclxuICAgKi9cbiAgdmFyIGhhbmRsZUV2ZW50ID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgdmFyIF9ldmVudHNNYXAkY3VycmVudCRldiwgX2V2ZW50c01hcCRjdXJyZW50O1xuICAgIGlmICghKCdhY3Rpb24nIGluIGV2KSkgcmV0dXJuO1xuICAgIHZhciBldmVudCA9IGV2LmFjdGlvbjtcbiAgICB2YXIgYWxsSGFuZGxlcnMgPSBBcnJheS5mcm9tKChfZXZlbnRzTWFwJGN1cnJlbnQkZXYgPSAoX2V2ZW50c01hcCRjdXJyZW50ID0gZXZlbnRzTWFwLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZXZlbnRzTWFwJGN1cnJlbnRbZXZlbnRdKSAhPSBudWxsID8gX2V2ZW50c01hcCRjdXJyZW50JGV2IDogW10pO1xuICAgIHZhciBwcmlvcml0eUhhbmRsZXJzID0gYWxsSGFuZGxlcnMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmMikge1xuICAgICAgdmFyIGtleSA9IF9yZWYyWzBdO1xuICAgICAgcmV0dXJuIGtleSA8IDA7XG4gICAgfSk7XG4gICAgdmFyIG5vcm1hbEhhbmRsZXJzID0gYWxsSGFuZGxlcnMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgdmFyIGtleSA9IF9yZWYzWzBdO1xuICAgICAgcmV0dXJuIGtleSA+IDA7XG4gICAgfSk7XG4gICAgdmFyIHNvcnRlZEhhbmRsZXJzID0gW10uY29uY2F0KHByaW9yaXR5SGFuZGxlcnMsIG5vcm1hbEhhbmRsZXJzKTtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHNvcnRlZEhhbmRsZXJzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBfc3RlcCR2YWx1ZSA9IF9zdGVwLnZhbHVlLFxuICAgICAgICBjYiA9IF9zdGVwJHZhbHVlWzFdO1xuICAgICAgY2IoZXYpO1xuICAgIH1cbiAgfSwgW10pO1xuICAvKipcclxuICAgKiBJbiBjYXNlIGV2ZW50cyBhcmUgc2V0IHVwIHZpYSB1c2VEYWlseUV2ZW50IGJlZm9yZSBhIERhaWx5Q2FsbCBpbnN0YW5jZSBpcyBhdmFpbGFibGUsXHJcbiAgICogd2UnbGwgcmVnaXN0ZXIgdGhlIGV2ZW50cyB3aGVuZXZlciBkYWlseSBpcyBzZXQuXHJcbiAgICovXG4gIHZhciBpbml0RXZlbnRIYW5kbGVycyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChkYWlseSkge1xuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBPYmplY3Qua2V5cyhldmVudHNNYXAuY3VycmVudCkuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGRhaWx5Lm9mZihldmVudCwgaGFuZGxlRXZlbnQpO1xuICAgICAgaWYgKCFkYWlseS5pc0Rlc3Ryb3llZCgpKSB7XG4gICAgICAgIGRhaWx5Lm9uKGV2ZW50LCBoYW5kbGVFdmVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtoYW5kbGVFdmVudF0pO1xuICB2YXIgZXh0ZXJuYWxDYWxsT2JqZWN0ID0gJ2NhbGxPYmplY3QnIGluIHByb3BzID8gcHJvcHMuY2FsbE9iamVjdCA6IG51bGw7XG4gIHZhciBtZW1vaXplZE9wdGlvbnMgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJ2NhbGxPYmplY3QnIGluIHByb3BzID8ge30gOiBwcm9wcztcbiAgfSwgW3Byb3BzXSk7XG4gIHZhciBpbnRlcm5hbENhbGxPYmplY3QgPSB1c2VDYWxsT2JqZWN0KHtcbiAgICBvcHRpb25zOiBtZW1vaXplZE9wdGlvbnMsXG4gICAgc2hvdWxkQ3JlYXRlSW5zdGFuY2U6IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAhKCdjYWxsT2JqZWN0JyBpbiBwcm9wcyk7XG4gICAgfSwgW3Byb3BzXSlcbiAgfSk7XG4gIHZhciBjYWxsT2JqZWN0ID0gZXh0ZXJuYWxDYWxsT2JqZWN0ICE9IG51bGwgPyBleHRlcm5hbENhbGxPYmplY3QgOiBpbnRlcm5hbENhbGxPYmplY3Q7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjYWxsT2JqZWN0KSByZXR1cm47XG4gICAgaW5pdEV2ZW50SGFuZGxlcnMoY2FsbE9iamVjdCk7XG4gIH0sIFtjYWxsT2JqZWN0LCBpbml0RXZlbnRIYW5kbGVyc10pO1xuICAvKipcclxuICAgKiBSZWdpc3RlcnMgZXZlbnQgY2FsbGJhY2suXHJcbiAgICovXG4gIHZhciBvbiA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldiwgY2IsIGtleSkge1xuICAgIHZhciBfZXZlbnRzTWFwJGN1cnJlbnQkZXYyO1xuICAgIGlmICghZXZlbnRzTWFwLmN1cnJlbnRbZXZdKSB7XG4gICAgICBldmVudHNNYXAuY3VycmVudFtldl0gPSBuZXcgTWFwKCk7XG4gICAgICBpZiAoY2FsbE9iamVjdCkge1xuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYWtlIHN1cmUgb25seSAxIGV2ZW50IGxpc3RlbmVyIGlzIHJlZ2lzdGVyZWQgYXQgYW55IHRpbWUgZm9yIGhhbmRsZUV2ZW50LlxyXG4gICAgICAgICAqIE90aGVyd2lzZSwgZXZlbnRzIHNlbnQgZnJvbSBkYWlseS1qcyBtaWdodCBiZSBoYW5kbGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gICAgICAgICAqL1xuICAgICAgICBjYWxsT2JqZWN0Lm9mZihldiwgaGFuZGxlRXZlbnQpO1xuICAgICAgICBpZiAoIWNhbGxPYmplY3QuaXNEZXN0cm95ZWQoKSkge1xuICAgICAgICAgIGNhbGxPYmplY3Qub24oZXYsIGhhbmRsZUV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISgoX2V2ZW50c01hcCRjdXJyZW50JGV2MiA9IGV2ZW50c01hcC5jdXJyZW50W2V2XSkgIT0gbnVsbCAmJiBfZXZlbnRzTWFwJGN1cnJlbnQkZXYyLmhhcyhrZXkpKSkge1xuICAgICAgdmFyIF9ldmVudHNNYXAkY3VycmVudCRldjM7XG4gICAgICAoX2V2ZW50c01hcCRjdXJyZW50JGV2MyA9IGV2ZW50c01hcC5jdXJyZW50W2V2XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9ldmVudHNNYXAkY3VycmVudCRldjMuc2V0KGtleSwgY2IpO1xuICAgIH1cbiAgfSwgW2NhbGxPYmplY3QsIGhhbmRsZUV2ZW50XSk7XG4gIC8qKlxyXG4gICAqIFVucmVnaXN0ZXJzIGV2ZW50IGNhbGxiYWNrLlxyXG4gICAqL1xuICB2YXIgb2ZmID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2LCBrZXkpIHtcbiAgICB2YXIgX2V2ZW50c01hcCRjdXJyZW50JGV2NCwgX2V2ZW50c01hcCRjdXJyZW50JGV2NTtcbiAgICAoX2V2ZW50c01hcCRjdXJyZW50JGV2NCA9IGV2ZW50c01hcC5jdXJyZW50W2V2XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9ldmVudHNNYXAkY3VycmVudCRldjRbXCJkZWxldGVcIl0oa2V5KTtcbiAgICBpZiAoKChfZXZlbnRzTWFwJGN1cnJlbnQkZXY1ID0gZXZlbnRzTWFwLmN1cnJlbnRbZXZdKSA9PSBudWxsID8gdm9pZCAwIDogX2V2ZW50c01hcCRjdXJyZW50JGV2NS5zaXplKSA9PT0gMCkge1xuICAgICAgY2FsbE9iamVjdCA9PSBudWxsID8gdm9pZCAwIDogY2FsbE9iamVjdC5vZmYoZXYsIGhhbmRsZUV2ZW50KTtcbiAgICAgIGRlbGV0ZSBldmVudHNNYXAuY3VycmVudFtldl07XG4gICAgfVxuICB9LCBbY2FsbE9iamVjdCwgaGFuZGxlRXZlbnRdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUHJvdmlkZXIsIHtcbiAgICBzdG9yZTogam90YWlTdG9yZVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5Q29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBjYWxsT2JqZWN0XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlFdmVudENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZToge1xuICAgICAgb246IG9uLFxuICAgICAgb2ZmOiBvZmZcbiAgICB9XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlSb29tLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5TWVldGluZywgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChEYWlseU5ldHdvcmssIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlQYXJ0aWNpcGFudHMsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlSZWNvcmRpbmdzLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5TGl2ZVN0cmVhbWluZywgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChEYWlseVRyYW5zY3JpcHRpb25zLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5RGV2aWNlcywgbnVsbCwgY2hpbGRyZW4pKSkpKSkpKSkpKTtcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBwYXJ0aWNpcGFudCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlbiBzZXNzaW9uSWQuXHJcbiAqIEBwYXJhbSBzZXNzaW9uSWQg4oCTIFRoZSBwYXJ0aWNpcGFudCdzIHNlc3Npb25faWQgb3IgXCJsb2NhbFwiLlxyXG4gKiBAZGVwcmVjYXRlZCBVc2UgW3VzZVBhcnRpY2lwYW50UHJvcGVydHldKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktcmVhY3QvdXNlLXBhcnRpY2lwYW50LXByb3BlcnR5KSBpbnN0ZWFkIHRvIG9ubHkgc3Vic2NyaWJlIHRvIHJlcXVpcmVkIHBhcnRpY2lwYW50IHByb3BlcnRpZXMuXHJcbiAqL1xudmFyIHVzZVBhcnRpY2lwYW50ID0gZnVuY3Rpb24gdXNlUGFydGljaXBhbnQoc2Vzc2lvbklkLCBfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uUGFydGljaXBhbnRMZWZ0ID0gX3JlZi5vblBhcnRpY2lwYW50TGVmdCxcbiAgICBvblBhcnRpY2lwYW50VXBkYXRlZCA9IF9yZWYub25QYXJ0aWNpcGFudFVwZGF0ZWQ7XG4gIHZhciBwYXJ0aWNpcGFudCA9IHVzZUF0b21WYWx1ZShwYXJ0aWNpcGFudFN0YXRlKHNlc3Npb25JZCkpO1xuICB1c2VUaHJvdHRsZWREYWlseUV2ZW50KFsncGFydGljaXBhbnQtdXBkYXRlZCcsICdwYXJ0aWNpcGFudC1sZWZ0J10sIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldnRzKSB7XG4gICAgdmFyIGZpbHRlcmVkRXZ0cyA9IGV2dHMuZmlsdGVyKGZ1bmN0aW9uIChldikge1xuICAgICAgcmV0dXJuIGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQgPT09IHNlc3Npb25JZDtcbiAgICB9KTtcbiAgICBpZiAoIWZpbHRlcmVkRXZ0cy5sZW5ndGgpIHJldHVybjtcbiAgICBmaWx0ZXJlZEV2dHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgIHN3aXRjaCAoZXYuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ3BhcnRpY2lwYW50LXVwZGF0ZWQnOlxuICAgICAgICAgIG9uUGFydGljaXBhbnRVcGRhdGVkID09IG51bGwgPyB2b2lkIDAgOiBvblBhcnRpY2lwYW50VXBkYXRlZChldik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BhcnRpY2lwYW50LWxlZnQnOlxuICAgICAgICAgIG9uUGFydGljaXBhbnRMZWZ0ID09IG51bGwgPyB2b2lkIDAgOiBvblBhcnRpY2lwYW50TGVmdChldik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtvblBhcnRpY2lwYW50TGVmdCwgb25QYXJ0aWNpcGFudFVwZGF0ZWQsIHNlc3Npb25JZF0pKTtcbiAgdXNlRGVidWdWYWx1ZShwYXJ0aWNpcGFudCk7XG4gIHJldHVybiBwYXJ0aWNpcGFudDtcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBtb3N0IHJlY2VudCBwYXJ0aWNpcGFudCBtZW50aW9uZWQgaW4gYW4gW2FjdGl2ZS1zcGVha2VyLWNoYW5nZV0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9ldmVudHMvbWVldGluZy1ldmVudHMjYWN0aXZlLXNwZWFrZXItY2hhbmdlKSBldmVudC5cclxuICogQGRlcHJlY2F0ZWQgVXNlIFt1c2VBY3RpdmVTcGVha2VySWRdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktcmVhY3QvdXNlLWFjdGl2ZS1zcGVha2VyLWlkKSBpbnN0ZWFkLlxyXG4gKi9cbnZhciB1c2VBY3RpdmVQYXJ0aWNpcGFudCA9IGZ1bmN0aW9uIHVzZUFjdGl2ZVBhcnRpY2lwYW50KF90ZW1wKSB7XG4gIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgX3JlZiRpZ25vcmVMb2NhbCA9IF9yZWYuaWdub3JlTG9jYWwsXG4gICAgaWdub3JlTG9jYWwgPSBfcmVmJGlnbm9yZUxvY2FsID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkaWdub3JlTG9jYWwsXG4gICAgb25BY3RpdmVTcGVha2VyQ2hhbmdlID0gX3JlZi5vbkFjdGl2ZVNwZWFrZXJDaGFuZ2U7XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciByZWNlbnRBY3RpdmVJZCA9IHVzZUF0b21WYWx1ZShhY3RpdmVJZFN0YXRlKTtcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKCcnKSxcbiAgICBhY3RpdmVJZCA9IF91c2VTdGF0ZVswXSxcbiAgICBzZXRBY3RpdmVJZCA9IF91c2VTdGF0ZVsxXTtcbiAgdmFyIGFjdGl2ZVBhcnRpY2lwYW50ID0gdXNlUGFydGljaXBhbnQoYWN0aXZlSWQpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZGFpbHkkcGFydGljaXBhbnRzO1xuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICB2YXIgbG9jYWwgPSBkYWlseSA9PSBudWxsID8gdm9pZCAwIDogKF9kYWlseSRwYXJ0aWNpcGFudHMgPSBkYWlseS5wYXJ0aWNpcGFudHMoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kYWlseSRwYXJ0aWNpcGFudHMubG9jYWw7XG4gICAgaWYgKGlnbm9yZUxvY2FsICYmIHJlY2VudEFjdGl2ZUlkID09PSAobG9jYWwgPT0gbnVsbCA/IHZvaWQgMCA6IGxvY2FsLnNlc3Npb25faWQpKSByZXR1cm47XG4gICAgLy8gc2V0dGluZyBhY3RpdmVJZCBhcyBzdHJpbmcgdG8gYXZvaWQgcGFzc2luZyBudWxsIHRvIHVzZVBhcnRpY2lwYW50IGhvb2tcbiAgICBzZXRBY3RpdmVJZChyZWNlbnRBY3RpdmVJZCAhPSBudWxsID8gcmVjZW50QWN0aXZlSWQgOiAnJyk7XG4gIH0sIFtkYWlseSwgaWdub3JlTG9jYWwsIHJlY2VudEFjdGl2ZUlkXSk7XG4gIHVzZURhaWx5RXZlbnQoJ2FjdGl2ZS1zcGVha2VyLWNoYW5nZScsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uQWN0aXZlU3BlYWtlckNoYW5nZSA9PSBudWxsID8gdm9pZCAwIDogb25BY3RpdmVTcGVha2VyQ2hhbmdlKGV2KTtcbiAgfSwgW29uQWN0aXZlU3BlYWtlckNoYW5nZV0pKTtcbiAgdXNlRGVidWdWYWx1ZShhY3RpdmVQYXJ0aWNpcGFudCk7XG4gIHJldHVybiBhY3RpdmVQYXJ0aWNpcGFudDtcbn07XG5cbi8qKlxyXG4gKiBSZWFjdCBob29rIHRvIHNldHVwIFthcHAtbWVzc2FnZV0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9ldmVudHMvcGFydGljaXBhbnQtZXZlbnRzI2FwcC1tZXNzYWdlKSBsaXN0ZW5lcnMgYW5kXHJcbiAqIHRvIHNlbmQgbWVzc2FnZXMgdmlhIFtzZW5kQXBwTWVzc2FnZV0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL3NlbmQtYXBwLW1lc3NhZ2UpLlxyXG4gKi9cbnZhciB1c2VBcHBNZXNzYWdlID0gZnVuY3Rpb24gdXNlQXBwTWVzc2FnZShfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uQXBwTWVzc2FnZSA9IF9yZWYub25BcHBNZXNzYWdlO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgc2VuZEFwcE1lc3NhZ2UgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZGF0YSwgdG8pIHtcbiAgICBpZiAodG8gPT09IHZvaWQgMCkge1xuICAgICAgdG8gPSAnKic7XG4gICAgfVxuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS5zZW5kQXBwTWVzc2FnZShkYXRhLCB0byk7XG4gIH0sIFtkYWlseV0pO1xuICB2YXIgaGFuZGxlQXBwTWVzc2FnZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uQXBwTWVzc2FnZSA9PSBudWxsID8gdm9pZCAwIDogb25BcHBNZXNzYWdlKGV2LCBzZW5kQXBwTWVzc2FnZSk7XG4gIH0sIFtvbkFwcE1lc3NhZ2UsIHNlbmRBcHBNZXNzYWdlXSk7XG4gIHVzZURhaWx5RXZlbnQoJ2FwcC1tZXNzYWdlJywgaGFuZGxlQXBwTWVzc2FnZSk7XG4gIHJldHVybiBzZW5kQXBwTWVzc2FnZTtcbn07XG5cbnZhciBhdWRpb0xldmVsUHJvY2Vzc29yID0gXCJcXG4gICAgY2xhc3MgQXVkaW9MZXZlbFByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7XFxuICAgIHZvbHVtZTtcXG4gICAgaW50ZXJ2YWw7XFxuICAgIG5leHRGcmFtZTtcXG4gICAgXFxuICAgIGNvbnN0cnVjdG9yKCkge1xcbiAgICAgIHN1cGVyKCk7XFxuICAgICAgdGhpcy52b2x1bWUgPSAwO1xcbiAgICAgIHRoaXMuaW50ZXJ2YWwgPSAyNTtcXG4gICAgICB0aGlzLm5leHRGcmFtZSA9IHRoaXMuaW50ZXJ2YWw7XFxuICAgIH1cXG4gICAgXFxuICAgIGdldCBpbnRlcnZhbEluRnJhbWVzKCkge1xcbiAgICAgIC8vIHNhbXBsZVJhdGUgaXMgZ2xvYmFsbHkgZGVmaW5lZCBpbiBBdWRpb1dvcmtsZXRzLlxcbiAgICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQXVkaW9Xb3JrbGV0R2xvYmFsU2NvcGVcXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcXG4gICAgICByZXR1cm4gKHRoaXMuaW50ZXJ2YWwgLyAxMDAwKSAqIHNhbXBsZVJhdGU7XFxuICAgIH1cXG4gICAgXFxuICAgIHByb2Nlc3MoaW5wdXRMaXN0KSB7XFxuICAgICAgY29uc3QgZmlyc3RJbnB1dCA9IGlucHV0TGlzdFswXTtcXG4gICAgXFxuICAgICAgaWYgKGZpcnN0SW5wdXQubGVuZ3RoID4gMCkge1xcbiAgICAgICAgY29uc3QgaW5wdXREYXRhID0gZmlyc3RJbnB1dFswXTtcXG4gICAgICAgIGxldCB0b3RhbCA9IDA7XFxuICAgIFxcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dERhdGEubGVuZ3RoOyArK2kpIHtcXG4gICAgICAgICAgdG90YWwgKz0gTWF0aC5hYnMoaW5wdXREYXRhW2ldKTtcXG4gICAgICAgIH1cXG4gICAgXFxuICAgICAgICBjb25zdCBybXMgPSBNYXRoLnNxcnQodG90YWwgLyBpbnB1dERhdGEubGVuZ3RoKTtcXG4gICAgICAgIHRoaXMudm9sdW1lID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgcm1zKSk7XFxuICAgIFxcbiAgICAgICAgdGhpcy5uZXh0RnJhbWUgLT0gaW5wdXREYXRhLmxlbmd0aDtcXG4gICAgICAgIGlmICh0aGlzLm5leHRGcmFtZSA8IDApIHtcXG4gICAgICAgICAgdGhpcy5uZXh0RnJhbWUgKz0gdGhpcy5pbnRlcnZhbEluRnJhbWVzO1xcbiAgICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UoeyB2b2x1bWU6IHRoaXMudm9sdW1lIH0pO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgXFxuICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH1cXG4gICAgfVxcbiAgICBcXG4gICAgcmVnaXN0ZXJQcm9jZXNzb3IoJ2F1ZGlvbGV2ZWwnLCBBdWRpb0xldmVsUHJvY2Vzc29yKTsgICAgICAgICAgICAgIFxcblwiO1xudmFyIGlubGluZUF1ZGlvV29ya2xldCA9IFwiZGF0YTphcHBsaWNhdGlvbi9qYXZhc2NyaXB0O2NoYXJzZXQ9dXRmOCxcIiArIC8qI19fUFVSRV9fKi9lbmNvZGVVUklDb21wb25lbnQoYXVkaW9MZXZlbFByb2Nlc3Nvcik7XG5cbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB2b2x1bWUgbGV2ZWwgb2YgYSBnaXZlbiBNZWRpYVN0cmVhbVRyYWNrLlxyXG4gKiBAcGFyYW0gbWVkaWFUcmFjayBUaGUgTWVkaWFTdHJlYW1UcmFjayB0byBiZSBhbmFseXNlZC5cclxuICogQHBhcmFtIG9uVm9sdW1lQ2hhbmdlIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIHZvbHVtZSBjaGFuZ2VzLiBDYW4gYmUgdXNlZCB0byB2aXN1YWxpc2UgYXVkaW8gb3V0cHV0LlxyXG4gKiBAZGVwcmVjYXRlZCBVc2UgdXNlQXVkaW9MZXZlbE9ic2VydmVyKCkgaW5zdGVhZC5cclxuICovXG52YXIgdXNlQXVkaW9MZXZlbCA9IGZ1bmN0aW9uIHVzZUF1ZGlvTGV2ZWwobWVkaWFUcmFjaywgb25Wb2x1bWVDaGFuZ2UpIHtcbiAgdmFyIGF1ZGlvQ3R4ID0gdXNlUmVmKCk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiBzZXR1cFN0cmVhbUFuZFN0YXJ0UHJvY2Vzc2luZygpIHtcbiAgICAvLyBObyBtZWRpYVRyYWNrLiBTdG9wIGltbWVkaWF0ZWx5LlxuICAgIGlmICghbWVkaWFUcmFjaykgcmV0dXJuO1xuICAgIHZhciBBdWRpb0N0eCA9IHR5cGVvZiBBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnID8gQXVkaW9Db250ZXh0IDogdHlwZW9mIHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnID8gd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCA6IG51bGw7XG4gICAgLy8gTm8gQXVkaW9Db250ZXh0IGF2YWlsYWJsZSBpbiBicm93c2VyLiBDYW4ndCBtZWFzdXJlIGF1ZGlvIHZvbHVtZS5cbiAgICBpZiAoIUF1ZGlvQ3R4KSByZXR1cm47XG4gICAgaWYgKCFhdWRpb0N0eC5jdXJyZW50KSB7XG4gICAgICAvLyBObyBhdWRpbyBjb250ZXh0IGluaXRpYWxpemVkLiBJbml0aWFsaXppbmcgbm93LlxuICAgICAgYXVkaW9DdHguY3VycmVudCA9IG5ldyBBdWRpb0N0eCgpO1xuICAgIH1cbiAgICB2YXIgYXVkaW9Db250ZXh0ID0gYXVkaW9DdHguY3VycmVudDtcbiAgICAvLyBBdWRpbyBjb250ZXh0IGNvdWxkIG5vdCBiZSBpbml0aWFsaXplZC4gU3RvcHBpbmcuXG4gICAgaWYgKCFhdWRpb0NvbnRleHQpIHJldHVybjtcbiAgICAvLyBObyBNZWRpYVN0cmVhbSBBUEkgYXZhaWxhYmxlIChlLmcuIFdlYlJUQyBkaXNhYmxlZClcbiAgICBpZiAoIU1lZGlhU3RyZWFtKSByZXR1cm47XG4gICAgdmFyIG1lZGlhU3RyZWFtU291cmNlID0gYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKG5ldyBNZWRpYVN0cmVhbShbbWVkaWFUcmFja10pKTtcbiAgICB2YXIgbm9kZTtcbiAgICB2YXIgZ2Fpbk5vZGU7XG4gICAgdmFyIHN0YXJ0UHJvY2Vzc2luZyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyeSB0byBhZGQgdGhlIG1vZHVsZSBvbmx5IG9uY2UuXHJcbiAgICAgICAgICogSW4gY2FzZSBpdCdzIG5vdCBhZGRlZCB0byB0aGUgYXVkaW8gY29udGV4dCwgeWV0LCB0cnlpbmcgdG8gaW5pdGlhbGl6ZSBpdCB3aWxsIGZhaWwuXHJcbiAgICAgICAgICogVGhlcmUncyBvbmx5IG9uZSByZWFsIHJlYXNvbiBmb3IgYG5ldyBBdWRpb1dvcmtsZXROb2RlYCB0byBmYWlsIGFuZCB0aGF0IGlzXHJcbiAgICAgICAgICogd2hlbiB0aGUgY29ycmVzcG9uZGluZyBtb2R1bGUgaXNuJ3QgYWRkZWQgdG8gdGhlIGF1ZGlvIGNvbnRleHQsIHlldC5cclxuICAgICAgICAgKiBUaGlzIG1ha2VzIHN1cmUgd2Ugb25seSBhZGQgdGhlIG1vZHVsZSBvbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV2UncmUgaW5saW5pbmcgdGhlIHdvcmtsZXQgaW5zdGVhZCBvZiBsb2FkaW5nIGl0IHZpYSBhIFVSTCBhcyBub3QgdG8gY29tcGxpY2F0ZSBidW5kbGluZ1xyXG4gICAgICAgICAqIHRoaXMgcGFja2FnZS5cclxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBub2RlID0gbmV3IEF1ZGlvV29ya2xldE5vZGUoYXVkaW9Db250ZXh0LCAnYXVkaW9sZXZlbCcpO1xuICAgICAgICAgIGdhaW5Ob2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgfSBjYXRjaCAoX3VudXNlZCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB5aWVsZCBhdWRpb0NvbnRleHQuYXVkaW9Xb3JrbGV0LmFkZE1vZHVsZShpbmxpbmVBdWRpb1dvcmtsZXQpO1xuICAgICAgICAgICAgbm9kZSA9IG5ldyBBdWRpb1dvcmtsZXROb2RlKGF1ZGlvQ29udGV4dCwgJ2F1ZGlvbGV2ZWwnKTtcbiAgICAgICAgICAgIGdhaW5Ob2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIShub2RlICYmIGdhaW5Ob2RlKSkgcmV0dXJuO1xuICAgICAgICBub2RlLnBvcnQub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIHZvbHVtZSA9IDA7XG4gICAgICAgICAgaWYgKGV2ZW50LmRhdGEudm9sdW1lKSB2b2x1bWUgPSBldmVudC5kYXRhLnZvbHVtZTtcbiAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICBvblZvbHVtZUNoYW5nZSh2b2x1bWUpO1xuICAgICAgICB9O1xuICAgICAgICBnYWluTm9kZS5nYWluLnZhbHVlID0gMDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0KG5vZGUpLmNvbm5lY3QoZ2Fpbk5vZGUpLmNvbm5lY3QoYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gc3RhcnRQcm9jZXNzaW5nKCkge1xuICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KCk7XG4gICAgc3RhcnRQcm9jZXNzaW5nKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfbm9kZTtcbiAgICAgIChfbm9kZSA9IG5vZGUpID09IG51bGwgPyB2b2lkIDAgOiBfbm9kZS5kaXNjb25uZWN0KCk7XG4gICAgICBub2RlID0gbnVsbDtcbiAgICAgIG1lZGlhU3RyZWFtU291cmNlID09IG51bGwgPyB2b2lkIDAgOiBtZWRpYVN0cmVhbVNvdXJjZS5kaXNjb25uZWN0KCk7XG4gICAgfTtcbiAgfSwgW29uVm9sdW1lQ2hhbmdlLCBtZWRpYVRyYWNrXSk7XG59O1xuXG4vKipcclxuICogT2JzZXJ2ZXMgdGhlIHZvbHVtZSBsZXZlbCBmb3IgYSBnaXZlbiBwYXJ0aWNpcGFudC5cclxuICogQHBhcmFtIGlkIFRoZSBzZXNzaW9uX2lkIG9mIHRoZSBwYXJ0aWNpcGFudCB0byBvYnNlcnZlLlxyXG4gKiBAcGFyYW0gY2IgVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2hlbiB0aGUgdm9sdW1lIGNoYW5nZXMuIENhbiBiZSB1c2VkIHRvIHZpc3VhbGlzZSBhdWRpbyBvdXRwdXQuXHJcbiAqIEBwYXJhbSBlcnJvckNiIEVycm9yIGNhbGxiYWNrLiBDYWxsZWQgd2hlbiBsb2NhbCBhdWRpbyBsZXZlbCBvYnNlcnZlciBpcyBub3QgYXZhaWxhYmxlIGluIGJyb3dzZXIuXHJcbiAqL1xudmFyIHVzZUF1ZGlvTGV2ZWxPYnNlcnZlciA9IGZ1bmN0aW9uIHVzZUF1ZGlvTGV2ZWxPYnNlcnZlcihpZCwgY2IsIGVycm9yQ2IpIHtcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIGxvY2FsU2Vzc2lvbklkID0gdXNlTG9jYWxTZXNzaW9uSWQoKTtcbiAgdmFyIGlzTG9jYWwgPSBpZCA9PT0gbG9jYWxTZXNzaW9uSWQ7XG4gIHVzZURhaWx5RXZlbnQoJ2xvY2FsLWF1ZGlvLWxldmVsJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgaWYgKCFpc0xvY2FsKSByZXR1cm47XG4gICAgY2IoZXYuYXVkaW9MZXZlbCk7XG4gIH0sIFtjYiwgaXNMb2NhbF0pKTtcbiAgdXNlRGFpbHlFdmVudCgncmVtb3RlLXBhcnRpY2lwYW50cy1hdWRpby1sZXZlbCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmIChpc0xvY2FsKSByZXR1cm47XG4gICAgY2IoZXYucGFydGljaXBhbnRzQXVkaW9MZXZlbFtpZF0pO1xuICB9LCBbY2IsIGlkLCBpc0xvY2FsXSkpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gbWF5YmVTdGFydExvY2FsQXVkaW9PYnNlcnZlcigpIHtcbiAgICBpZiAoIWRhaWx5IHx8IGRhaWx5LmlzRGVzdHJveWVkKCkgfHwgIWlzTG9jYWwpIHJldHVybjtcbiAgICBpZiAoZGFpbHkuaXNMb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmcoKSkgcmV0dXJuO1xuICAgIHRyeSB7XG4gICAgICBkYWlseS5zdGFydExvY2FsQXVkaW9MZXZlbE9ic2VydmVyKCk7XG4gICAgfSBjYXRjaCAoX3VudXNlZCkge1xuICAgICAgZXJyb3JDYiA9PSBudWxsID8gdm9pZCAwIDogZXJyb3JDYignTG9jYWwgYXVkaW8gbGV2ZWwgb2JzZXJ2ZXIgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXInKTtcbiAgICB9XG4gIH0sIFtkYWlseSwgZXJyb3JDYiwgaXNMb2NhbF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gbWF5YmVTdGFydFJlbW90ZUF1ZGlvT2JzZXJ2ZXIoKSB7XG4gICAgaWYgKCFkYWlseSB8fCBkYWlseS5pc0Rlc3Ryb3llZCgpIHx8IGlzTG9jYWwpIHJldHVybjtcbiAgICBpZiAoZGFpbHkuaXNSZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nKCkpIHJldHVybjtcbiAgICBkYWlseS5zdGFydFJlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWxPYnNlcnZlcigpO1xuICB9LCBbZGFpbHksIGlzTG9jYWxdKTtcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIGEgcGFydGljaXBhbnQncyBhdWRpbyB0cmFjayBhbmQgc3RhdGUuXHJcbiAqIEBwYXJhbSBwYXJ0aWNpcGFudElkIFRoZSBwYXJ0aWNpcGFudCdzIHNlc3Npb25faWQuXHJcbiAqL1xudmFyIHVzZUF1ZGlvVHJhY2sgPSBmdW5jdGlvbiB1c2VBdWRpb1RyYWNrKHBhcnRpY2lwYW50SWQpIHtcbiAgcmV0dXJuIHVzZU1lZGlhVHJhY2socGFydGljaXBhbnRJZCwgJ2F1ZGlvJyk7XG59O1xuXG4vKipcclxuICogSGVscGVyIGhvb2sgdG8gbWFpbnRhaW4gY3VzdG9tIGNhbGxGcmFtZSBpbnN0YW5jZXMgaW4gUmVhY3QgY29kZWJhc2VzLlxyXG4gKi9cbnZhciB1c2VDYWxsRnJhbWUgPSBmdW5jdGlvbiB1c2VDYWxsRnJhbWUocHJvcHMpIHtcbiAgcmV0dXJuIHVzZUNhbGxJbnN0YW5jZSgnY2FsbEZyYW1lJywgcHJvcHMpO1xufTtcblxudmFyIENQVUxvYWRTdGF0ZSA9IC8qI19fUFVSRV9fKi9hdG9tKHtcbiAgc3RhdGU6ICdsb3cnLFxuICByZWFzb246ICdub25lJ1xufSk7XG5DUFVMb2FkU3RhdGUuZGVidWdMYWJlbCA9IC8qI19fUFVSRV9fKi9qb3RhaURlYnVnTGFiZWwoJ2NwdS1sb2FkJyk7XG4vKipcclxuICogUmV0dXJucyB0aGUgY3VycmVudCBDUFUgbG9hZCBhcyByZXBvcnRlZCBieSBkYWlseS1qcyBbY3B1LWxvYWQtY2hhbmdlXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2V2ZW50cy9xdWFsaXR5LWV2ZW50cyNjcHUtbG9hZC1jaGFuZ2UpIGV2ZW50c1xyXG4gKiBhbmQgW2dldENwdUxvYWRTdGF0c10oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL2dldC1jcHUtbG9hZC1zdGF0cykuXHJcbiAqL1xudmFyIHVzZUNQVUxvYWQgPSBmdW5jdGlvbiB1c2VDUFVMb2FkKF90ZW1wKSB7XG4gIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgb25DUFVMb2FkQ2hhbmdlID0gX3JlZi5vbkNQVUxvYWRDaGFuZ2U7XG4gIHZhciBjcHUgPSB1c2VBdG9tVmFsdWUoQ1BVTG9hZFN0YXRlKTtcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIG1lZXRpbmdTdGF0ZSA9IHVzZU1lZXRpbmdTdGF0ZSgpO1xuICB2YXIgdXBkYXRlQ1BVTG9hZFN0YXRlID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChnZXQsIHNldCwgY3B1KSB7XG4gICAgdmFyIHByZXYgPSBnZXQoQ1BVTG9hZFN0YXRlKTsgLy8gR2V0IHRoZSBjdXJyZW50IENQVSBsb2FkIHN0YXRlXG4gICAgaWYgKGRlZXBFcXVhbChwcmV2LCBjcHUpKSByZXR1cm47IC8vIENoZWNrIGlmIHRoZSBwcmV2aW91cyBzdGF0ZSBpcyBlcXVhbCB0byB0aGUgY3VycmVudCBvbmVcbiAgICBzZXQoQ1BVTG9hZFN0YXRlLCBjcHUpOyAvLyBVcGRhdGUgdGhlIHN0YXRlIGlmIGRpZmZlcmVudFxuICB9LCBbXSkpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBtb3VudGVkID0gdHJ1ZTtcbiAgICBpZiAoIWRhaWx5IHx8IGRhaWx5LmlzRGVzdHJveWVkKCkgfHwgbWVldGluZ1N0YXRlICE9PSAnam9pbmVkLW1lZXRpbmcnKSByZXR1cm47XG4gICAgZGFpbHkuZ2V0Q3B1TG9hZFN0YXRzKCkudGhlbihmdW5jdGlvbiAoc3RhdHMpIHtcbiAgICAgIGlmICghbW91bnRlZCkgcmV0dXJuO1xuICAgICAgdXBkYXRlQ1BVTG9hZFN0YXRlKHtcbiAgICAgICAgc3RhdGU6IHN0YXRzLmNwdUxvYWRTdGF0ZSxcbiAgICAgICAgcmVhc29uOiBzdGF0cy5jcHVMb2FkU3RhdGVSZWFzb25cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgfTtcbiAgfSwgW2RhaWx5LCBtZWV0aW5nU3RhdGUsIHVwZGF0ZUNQVUxvYWRTdGF0ZV0pO1xuICB1c2VEYWlseUV2ZW50KCdjcHUtbG9hZC1jaGFuZ2UnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICB1cGRhdGVDUFVMb2FkU3RhdGUoe1xuICAgICAgc3RhdGU6IGV2LmNwdUxvYWRTdGF0ZSxcbiAgICAgIHJlYXNvbjogZXYuY3B1TG9hZFN0YXRlUmVhc29uXG4gICAgfSk7XG4gICAgb25DUFVMb2FkQ2hhbmdlID09IG51bGwgPyB2b2lkIDAgOiBvbkNQVUxvYWRDaGFuZ2UoZXYpO1xuICB9LCBbb25DUFVMb2FkQ2hhbmdlLCB1cGRhdGVDUFVMb2FkU3RhdGVdKSk7XG4gIHVzZURlYnVnVmFsdWUoY3B1KTtcbiAgcmV0dXJuIGNwdTtcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIGEgbWVldGluZydzIGxhc3Qga25vd24gZXJyb3JzLlxyXG4gKi9cbnZhciB1c2VEYWlseUVycm9yID0gZnVuY3Rpb24gdXNlRGFpbHlFcnJvcigpIHtcbiAgdmFyIG1lZXRpbmdFcnJvciA9IHVzZUF0b21WYWx1ZShtZWV0aW5nRXJyb3JTdGF0ZSk7XG4gIHZhciBub25GYXRhbEVycm9yID0gdXNlQXRvbVZhbHVlKG5vbkZhdGFsRXJyb3JTdGF0ZSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgbWVldGluZ0Vycm9yOiBtZWV0aW5nRXJyb3IsXG4gICAgbm9uRmF0YWxFcnJvcjogbm9uRmF0YWxFcnJvclxuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcclxuICogVGhpcyBob29rIGFsbG93cyBhY2Nlc3MgdG8gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIncyBkZXZpY2VzIGFuZCB0aGVpciBzdGF0ZS5cclxuICovXG52YXIgdXNlRGV2aWNlcyA9IGZ1bmN0aW9uIHVzZURldmljZXMoKSB7XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciBjYW1TdGF0ZSA9IHVzZUF0b21WYWx1ZShnZW5lcmFsQ2FtZXJhU3RhdGUpO1xuICB2YXIgbWljU3RhdGUgPSB1c2VBdG9tVmFsdWUoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSk7XG4gIHZhciBjYW1EZXZpY2VzID0gdXNlQXRvbVZhbHVlKGNhbWVyYURldmljZXNTdGF0ZSk7XG4gIHZhciBtaWNEZXZpY2VzID0gdXNlQXRvbVZhbHVlKG1pY3JvcGhvbmVEZXZpY2VzU3RhdGUpO1xuICB2YXIgc3BlYWtlckRldmljZXMgPSB1c2VBdG9tVmFsdWUoc3BlYWtlckRldmljZXNTdGF0ZSk7XG4gIHZhciBjYW1lcmFFcnJvciA9IHVzZUF0b21WYWx1ZShsYXN0Q2FtZXJhRXJyb3JTdGF0ZSk7XG4gIHZhciBfdXNlQ29udGV4dCA9IHVzZUNvbnRleHQoRGFpbHlEZXZpY2VzQ29udGV4dCksXG4gICAgcmVmcmVzaERldmljZXMgPSBfdXNlQ29udGV4dC5yZWZyZXNoRGV2aWNlcztcbiAgLyoqXHJcbiAgICogU2V0cyB2aWRlbyBpbnB1dCBkZXZpY2UgdG8gZ2l2ZW4gZGV2aWNlSWQuXHJcbiAgICovXG4gIHZhciBzZXRDYW1lcmEgPSB1c2VDYWxsYmFjayggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoZGV2aWNlSWQpIHtcbiAgICAgIHlpZWxkIGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS5zZXRJbnB1dERldmljZXNBc3luYyh7XG4gICAgICAgIGF1ZGlvRGV2aWNlSWQ6IG51bGwsXG4gICAgICAgIHZpZGVvRGV2aWNlSWQ6IGRldmljZUlkXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7XG4gICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0oKSwgW2RhaWx5XSk7XG4gIC8qKlxyXG4gICAqIFNldHMgYXVkaW8gaW5wdXQgZGV2aWNlIHRvIGdpdmVuIGRldmljZUlkLlxyXG4gICAqL1xuICB2YXIgc2V0TWljcm9waG9uZSA9IHVzZUNhbGxiYWNrKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoZGV2aWNlSWQpIHtcbiAgICAgIHlpZWxkIGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS5zZXRJbnB1dERldmljZXNBc3luYyh7XG4gICAgICAgIGF1ZGlvRGV2aWNlSWQ6IGRldmljZUlkLFxuICAgICAgICB2aWRlb0RldmljZUlkOiBudWxsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF94Mikge1xuICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSgpLCBbZGFpbHldKTtcbiAgLyoqXHJcbiAgICogU2V0cyBhdWRpbyBvdXRwdXQgZGV2aWNlIHRvIGdpdmVuIGRldmljZUlkLlxyXG4gICAqL1xuICB2YXIgc2V0U3BlYWtlciA9IHVzZUNhbGxiYWNrKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoZGV2aWNlSWQpIHtcbiAgICAgIHlpZWxkIGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS5zZXRPdXRwdXREZXZpY2VBc3luYyh7XG4gICAgICAgIG91dHB1dERldmljZUlkOiBkZXZpY2VJZFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHtcbiAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0oKSwgW2RhaWx5XSk7XG4gIHZhciBlcnJvclN0YXRlcyA9IFsnYmxvY2tlZCcsICdpbi11c2UnLCAnbm90LWZvdW5kJywgJ2NvbnN0cmFpbnRzLWludmFsaWQnLCAnY29uc3RyYWludHMtbm9uZS1zcGVjaWZpZWQnLCAndW5kZWZpbmVkLW1lZGlhZGV2aWNlcycsICd1bmtub3duJ107XG4gIHZhciByZXN1bHQgPSB7XG4gICAgLyoqXHJcbiAgICAgKiBNb3N0IHJlY2VudCBlcnJvciBvYmplY3QgZW1pdHRlZCB2aWEgW2NhbWVyYS1lcnJvciBldmVudF0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9ldmVudHMvbWVldGluZy1ldmVudHMjY2FtZXJhLWVycm9yKS5cclxuICAgICAqL1xuICAgIGNhbWVyYUVycm9yOiBjYW1lcmFFcnJvcixcbiAgICAvKipcclxuICAgICAqIEEgbGlzdCBvZiB0aGUgdXNlcidzIGNhbWVyYSAodmlkZW9pbnB1dCkgZGV2aWNlcy4gU2VlIFtNZWRpYURldmljZUluZm9dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYURldmljZUluZm8pIGZvciBtb3JlIGluZm8uXHJcbiAgICAgKi9cbiAgICBjYW1lcmFzOiBjYW1EZXZpY2VzLFxuICAgIC8qKlxyXG4gICAgICogVGhlIGdlbmVyYWwgc3RhdGUgZm9yIGNhbWVyYSBhY2Nlc3MuXHJcbiAgICAgKi9cbiAgICBjYW1TdGF0ZTogY2FtU3RhdGUsXG4gICAgLyoqXHJcbiAgICAgKiBIb2xkcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGNhbWVyYS5cclxuICAgICAqL1xuICAgIGN1cnJlbnRDYW06IGNhbURldmljZXMuZmluZChmdW5jdGlvbiAoY2FtKSB7XG4gICAgICByZXR1cm4gY2FtLnNlbGVjdGVkO1xuICAgIH0pLFxuICAgIC8qKlxyXG4gICAgICogSG9sZHMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBtaWNyb3Bob25lLlxyXG4gICAgICovXG4gICAgY3VycmVudE1pYzogbWljRGV2aWNlcy5maW5kKGZ1bmN0aW9uIChtaWMpIHtcbiAgICAgIHJldHVybiBtaWMuc2VsZWN0ZWQ7XG4gICAgfSksXG4gICAgLyoqXHJcbiAgICAgKiBIb2xkcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHNwZWFrZXIuXHJcbiAgICAgKi9cbiAgICBjdXJyZW50U3BlYWtlcjogc3BlYWtlckRldmljZXMuZmluZChmdW5jdGlvbiAoc3BlYWtlcikge1xuICAgICAgcmV0dXJuIHNwZWFrZXIuc2VsZWN0ZWQ7XG4gICAgfSksXG4gICAgLyoqXHJcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGVyZSdzIGFuIGlzc3VlIHdpdGggY2FtZXJhIGRldmljZXMuXHJcbiAgICAgKi9cbiAgICBoYXNDYW1FcnJvcjogZXJyb3JTdGF0ZXMuaW5jbHVkZXMoY2FtU3RhdGUpLFxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlcmUncyBhbiBpc3N1ZSB3aXRoIG1pY3JvcGhvbmUgZGV2aWNlcy5cclxuICAgICAqL1xuICAgIGhhc01pY0Vycm9yOiBlcnJvclN0YXRlcy5pbmNsdWRlcyhtaWNTdGF0ZSksXG4gICAgLyoqXHJcbiAgICAgKiBBIGxpc3Qgb2YgdGhlIHVzZXIncyBtaWNyb3Bob25lIChhdWRpb2lucHV0KSBkZXZpY2VzLiBTZWUgW01lZGlhRGV2aWNlSW5mb10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhRGV2aWNlSW5mbykgZm9yIG1vcmUgaW5mby5cclxuICAgICAqL1xuICAgIG1pY3JvcGhvbmVzOiBtaWNEZXZpY2VzLFxuICAgIC8qKlxyXG4gICAgICogVGhlIGdlbmVyYWwgc3RhdGUgZm9yIG1pY3JvcGhvbmUgYWNjZXNzLlxyXG4gICAgICovXG4gICAgbWljU3RhdGU6IG1pY1N0YXRlLFxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaGVzIHRoZSBsaXN0IG9mIGRldmljZXMgdXNpbmcgW2VudW1lcmF0ZURldmljZXNdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvaW5zdGFuY2UtbWV0aG9kcy9lbnVtZXJhdGUtZGV2aWNlcykuXHJcbiAgICAgKi9cbiAgICByZWZyZXNoRGV2aWNlczogcmVmcmVzaERldmljZXMsXG4gICAgLyoqXHJcbiAgICAgKiBBbGxvd3MgdG8gc3dpdGNoIHRvIHRoZSBjYW1lcmEgd2l0aCB0aGUgc3BlY2lmaWVkIGRldmljZUlkLiBDYWxscyBbc2V0SW5wdXREZXZpY2VzQXN5bmNdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvaW5zdGFuY2UtbWV0aG9kcy9zZXQtaW5wdXQtZGV2aWNlcy1hc3luYykgaW50ZXJuYWxseS5cclxuICAgICAqL1xuICAgIHNldENhbWVyYTogc2V0Q2FtZXJhLFxuICAgIC8qKlxyXG4gICAgICogQWxsb3dzIHRvIHN3aXRjaCB0byB0aGUgbWljcm9waG9uZSB3aXRoIHRoZSBzcGVjaWZpZWQgZGV2aWNlSWQuIENhbGxzIFtzZXRJbnB1dERldmljZXNBc3luY10oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL3NldC1pbnB1dC1kZXZpY2VzLWFzeW5jKSBpbnRlcm5hbGx5LlxyXG4gICAgICovXG4gICAgc2V0TWljcm9waG9uZTogc2V0TWljcm9waG9uZSxcbiAgICAvKipcclxuICAgICAqIEFsbG93cyB0byBzd2l0Y2ggdG8gdGhlIHNwZWFrZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGRldmljZUlkLiBDYWxscyBbc2V0T3V0cHV0RGV2aWNlXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2luc3RhbmNlLW1ldGhvZHMvc2V0LW91dHB1dC1kZXZpY2UpIGludGVybmFsbHkuXHJcbiAgICAgKi9cbiAgICBzZXRTcGVha2VyOiBzZXRTcGVha2VyLFxuICAgIC8qKlxyXG4gICAgICogQSBsaXN0IG9mIHRoZSB1c2VyJ3Mgc3BlYWtlciAoYXVkaW9vdXRwdXQpIGRldmljZXMuIFNlZSBbTWVkaWFEZXZpY2VJbmZvXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTWVkaWFEZXZpY2VJbmZvKSBmb3IgbW9yZSBpbmZvLlxyXG4gICAgICovXG4gICAgc3BlYWtlcnM6IHNwZWFrZXJEZXZpY2VzXG4gIH07XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBpbnB1dFNldHRpbmdzU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShudWxsKTtcbmlucHV0U2V0dGluZ3NTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgnaW5wdXQtc2V0dGluZ3MnKTtcbnZhciB1c2VJbnB1dFNldHRpbmdzID0gZnVuY3Rpb24gdXNlSW5wdXRTZXR0aW5ncyhfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uRXJyb3IgPSBfcmVmLm9uRXJyb3IsXG4gICAgb25JbnB1dFNldHRpbmdzVXBkYXRlZCA9IF9yZWYub25JbnB1dFNldHRpbmdzVXBkYXRlZDtcbiAgdmFyIGlucHV0U2V0dGluZ3MgPSB1c2VBdG9tVmFsdWUoaW5wdXRTZXR0aW5nc1N0YXRlKTtcbiAgdmFyIF91c2VEYWlseUVycm9yID0gdXNlRGFpbHlFcnJvcigpLFxuICAgIG5vbkZhdGFsRXJyb3IgPSBfdXNlRGFpbHlFcnJvci5ub25GYXRhbEVycm9yO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgdXBkYXRlSW5wdXRTZXR0aW5nc1N0YXRlID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGlucHV0U2V0dGluZ3MpIHtcbiAgICBzZXQoaW5wdXRTZXR0aW5nc1N0YXRlLCBpbnB1dFNldHRpbmdzKTtcbiAgfSwgW10pKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgZGFpbHkuZ2V0SW5wdXRTZXR0aW5ncygpLnRoZW4odXBkYXRlSW5wdXRTZXR0aW5nc1N0YXRlKTtcbiAgfSwgW2RhaWx5LCB1cGRhdGVJbnB1dFNldHRpbmdzU3RhdGVdKTtcbiAgLyoqXHJcbiAgICogSGFuZGxlICdpbnB1dC1zZXR0aW5ncy11cGRhdGVkJyBldmVudHMuXHJcbiAgICovXG4gIHVzZURhaWx5RXZlbnQoJ2lucHV0LXNldHRpbmdzLXVwZGF0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICB1cGRhdGVJbnB1dFNldHRpbmdzU3RhdGUoZXYuaW5wdXRTZXR0aW5ncyk7XG4gICAgb25JbnB1dFNldHRpbmdzVXBkYXRlZCA9PSBudWxsID8gdm9pZCAwIDogb25JbnB1dFNldHRpbmdzVXBkYXRlZChldik7XG4gIH0sIFtvbklucHV0U2V0dGluZ3NVcGRhdGVkLCB1cGRhdGVJbnB1dFNldHRpbmdzU3RhdGVdKSk7XG4gIC8qKlxyXG4gICAqIEhhbmRsZSBub25mYXRhbCBlcnJvcnMgb2YgdHlwZSAnaW5wdXQtc2V0dGluZ3MtZXJyb3InLlxyXG4gICAqL1xuICB1c2VEYWlseUV2ZW50KCdub25mYXRhbC1lcnJvcicsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmIChldi50eXBlICE9PSAnaW5wdXQtc2V0dGluZ3MtZXJyb3InKSByZXR1cm47XG4gICAgb25FcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25FcnJvcihldik7XG4gIH0sIFtvbkVycm9yXSkpO1xuICAvKipcclxuICAgKiBDYWxscyBkYWlseS51cGRhdGVJbnB1dFNldHRpbmdzIGludGVybmFsbHkuXHJcbiAgICovXG4gIHZhciB1cGRhdGVJbnB1dFNldHRpbmdzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS51cGRhdGVJbnB1dFNldHRpbmdzLmFwcGx5KGRhaWx5LCBhcmdzKTtcbiAgfSwgW2RhaWx5XSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgZXJyb3JNc2c6IChub25GYXRhbEVycm9yID09IG51bGwgPyB2b2lkIDAgOiBub25GYXRhbEVycm9yLnR5cGUpID09PSAnaW5wdXQtc2V0dGluZ3MtZXJyb3InID8gbm9uRmF0YWxFcnJvci5lcnJvck1zZyA6IG51bGwsXG4gICAgaW5wdXRTZXR0aW5nczogaW5wdXRTZXR0aW5ncyxcbiAgICB1cGRhdGVJbnB1dFNldHRpbmdzOiB1cGRhdGVJbnB1dFNldHRpbmdzXG4gIH07XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxyXG4gKiBUaGlzIGhvb2sgYWxsb3dzIHRvIHNldHVwIFtsaXZlIHN0cmVhbWluZyBldmVudHNdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvZXZlbnRzL2xpdmUtc3RyZWFtaW5nLWV2ZW50cyksXHJcbiAqIGFzIHdlbGwgYXMgc3RhcnRpbmcsIHN0b3BwaW5nIGFuZCB1cGRhdGluZyBsaXZlIHN0cmVhbXMuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgbGl2ZSBzdHJlYW1pbmcgc3RhdGUsIGluY2wuIHRoZSBjdXJyZW50IGxheW91dCBhbmQgcG90ZW50aWFsIGVycm9yTXNnLlxyXG4gKi9cbnZhciB1c2VMaXZlU3RyZWFtaW5nID0gZnVuY3Rpb24gdXNlTGl2ZVN0cmVhbWluZyhfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uTGl2ZVN0cmVhbWluZ0Vycm9yID0gX3JlZi5vbkxpdmVTdHJlYW1pbmdFcnJvcixcbiAgICBvbkxpdmVTdHJlYW1pbmdTdGFydGVkID0gX3JlZi5vbkxpdmVTdHJlYW1pbmdTdGFydGVkLFxuICAgIG9uTGl2ZVN0cmVhbWluZ1N0b3BwZWQgPSBfcmVmLm9uTGl2ZVN0cmVhbWluZ1N0b3BwZWQsXG4gICAgb25MaXZlU3RyZWFtaW5nVXBkYXRlZCA9IF9yZWYub25MaXZlU3RyZWFtaW5nVXBkYXRlZCxcbiAgICBvbkxpdmVTdHJlYW1pbmdXYXJuaW5nID0gX3JlZi5vbkxpdmVTdHJlYW1pbmdXYXJuaW5nO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgc3RhdGUgPSB1c2VBdG9tVmFsdWUobGl2ZVN0cmVhbWluZ1N0YXRlKTtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctc3RhcnRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uTGl2ZVN0cmVhbWluZ1N0YXJ0ZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTGl2ZVN0cmVhbWluZ1N0YXJ0ZWQoZXYpO1xuICB9LCBbb25MaXZlU3RyZWFtaW5nU3RhcnRlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctc3RvcHBlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uTGl2ZVN0cmVhbWluZ1N0b3BwZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTGl2ZVN0cmVhbWluZ1N0b3BwZWQoZXYpO1xuICB9LCBbb25MaXZlU3RyZWFtaW5nU3RvcHBlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctdXBkYXRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uTGl2ZVN0cmVhbWluZ1VwZGF0ZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTGl2ZVN0cmVhbWluZ1VwZGF0ZWQoZXYpO1xuICB9LCBbb25MaXZlU3RyZWFtaW5nVXBkYXRlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctZXJyb3InLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBvbkxpdmVTdHJlYW1pbmdFcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25MaXZlU3RyZWFtaW5nRXJyb3IoZXYpO1xuICB9LCBbb25MaXZlU3RyZWFtaW5nRXJyb3JdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ25vbmZhdGFsLWVycm9yJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgaWYgKGV2LnR5cGUgIT09ICdsaXZlLXN0cmVhbWluZy13YXJuaW5nJykgcmV0dXJuO1xuICAgIG9uTGl2ZVN0cmVhbWluZ1dhcm5pbmcgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTGl2ZVN0cmVhbWluZ1dhcm5pbmcoZXYpO1xuICB9LCBbb25MaXZlU3RyZWFtaW5nV2FybmluZ10pKTtcbiAgdmFyIHN0YXJ0TGl2ZVN0cmVhbWluZyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgZGFpbHkuc3RhcnRMaXZlU3RyZWFtaW5nLmFwcGx5KGRhaWx5LCBhcmd1bWVudHMpO1xuICB9LCBbZGFpbHldKTtcbiAgdmFyIHN0b3BMaXZlU3RyZWFtaW5nID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS5zdG9wTGl2ZVN0cmVhbWluZy5hcHBseShkYWlseSwgYXJndW1lbnRzKTtcbiAgfSwgW2RhaWx5XSk7XG4gIHZhciB1cGRhdGVMaXZlU3RyZWFtaW5nID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS51cGRhdGVMaXZlU3RyZWFtaW5nLmFwcGx5KGRhaWx5LCBhcmd1bWVudHMpO1xuICB9LCBbZGFpbHldKTtcbiAgdmFyIHJlc3VsdCA9IF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgIHN0YXJ0TGl2ZVN0cmVhbWluZzogc3RhcnRMaXZlU3RyZWFtaW5nLFxuICAgIHN0b3BMaXZlU3RyZWFtaW5nOiBzdG9wTGl2ZVN0cmVhbWluZyxcbiAgICB1cGRhdGVMaXZlU3RyZWFtaW5nOiB1cGRhdGVMaXZlU3RyZWFtaW5nXG4gIH0pO1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcclxuICogUmV0dXJucyB0aGUgW3BhcnRpY2lwYW50cygpIG9iamVjdF0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL3BhcnRpY2lwYW50cykgZm9yIHRoZSBsb2NhbCB1c2VyLlxyXG4gKiBAZGVwcmVjYXRlZCBVc2UgW3VzZUxvY2FsU2Vzc2lvbklkXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LXJlYWN0L3VzZS1sb2NhbC1zZXNzaW9uLWlkKSBpbnN0ZWFkLlxyXG4gKi9cbnZhciB1c2VMb2NhbFBhcnRpY2lwYW50ID0gZnVuY3Rpb24gdXNlTG9jYWxQYXJ0aWNpcGFudCgpIHtcbiAgdmFyIGxvY2FsSWQgPSB1c2VBdG9tVmFsdWUobG9jYWxJZFN0YXRlKTtcbiAgdmFyIGxvY2FsUGFydGljaXBhbnQgPSB1c2VQYXJ0aWNpcGFudChsb2NhbElkKTtcbiAgdXNlRGVidWdWYWx1ZShsb2NhbFBhcnRpY2lwYW50KTtcbiAgcmV0dXJuIGxvY2FsUGFydGljaXBhbnQ7XG59O1xuXG4vKipcclxuICogUmV0dXJucyBhIG1lZXRpbmcncyBjdXJyZW50IHNlc3Npb24gZGF0YSBhbmQgdG9wb2xvZ3kuXHJcbiAqL1xudmFyIHVzZU1lZXRpbmdTZXNzaW9uU3RhdGUgPSBmdW5jdGlvbiB1c2VNZWV0aW5nU2Vzc2lvblN0YXRlKF90ZW1wKSB7XG4gIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgb25FcnJvciA9IF9yZWYub25FcnJvcjtcbiAgdmFyIG1lZXRpbmdTZXNzaW9uU3RhdGUgPSB1c2VBdG9tVmFsdWUobWVldGluZ1Nlc3Npb25EYXRhU3RhdGUpO1xuICB1c2VEYWlseUV2ZW50KCdub25mYXRhbC1lcnJvcicsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmIChldi50eXBlICE9PSAnbWVldGluZy1zZXNzaW9uLWRhdGEtZXJyb3InKSByZXR1cm47XG4gICAgb25FcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25FcnJvcihldik7XG4gIH0sIFtvbkVycm9yXSkpO1xuICB2YXIgcmVzdWx0ID0ge1xuICAgIGRhdGE6IG1lZXRpbmdTZXNzaW9uU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IG1lZXRpbmdTZXNzaW9uU3RhdGUuZGF0YSxcbiAgICB0b3BvbG9neTogbWVldGluZ1Nlc3Npb25TdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogbWVldGluZ1Nlc3Npb25TdGF0ZS50b3BvbG9neVxuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcclxuICogUmV0dXJucyBjdXJyZW50IGluZm9ybWF0aW9uIGFib3V0IG5ldHdvcmsgcXVhbGl0eSBhbmQgdG9wb2xvZ3kuXHJcbiAqIEFsbG93cyB0byBzZXR1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGRhaWx5J3MgW25ldHdvcmsgZXZlbnRzXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2V2ZW50cy9uZXR3b3JrLWV2ZW50cykuXHJcbiAqL1xudmFyIHVzZU5ldHdvcmsgPSBmdW5jdGlvbiB1c2VOZXR3b3JrKF90ZW1wKSB7XG4gIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgb25OZXR3b3JrQ29ubmVjdGlvbiA9IF9yZWYub25OZXR3b3JrQ29ubmVjdGlvbixcbiAgICBvbk5ldHdvcmtRdWFsaXR5Q2hhbmdlID0gX3JlZi5vbk5ldHdvcmtRdWFsaXR5Q2hhbmdlO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgdG9wb2xvZ3kgPSB1c2VBdG9tVmFsdWUodG9wb2xvZ3lTdGF0ZSk7XG4gIHZhciBxdWFsaXR5ID0gdXNlQXRvbVZhbHVlKG5ldHdvcmtRdWFsaXR5U3RhdGUpO1xuICB2YXIgdGhyZXNob2xkID0gdXNlQXRvbVZhbHVlKG5ldHdvcmtUaHJlc2hvbGRTdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ25ldHdvcmstY29ubmVjdGlvbicsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uTmV0d29ya0Nvbm5lY3Rpb24gPT0gbnVsbCA/IHZvaWQgMCA6IG9uTmV0d29ya0Nvbm5lY3Rpb24oZXYpO1xuICB9LCBbb25OZXR3b3JrQ29ubmVjdGlvbl0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbmV0d29yay1xdWFsaXR5LWNoYW5nZScsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uTmV0d29ya1F1YWxpdHlDaGFuZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTmV0d29ya1F1YWxpdHlDaGFuZ2UoZXYpO1xuICB9LCBbb25OZXR3b3JrUXVhbGl0eUNoYW5nZV0pKTtcbiAgdmFyIGdldFN0YXRzID0gdXNlQ2FsbGJhY2soIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcihmdW5jdGlvbiogKCkge1xuICAgIHZhciBuZXdTdGF0cyA9IHlpZWxkIGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS5nZXROZXR3b3JrU3RhdHMoKTtcbiAgICByZXR1cm4gbmV3U3RhdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG5ld1N0YXRzLnN0YXRzO1xuICB9KSwgW2RhaWx5XSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgZ2V0U3RhdHM6IGdldFN0YXRzLFxuICAgIHF1YWxpdHk6IHF1YWxpdHksXG4gICAgdGhyZXNob2xkOiB0aHJlc2hvbGQsXG4gICAgdG9wb2xvZ3k6IHRvcG9sb2d5XG4gIH07XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBwYXJ0aWNpcGFudENvdW50c1N0YXRlID0gLyojX19QVVJFX18qL2F0b20oe1xuICBoaWRkZW46IDAsXG4gIHByZXNlbnQ6IDBcbn0pO1xucGFydGljaXBhbnRDb3VudHNTdGF0ZS5kZWJ1Z0xhYmVsID0gLyojX19QVVJFX18qL2pvdGFpRGVidWdMYWJlbCgncGFydGljaXBhbnQtY291bnRzJyk7XG4vKipcclxuICogUmV0dXJucyBwYXJ0aWNpcGFudCBjb3VudHMgZm9yIGhpZGRlbiBhbmQgcHJlc2VudCBwYXJ0aWNpcGFudHMuXHJcbiAqL1xudmFyIHVzZVBhcnRpY2lwYW50Q291bnRzID0gZnVuY3Rpb24gdXNlUGFydGljaXBhbnRDb3VudHMoX3RlbXApIHtcbiAgdmFyIF9yZWYgPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcCxcbiAgICBvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZCA9IF9yZWYub25QYXJ0aWNpcGFudENvdW50c1VwZGF0ZWQ7XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciBwYXJ0aWNpcGFudENvdW50cyA9IHVzZUF0b21WYWx1ZShwYXJ0aWNpcGFudENvdW50c1N0YXRlKTtcbiAgdmFyIHVwZGF0ZUNvdW50cyA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCBjb3VudHMpIHtcbiAgICBzZXQocGFydGljaXBhbnRDb3VudHNTdGF0ZSwgY291bnRzKTtcbiAgfSwgW10pKTtcbiAgdXNlRGFpbHlFdmVudCgncGFydGljaXBhbnQtY291bnRzLXVwZGF0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICB1cGRhdGVDb3VudHMoZXYucGFydGljaXBhbnRDb3VudHMpO1xuICAgIG9uUGFydGljaXBhbnRDb3VudHNVcGRhdGVkID09IG51bGwgPyB2b2lkIDAgOiBvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZChldik7XG4gIH0sIFtvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZCwgdXBkYXRlQ291bnRzXSkpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGFpbHkgfHwgZGFpbHkuaXNEZXN0cm95ZWQoKSkgcmV0dXJuO1xuICAgIHVwZGF0ZUNvdW50cyhkYWlseS5wYXJ0aWNpcGFudENvdW50cygpKTtcbiAgfSwgW2RhaWx5LCB1cGRhdGVDb3VudHNdKTtcbiAgdXNlRGVidWdWYWx1ZShwYXJ0aWNpcGFudENvdW50cyk7XG4gIHJldHVybiBwYXJ0aWNpcGFudENvdW50cztcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIHBhcnNlZCBwZXJtaXNzaW9ucyBmb3IgYSBnaXZlbiBwYXJ0aWNpcGFudC5cclxuICogSW4gY2FzZSBubyBgc2Vzc2lvbklkYCBpcyBwYXNzZWQsIHRoZSBob29rIHJldHVybnMgcGVybWlzc2lvbnMgZm9yIHRoZSBsb2NhbCBwYXJ0aWNpcGFudC5cclxuICogQHBhcmFtIHNlc3Npb25JZCBUaGUgcGFydGljaXBhbnQncyBzZXNzaW9uX2lkIChvcHRpb25hbClcclxuICovXG52YXIgdXNlUGVybWlzc2lvbnMgPSBmdW5jdGlvbiB1c2VQZXJtaXNzaW9ucyhzZXNzaW9uSWQpIHtcbiAgdmFyIF9wZXJtaXNzaW9ucyRjYW5TZW5kLCBfcGVybWlzc2lvbnMkY2FuU2VuZDIsIF9wZXJtaXNzaW9ucyRjYW5TZW5kMywgX3Blcm1pc3Npb25zJGNhblNlbmQ0LCBfcGVybWlzc2lvbnMkY2FuU2VuZDUsIF9wZXJtaXNzaW9ucyRjYW5TZW5kNiwgX3Blcm1pc3Npb25zJGNhbkFkbWluLCBfcGVybWlzc2lvbnMkY2FuQWRtaW4yLCBfcGVybWlzc2lvbnMkY2FuQWRtaW4zO1xuICB2YXIgbG9jYWxTZXNzaW9uSWQgPSB1c2VMb2NhbFNlc3Npb25JZCgpO1xuICB2YXIgcGVybWlzc2lvbnMgPSB1c2VQYXJ0aWNpcGFudFByb3BlcnR5KHNlc3Npb25JZCAhPSBudWxsID8gc2Vzc2lvbklkIDogbG9jYWxTZXNzaW9uSWQsICdwZXJtaXNzaW9ucycpO1xuICB2YXIgY2FuU2VuZEF1ZGlvID0gdHlwZW9mIChwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCkgPT09ICdib29sZWFuJyA/IHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kIDogQm9vbGVhbihwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogKF9wZXJtaXNzaW9ucyRjYW5TZW5kID0gcGVybWlzc2lvbnMuY2FuU2VuZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9wZXJtaXNzaW9ucyRjYW5TZW5kLmhhcygnYXVkaW8nKSk7XG4gIHZhciBjYW5TZW5kVmlkZW8gPSB0eXBlb2YgKHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kKSA9PT0gJ2Jvb2xlYW4nID8gcGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQgOiBCb29sZWFuKHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiAoX3Blcm1pc3Npb25zJGNhblNlbmQyID0gcGVybWlzc2lvbnMuY2FuU2VuZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9wZXJtaXNzaW9ucyRjYW5TZW5kMi5oYXMoJ3ZpZGVvJykpO1xuICB2YXIgY2FuU2VuZEN1c3RvbUF1ZGlvID0gdHlwZW9mIChwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCkgPT09ICdib29sZWFuJyA/IHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kIDogQm9vbGVhbihwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogKF9wZXJtaXNzaW9ucyRjYW5TZW5kMyA9IHBlcm1pc3Npb25zLmNhblNlbmQpID09IG51bGwgPyB2b2lkIDAgOiBfcGVybWlzc2lvbnMkY2FuU2VuZDMuaGFzKCdjdXN0b21BdWRpbycpKTtcbiAgdmFyIGNhblNlbmRDdXN0b21WaWRlbyA9IHR5cGVvZiAocGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQpID09PSAnYm9vbGVhbicgPyBwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCA6IEJvb2xlYW4ocGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IChfcGVybWlzc2lvbnMkY2FuU2VuZDQgPSBwZXJtaXNzaW9ucy5jYW5TZW5kKSA9PSBudWxsID8gdm9pZCAwIDogX3Blcm1pc3Npb25zJGNhblNlbmQ0LmhhcygnY3VzdG9tVmlkZW8nKSk7XG4gIHZhciBjYW5TZW5kU2NyZWVuQXVkaW8gPSB0eXBlb2YgKHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kKSA9PT0gJ2Jvb2xlYW4nID8gcGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQgOiBCb29sZWFuKHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiAoX3Blcm1pc3Npb25zJGNhblNlbmQ1ID0gcGVybWlzc2lvbnMuY2FuU2VuZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9wZXJtaXNzaW9ucyRjYW5TZW5kNS5oYXMoJ3NjcmVlbkF1ZGlvJykpO1xuICB2YXIgY2FuU2VuZFNjcmVlblZpZGVvID0gdHlwZW9mIChwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCkgPT09ICdib29sZWFuJyA/IHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kIDogQm9vbGVhbihwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogKF9wZXJtaXNzaW9ucyRjYW5TZW5kNiA9IHBlcm1pc3Npb25zLmNhblNlbmQpID09IG51bGwgPyB2b2lkIDAgOiBfcGVybWlzc2lvbnMkY2FuU2VuZDYuaGFzKCdzY3JlZW5WaWRlbycpKTtcbiAgdmFyIGNhbkFkbWluUGFydGljaXBhbnRzID0gdHlwZW9mIChwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuQWRtaW4pID09PSAnYm9vbGVhbicgPyBwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuQWRtaW4gOiBCb29sZWFuKHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiAoX3Blcm1pc3Npb25zJGNhbkFkbWluID0gcGVybWlzc2lvbnMuY2FuQWRtaW4pID09IG51bGwgPyB2b2lkIDAgOiBfcGVybWlzc2lvbnMkY2FuQWRtaW4uaGFzKCdwYXJ0aWNpcGFudHMnKSk7XG4gIHZhciBjYW5BZG1pblN0cmVhbWluZyA9IHR5cGVvZiAocGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhbkFkbWluKSA9PT0gJ2Jvb2xlYW4nID8gcGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhbkFkbWluIDogQm9vbGVhbihwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogKF9wZXJtaXNzaW9ucyRjYW5BZG1pbjIgPSBwZXJtaXNzaW9ucy5jYW5BZG1pbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9wZXJtaXNzaW9ucyRjYW5BZG1pbjIuaGFzKCdzdHJlYW1pbmcnKSk7XG4gIHZhciBjYW5BZG1pblRyYW5zY3JpcHRpb24gPSB0eXBlb2YgKHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5BZG1pbikgPT09ICdib29sZWFuJyA/IHBlcm1pc3Npb25zID09IG51bGwgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5BZG1pbiA6IEJvb2xlYW4ocGVybWlzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IChfcGVybWlzc2lvbnMkY2FuQWRtaW4zID0gcGVybWlzc2lvbnMuY2FuQWRtaW4pID09IG51bGwgPyB2b2lkIDAgOiBfcGVybWlzc2lvbnMkY2FuQWRtaW4zLmhhcygndHJhbnNjcmlwdGlvbicpKTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICBjYW5BZG1pblBhcnRpY2lwYW50czogY2FuQWRtaW5QYXJ0aWNpcGFudHMsXG4gICAgY2FuQWRtaW5TdHJlYW1pbmc6IGNhbkFkbWluU3RyZWFtaW5nLFxuICAgIGNhbkFkbWluVHJhbnNjcmlwdGlvbjogY2FuQWRtaW5UcmFuc2NyaXB0aW9uLFxuICAgIGNhblNlbmRBdWRpbzogY2FuU2VuZEF1ZGlvLFxuICAgIGNhblNlbmRDdXN0b21BdWRpbzogY2FuU2VuZEN1c3RvbUF1ZGlvLFxuICAgIGNhblNlbmRDdXN0b21WaWRlbzogY2FuU2VuZEN1c3RvbVZpZGVvLFxuICAgIGNhblNlbmRTY3JlZW5BdWRpbzogY2FuU2VuZFNjcmVlbkF1ZGlvLFxuICAgIGNhblNlbmRTY3JlZW5WaWRlbzogY2FuU2VuZFNjcmVlblZpZGVvLFxuICAgIGNhblNlbmRWaWRlbzogY2FuU2VuZFZpZGVvLFxuICAgIGhhc1ByZXNlbmNlOiBwZXJtaXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogcGVybWlzc2lvbnMuaGFzUHJlc2VuY2UsXG4gICAgcGVybWlzc2lvbnM6IHBlcm1pc3Npb25zXG4gIH07XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc1N0YXRlID0gLyojX19QVVJFX18qL2F0b21GYW1pbHkoZnVuY3Rpb24gKGlkKSB7XG4gIHZhciBwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc0F0b20gPSBhdG9tKHt9LCBmdW5jdGlvbiAoX2dldCwgc2V0LCBuZXdWYWx1ZSkge1xuICAgIHNldChwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc1N0YXRlKGlkKSwgbmV3VmFsdWUpO1xuICB9KTtcbiAgcGFydGljaXBhbnRSZWNlaXZlU2V0dGluZ3NBdG9tLmRlYnVnTGFiZWwgPSBqb3RhaURlYnVnTGFiZWwoXCJwYXJ0aWNpcGFudC1yZWNlaXZlLXNldHRpbmdzLVwiICsgaWQpO1xuICByZXR1cm4gcGFydGljaXBhbnRSZWNlaXZlU2V0dGluZ3NBdG9tO1xufSk7XG4vKipcclxuICogQWxsb3dzIHRvIHJlYWQgYW5kIHNldCByZWNlaXZlU2V0dGluZ3MuXHJcbiAqIEluIGNhc2UgcmVjZWl2ZVNldHRpbmdzIGZvciBwYXJ0aWNpcGFudCBzcGVjaWZpZWQgYnkgaWQgYXJlIGVtcHR5LCBub3Qgc2V0IG9yICdpbmhlcml0JyxcclxuICogYmFzZSByZWNlaXZlU2V0dGluZ3Mgd2lsbCBiZSByZXR1cm5lZC5cclxuICogSW4gY2FzZSBtZWV0aW5nIGlzIG5vdCBpbiBqb2luZWQgc3RhdGUsIGNhbGxzIHRvIHVwZGF0ZVJlY2VpdmVTZXR0aW5ncyB3aWxsIGJlIHNpbGVudGx5IGlnbm9yZWQuXHJcbiAqL1xudmFyIHVzZVJlY2VpdmVTZXR0aW5ncyA9IGZ1bmN0aW9uIHVzZVJlY2VpdmVTZXR0aW5ncyhfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIF9yZWYkaWQgPSBfcmVmLmlkLFxuICAgIGlkID0gX3JlZiRpZCA9PT0gdm9pZCAwID8gJ2Jhc2UnIDogX3JlZiRpZCxcbiAgICBvblJlY2VpdmVTZXR0aW5nc1VwZGF0ZWQgPSBfcmVmLm9uUmVjZWl2ZVNldHRpbmdzVXBkYXRlZDtcbiAgdmFyIF91c2VBdG9tID0gdXNlQXRvbShwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc1N0YXRlKCdiYXNlJykpLFxuICAgIGJhc2VTZXR0aW5ncyA9IF91c2VBdG9tWzBdO1xuICB2YXIgX3VzZUF0b20yID0gdXNlQXRvbShwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc1N0YXRlKGlkKSksXG4gICAgcmVjZWl2ZVNldHRpbmdzID0gX3VzZUF0b20yWzBdO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgbWVldGluZ1N0YXRlID0gdXNlTWVldGluZ1N0YXRlKCk7XG4gIHZhciB1cGRhdGVSZWNlaXZlU2V0dGluZ3NTdGF0ZSA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCByZWNlaXZlU2V0dGluZ3MpIHtcbiAgICB2YXIgaWRzID0gX2V4dGVuZHMoe30sIHJlY2VpdmVTZXR0aW5ncyk7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhpZHMpOyBfaSA8IF9PYmplY3QkZW50cmllcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfT2JqZWN0JGVudHJpZXMkX2kgPSBfT2JqZWN0JGVudHJpZXNbX2ldLFxuICAgICAgICBfaWQgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sXG4gICAgICAgIHNldHRpbmdzID0gX09iamVjdCRlbnRyaWVzJF9pWzFdO1xuICAgICAgc2V0KHBhcnRpY2lwYW50UmVjZWl2ZVNldHRpbmdzU3RhdGUoX2lkKSwgc2V0dGluZ3MpO1xuICAgIH1cbiAgICBpZiAoIShpZCBpbiBpZHMpKSB7XG4gICAgICBwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc1N0YXRlLnJlbW92ZShpZCk7XG4gICAgfVxuICB9LCBbaWRdIC8vIERlcGVuZGVuY2llc1xuICApKTtcblxuICB1c2VEYWlseUV2ZW50KCdyZWNlaXZlLXNldHRpbmdzLXVwZGF0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICB1cGRhdGVSZWNlaXZlU2V0dGluZ3NTdGF0ZShldi5yZWNlaXZlU2V0dGluZ3MpO1xuICAgIG9uUmVjZWl2ZVNldHRpbmdzVXBkYXRlZCA9PSBudWxsID8gdm9pZCAwIDogb25SZWNlaXZlU2V0dGluZ3NVcGRhdGVkKGV2KTtcbiAgfSwgW29uUmVjZWl2ZVNldHRpbmdzVXBkYXRlZCwgdXBkYXRlUmVjZWl2ZVNldHRpbmdzU3RhdGVdKSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFkYWlseSB8fCBkYWlseS5pc0Rlc3Ryb3llZCgpKSByZXR1cm47XG4gICAgZGFpbHkuZ2V0UmVjZWl2ZVNldHRpbmdzKCkudGhlbih1cGRhdGVSZWNlaXZlU2V0dGluZ3NTdGF0ZSk7XG4gIH0sIFtkYWlseSwgdXBkYXRlUmVjZWl2ZVNldHRpbmdzU3RhdGVdKTtcbiAgdmFyIHVwZGF0ZVJlY2VpdmVTZXR0aW5ncyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5IHx8IG1lZXRpbmdTdGF0ZSAhPT0gJ2pvaW5lZC1tZWV0aW5nJykgcmV0dXJuO1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgZGFpbHkgPT0gbnVsbCA/IHZvaWQgMCA6IGRhaWx5LnVwZGF0ZVJlY2VpdmVTZXR0aW5ncyA9PSBudWxsID8gdm9pZCAwIDogZGFpbHkudXBkYXRlUmVjZWl2ZVNldHRpbmdzLmFwcGx5KGRhaWx5LCBhcmdzKTtcbiAgfSwgW2RhaWx5LCBtZWV0aW5nU3RhdGVdKTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICByZWNlaXZlU2V0dGluZ3M6IGlkID09PSAnYmFzZScgfHwgT2JqZWN0LmtleXMocmVjZWl2ZVNldHRpbmdzKS5sZW5ndGggPT09IDAgPyBiYXNlU2V0dGluZ3MgOiByZWNlaXZlU2V0dGluZ3MsXG4gICAgdXBkYXRlUmVjZWl2ZVNldHRpbmdzOiB1cGRhdGVSZWNlaXZlU2V0dGluZ3NcbiAgfTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIHVzZVJlY29yZGluZyA9IGZ1bmN0aW9uIHVzZVJlY29yZGluZyhfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uUmVjb3JkaW5nRGF0YSA9IF9yZWYub25SZWNvcmRpbmdEYXRhLFxuICAgIG9uUmVjb3JkaW5nRXJyb3IgPSBfcmVmLm9uUmVjb3JkaW5nRXJyb3IsXG4gICAgb25SZWNvcmRpbmdTdGFydGVkID0gX3JlZi5vblJlY29yZGluZ1N0YXJ0ZWQsXG4gICAgb25SZWNvcmRpbmdTdG9wcGVkID0gX3JlZi5vblJlY29yZGluZ1N0b3BwZWQ7XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciBzdGF0ZSA9IHVzZUF0b21WYWx1ZShyZWNvcmRpbmdTdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ3JlY29yZGluZy1zdGFydGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25SZWNvcmRpbmdTdGFydGVkID09IG51bGwgPyB2b2lkIDAgOiBvblJlY29yZGluZ1N0YXJ0ZWQoZXYpO1xuICB9LCBbb25SZWNvcmRpbmdTdGFydGVkXSkpO1xuICB1c2VEYWlseUV2ZW50KCdyZWNvcmRpbmctc3RvcHBlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uUmVjb3JkaW5nU3RvcHBlZCA9PSBudWxsID8gdm9pZCAwIDogb25SZWNvcmRpbmdTdG9wcGVkKGV2KTtcbiAgfSwgW29uUmVjb3JkaW5nU3RvcHBlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgncmVjb3JkaW5nLWVycm9yJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25SZWNvcmRpbmdFcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25SZWNvcmRpbmdFcnJvcihldik7XG4gIH0sIFtvblJlY29yZGluZ0Vycm9yXSkpO1xuICB1c2VEYWlseUV2ZW50KCdyZWNvcmRpbmctZGF0YScsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uUmVjb3JkaW5nRGF0YSA9PSBudWxsID8gdm9pZCAwIDogb25SZWNvcmRpbmdEYXRhKGV2KTtcbiAgfSwgW29uUmVjb3JkaW5nRGF0YV0pKTtcbiAgLyoqXHJcbiAgICogU3RhcnRzIHRoZSByZWNvcmRpbmcgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9uYWwgb3B0aW9ucy5cclxuICAgKi9cbiAgdmFyIHN0YXJ0UmVjb3JkaW5nID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS5zdGFydFJlY29yZGluZy5hcHBseShkYWlseSwgYXJndW1lbnRzKTtcbiAgfSwgW2RhaWx5XSk7XG4gIC8qKlxyXG4gICAqIFN0b3BzIGEgcmVjb3JkaW5nLlxyXG4gICAqL1xuICB2YXIgc3RvcFJlY29yZGluZyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgZGFpbHkuc3RvcFJlY29yZGluZy5hcHBseShkYWlseSwgYXJndW1lbnRzKTtcbiAgfSwgW2RhaWx5XSk7XG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgYSBydW5uaW5nIHJlY29yZGluZydzIGxheW91dCBjb25maWd1cmF0aW9uLlxyXG4gICAqL1xuICB2YXIgdXBkYXRlUmVjb3JkaW5nID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS51cGRhdGVSZWNvcmRpbmcuYXBwbHkoZGFpbHksIGFyZ3VtZW50cyk7XG4gIH0sIFtkYWlseV0pO1xuICB2YXIgcmVzdWx0ID0gX2V4dGVuZHMoe30sIHN0YXRlLCB7XG4gICAgc3RhcnRSZWNvcmRpbmc6IHN0YXJ0UmVjb3JkaW5nLFxuICAgIHN0b3BSZWNvcmRpbmc6IHN0b3BSZWNvcmRpbmcsXG4gICAgdXBkYXRlUmVjb3JkaW5nOiB1cGRhdGVSZWNvcmRpbmdcbiAgfSk7XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxyXG4gKiBTdGF0ZWZ1bCBob29rIHRvIHdvcmsgd2l0aCByb29tLCBkb21haW4gYW5kIHRva2VuIGNvbmZpZ3VyYXRpb24gZm9yIGEgZGFpbHkgcm9vbS5cclxuICogSW5jbHVkZXMgcm9vbSBkZWZhdWx0IHZhbHVlcy5cclxuICovXG52YXIgdXNlUm9vbSA9IGZ1bmN0aW9uIHVzZVJvb20oKSB7XG4gIHZhciByb29tID0gdXNlQXRvbVZhbHVlKHJvb21TdGF0ZSk7XG4gIHVzZURlYnVnVmFsdWUocm9vbSk7XG4gIHJldHVybiByb29tO1xufTtcblxudmFyIHVzZVJvb21FeHAgPSBmdW5jdGlvbiB1c2VSb29tRXhwKF90ZW1wKSB7XG4gIHZhciBfcm9vbSRjb25maWc0LCBfcm9vbSRjb25maWc1LCBfcm9vbSRjb25maWc2LCBfcm9vbSR0b2tlbkNvbmZpZzQsIF9yb29tJHRva2VuQ29uZmlnNSwgX3Jvb20kdG9rZW5Db25maWc2O1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uQ291bnRkb3duID0gX3JlZi5vbkNvdW50ZG93bjtcbiAgdmFyIGxvY2FsSm9pbkRhdGUgPSB1c2VBdG9tVmFsdWUobG9jYWxKb2luRGF0ZVN0YXRlKTtcbiAgdmFyIHJvb20gPSB1c2VSb29tKCk7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShudWxsKSxcbiAgICBlamVjdERhdGUgPSBfdXNlU3RhdGVbMF0sXG4gICAgc2V0RWplY3REYXRlID0gX3VzZVN0YXRlWzFdO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmMiwgX3Jvb20kdG9rZW5Db25maWckZWplLCBfcm9vbSR0b2tlbkNvbmZpZywgX3Jvb20kY29uZmlnLCBfcm9vbSR0b2tlbkNvbmZpZzIsIF9yb29tJHRva2VuQ29uZmlnMywgX3Jvb20kY29uZmlnMiwgX3Jvb20kY29uZmlnMztcbiAgICB2YXIgZXhwQ2FuZGlkYXRlcyA9IFtdO1xuICAgIHZhciBlamVjdEFmdGVyRWxhcHNlZCA9IChfcmVmMiA9IChfcm9vbSR0b2tlbkNvbmZpZyRlamUgPSByb29tID09IG51bGwgPyB2b2lkIDAgOiAoX3Jvb20kdG9rZW5Db25maWcgPSByb29tLnRva2VuQ29uZmlnKSA9PSBudWxsID8gdm9pZCAwIDogX3Jvb20kdG9rZW5Db25maWcuZWplY3RfYWZ0ZXJfZWxhcHNlZCkgIT0gbnVsbCA/IF9yb29tJHRva2VuQ29uZmlnJGVqZSA6IHJvb20gPT0gbnVsbCA/IHZvaWQgMCA6IChfcm9vbSRjb25maWcgPSByb29tLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9yb29tJGNvbmZpZy5lamVjdF9hZnRlcl9lbGFwc2VkKSAhPSBudWxsID8gX3JlZjIgOiAwO1xuICAgIGlmIChlamVjdEFmdGVyRWxhcHNlZCAmJiBsb2NhbEpvaW5EYXRlKSB7XG4gICAgICBleHBDYW5kaWRhdGVzLnB1c2gobG9jYWxKb2luRGF0ZS5nZXRUaW1lKCkgKyAxMDAwICogZWplY3RBZnRlckVsYXBzZWQpO1xuICAgIH1cbiAgICBpZiAocm9vbSAhPSBudWxsICYmIChfcm9vbSR0b2tlbkNvbmZpZzIgPSByb29tLnRva2VuQ29uZmlnKSAhPSBudWxsICYmIF9yb29tJHRva2VuQ29uZmlnMi5leHAgJiYgcm9vbSAhPSBudWxsICYmIChfcm9vbSR0b2tlbkNvbmZpZzMgPSByb29tLnRva2VuQ29uZmlnKSAhPSBudWxsICYmIF9yb29tJHRva2VuQ29uZmlnMy5lamVjdF9hdF90b2tlbl9leHApIHtcbiAgICAgIGV4cENhbmRpZGF0ZXMucHVzaChyb29tLnRva2VuQ29uZmlnLmV4cCAqIDEwMDApO1xuICAgIH1cbiAgICBpZiAocm9vbSAhPSBudWxsICYmIChfcm9vbSRjb25maWcyID0gcm9vbS5jb25maWcpICE9IG51bGwgJiYgX3Jvb20kY29uZmlnMi5leHAgJiYgcm9vbSAhPSBudWxsICYmIChfcm9vbSRjb25maWczID0gcm9vbS5jb25maWcpICE9IG51bGwgJiYgX3Jvb20kY29uZmlnMy5lamVjdF9hdF9yb29tX2V4cCkge1xuICAgICAgZXhwQ2FuZGlkYXRlcy5wdXNoKHJvb20uY29uZmlnLmV4cCAqIDEwMDApO1xuICAgIH1cbiAgICB2YXIgbmV3RWplY3REYXRlID0gZXhwQ2FuZGlkYXRlcy5sZW5ndGggPiAwID8gbmV3IERhdGUoTWF0aC5taW4uYXBwbHkoTWF0aCwgZXhwQ2FuZGlkYXRlcykpIDogbmV3IERhdGUoMCk7XG4gICAgaWYgKG5ld0VqZWN0RGF0ZS5nZXRUaW1lKCkgPT09IDApIHJldHVybjtcbiAgICBzZXRFamVjdERhdGUoZnVuY3Rpb24gKG9sZEVqZWN0RGF0ZSkge1xuICAgICAgcmV0dXJuIChvbGRFamVjdERhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IG9sZEVqZWN0RGF0ZS5nZXRUaW1lKCkpICE9PSBuZXdFamVjdERhdGUuZ2V0VGltZSgpID8gbmV3RWplY3REYXRlIDogb2xkRWplY3REYXRlO1xuICAgIH0pO1xuICB9LCBbbG9jYWxKb2luRGF0ZSwgcm9vbSA9PSBudWxsID8gdm9pZCAwIDogKF9yb29tJGNvbmZpZzQgPSByb29tLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9yb29tJGNvbmZpZzQuZWplY3RfYWZ0ZXJfZWxhcHNlZCwgcm9vbSA9PSBudWxsID8gdm9pZCAwIDogKF9yb29tJGNvbmZpZzUgPSByb29tLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9yb29tJGNvbmZpZzUuZWplY3RfYXRfcm9vbV9leHAsIHJvb20gPT0gbnVsbCA/IHZvaWQgMCA6IChfcm9vbSRjb25maWc2ID0gcm9vbS5jb25maWcpID09IG51bGwgPyB2b2lkIDAgOiBfcm9vbSRjb25maWc2LmV4cCwgcm9vbSA9PSBudWxsID8gdm9pZCAwIDogKF9yb29tJHRva2VuQ29uZmlnNCA9IHJvb20udG9rZW5Db25maWcpID09IG51bGwgPyB2b2lkIDAgOiBfcm9vbSR0b2tlbkNvbmZpZzQuZWplY3RfYWZ0ZXJfZWxhcHNlZCwgcm9vbSA9PSBudWxsID8gdm9pZCAwIDogKF9yb29tJHRva2VuQ29uZmlnNSA9IHJvb20udG9rZW5Db25maWcpID09IG51bGwgPyB2b2lkIDAgOiBfcm9vbSR0b2tlbkNvbmZpZzUuZWplY3RfYXRfdG9rZW5fZXhwLCByb29tID09IG51bGwgPyB2b2lkIDAgOiAoX3Jvb20kdG9rZW5Db25maWc2ID0gcm9vbS50b2tlbkNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9yb29tJHRva2VuQ29uZmlnNi5leHBdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWVqZWN0RGF0ZSB8fCBlamVjdERhdGUuZ2V0VGltZSgpID09PSAwKSByZXR1cm47XG4gICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9lamVjdERhdGUkZ2V0VGltZTtcbiAgICAgIHZhciBlamVjdCA9ICgoX2VqZWN0RGF0ZSRnZXRUaW1lID0gZWplY3REYXRlID09IG51bGwgPyB2b2lkIDAgOiBlamVjdERhdGUuZ2V0VGltZSgpKSAhPSBudWxsID8gX2VqZWN0RGF0ZSRnZXRUaW1lIDogMCkgLyAxMDAwO1xuICAgICAgdmFyIG5vdyA9IERhdGUubm93KCkgLyAxMDAwO1xuICAgICAgdmFyIGRpZmYgPSBlamVjdCAtIG5vdztcbiAgICAgIGlmIChkaWZmIDwgMCkgcmV0dXJuO1xuICAgICAgdmFyIGhvdXJzID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihkaWZmIC8gMzYwMCkpO1xuICAgICAgdmFyIG1pbnV0ZXMgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKGRpZmYgJSAzNjAwIC8gNjApKTtcbiAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihkaWZmICUgNjApKTtcbiAgICAgIG9uQ291bnRkb3duID09IG51bGwgPyB2b2lkIDAgOiBvbkNvdW50ZG93bih7XG4gICAgICAgIGhvdXJzOiBob3VycyxcbiAgICAgICAgbWludXRlczogbWludXRlcyxcbiAgICAgICAgc2Vjb25kczogc2Vjb25kc1xuICAgICAgfSk7XG4gICAgfSwgMTAwMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgIH07XG4gIH0sIFtlamVjdERhdGUsIG9uQ291bnRkb3duXSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgZWplY3REYXRlOiBlamVjdERhdGVcbiAgfTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXHJcbiAqIFJldHVybnMgYSBwYXJ0aWNpcGFudCdzIHNjcmVlbkF1ZGlvIHRyYWNrIGFuZCBzdGF0ZS5cclxuICogQHBhcmFtIHBhcnRpY2lwYW50SWQgVGhlIHBhcnRpY2lwYW50J3Mgc2Vzc2lvbl9pZC5cclxuICovXG52YXIgdXNlU2NyZWVuQXVkaW9UcmFjayA9IGZ1bmN0aW9uIHVzZVNjcmVlbkF1ZGlvVHJhY2socGFydGljaXBhbnRJZCkge1xuICByZXR1cm4gdXNlTWVkaWFUcmFjayhwYXJ0aWNpcGFudElkLCAnc2NyZWVuQXVkaW8nKTtcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIGEgcGFydGljaXBhbnQncyBzY3JlZW5WaWRlbyB0cmFjayBhbmQgc3RhdGUuXHJcbiAqIEBwYXJhbSBwYXJ0aWNpcGFudElkIFRoZSBwYXJ0aWNpcGFudCdzIHNlc3Npb25faWQuXHJcbiAqL1xudmFyIHVzZVNjcmVlblZpZGVvVHJhY2sgPSBmdW5jdGlvbiB1c2VTY3JlZW5WaWRlb1RyYWNrKHBhcnRpY2lwYW50SWQpIHtcbiAgcmV0dXJuIHVzZU1lZGlhVHJhY2socGFydGljaXBhbnRJZCwgJ3NjcmVlblZpZGVvJyk7XG59O1xuXG52YXIgc2VuZFNldHRpbmdzU3RhdGUgPSAvKiNfX1BVUkVfXyovYXRvbShudWxsKTtcbnNlbmRTZXR0aW5nc1N0YXRlLmRlYnVnTGFiZWwgPSAvKiNfX1BVUkVfXyovam90YWlEZWJ1Z0xhYmVsKCdzZW5kLXNldHRpbmdzJyk7XG4vKipcclxuICogUmV0dXJucyB0aGUgY3VycmVudCBtZWRpYSBzZW5kIHNldHRpbmdzIGFuZCBhbiB1cGRhdGVyIGZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgc2V0dGluZ3MuXHJcbiAqL1xudmFyIHVzZVNlbmRTZXR0aW5ncyA9IGZ1bmN0aW9uIHVzZVNlbmRTZXR0aW5ncyhfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uU2VuZFNldHRpbmdzVXBkYXRlZCA9IF9yZWYub25TZW5kU2V0dGluZ3NVcGRhdGVkO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgX3VzZUF0b20gPSB1c2VBdG9tKHNlbmRTZXR0aW5nc1N0YXRlKSxcbiAgICBzZW5kU2V0dGluZ3MgPSBfdXNlQXRvbVswXSxcbiAgICBzZXRTZW5kU2V0dGluZ3MgPSBfdXNlQXRvbVsxXTtcbiAgdXNlRGFpbHlFdmVudCgnc2VuZC1zZXR0aW5ncy11cGRhdGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgc2V0U2VuZFNldHRpbmdzKGV2LnNlbmRTZXR0aW5ncyk7XG4gICAgb25TZW5kU2V0dGluZ3NVcGRhdGVkID09IG51bGwgPyB2b2lkIDAgOiBvblNlbmRTZXR0aW5nc1VwZGF0ZWQoZXYpO1xuICB9LCBbb25TZW5kU2V0dGluZ3NVcGRhdGVkLCBzZXRTZW5kU2V0dGluZ3NdKSk7XG4gIHZhciBzdG9yZVNlbmRTZXR0aW5ncyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChzZW5kU2V0dGluZ3MpIHtcbiAgICBzZXRTZW5kU2V0dGluZ3Moc2VuZFNldHRpbmdzKTtcbiAgfSwgW3NldFNlbmRTZXR0aW5nc10pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGFpbHkgfHwgZGFpbHkuaXNEZXN0cm95ZWQoKSkgcmV0dXJuO1xuICAgIHN0b3JlU2VuZFNldHRpbmdzKGRhaWx5LmdldFNlbmRTZXR0aW5ncygpKTtcbiAgfSwgW2RhaWx5LCBzdG9yZVNlbmRTZXR0aW5nc10pO1xuICAvKipcclxuICAgKiBVcGRhdGVzIHRoZSBsb2NhbCBjbGllbnRzIHNlbmQgc2V0dGluZ3MuXHJcbiAgICogU2VlIGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvaW5zdGFuY2UtbWV0aG9kcy91cGRhdGUtc2VuZC1zZXR0aW5ncyBmb3IgZGV0YWlscy5cclxuICAgKi9cbiAgdmFyIHVwZGF0ZVNlbmRTZXR0aW5ncyA9IHVzZUNhbGxiYWNrKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoZnVuY3Rpb24qICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuICAgIHZhciBuZXdTZW5kU2V0dGluZ3MgPSB5aWVsZCBkYWlseSA9PSBudWxsID8gdm9pZCAwIDogZGFpbHkudXBkYXRlU2VuZFNldHRpbmdzLmFwcGx5KGRhaWx5LCBhcmdzKTtcbiAgICBpZiAoIW5ld1NlbmRTZXR0aW5ncykgcmV0dXJuO1xuICAgIHN0b3JlU2VuZFNldHRpbmdzKG5ld1NlbmRTZXR0aW5ncyk7XG4gICAgcmV0dXJuIG5ld1NlbmRTZXR0aW5ncztcbiAgfSksIFtkYWlseSwgc3RvcmVTZW5kU2V0dGluZ3NdKTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICBzZW5kU2V0dGluZ3M6IHNlbmRTZXR0aW5ncyxcbiAgICB1cGRhdGVTZW5kU2V0dGluZ3M6IHVwZGF0ZVNlbmRTZXR0aW5nc1xuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgdXNlVHJhbnNjcmlwdGlvbiA9IGZ1bmN0aW9uIHVzZVRyYW5zY3JpcHRpb24oX3RlbXApIHtcbiAgdmFyIF9yZWYgPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcCxcbiAgICBvblRyYW5zY3JpcHRpb25BcHBEYXRhID0gX3JlZi5vblRyYW5zY3JpcHRpb25BcHBEYXRhLFxuICAgIG9uVHJhbnNjcmlwdGlvbkVycm9yID0gX3JlZi5vblRyYW5zY3JpcHRpb25FcnJvcixcbiAgICBvblRyYW5zY3JpcHRpb25NZXNzYWdlID0gX3JlZi5vblRyYW5zY3JpcHRpb25NZXNzYWdlLFxuICAgIG9uVHJhbnNjcmlwdGlvblN0YXJ0ZWQgPSBfcmVmLm9uVHJhbnNjcmlwdGlvblN0YXJ0ZWQsXG4gICAgb25UcmFuc2NyaXB0aW9uU3RvcHBlZCA9IF9yZWYub25UcmFuc2NyaXB0aW9uU3RvcHBlZDtcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIHN0YXRlID0gdXNlQXRvbVZhbHVlKHRyYW5zY3JpcHRpb25TdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ3RyYW5zY3JpcHRpb24tc3RhcnRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uVHJhbnNjcmlwdGlvblN0YXJ0ZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uVHJhbnNjcmlwdGlvblN0YXJ0ZWQoZXYpO1xuICB9LCBbb25UcmFuc2NyaXB0aW9uU3RhcnRlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgndHJhbnNjcmlwdGlvbi1zdG9wcGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25UcmFuc2NyaXB0aW9uU3RvcHBlZCA9PSBudWxsID8gdm9pZCAwIDogb25UcmFuc2NyaXB0aW9uU3RvcHBlZChldik7XG4gIH0sIFtvblRyYW5zY3JpcHRpb25TdG9wcGVkXSkpO1xuICB1c2VEYWlseUV2ZW50KCd0cmFuc2NyaXB0aW9uLWVycm9yJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25UcmFuc2NyaXB0aW9uRXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uVHJhbnNjcmlwdGlvbkVycm9yKGV2KTtcbiAgfSwgW29uVHJhbnNjcmlwdGlvbkVycm9yXSkpO1xuICB1c2VEYWlseUV2ZW50KCd0cmFuc2NyaXB0aW9uLW1lc3NhZ2UnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBvblRyYW5zY3JpcHRpb25NZXNzYWdlID09IG51bGwgPyB2b2lkIDAgOiBvblRyYW5zY3JpcHRpb25NZXNzYWdlKGV2KTtcbiAgfSwgW29uVHJhbnNjcmlwdGlvbk1lc3NhZ2VdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2FwcC1tZXNzYWdlJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgaWYgKChldiA9PSBudWxsID8gdm9pZCAwIDogZXYuZnJvbUlkKSA9PT0gJ3RyYW5zY3JpcHRpb24nKSB7XG4gICAgICBvblRyYW5zY3JpcHRpb25BcHBEYXRhID09IG51bGwgPyB2b2lkIDAgOiBvblRyYW5zY3JpcHRpb25BcHBEYXRhKGV2KTtcbiAgICB9XG4gIH0sIFtvblRyYW5zY3JpcHRpb25BcHBEYXRhXSkpO1xuICAvKipcclxuICAgKiBTdGFydHMgdGhlIHRyYW5zY3JpcHRpb24gd2l0aCB0aGUgZ2l2ZW4gb3B0aW9uYWwgb3B0aW9ucy5cclxuICAgKi9cbiAgdmFyIHN0YXJ0VHJhbnNjcmlwdGlvbiA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgZGFpbHkuc3RhcnRUcmFuc2NyaXB0aW9uLmFwcGx5KGRhaWx5LCBhcmd1bWVudHMpO1xuICB9LCBbZGFpbHldKTtcbiAgLyoqXHJcbiAgICogU3RvcHMgYSB0cmFuc2NyaXB0aW9uLlxyXG4gICAqL1xuICB2YXIgc3RvcFRyYW5zY3JpcHRpb24gPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFkYWlseSkgcmV0dXJuO1xuICAgIGRhaWx5LnN0b3BUcmFuc2NyaXB0aW9uLmFwcGx5KGRhaWx5LCBhcmd1bWVudHMpO1xuICB9LCBbZGFpbHldKTtcbiAgdmFyIHJlc3VsdCA9IF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgIHN0YXJ0VHJhbnNjcmlwdGlvbjogc3RhcnRUcmFuc2NyaXB0aW9uLFxuICAgIHN0b3BUcmFuc2NyaXB0aW9uOiBzdG9wVHJhbnNjcmlwdGlvblxuICB9KTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXHJcbiAqIFJldHVybnMgYSBwYXJ0aWNpcGFudCdzIHZpZGVvIHRyYWNrIGFuZCBzdGF0ZS5cclxuICogQHBhcmFtIHBhcnRpY2lwYW50SWQgVGhlIHBhcnRpY2lwYW50J3Mgc2Vzc2lvbl9pZC5cclxuICovXG52YXIgdXNlVmlkZW9UcmFjayA9IGZ1bmN0aW9uIHVzZVZpZGVvVHJhY2socGFydGljaXBhbnRJZCkge1xuICByZXR1cm4gdXNlTWVkaWFUcmFjayhwYXJ0aWNpcGFudElkLCAndmlkZW8nKTtcbn07XG5cbi8qKlxyXG4gKiBIb29rIHRvIGFjY2VzcyBhbmQgbWFuYWdlIHdhaXRpbmcgcGFydGljaXBhbnRzLlxyXG4gKi9cbnZhciB1c2VXYWl0aW5nUGFydGljaXBhbnRzID0gZnVuY3Rpb24gdXNlV2FpdGluZ1BhcnRpY2lwYW50cyhfdGVtcCkge1xuICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgIG9uV2FpdGluZ1BhcnRpY2lwYW50QWRkZWQgPSBfcmVmLm9uV2FpdGluZ1BhcnRpY2lwYW50QWRkZWQsXG4gICAgb25XYWl0aW5nUGFydGljaXBhbnRSZW1vdmVkID0gX3JlZi5vbldhaXRpbmdQYXJ0aWNpcGFudFJlbW92ZWQsXG4gICAgb25XYWl0aW5nUGFydGljaXBhbnRVcGRhdGVkID0gX3JlZi5vbldhaXRpbmdQYXJ0aWNpcGFudFVwZGF0ZWQ7XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciB3YWl0aW5nUGFydGljaXBhbnRzID0gdXNlQXRvbVZhbHVlKGFsbFdhaXRpbmdQYXJ0aWNpcGFudHNTZWxlY3Rvcih1bmRlZmluZWQpKTtcbiAgdXNlRGFpbHlFdmVudCgnd2FpdGluZy1wYXJ0aWNpcGFudC1hZGRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uV2FpdGluZ1BhcnRpY2lwYW50QWRkZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uV2FpdGluZ1BhcnRpY2lwYW50QWRkZWQoZXYpO1xuICB9LCBbb25XYWl0aW5nUGFydGljaXBhbnRBZGRlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgnd2FpdGluZy1wYXJ0aWNpcGFudC1yZW1vdmVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25XYWl0aW5nUGFydGljaXBhbnRSZW1vdmVkID09IG51bGwgPyB2b2lkIDAgOiBvbldhaXRpbmdQYXJ0aWNpcGFudFJlbW92ZWQoZXYpO1xuICB9LCBbb25XYWl0aW5nUGFydGljaXBhbnRSZW1vdmVkXSkpO1xuICB1c2VEYWlseUV2ZW50KCd3YWl0aW5nLXBhcnRpY2lwYW50LXVwZGF0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBvbldhaXRpbmdQYXJ0aWNpcGFudFVwZGF0ZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uV2FpdGluZ1BhcnRpY2lwYW50VXBkYXRlZChldik7XG4gIH0sIFtvbldhaXRpbmdQYXJ0aWNpcGFudFVwZGF0ZWRdKSk7XG4gIHZhciB1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRBY2Nlc3MgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoaWQsIGdyYW50UmVxdWVzdGVkQWNjZXNzKSB7XG4gICAgaWYgKGlkID09PSAnKicpIHtcbiAgICAgIGRhaWx5ID09IG51bGwgPyB2b2lkIDAgOiBkYWlseS51cGRhdGVXYWl0aW5nUGFydGljaXBhbnRzKHtcbiAgICAgICAgJyonOiB7XG4gICAgICAgICAgZ3JhbnRSZXF1ZXN0ZWRBY2Nlc3M6IGdyYW50UmVxdWVzdGVkQWNjZXNzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkYWlseSA9PSBudWxsID8gdm9pZCAwIDogZGFpbHkudXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50KGlkLCB7XG4gICAgICBncmFudFJlcXVlc3RlZEFjY2VzczogZ3JhbnRSZXF1ZXN0ZWRBY2Nlc3NcbiAgICB9KTtcbiAgfSwgW2RhaWx5XSk7XG4gIHZhciBncmFudEFjY2VzcyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChpZCkge1xuICAgIHVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudEFjY2VzcyhpZCwgdHJ1ZSk7XG4gIH0sIFt1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRBY2Nlc3NdKTtcbiAgdmFyIGRlbnlBY2Nlc3MgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoaWQpIHtcbiAgICB1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRBY2Nlc3MoaWQsIGZhbHNlKTtcbiAgfSwgW3VwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudEFjY2Vzc10pO1xuICB2YXIgcmVzdWx0ID0ge1xuICAgIHdhaXRpbmdQYXJ0aWNpcGFudHM6IHdhaXRpbmdQYXJ0aWNpcGFudHMsXG4gICAgZ3JhbnRBY2Nlc3M6IGdyYW50QWNjZXNzLFxuICAgIGRlbnlBY2Nlc3M6IGRlbnlBY2Nlc3NcbiAgfTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IHsgRGFpbHlBdWRpbywgRGFpbHlBdWRpb1RyYWNrLCBEYWlseVByb3ZpZGVyLCBEYWlseVZpZGVvLCB1c2VBY3RpdmVQYXJ0aWNpcGFudCwgdXNlQWN0aXZlU3BlYWtlcklkLCB1c2VBcHBNZXNzYWdlLCB1c2VBdWRpb0xldmVsLCB1c2VBdWRpb0xldmVsT2JzZXJ2ZXIsIHVzZUF1ZGlvVHJhY2ssIHVzZUNQVUxvYWQsIHVzZUNhbGxGcmFtZSwgdXNlQ2FsbE9iamVjdCwgdXNlRGFpbHksIHVzZURhaWx5RXJyb3IsIHVzZURhaWx5RXZlbnQsIHVzZURldmljZXMsIHVzZUlucHV0U2V0dGluZ3MsIHVzZUxpdmVTdHJlYW1pbmcsIHVzZUxvY2FsUGFydGljaXBhbnQsIHVzZUxvY2FsU2Vzc2lvbklkLCB1c2VNZWRpYVRyYWNrLCB1c2VNZWV0aW5nU2Vzc2lvblN0YXRlLCB1c2VNZWV0aW5nU3RhdGUsIHVzZU5ldHdvcmssIHVzZVBhcnRpY2lwYW50LCB1c2VQYXJ0aWNpcGFudENvdW50cywgdXNlUGFydGljaXBhbnRJZHMsIHVzZVBhcnRpY2lwYW50UHJvcGVydHksIHVzZVBlcm1pc3Npb25zLCB1c2VSZWNlaXZlU2V0dGluZ3MsIHVzZVJlY29yZGluZywgdXNlUm9vbSwgdXNlUm9vbUV4cCwgdXNlU2NyZWVuQXVkaW9UcmFjaywgdXNlU2NyZWVuU2hhcmUsIHVzZVNjcmVlblZpZGVvVHJhY2ssIHVzZVNlbmRTZXR0aW5ncywgdXNlVGhyb3R0bGVkRGFpbHlFdmVudCwgdXNlVHJhbnNjcmlwdGlvbiwgdXNlVmlkZW9UcmFjaywgdXNlV2FpdGluZ1BhcnRpY2lwYW50cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGFpbHktcmVhY3QuZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@daily-co/daily-react/dist/daily-react.esm.js\n");

/***/ })

};
;